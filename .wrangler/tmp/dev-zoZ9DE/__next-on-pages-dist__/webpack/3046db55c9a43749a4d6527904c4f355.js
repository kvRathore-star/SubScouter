var Le={},Mp=(is,Sr,Wu)=>(Le.__chunk_59526=(Ue,ie,o)=>{"use strict";o.d(ie,{_:()=>h});var d=o(10705);let y=process.env.STRIPE_SECRET_KEY;y||console.error("CRITICAL_ERROR: STRIPE_SECRET_KEY is missing. Production billing will fail at runtime.");let h=new d.A(y||"sk_test_mock_for_development",{apiVersion:"2025-01-27",typescript:!0})},Le.__chunk_55697=(Ue,ie,o)=>{"use strict";o.d(ie,{x:()=>$});var d=o(52072),y=o(96626),h=o(8779),i=o(59526),s=o(35827),c=o(67176),O=o(584),j=o(43948);let $=(W,K)=>{let I,p={...process.env,...K||{}};try{if(W)I=(0,c.f)(W,{schema:s});else{let _=(0,O.Bx)({url:"file:local.db"});I=(0,j.f)(_,{schema:s})}}catch(_){console.error("[Auth] DB Sync Failure:",_),I={query:{findFirst:()=>null}}}return(0,d.li)({secret:p.BETTER_AUTH_SECRET,baseURL:p.NEXT_PUBLIC_APP_URL||p.APP_URL||"https://subscouter.com",database:(0,y.y)(I,{provider:"sqlite",schema:{...s}}),emailAndPassword:{enabled:!0},socialProviders:{google:{clientId:p.GOOGLE_CLIENT_ID,clientSecret:p.GOOGLE_CLIENT_SECRET,scope:["https://www.googleapis.com/auth/gmail.readonly"]},microsoft:{clientId:p.MICROSOFT_CLIENT_ID,clientSecret:p.MICROSOFT_CLIENT_SECRET,scope:["https://graph.microsoft.com/Mail.Read"]}},plugins:[(0,h._)({stripeClient:i._,stripeWebhookSecret:p.STRIPE_WEBHOOK_SECRET,subscription:{enabled:!0,plans:[{name:"Pro",priceId:p.STRIPE_PRO_PRICE_ID,limits:{}}]}})]})}},Le.__chunk_35827=(Ue,ie,o)=>{"use strict";o.r(ie),o.d(ie,{accounts:()=>c,sessions:()=>s,subscriptions:()=>j,sync_logs:()=>$,users:()=>i,verifications:()=>O});var d=o(1571),y=o(38447),h=o(28104);let i=(0,d.D)("users",{id:(0,y.Qq)("id").primaryKey(),name:(0,y.Qq)("name").notNull(),email:(0,y.Qq)("email").notNull().unique(),emailVerified:(0,h.nd)("email_verified",{mode:"boolean"}).notNull(),image:(0,y.Qq)("image"),createdAt:(0,h.nd)("created_at",{mode:"timestamp"}).notNull(),updatedAt:(0,h.nd)("updated_at",{mode:"timestamp"}).notNull(),plan:(0,y.Qq)("plan").default("free").notNull()}),s=(0,d.D)("sessions",{id:(0,y.Qq)("id").primaryKey(),expiresAt:(0,h.nd)("expires_at",{mode:"timestamp"}).notNull(),token:(0,y.Qq)("token").notNull().unique(),createdAt:(0,h.nd)("created_at",{mode:"timestamp"}).notNull(),updatedAt:(0,h.nd)("updated_at",{mode:"timestamp"}).notNull(),ipAddress:(0,y.Qq)("ip_address"),userAgent:(0,y.Qq)("user_agent"),userId:(0,y.Qq)("user_id").notNull().references(()=>i.id,{onDelete:"cascade"})}),c=(0,d.D)("accounts",{id:(0,y.Qq)("id").primaryKey(),accountId:(0,y.Qq)("account_id").notNull(),providerId:(0,y.Qq)("provider_id").notNull(),userId:(0,y.Qq)("user_id").notNull().references(()=>i.id,{onDelete:"cascade"}),accessToken:(0,y.Qq)("access_token"),refreshToken:(0,y.Qq)("refresh_token"),idToken:(0,y.Qq)("id_token"),accessTokenExpiresAt:(0,h.nd)("access_token_expires_at",{mode:"timestamp"}),refreshTokenExpiresAt:(0,h.nd)("refresh_token_expires_at",{mode:"timestamp"}),scope:(0,y.Qq)("scope"),password:(0,y.Qq)("password"),createdAt:(0,h.nd)("created_at",{mode:"timestamp"}).notNull(),updatedAt:(0,h.nd)("updated_at",{mode:"timestamp"}).notNull()}),O=(0,d.D)("verifications",{id:(0,y.Qq)("id").primaryKey(),identifier:(0,y.Qq)("identifier").notNull(),value:(0,y.Qq)("value").notNull(),expiresAt:(0,h.nd)("expires_at",{mode:"timestamp"}).notNull(),createdAt:(0,h.nd)("created_at",{mode:"timestamp"}),updatedAt:(0,h.nd)("updated_at",{mode:"timestamp"})}),j=(0,d.D)("subscriptions",{id:(0,y.Qq)("id").primaryKey(),userId:(0,y.Qq)("user_id").notNull().references(()=>i.id,{onDelete:"cascade"}),merchantName:(0,y.Qq)("merchant_name").notNull(),status:(0,y.Qq)("status").notNull(),price:(0,h.nd)("price").notNull(),currency:(0,y.Qq)("currency").default("USD").notNull(),nextRenewal:(0,h.nd)("next_renewal",{mode:"timestamp"}),syncHash:(0,y.Qq)("sync_hash"),updatedAt:(0,h.nd)("updated_at",{mode:"timestamp"}).notNull()}),$=(0,d.D)("sync_logs",{id:(0,y.Qq)("id").primaryKey(),userId:(0,y.Qq)("user_id").notNull().references(()=>i.id,{onDelete:"cascade"}),lastSyncAt:(0,h.nd)("last_sync_at",{mode:"timestamp"}).notNull(),blobName:(0,y.Qq)("blob_name").notNull()})},Le.__chunk_99597=(Ue,ie,o)=>{"use strict";function d(I,p){if(!I||!p)return I;let _=Object.entries(p).filter(([,{returned:m}])=>m===!1).map(([m])=>m);return Object.entries(structuredClone(I)).filter(([m])=>!_.includes(m)).reduce((m,[q,J])=>({...m,[q]:J}),{})}function y(I,p,_){let m=!1;return function(...q){return m||((_?.warn??console.warn)(`[Deprecation] ${p}`),m=!0),I.apply(this,q)}}o.d(ie,{JW:()=>$,EU:()=>h.E,CI:()=>y,dB:()=>d,$C:()=>i.$,mY:()=>c,Ll:()=>j,Wi:()=>K,$l:()=>W.$});var h=o(74500),i=o(32634),s=o(13348);function c(I){return s.ipv4().safeParse(I).success||s.ipv6().safeParse(I).success}function O(I){if(I.includes("::")){let p=I.split("::"),_=p[0]?p[0].split(":"):[],m=p[1]?p[1].split(":"):[],q=Array(8-_.length-m.length).fill("0000");return[..._.map(J=>J.padStart(4,"0")),...q,...m.map(J=>J.padStart(4,"0"))]}return I.split(":").map(p=>p.padStart(4,"0"))}function j(I,p={}){if(s.ipv4().safeParse(I).success||!s.ipv6().safeParse(I).success)return I.toLowerCase();let _=function(m){let q=m.toLowerCase();if(q.startsWith("::ffff:")){let a=q.substring(7);if(s.ipv4().safeParse(a).success)return a}let J=m.split(":");if(J.length===7&&J[5]?.toLowerCase()==="ffff"){let a=J[6];if(a&&s.ipv4().safeParse(a).success)return a}if(q.includes("::ffff:")||q.includes(":ffff:")){let a=O(m);if(a.length===8&&a[0]==="0000"&&a[1]==="0000"&&a[2]==="0000"&&a[3]==="0000"&&a[4]==="0000"&&a[5]==="ffff"&&a[6]&&a[7])return`${Number.parseInt(a[6].substring(0,2),16)}.${Number.parseInt(a[6].substring(2,4),16)}.${Number.parseInt(a[7].substring(0,2),16)}.${Number.parseInt(a[7].substring(2,4),16)}`}return null}(I);return _?_.toLowerCase():function(m,q){let J=O(m);if(q&&q<128){let a=q;return J.map(V=>{if(a<=0)return"0000";if(a>=16)return a-=16,V;let C=Number.parseInt(V,16)&(65535<<16-a&65535);return a=0,C.toString(16).padStart(4,"0")}).join(":").toLowerCase()}return J.join(":").toLowerCase()}(I,p.ipv6Subnet||64)}function $(I,p){return`${I}|${p}`}var W=o(96283);function K(I,p){let _;try{_=new URL(I).pathname.replace(/\/+$/,"")||"/"}catch{return"/"}return p==="/"||p===""?_:_===p?"/":_.startsWith(p+"/")?_.slice(p.length).replace(/\/+$/,"")||"/":_}},Le.__chunk_98934=(Ue,ie,o)=>{"use strict";o.d(ie,{a6:()=>I,eC:()=>J,Aj:()=>q,OR:()=>p,vt:()=>_,$G:()=>m});var d=o(47121),y=o(12821),h=o(78139),i=o(70809),s=o(86193);let c=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|months?|mo|years?|yrs?|y)(?: (ago|from now))?$/i;var O=o(68113),j=o(30543),$=o(99597),W=o(31448);o(8342);var K=o(21880);function I(a){let V=(a.advanced?.useSecureCookies!==void 0?a.advanced?.useSecureCookies:a.baseURL?!!a.baseURL.startsWith("https://"):O.KV)?"__Secure-":"",C=!!a.advanced?.crossSubDomainCookies?.enabled,L=C?a.advanced?.crossSubDomainCookies?.domain||(a.baseURL?new URL(a.baseURL).hostname:void 0):void 0;if(C&&!L)throw new j.$("baseURL is required when crossSubdomainCookies are enabled");return function(k,N={}){let P=a.advanced?.cookiePrefix||"better-auth",b=a.advanced?.cookies?.[k]?.name||`${P}.${k}`,z=a.advanced?.cookies?.[k]?.attributes;return{name:`${V}${b}`,attributes:{secure:!!V,sameSite:"lax",path:"/",httpOnly:!0,...C?{domain:L}:{},...a.advanced?.defaultCookieAttributes,...N,...z}}}}function p(a){let V=I(a),C=V("session_token",{maxAge:a.session?.expiresIn||Math.round(function(P){let b,z=c.exec("7d");if(!z||z[4]&&z[1])throw TypeError(`Invalid time string format: "${P}". Use formats like "7d", "30m", "1 hour", etc.`);let F=parseFloat(z[2]),Q=z[3].toLowerCase();switch(Q){case"years":case"year":case"yrs":case"yr":case"y":b=315576e5*F;break;case"months":case"month":case"mo":b=2592e6*F;break;case"weeks":case"week":case"w":b=6048e5*F;break;case"days":case"day":case"d":b=864e5*F;break;case"hours":case"hour":case"hrs":case"hr":case"h":b=36e5*F;break;case"minutes":case"minute":case"mins":case"min":case"m":b=6e4*F;break;case"seconds":case"second":case"secs":case"sec":case"s":b=1e3*F;break;default:throw TypeError(`Unknown time unit: "${Q}"`)}return z[1]==="-"||z[4]==="ago"?-b:b}("7d")/1e3)}),L=V("session_data",{maxAge:a.session?.cookieCache?.maxAge||300}),k=V("account_data",{maxAge:a.session?.cookieCache?.maxAge||300}),N=V("dont_remember");return{sessionToken:{name:C.name,attributes:C.attributes},sessionData:{name:L.name,attributes:L.attributes},dontRememberToken:{name:N.name,attributes:N.attributes},accountData:{name:k.name,attributes:k.attributes}}}async function _(a,V,C){let L;if(!a.context.options.session?.cookieCache?.enabled)return;let k=(0,$.dB)(V.session,a.context.options.session?.additionalFields),N=(0,y.kc)(a.context.options,V.user),P=a.context.options.session?.cookieCache?.version,b="1";if(P){if(typeof P=="string")b=P;else if(typeof P=="function"){let X=P(V.session,V.user);b=(0,s.y)(X)?await X:X}}let z={session:k,user:N,updatedAt:Date.now(),version:b},F={...a.context.authCookies.sessionData.attributes,maxAge:C?void 0:a.context.authCookies.sessionData.attributes.maxAge},Q=(0,d.p)(F.maxAge||60,"sec").getTime(),G=a.context.options.session?.cookieCache?.strategy||"compact";if((L=G==="jwe"?await(0,h.lT)(z,a.context.secret,"better-auth-session",F.maxAge||300):G==="jwt"?await(0,h.FA)(z,a.context.secret,F.maxAge||300):W.z.encode(JSON.stringify({session:z,expiresAt:Q,signature:await(0,K.s)("SHA-256","base64urlnopad").sign(a.context.secret,JSON.stringify({...z,expiresAt:Q}))}),{padding:!1})).length>4093){let X=(0,i.Uh)(a.context.authCookies.sessionData.name,F,a),oe=X.chunk(L,F);X.setCookies(oe)}else{let X=(0,i.Uh)(a.context.authCookies.sessionData.name,F,a);if(X.hasChunks()){let oe=X.clean();X.setCookies(oe)}a.setCookie(a.context.authCookies.sessionData.name,L,F)}if(a.context.options.account?.storeAccountCookie){let X=await(0,i.ec)(a);X&&await(0,i.Ce)(a,X)}}async function m(a,V,C,L){let k=await a.getSignedCookie(a.context.authCookies.dontRememberToken.name,a.context.secret);C=C!==void 0?C:!!k;let N=a.context.authCookies.sessionToken.attributes,P=C?void 0:a.context.sessionConfig.expiresIn;await a.setSignedCookie(a.context.authCookies.sessionToken.name,V.session.token,a.context.secret,{...N,maxAge:P,...L}),C&&await a.setSignedCookie(a.context.authCookies.dontRememberToken.name,"true",a.context.secret,a.context.authCookies.dontRememberToken.attributes),await _(a,V,C),a.context.setNewSession(V)}function q(a,V){a.setCookie(V.name,"",{...V.attributes,maxAge:0})}function J(a,V){if(q(a,a.context.authCookies.sessionToken),q(a,a.context.authCookies.sessionData),a.context.options.account?.storeAccountCookie){q(a,a.context.authCookies.accountData);let k=(0,i.R_)(a.context.authCookies.accountData.name,a.context.authCookies.accountData.attributes,a),N=k.clean();k.setCookies(N)}a.context.oauthConfig.storeStateStrategy==="cookie"&&q(a,a.context.createAuthCookie("oauth_state"));let C=(0,i.Uh)(a.context.authCookies.sessionData.name,a.context.authCookies.sessionData.attributes,a),L=C.clean();C.setCookies(L),V||q(a,a.context.authCookies.dontRememberToken)}},Le.__chunk_98686=(Ue,ie,o)=>{"use strict";o.d(ie,{f:()=>h});var d=o(26772);let y=(0,d.CN)({is:i=>i.kind==="TopNode",create:(i,s)=>(0,d.CN)({kind:"TopNode",expression:i,modifiers:s})});function h(i,s){var c;if(!(0,d.Et)(i)&&!(0,d.sI)(i))throw Error(`Invalid top expression: ${i}`);if(!(0,d.b0)(s)&&(c=s)!=="percent"&&c!=="with ties"&&c!=="percent with ties")throw Error(`Invalid top modifiers: ${s}`);return y.create(i,s)}},Le.__chunk_97646=(Ue,ie,o)=>{"use strict";let d;o.d(ie,{l:()=>j});var y=o(20138),h=o(25527),i=o(55337),s=o(56559);let c=async($,W,K,I=!1)=>{let p=(d||=new WeakMap).get($);if(p?.[K])return p[K];let _=await(0,i.x)({...W,alg:K});return I&&Object.freeze($),p?p[K]=_:d.set($,{[K]:_}),_},O=($,W)=>{let K,I=(d||=new WeakMap).get($);if(I?.[W])return I[W];let p=$.type==="public",_=!!p;if($.asymmetricKeyType==="x25519"){switch(W){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}K=$.toCryptoKey($.asymmetricKeyType,_,p?[]:["deriveBits"])}if($.asymmetricKeyType==="ed25519"){if(W!=="EdDSA"&&W!=="Ed25519")throw TypeError("given KeyObject instance cannot be used for this algorithm");K=$.toCryptoKey($.asymmetricKeyType,_,[p?"verify":"sign"])}switch($.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":if(W!==$.asymmetricKeyType.toUpperCase())throw TypeError("given KeyObject instance cannot be used for this algorithm");K=$.toCryptoKey($.asymmetricKeyType,_,[p?"verify":"sign"])}if($.asymmetricKeyType==="rsa"){let m;switch(W){case"RSA-OAEP":m="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":m="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":m="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":m="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(W.startsWith("RSA-OAEP"))return $.toCryptoKey({name:"RSA-OAEP",hash:m},_,p?["encrypt"]:["decrypt"]);K=$.toCryptoKey({name:W.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:m},_,[p?"verify":"sign"])}if($.asymmetricKeyType==="ec"){let m=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get($.asymmetricKeyDetails?.namedCurve);if(!m)throw TypeError("given KeyObject instance cannot be used for this algorithm");W==="ES256"&&m==="P-256"&&(K=$.toCryptoKey({name:"ECDSA",namedCurve:m},_,[p?"verify":"sign"])),W==="ES384"&&m==="P-384"&&(K=$.toCryptoKey({name:"ECDSA",namedCurve:m},_,[p?"verify":"sign"])),W==="ES512"&&m==="P-521"&&(K=$.toCryptoKey({name:"ECDSA",namedCurve:m},_,[p?"verify":"sign"])),W.startsWith("ECDH-ES")&&(K=$.toCryptoKey({name:"ECDH",namedCurve:m},_,p?[]:["deriveBits"]))}if(!K)throw TypeError("given KeyObject instance cannot be used for this algorithm");return I?I[W]=K:d.set($,{[W]:K}),K};async function j($,W){if($ instanceof Uint8Array||(0,s.R7)($))return $;if((0,s.D2)($)){if($.type==="secret")return $.export();if("toCryptoKey"in $&&typeof $.toCryptoKey=="function")try{return O($,W)}catch(I){if(I instanceof TypeError)throw I}let K=$.export({format:"jwk"});return c($,K,W)}if((0,y.ll)($))return $.k?(0,h.D)($.k):c($,$,W,!0);throw Error("unreachable")}},Le.__chunk_96626=(Ue,ie,o)=>{"use strict";o.d(ie,{y:()=>O});var d=o(68113),y=o(30543),h=o(1261),i=o(38560),s=o(69252),c=o(15294);let O=(j,$)=>{let W=null,K=_=>({getFieldName:m,options:q})=>{function J(C){let L=$.schema||_._.fullSchema;if(!L)throw new y.$("Drizzle adapter failed to initialize. Schema not found. Please provide a schema object in the adapter options object.");let k=L[C];if(!k)throw new y.$(`[# Drizzle Adapter]: The model "${C}" was not found in the schema object. Please pass the schema directly to the adapter options.`);return k}let a=async(C,L,k,N)=>{if($.provider!=="mysql")return(await L.returning())[0];await L.execute();let P=J(C),b=L.config?.values;if(N?.length){let z=V(N.map(F=>k[F.field]!==void 0?{...F,value:k[F.field]}:F),C);return(await _.select().from(P).where(...z))[0]}if(b&&b[0]?.id?.value){let z=b[0]?.id?.value;return z||(z=(await _.select({id:(0,i.ll)`LAST_INSERT_ID()`}).from(P).orderBy((0,s.i)(P.id)).limit(1))[0].id),(await _.select().from(P).where((0,c.eq)(P.id,z)).limit(1).execute())[0]}if(k.id)return(await _.select().from(P).where((0,c.eq)(P.id,k.id)).limit(1).execute())[0];if(!("id"in P))throw new y.$(`The model "${C}" does not have an "id" field. Please use the "id" field as your primary key.`);return(await _.select().from(P).orderBy((0,s.i)(P.id)).limit(1).execute())[0]};function V(C,L){let k=J(L);if(!C)return[];if(C.length===1){let Q=C[0];if(!Q)return[];let G=m({model:L,field:Q.field});if(!k[G])throw new y.$(`The field "${Q.field}" does not exist in the schema for the model "${L}". Please update your schema.`);if(Q.operator==="in"){if(!Array.isArray(Q.value))throw new y.$(`The value for the field "${Q.field}" must be an array when using the "in" operator.`);return[(0,c.RV)(k[G],Q.value)]}if(Q.operator==="not_in"){if(!Array.isArray(Q.value))throw new y.$(`The value for the field "${Q.field}" must be an array when using the "not_in" operator.`);return[(0,c.KL)(k[G],Q.value)]}return Q.operator==="contains"?[(0,c.mj)(k[G],`%${Q.value}%`)]:Q.operator==="starts_with"?[(0,c.mj)(k[G],`${Q.value}%`)]:Q.operator==="ends_with"?[(0,c.mj)(k[G],`%${Q.value}`)]:Q.operator==="lt"?[(0,c.lt)(k[G],Q.value)]:Q.operator==="lte"?[(0,c.wJ)(k[G],Q.value)]:Q.operator==="ne"?[(0,c.ne)(k[G],Q.value)]:Q.operator==="gt"?[(0,c.gt)(k[G],Q.value)]:Q.operator==="gte"?[(0,c.RO)(k[G],Q.value)]:[(0,c.eq)(k[G],Q.value)]}let N=C.filter(Q=>Q.connector==="AND"||!Q.connector),P=C.filter(Q=>Q.connector==="OR"),b=(0,c.Uo)(...N.map(Q=>{let G=m({model:L,field:Q.field});if(Q.operator==="in"){if(!Array.isArray(Q.value))throw new y.$(`The value for the field "${Q.field}" must be an array when using the "in" operator.`);return(0,c.RV)(k[G],Q.value)}if(Q.operator==="not_in"){if(!Array.isArray(Q.value))throw new y.$(`The value for the field "${Q.field}" must be an array when using the "not_in" operator.`);return(0,c.KL)(k[G],Q.value)}return Q.operator==="contains"?(0,c.mj)(k[G],`%${Q.value}%`):Q.operator==="starts_with"?(0,c.mj)(k[G],`${Q.value}%`):Q.operator==="ends_with"?(0,c.mj)(k[G],`%${Q.value}`):Q.operator==="lt"?(0,c.lt)(k[G],Q.value):Q.operator==="lte"?(0,c.wJ)(k[G],Q.value):Q.operator==="gt"?(0,c.gt)(k[G],Q.value):Q.operator==="gte"?(0,c.RO)(k[G],Q.value):Q.operator==="ne"?(0,c.ne)(k[G],Q.value):(0,c.eq)(k[G],Q.value)})),z=(0,c.or)(...P.map(Q=>{let G=m({model:L,field:Q.field});if(Q.operator==="in"){if(!Array.isArray(Q.value))throw new y.$(`The value for the field "${Q.field}" must be an array when using the "in" operator.`);return(0,c.RV)(k[G],Q.value)}if(Q.operator==="not_in"){if(!Array.isArray(Q.value))throw new y.$(`The value for the field "${Q.field}" must be an array when using the "not_in" operator.`);return(0,c.KL)(k[G],Q.value)}return Q.operator==="contains"?(0,c.mj)(k[G],`%${Q.value}%`):Q.operator==="starts_with"?(0,c.mj)(k[G],`${Q.value}%`):Q.operator==="ends_with"?(0,c.mj)(k[G],`%${Q.value}`):Q.operator==="lt"?(0,c.lt)(k[G],Q.value):Q.operator==="lte"?(0,c.wJ)(k[G],Q.value):Q.operator==="gt"?(0,c.gt)(k[G],Q.value):Q.operator==="gte"?(0,c.RO)(k[G],Q.value):Q.operator==="ne"?(0,c.ne)(k[G],Q.value):(0,c.eq)(k[G],Q.value)})),F=[];return N.length&&F.push(b),P.length&&F.push(z),F}return{async create({model:C,data:L}){let k=J(C);return function(N,P,b){if(!N)throw new y.$("Drizzle adapter failed to initialize. Drizzle Schema not found. Please provide a schema object in the adapter options object.");for(let z in b)if(!N[z])throw new y.$(`The field "${z}" does not exist in the "${P}" Drizzle schema. Please update your drizzle schema or re-generate using "npx @better-auth/cli@latest generate".`)}(k,C,L),await a(C,_.insert(k).values(L),L)},async findOne({model:C,where:L,join:k}){let N=J(C),P=V(L,C);if(q.experimental?.joins){if(_.query&&_.query[C]){let z,F=[];if(k)for(let[G,X]of(z={},Object.entries(k))){let oe=X.limit??q.advanced?.database?.defaultFindManyLimit??100,ne=X.relation==="one-to-one",we=ne||$.usePlural?"":"s";z[`${G}${we}`]=!!ne||{limit:oe},ne||F.push(`${G}${we}`)}let Q=await _.query[C].findFirst({where:P[0],with:z});if(Q)for(let G of F){let X=$.usePlural?G:G.slice(0,-1);Q[X]=Q[G],G!==X&&delete Q[G]}return Q}d.vF.error(`[# Drizzle Adapter]: The model "${C}" was not found in the query object. Please update your Drizzle schema to include relations or re-generate using "npx @better-auth/cli@latest generate".`),d.vF.info("Falling back to regular query")}let b=await _.select().from(N).where(...P);return b.length?b[0]:null},async findMany({model:C,where:L,sortBy:k,limit:N,offset:P,join:b}){let z=J(C),F=L?V(L,C):[],Q=k?.direction==="desc"?s.i:s.Y;if(q.experimental?.joins){if(_.query[C]){let X,oe,ne=[];if(b)for(let[Ee,$e]of(X={},Object.entries(b))){let v=$e.relation==="one-to-one",Z=$e.limit??q.advanced?.database?.defaultFindManyLimit??100,R=v||$.usePlural?"":"s";X[`${Ee}${R}`]=!!v||{limit:Z},v||ne.push(`${Ee}${R}`)}k?.field&&(oe=[Q(z[m({model:C,field:k?.field})])]);let we=await _.query[C].findMany({where:F[0],with:X,limit:N??100,offset:P??0,orderBy:oe});if(we)for(let Ee of we)for(let $e of ne){let v=$.usePlural?$e:$e.slice(0,-1);v!==$e&&(Ee[v]=Ee[$e],delete Ee[$e])}return we}d.vF.error(`[# Drizzle Adapter]: The model "${C}" was not found in the query object. Please update your Drizzle schema to include relations or re-generate using "npx @better-auth/cli@latest generate".`),d.vF.info("Falling back to regular query")}let G=_.select().from(z);return N!==void 0&&(G=G.limit(N)),P!==void 0&&(G=G.offset(P)),k?.field&&(G=G.orderBy(Q(z[m({model:C,field:k?.field})]))),await G.where(...F)},async count({model:C,where:L}){let k=J(C),N=L?V(L,C):[];return(await _.select({count:(0,i.ll)`count(${i.ll.raw("*")})`.mapWith(Number)}).from(k).where(...N))[0].count},async update({model:C,where:L,update:k}){let N=J(C),P=V(L,C);return await a(C,_.update(N).set(k).where(...P),k,L)},async updateMany({model:C,where:L,update:k}){let N=J(C),P=V(L,C);return await _.update(N).set(k).where(...P)},async delete({model:C,where:L}){let k=J(C),N=V(L,C);return await _.delete(k).where(...N)},async deleteMany({model:C,where:L}){let k=J(C),N=V(L,C),P=await _.delete(k).where(...N),b=0;return P&&"rowCount"in P?b=P.rowCount:Array.isArray(P)?b=P.length:P&&("affectedRows"in P||"rowsAffected"in P||"changes"in P)&&(b=P.affectedRows??P.rowsAffected??P.changes),typeof b!="number"&&d.vF.error("[Drizzle Adapter] The result of the deleteMany operation is not a number. This is likely a bug in the adapter. Please report this issue to the Better Auth team.",{res:P,model:C,where:L}),b},options:$}},I=null;I={config:{adapterId:"drizzle",adapterName:"Drizzle Adapter",usePlural:$.usePlural??!1,debugLogs:$.debugLogs??!1,supportsUUIDs:$.provider==="pg",supportsJSON:$.provider==="pg",supportsArrays:$.provider==="pg",transaction:!!$.transaction&&(_=>j.transaction(m=>_((0,h.II)({config:I.config,adapter:K(m)})(W))))},adapter:K(j)};let p=(0,h.II)(I);return _=>(W=_,p(_))}},Le.__chunk_96499=(Ue,ie,o)=>{"use strict";o.d(ie,{C:()=>s,g:()=>i});var d=o(35889),y=o(66557),h=o(26772);class i{#e;get dynamicReference(){return this.#e}get refType(){}constructor(O){this.#e=O}toOperationNode(){return(0,y.vd)(this.#e)}}function s(c){return(0,h.Gv)(c)&&(0,d.N)(c)&&(0,h.Kg)(c.dynamicReference)}},Le.__chunk_96283=(Ue,ie,o)=>{"use strict";o.d(ie,{$:()=>y});var d=o(39311);function y(h){try{return typeof h!="string"?h:JSON.parse(h,function(i,s){if(typeof s=="string"&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?Z$/.test(s)){let c=new Date(s);if(!isNaN(c.getTime()))return c}return s})}catch(i){return d.vF.error("Error parsing JSON",{error:i}),null}}o(68113)},Le.__chunk_95971=(Ue,ie,o)=>{"use strict";o.d(ie,{K:()=>y});var d=o(26772);let y=(0,d.CN)({is:h=>h.kind==="OrNode",create:(h,i)=>(0,d.CN)({kind:"OrNode",left:h,right:i})})},Le.__chunk_95965=(Ue,ie,o)=>{"use strict";o.d(ie,{J:()=>y});var d=o(76984);async function y({id:h,options:i,authorizationEndpoint:s,state:c,codeVerifier:O,scopes:j,claims:$,redirectURI:W,duration:K,prompt:I,accessType:p,responseType:_,display:m,loginHint:q,hd:J,responseMode:a,additionalParams:V,scopeJoiner:C}){let L=new URL(i.authorizationEndpoint||s);L.searchParams.set("response_type",_||"code");let k=Array.isArray(i.clientId)?i.clientId[0]:i.clientId;if(L.searchParams.set("client_id",k),L.searchParams.set("state",c),j&&L.searchParams.set("scope",j.join(C||" ")),L.searchParams.set("redirect_uri",i.redirectURI||W),K&&L.searchParams.set("duration",K),m&&L.searchParams.set("display",m),q&&L.searchParams.set("login_hint",q),I&&L.searchParams.set("prompt",I),J&&L.searchParams.set("hd",J),p&&L.searchParams.set("access_type",p),a&&L.searchParams.set("response_mode",a),O){let N=await(0,d.O)(O);L.searchParams.set("code_challenge_method","S256"),L.searchParams.set("code_challenge",N)}if($){let N=$.reduce((P,b)=>(P[b]=null,P),{});L.searchParams.set("claims",JSON.stringify({id_token:{email:null,email_verified:null,...N}}))}return V&&Object.entries(V).forEach(([N,P])=>{L.searchParams.set(N,P)}),L}},Le.__chunk_95769=(Ue,ie,o)=>{"use strict";o.d(ie,{HE:()=>j,Io:()=>I,Lf:()=>p,XI:()=>K,e:()=>i});var d=o(77438),y=o(86962);let h=Symbol.for("drizzle:Schema"),i=Symbol.for("drizzle:Columns"),s=Symbol.for("drizzle:ExtraConfigColumns"),c=Symbol.for("drizzle:OriginalName"),O=Symbol.for("drizzle:BaseName"),j=Symbol.for("drizzle:IsAlias"),$=Symbol.for("drizzle:ExtraConfigBuilder"),W=Symbol.for("drizzle:IsDrizzleTable");class K{static[d.i]="Table";static Symbol={Name:y.E,Schema:h,OriginalName:c,Columns:i,ExtraConfigColumns:s,BaseName:O,IsAlias:j,ExtraConfigBuilder:$};[y.E];[c];[h];[i];[s];[O];[j]=!1;[W]=!0;[$]=void 0;constructor(m,q,J){this[y.E]=this[c]=m,this[h]=q,this[O]=J}}function I(_){return _[y.E]}function p(_){return`${_[h]??"public"}.${_[y.E]}`}},Le.__chunk_95709=(Ue,ie,o)=>{"use strict";o.d(ie,{j:()=>h});var d=o(75740),y=o(5401);async function h(i,s,c){if(s instanceof Uint8Array){if(!i.startsWith("HS"))throw TypeError((0,y.X)(s,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",s,{hash:`SHA-${i.slice(-3)}`,name:"HMAC"},!1,[c])}return(0,d.Y)(s,i,c),s}},Le.__chunk_94616=(Ue,ie,o)=>{"use strict";o.d(ie,{y:()=>j});var d=o(5401),y=o(56559),h=o(20138);let i=$=>$?.[Symbol.toStringTag],s=($,W,K)=>{if(W.use!==void 0){let I;switch(K){case"sign":case"verify":I="sig";break;case"encrypt":case"decrypt":I="enc"}if(W.use!==I)throw TypeError(`Invalid key for this operation, its "use" must be "${I}" when present`)}if(W.alg!==void 0&&W.alg!==$)throw TypeError(`Invalid key for this operation, its "alg" must be "${$}" when present`);if(Array.isArray(W.key_ops)){let I;switch(!0){case(K==="sign"||K==="verify"):case $==="dir":case $.includes("CBC-HS"):I=K;break;case $.startsWith("PBES2"):I="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test($):I=!$.includes("GCM")&&$.endsWith("KW")?K==="encrypt"?"wrapKey":"unwrapKey":K;break;case(K==="encrypt"&&$.startsWith("RSA")):I="wrapKey";break;case K==="decrypt":I=$.startsWith("RSA")?"unwrapKey":"deriveBits"}if(I&&W.key_ops?.includes?.(I)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${I}" when present`)}return!0},c=($,W,K)=>{if(!(W instanceof Uint8Array)){if(h.ll(W)){if(h.t9(W)&&s($,W,K))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!(0,y.P2)(W))throw TypeError((0,d.t)($,W,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(W.type!=="secret")throw TypeError(`${i(W)} instances for symmetric algorithms must be of type "secret"`)}},O=($,W,K)=>{if(h.ll(W))switch(K){case"decrypt":case"sign":if(h.W2(W)&&s($,W,K))return;throw TypeError("JSON Web Key for this operation must be a private JWK");case"encrypt":case"verify":if(h.M3(W)&&s($,W,K))return;throw TypeError("JSON Web Key for this operation must be a public JWK")}if(!(0,y.P2)(W))throw TypeError((0,d.t)($,W,"CryptoKey","KeyObject","JSON Web Key"));if(W.type==="secret")throw TypeError(`${i(W)} instances for asymmetric algorithms must not be of type "secret"`);if(W.type==="public")switch(K){case"sign":throw TypeError(`${i(W)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${i(W)} instances for asymmetric algorithm decryption must be of type "private"`)}if(W.type==="private")switch(K){case"verify":throw TypeError(`${i(W)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${i(W)} instances for asymmetric algorithm encryption must be of type "public"`)}};function j($,W,K){switch($.substring(0,2)){case"A1":case"A2":case"di":case"HS":case"PB":c($,W,K);break;default:O($,W,K)}}},Le.__chunk_93692=(Ue,ie,o)=>{"use strict";o.d(ie,{N:()=>y});var d=o(26772);let y=(0,d.CN)({is:h=>h.kind==="AliasNode",create:(h,i)=>(0,d.CN)({kind:"AliasNode",node:h,alias:i})})},Le.__chunk_93222=(Ue,ie,o)=>{"use strict";o.d(ie,{V:()=>J});var d=o(25527),y=o(64463),h=o(22352),i=o(95709);async function s(a,V,C,L){let k=await(0,i.j)(a,V,"verify");(0,h.O)(a,k);let N=(0,y.B)(a,k.algorithm);try{return await crypto.subtle.verify(N,k,C,L)}catch{return!1}}var c=o(38427),O=o(85725),j=o(14588),$=o(88691),W=o(94616),K=o(73790),I=o(46372),p=o(97646);async function _(a,V,C){let L,k;if(!(0,$.G)(a))throw new c.Ye("Flattened JWS must be an object");if(a.protected===void 0&&a.header===void 0)throw new c.Ye('Flattened JWS must have either of the "protected" or "header" members');if(a.protected!==void 0&&typeof a.protected!="string")throw new c.Ye("JWS Protected Header incorrect type");if(a.payload===void 0)throw new c.Ye("JWS Payload missing");if(typeof a.signature!="string")throw new c.Ye("JWS Signature missing or incorrect type");if(a.header!==void 0&&!(0,$.G)(a.header))throw new c.Ye("JWS Unprotected Header incorrect type");let N={};if(a.protected)try{let we=(0,d.D)(a.protected);N=JSON.parse(O.D0.decode(we))}catch{throw new c.Ye("JWS Protected Header is invalid")}if(!(0,j.f)(N,a.header))throw new c.Ye("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let P={...N,...a.header},b=(0,K.n)(c.Ye,new Map([["b64",!0]]),C?.crit,N,P),z=!0;if(b.has("b64")&&typeof(z=N.b64)!="boolean")throw new c.Ye('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:F}=P;if(typeof F!="string"||!F)throw new c.Ye('JWS "alg" (Algorithm) Header Parameter missing or invalid');let Q=C&&(0,I.F)("algorithms",C.algorithms);if(Q&&!Q.has(F))throw new c.Rb('"alg" (Algorithm) Header Parameter value not allowed');if(z){if(typeof a.payload!="string")throw new c.Ye("JWS Payload must be a string")}else if(typeof a.payload!="string"&&!(a.payload instanceof Uint8Array))throw new c.Ye("JWS Payload must be a string or an Uint8Array instance");let G=!1;typeof V=="function"&&(V=await V(N,a),G=!0),(0,W.y)(F,V,"verify");let X=(0,O.xW)(a.protected!==void 0?(0,O.lF)(a.protected):new Uint8Array,(0,O.lF)("."),typeof a.payload=="string"?z?(0,O.lF)(a.payload):O.Rd.encode(a.payload):a.payload);try{L=(0,d.D)(a.signature)}catch{throw new c.Ye("Failed to base64url decode the signature")}let oe=await(0,p.l)(V,F);if(!await s(F,oe,L,X))throw new c.h2;if(z)try{k=(0,d.D)(a.payload)}catch{throw new c.Ye("Failed to base64url decode the payload")}else k=typeof a.payload=="string"?O.Rd.encode(a.payload):a.payload;let ne={payload:k};return a.protected!==void 0&&(ne.protectedHeader=N),a.header!==void 0&&(ne.unprotectedHeader=a.header),G?{...ne,key:oe}:ne}async function m(a,V,C){if(a instanceof Uint8Array&&(a=O.D0.decode(a)),typeof a!="string")throw new c.Ye("Compact JWS must be a string or Uint8Array");let{0:L,1:k,2:N,length:P}=a.split(".");if(P!==3)throw new c.Ye("Invalid Compact JWS");let b=await _({payload:k,protected:L,signature:N},V,C),z={payload:b.payload,protectedHeader:b.protectedHeader};return typeof V=="function"?{...z,key:b.key}:z}var q=o(43917);async function J(a,V,C){let L=await m(a,V,C);if(L.protectedHeader.crit?.includes("b64")&&L.protectedHeader.b64===!1)throw new c.Dp("JWTs MUST NOT use unencoded payload");let k={payload:(0,q.k6)(L.protectedHeader,L.payload,C),protectedHeader:L.protectedHeader};return typeof V=="function"?{...k,key:L.key}:k}},Le.__chunk_93219=(Ue,ie,o)=>{"use strict";o.d(ie,{tH:()=>L,oh:()=>I.oh});var d={};o.r(d),o.d(d,{$brand:()=>m.$brand,$input:()=>m.$input,$output:()=>m.$output,NEVER:()=>m.NEVER,TimePrecision:()=>m.TimePrecision,ZodAny:()=>m.ZodAny,ZodArray:()=>m.ZodArray,ZodBase64:()=>m.ZodBase64,ZodBase64URL:()=>m.ZodBase64URL,ZodBigInt:()=>m.ZodBigInt,ZodBigIntFormat:()=>m.ZodBigIntFormat,ZodBoolean:()=>m.ZodBoolean,ZodCIDRv4:()=>m.ZodCIDRv4,ZodCIDRv6:()=>m.ZodCIDRv6,ZodCUID:()=>m.ZodCUID,ZodCUID2:()=>m.ZodCUID2,ZodCatch:()=>m.ZodCatch,ZodCodec:()=>m.ZodCodec,ZodCustom:()=>m.ZodCustom,ZodCustomStringFormat:()=>m.ZodCustomStringFormat,ZodDate:()=>m.ZodDate,ZodDefault:()=>m.ZodDefault,ZodDiscriminatedUnion:()=>m.ZodDiscriminatedUnion,ZodE164:()=>m.ZodE164,ZodEmail:()=>m.ZodEmail,ZodEmoji:()=>m.ZodEmoji,ZodEnum:()=>m.ZodEnum,ZodError:()=>m.ZodError,ZodExactOptional:()=>m.ZodExactOptional,ZodFile:()=>m.ZodFile,ZodFirstPartyTypeKind:()=>m.ZodFirstPartyTypeKind,ZodFunction:()=>m.ZodFunction,ZodGUID:()=>m.ZodGUID,ZodIPv4:()=>m.ZodIPv4,ZodIPv6:()=>m.ZodIPv6,ZodISODate:()=>m.ZodISODate,ZodISODateTime:()=>m.ZodISODateTime,ZodISODuration:()=>m.ZodISODuration,ZodISOTime:()=>m.ZodISOTime,ZodIntersection:()=>m.ZodIntersection,ZodIssueCode:()=>m.ZodIssueCode,ZodJWT:()=>m.ZodJWT,ZodKSUID:()=>m.ZodKSUID,ZodLazy:()=>m.ZodLazy,ZodLiteral:()=>m.ZodLiteral,ZodMAC:()=>m.ZodMAC,ZodMap:()=>m.ZodMap,ZodNaN:()=>m.ZodNaN,ZodNanoID:()=>m.ZodNanoID,ZodNever:()=>m.ZodNever,ZodNonOptional:()=>m.ZodNonOptional,ZodNull:()=>m.ZodNull,ZodNullable:()=>m.ZodNullable,ZodNumber:()=>m.ZodNumber,ZodNumberFormat:()=>m.ZodNumberFormat,ZodObject:()=>m.ZodObject,ZodOptional:()=>m.ZodOptional,ZodPipe:()=>m.ZodPipe,ZodPrefault:()=>m.ZodPrefault,ZodPromise:()=>m.ZodPromise,ZodReadonly:()=>m.ZodReadonly,ZodRealError:()=>m.ZodRealError,ZodRecord:()=>m.ZodRecord,ZodSet:()=>m.ZodSet,ZodString:()=>m.ZodString,ZodStringFormat:()=>m.ZodStringFormat,ZodSuccess:()=>m.ZodSuccess,ZodSymbol:()=>m.ZodSymbol,ZodTemplateLiteral:()=>m.ZodTemplateLiteral,ZodTransform:()=>m.ZodTransform,ZodTuple:()=>m.ZodTuple,ZodType:()=>m.ZodType,ZodULID:()=>m.ZodULID,ZodURL:()=>m.ZodURL,ZodUUID:()=>m.ZodUUID,ZodUndefined:()=>m.ZodUndefined,ZodUnion:()=>m.ZodUnion,ZodUnknown:()=>m.ZodUnknown,ZodVoid:()=>m.ZodVoid,ZodXID:()=>m.ZodXID,ZodXor:()=>m.ZodXor,_ZodString:()=>m._ZodString,_default:()=>m._default,_function:()=>m._function,any:()=>m.any,array:()=>m.array,base64:()=>m.base64,base64url:()=>m.base64url,bigint:()=>m.bigint,boolean:()=>m.boolean,catch:()=>m.catch,check:()=>m.check,cidrv4:()=>m.cidrv4,cidrv6:()=>m.cidrv6,clone:()=>m.clone,codec:()=>m.codec,coerce:()=>m.coerce,config:()=>m.config,core:()=>m.core,cuid:()=>m.cuid,cuid2:()=>m.cuid2,custom:()=>m.custom,date:()=>m.date,decode:()=>m.decode,decodeAsync:()=>m.decodeAsync,default:()=>q,describe:()=>m.describe,discriminatedUnion:()=>m.discriminatedUnion,e164:()=>m.e164,email:()=>m.email,emoji:()=>m.emoji,encode:()=>m.encode,encodeAsync:()=>m.encodeAsync,endsWith:()=>m.endsWith,enum:()=>m.enum,exactOptional:()=>m.exactOptional,file:()=>m.file,flattenError:()=>m.flattenError,float32:()=>m.float32,float64:()=>m.float64,formatError:()=>m.formatError,fromJSONSchema:()=>m.fromJSONSchema,function:()=>m.function,getErrorMap:()=>m.getErrorMap,globalRegistry:()=>m.globalRegistry,gt:()=>m.gt,gte:()=>m.gte,guid:()=>m.guid,hash:()=>m.hash,hex:()=>m.hex,hostname:()=>m.hostname,httpUrl:()=>m.httpUrl,includes:()=>m.includes,instanceof:()=>m.instanceof,int:()=>m.int,int32:()=>m.int32,int64:()=>m.int64,intersection:()=>m.intersection,ipv4:()=>m.ipv4,ipv6:()=>m.ipv6,iso:()=>m.iso,json:()=>m.json,jwt:()=>m.jwt,keyof:()=>m.keyof,ksuid:()=>m.ksuid,lazy:()=>m.lazy,length:()=>m.length,literal:()=>m.literal,locales:()=>m.locales,looseObject:()=>m.looseObject,looseRecord:()=>m.looseRecord,lowercase:()=>m.lowercase,lt:()=>m.lt,lte:()=>m.lte,mac:()=>m.mac,map:()=>m.map,maxLength:()=>m.maxLength,maxSize:()=>m.maxSize,meta:()=>m.meta,mime:()=>m.mime,minLength:()=>m.minLength,minSize:()=>m.minSize,multipleOf:()=>m.multipleOf,nan:()=>m.nan,nanoid:()=>m.nanoid,nativeEnum:()=>m.nativeEnum,negative:()=>m.negative,never:()=>m.never,nonnegative:()=>m.nonnegative,nonoptional:()=>m.nonoptional,nonpositive:()=>m.nonpositive,normalize:()=>m.normalize,null:()=>m.null,nullable:()=>m.nullable,nullish:()=>m.nullish,number:()=>m.number,object:()=>m.object,optional:()=>m.optional,overwrite:()=>m.overwrite,parse:()=>m.parse,parseAsync:()=>m.parseAsync,partialRecord:()=>m.partialRecord,pipe:()=>m.pipe,positive:()=>m.positive,prefault:()=>m.prefault,preprocess:()=>m.preprocess,prettifyError:()=>m.prettifyError,promise:()=>m.promise,property:()=>m.property,readonly:()=>m.readonly,record:()=>m.record,refine:()=>m.refine,regex:()=>m.regex,regexes:()=>m.regexes,registry:()=>m.registry,safeDecode:()=>m.safeDecode,safeDecodeAsync:()=>m.safeDecodeAsync,safeEncode:()=>m.safeEncode,safeEncodeAsync:()=>m.safeEncodeAsync,safeParse:()=>m.safeParse,safeParseAsync:()=>m.safeParseAsync,set:()=>m.set,setErrorMap:()=>m.setErrorMap,size:()=>m.size,slugify:()=>m.slugify,startsWith:()=>m.startsWith,strictObject:()=>m.strictObject,string:()=>m.string,stringFormat:()=>m.stringFormat,stringbool:()=>m.stringbool,success:()=>m.success,superRefine:()=>m.superRefine,symbol:()=>m.symbol,templateLiteral:()=>m.templateLiteral,toJSONSchema:()=>m.toJSONSchema,toLowerCase:()=>m.toLowerCase,toUpperCase:()=>m.toUpperCase,transform:()=>m.transform,treeifyError:()=>m.treeifyError,trim:()=>m.trim,tuple:()=>m.tuple,uint32:()=>m.uint32,uint64:()=>m.uint64,ulid:()=>m.ulid,undefined:()=>m.undefined,union:()=>m.union,unknown:()=>m.unknown,uppercase:()=>m.uppercase,url:()=>m.url,util:()=>m.util,uuid:()=>m.uuid,uuidv4:()=>m.uuidv4,uuidv6:()=>m.uuidv6,uuidv7:()=>m.uuidv7,void:()=>m.void,xid:()=>m.xid,xor:()=>m.xor,z:()=>m});var y=Object.defineProperty,h=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c=(k,N,P,b)=>{if(N&&typeof N=="object"||typeof N=="function")for(var z,F=i(N),Q=0,G=F.length;Q<G;Q++)z=F[Q],s.call(k,z)||z===P||y(k,z,{get:(X=>N[X]).bind(null,z),enumerable:!(b=h(N,z))||b.enumerable});return k},O=o(21105),j=o(16875);let $=(k,N)=>({type:k,...N});function W(k,N){let P=N.id?{id:N.id}:{};for(let b in k){let z=k[b],F=N[b];F!==void 0&&(P[z.fieldName||b]=F)}return P}function K(k,N){if(!N)return null;let P={id:N.id};for(let[b,z]of Object.entries(k))P[b]=N[z.fieldName||b];return P}var I=o(12821),p=o(56715),_=o(48981),m=o(13348);let q=m;function J({fields:k,isClientSide:N}){let P=Object.keys(k).reduce((b,z)=>{let F,Q=k[z];return!Q||N&&Q.input===!1?b:(F=Q.type==="json"?m.json?m.json():m.any():Q.type==="string[]"||Q.type==="number[]"?m.array(Q.type==="string[]"?m.string():m.number()):Array.isArray(Q.type)?m.any():d[Q.type](),Q?.required===!1&&(F=F.optional()),N||Q?.returned!==!1?{...b,[z]:F}:b)},{});return m.object(P)}var a=o(540),V=o(58571),C=o(48157),L=((k,N)=>{let P={};for(var b in k)y(P,b,{get:k[b],enumerable:!0});return N&&y(P,Symbol.toStringTag,{value:"Module"}),P})({convertFromDB:()=>K,convertToDB:()=>W,createFieldAttribute:()=>$,createInternalAdapter:()=>_.t,getAdapter:()=>j.c,getBaseAdapter:()=>O.r,getMigrations:()=>V.A,getSchema:()=>a._,getWithHooks:()=>p.L,matchType:()=>V.E,mergeSchema:()=>I.oh,parseAccountInput:()=>I.h6,parseAccountOutput:()=>I.eP,parseAdditionalUserInput:()=>I.gS,parseInputData:()=>I.yO,parseSessionInput:()=>I.Mn,parseSessionOutput:()=>I.dc,parseUserInput:()=>I.pS,parseUserOutput:()=>I.kc,toZodSchema:()=>J});((k,N,P,b)=>{b&&(y(k,Symbol.toStringTag,{value:"Module"}),P&&y(P,Symbol.toStringTag,{value:"Module"})),c(k,N,"default"),P&&c(P,N,"default")})(L,C)},Le.__chunk_93048=(Ue,ie,o)=>{"use strict";o.d(ie,{a:()=>s});var d=o(28709),y=o(34395),h=o(39523),i=o(7286);function s(c,O){var j,$,W,K,I,p,_,m;if(O.length===3)return j=c,$=O[0],W=O[1],K=O[2],d.b.createWithOn(j,(0,i.uJ)($),(0,y.vC)(W,"=",K));if(O.length===2)return I=c,p=O[0],(0,O[1])((0,h.GQ)(I,p)).toOperationNode();if(O.length===1)return _=c,m=O[0],d.b.create(_,(0,i.uJ)(m));throw Error("not implemented")}},Le.__chunk_91864=(Ue,ie,o)=>{"use strict";o.d(ie,{NodeSqliteDialect:()=>K});var d=o(16755),y=o(20590),h=o(11305),i=o(72197),s=class{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(){}async releaseMigrationLock(){}get supportsOutput(){return!0}},c=class{#e;#t=new j;#r;#i;constructor(I){this.#e={...I}}async init(){this.#r=this.#e.database,this.#i=new O(this.#r),this.#e.onCreateConnection&&await this.#e.onCreateConnection(this.#i)}async acquireConnection(){return await this.#t.lock(),this.#i}async beginTransaction(I){await I.executeQuery(d.E.raw("begin"))}async commitTransaction(I){await I.executeQuery(d.E.raw("commit"))}async rollbackTransaction(I){await I.executeQuery(d.E.raw("rollback"))}async releaseConnection(){this.#t.unlock()}async destroy(){this.#r?.close()}},O=class{#e;constructor(I){this.#e=I}executeQuery(I){let{sql:p,parameters:_}=I;return Promise.resolve({rows:this.#e.prepare(p).all(..._)})}async*streamQuery(){throw Error("Streaming query is not supported by SQLite driver.")}},j=class{#e;#t;async lock(){for(;await this.#e;)await this.#e;this.#e=new Promise(I=>{this.#t=I})}unlock(){let I=this.#t;this.#e=void 0,this.#t=void 0,I?.()}},$=class{#e;constructor(I){this.#e=I}async getSchemas(){return[]}async getTables(I={withInternalKyselyTables:!1}){let p=this.#e.selectFrom("sqlite_schema").where("type","=","table").where("name","not like","sqlite_%").select("name").$castTo();return I.withInternalKyselyTables||(p=p.where("name","!=",y.kQ).where("name","!=",y.sy)),Promise.all((await p.execute()).map(({name:_})=>this.#t(_)))}async getMetadata(I){return{tables:await this.getTables(I)}}async#t(I){let p=this.#e,_=(await p.selectFrom("sqlite_master").where("name","=",I).select("sql").$castTo().execute())[0]?.sql?.split(/[\(\),]/)?.find(m=>m.toLowerCase().includes("autoincrement"))?.split(/\s+/)?.[0]?.replace(/["`]/g,"");return{name:I,columns:(await p.selectFrom((0,h.l)`pragma_table_info(${I})`.as("table_info")).select(["name","type","notnull","dflt_value"]).execute()).map(m=>({name:m.name,dataType:m.type,isNullable:!m.notnull,isAutoIncrementing:m.name===_,hasDefaultValue:m.dflt_value!=null})),isView:!0}}},W=class extends i.n{getCurrentParameterPlaceholder(){return"?"}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}},K=class{#e;constructor(I){this.#e={...I}}createDriver(){return new c(this.#e)}createQueryCompiler(){return new W}createAdapter(){return new s}createIntrospector(I){return new $(I)}}},Le.__chunk_90468=(Ue,ie,o)=>{"use strict";o.d(ie,{B:()=>c,Z:()=>s});var d=o(28195),y=o(50426);o(13191);var h=o(86790),i=o(54030);async function s(O,j,$){let W=O.body?.callbackURL||O.context.options.baseURL;if(!W)throw new i.LG("BAD_REQUEST",{message:"callbackURL is required"});let K=(0,y.k)(128),I={...$||{},callbackURL:W,codeVerifier:K,errorURL:O.body?.errorCallbackURL,newUserURL:O.body?.newUserCallbackURL,link:j,expiresAt:Date.now()+6e5,requestSignUp:O.body?.requestSignUp};await(0,d.X)(I);try{return(0,h.uW)(O,I)}catch(p){throw O.context.logger.error("Failed to create verification",p),new i.LG("INTERNAL_SERVER_ERROR",{message:"Unable to create verification",cause:p})}}async function c(O){let j,$=O.query.state||O.body.state,W=O.context.options.onAPIError?.errorURL||`${O.context.baseURL}/error`;try{j=await(0,h.aj)(O,$)}catch(K){throw O.context.logger.error("Failed to parse state",K),K instanceof h.qq&&K.code==="state_security_mismatch"?O.redirect(`${W}?error=state_mismatch`):O.redirect(`${W}?error=please_restart_the_process`)}return j.errorURL||(j.errorURL=W),j&&await(0,d.X)(j),j}},Le.__chunk_90208=(Ue,ie,o)=>{"use strict";o.d(ie,{n:()=>d});let d=Symbol.for("drizzle:ViewBaseConfig")},Le.__chunk_89709=(Ue,ie,o)=>{"use strict";o.d(ie,{$s:()=>O,U2:()=>c,dJ:()=>$,qH:()=>j});var d=o(11528),y=o(48300),h=o(72391),i=o(26772),s=o(80282);function c(W){var K;return(0,i.MH)(W)?(K=W).some(s.SS)?y.s.create(K.map(I=>O(I))):d.h.create(K):O(W)}function O(W){return(0,s.SS)(W)?(0,s.YK)(W):h.q.create(W)}function j(W){return(0,i.Et)(W)||(0,i.Lm)(W)||(0,i.kZ)(W)}function $(W){if(!j(W))throw Error(`unsafe immediate value ${JSON.stringify(W)}`);return h.q.createImmediate(W)}},Le.__chunk_88780=(Ue,ie,o)=>{"use strict";o.d(ie,{o:()=>y});var d=o(26772);let y=(0,d.CN)({is:h=>h.kind==="InsertQueryNode",create:(h,i,s)=>(0,d.CN)({kind:"InsertQueryNode",into:h,...i&&{with:i},replace:s}),createWithoutInto:()=>(0,d.CN)({kind:"InsertQueryNode"}),cloneWith:(h,i)=>(0,d.CN)({...h,...i})})},Le.__chunk_88691=(Ue,ie,o)=>{"use strict";o.d(ie,{G:()=>y});let d=h=>typeof h=="object"&&h!==null;function y(h){if(!d(h)||Object.prototype.toString.call(h)!=="[object Object]")return!1;if(Object.getPrototypeOf(h)===null)return!0;let i=h;for(;Object.getPrototypeOf(i)!==null;)i=Object.getPrototypeOf(i);return Object.getPrototypeOf(h)===i}},Le.__chunk_88138=(Ue,ie,o)=>{"use strict";o.d(ie,{y:()=>d});let d=y=>{let h=(y.plugins??[]).reduce((I,p)=>{let _=p.schema;if(!_)return I;for(let[m,q]of Object.entries(_))I[m]={fields:{...I[m]?.fields,...q.fields},modelName:q.modelName||m};return I},{}),i=y.rateLimit?.storage==="database",s={rateLimit:{modelName:y.rateLimit?.modelName||"rateLimit",fields:{key:{type:"string",unique:!0,required:!0,fieldName:y.rateLimit?.fields?.key||"key"},count:{type:"number",required:!0,fieldName:y.rateLimit?.fields?.count||"count"},lastRequest:{type:"number",bigint:!0,required:!0,fieldName:y.rateLimit?.fields?.lastRequest||"lastRequest",defaultValue:()=>Date.now()}}}},{user:c,session:O,account:j,verification:$,...W}=h,K={session:{modelName:y.session?.modelName||"session",fields:{expiresAt:{type:"date",required:!0,fieldName:y.session?.fields?.expiresAt||"expiresAt"},token:{type:"string",required:!0,fieldName:y.session?.fields?.token||"token",unique:!0},createdAt:{type:"date",required:!0,fieldName:y.session?.fields?.createdAt||"createdAt",defaultValue:()=>new Date},updatedAt:{type:"date",required:!0,fieldName:y.session?.fields?.updatedAt||"updatedAt",onUpdate:()=>new Date},ipAddress:{type:"string",required:!1,fieldName:y.session?.fields?.ipAddress||"ipAddress"},userAgent:{type:"string",required:!1,fieldName:y.session?.fields?.userAgent||"userAgent"},userId:{type:"string",fieldName:y.session?.fields?.userId||"userId",references:{model:y.user?.modelName||"user",field:"id",onDelete:"cascade"},required:!0,index:!0},...O?.fields,...y.session?.additionalFields},order:2}};return{user:{modelName:y.user?.modelName||"user",fields:{name:{type:"string",required:!0,fieldName:y.user?.fields?.name||"name",sortable:!0},email:{type:"string",unique:!0,required:!0,fieldName:y.user?.fields?.email||"email",sortable:!0},emailVerified:{type:"boolean",defaultValue:!1,required:!0,fieldName:y.user?.fields?.emailVerified||"emailVerified",input:!1},image:{type:"string",required:!1,fieldName:y.user?.fields?.image||"image"},createdAt:{type:"date",defaultValue:()=>new Date,required:!0,fieldName:y.user?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",defaultValue:()=>new Date,onUpdate:()=>new Date,required:!0,fieldName:y.user?.fields?.updatedAt||"updatedAt"},...c?.fields,...y.user?.additionalFields},order:1},...!y.secondaryStorage||y.session?.storeSessionInDatabase?K:{},account:{modelName:y.account?.modelName||"account",fields:{accountId:{type:"string",required:!0,fieldName:y.account?.fields?.accountId||"accountId"},providerId:{type:"string",required:!0,fieldName:y.account?.fields?.providerId||"providerId"},userId:{type:"string",references:{model:y.user?.modelName||"user",field:"id",onDelete:"cascade"},required:!0,fieldName:y.account?.fields?.userId||"userId",index:!0},accessToken:{type:"string",required:!1,returned:!1,fieldName:y.account?.fields?.accessToken||"accessToken"},refreshToken:{type:"string",required:!1,returned:!1,fieldName:y.account?.fields?.refreshToken||"refreshToken"},idToken:{type:"string",required:!1,returned:!1,fieldName:y.account?.fields?.idToken||"idToken"},accessTokenExpiresAt:{type:"date",required:!1,returned:!1,fieldName:y.account?.fields?.accessTokenExpiresAt||"accessTokenExpiresAt"},refreshTokenExpiresAt:{type:"date",required:!1,returned:!1,fieldName:y.account?.fields?.refreshTokenExpiresAt||"refreshTokenExpiresAt"},scope:{type:"string",required:!1,fieldName:y.account?.fields?.scope||"scope"},password:{type:"string",required:!1,returned:!1,fieldName:y.account?.fields?.password||"password"},createdAt:{type:"date",required:!0,fieldName:y.account?.fields?.createdAt||"createdAt",defaultValue:()=>new Date},updatedAt:{type:"date",required:!0,fieldName:y.account?.fields?.updatedAt||"updatedAt",onUpdate:()=>new Date},...j?.fields,...y.account?.additionalFields},order:3},verification:{modelName:y.verification?.modelName||"verification",fields:{identifier:{type:"string",required:!0,fieldName:y.verification?.fields?.identifier||"identifier",index:!0},value:{type:"string",required:!0,fieldName:y.verification?.fields?.value||"value"},expiresAt:{type:"date",required:!0,fieldName:y.verification?.fields?.expiresAt||"expiresAt"},createdAt:{type:"date",required:!0,defaultValue:()=>new Date,fieldName:y.verification?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",required:!0,defaultValue:()=>new Date,onUpdate:()=>new Date,fieldName:y.verification?.fields?.updatedAt||"updatedAt"},...$?.fields,...y.verification?.additionalFields},order:4},...W,...i?s:{}}}},Le.__chunk_87698=(Ue,ie,o)=>{"use strict";o.d(ie,{ZR:()=>L,vV:()=>V,_K:()=>C});var d=o(20321),y=o(77438),h=o(95769);function i(k){return(k.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(N=>N.toLowerCase()).join("_")}function s(k){return(k.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((N,P,b)=>N+(b===0?P.toLowerCase():`${P[0].toUpperCase()}${P.slice(1)}`),"")}function c(k){return k}class O{static[y.i]="CasingCache";cache={};cachedTables={};convert;constructor(N){this.convert=N==="snake_case"?i:N==="camelCase"?s:c}getColumnCasing(N){if(!N.keyAsName)return N.name;let P=N.table[h.XI.Symbol.Schema]??"public",b=N.table[h.XI.Symbol.OriginalName],z=`${P}.${b}.${N.name}`;return this.cache[z]||this.cacheTable(N.table),this.cache[z]}cacheTable(N){let P=N[h.XI.Symbol.Schema]??"public",b=N[h.XI.Symbol.OriginalName],z=`${P}.${b}`;if(!this.cachedTables[z]){for(let F of Object.values(N[h.XI.Symbol.Columns])){let Q=`${z}.${F.name}`;this.cache[Q]=this.convert(F.name)}this.cachedTables[z]=!0}}clearCache(){this.cache={},this.cachedTables={}}}var j=o(21979),$=o(64354),W=o(6525),K=o(15294),I=o(38560),p=o(67365),_=o(1571),m=o(11999),q=o(70356),J=o(90208),a=o(40783);class V{static[y.i]="SQLiteDialect";casing;constructor(N){this.casing=new O(N?.casing)}escapeName(N){return`"${N}"`}escapeParam(N){return"?"}escapeString(N){return`'${N.replace(/'/g,"''")}'`}buildWithCTE(N){if(!N?.length)return;let P=[(0,I.ll)`with `];for(let[b,z]of N.entries())P.push((0,I.ll)`${I.ll.identifier(z._.alias)} as (${z._.sql})`),b<N.length-1&&P.push((0,I.ll)`, `);return P.push((0,I.ll)` `),I.ll.join(P)}buildDeleteQuery({table:N,where:P,returning:b,withList:z,limit:F,orderBy:Q}){let G=this.buildWithCTE(z),X=b?(0,I.ll)` returning ${this.buildSelection(b,{isSingleTable:!0})}`:void 0,oe=P?(0,I.ll)` where ${P}`:void 0,ne=this.buildOrderBy(Q),we=this.buildLimit(F);return(0,I.ll)`${G}delete from ${N}${oe}${X}${ne}${we}`}buildUpdateSet(N,P){let b=N[h.XI.Symbol.Columns],z=Object.keys(b).filter(Q=>P[Q]!==void 0||b[Q]?.onUpdateFn!==void 0),F=z.length;return I.ll.join(z.flatMap((Q,G)=>{let X=b[Q],oe=X.onUpdateFn?.(),ne=P[Q]??((0,y.is)(oe,I.Xs)?oe:I.ll.param(oe,X)),we=(0,I.ll)`${I.ll.identifier(this.casing.getColumnCasing(X))} = ${ne}`;return G<F-1?[we,I.ll.raw(", ")]:[we]}))}buildUpdateQuery({table:N,set:P,where:b,returning:z,withList:F,joins:Q,from:G,limit:X,orderBy:oe}){let ne=this.buildWithCTE(F),we=this.buildUpdateSet(N,P),Ee=G&&I.ll.join([I.ll.raw(" from "),this.buildFromTable(G)]),$e=this.buildJoins(Q),v=z?(0,I.ll)` returning ${this.buildSelection(z,{isSingleTable:!0})}`:void 0,Z=b?(0,I.ll)` where ${b}`:void 0,R=this.buildOrderBy(oe),S=this.buildLimit(X);return(0,I.ll)`${ne}update ${N} set ${we}${Ee}${$e}${Z}${v}${R}${S}`}buildSelection(N,{isSingleTable:P=!1}={}){let b=N.length,z=N.flatMap(({field:F},Q)=>{let G=[];if((0,y.is)(F,I.Xs.Aliased)&&F.isSelectionField)G.push(I.ll.identifier(F.fieldAlias));else if((0,y.is)(F,I.Xs.Aliased)||(0,y.is)(F,I.Xs)){let X=(0,y.is)(F,I.Xs.Aliased)?F.sql:F;P?G.push(new I.Xs(X.queryChunks.map(oe=>(0,y.is)(oe,j.V)?I.ll.identifier(this.casing.getColumnCasing(oe)):oe))):G.push(X),(0,y.is)(F,I.Xs.Aliased)&&G.push((0,I.ll)` as ${I.ll.identifier(F.fieldAlias)}`)}else if((0,y.is)(F,j.V)){let X=F.table[h.XI.Symbol.Name];F.columnType==="SQLiteNumericBigInt"?P?G.push((0,I.ll)`cast(${I.ll.identifier(this.casing.getColumnCasing(F))} as text)`):G.push((0,I.ll)`cast(${I.ll.identifier(X)}.${I.ll.identifier(this.casing.getColumnCasing(F))} as text)`):P?G.push(I.ll.identifier(this.casing.getColumnCasing(F))):G.push((0,I.ll)`${I.ll.identifier(X)}.${I.ll.identifier(this.casing.getColumnCasing(F))}`)}else if((0,y.is)(F,m.n)){let X=Object.entries(F._.selectedFields);if(X.length===1){let oe=X[0][1],ne=(0,y.is)(oe,I.Xs)?oe.decoder:(0,y.is)(oe,j.V)?{mapFromDriverValue:we=>oe.mapFromDriverValue(we)}:oe.sql.decoder;ne&&(F._.sql.decoder=ne)}G.push(F)}return Q<b-1&&G.push((0,I.ll)`, `),G});return I.ll.join(z)}buildJoins(N){if(!N||N.length===0)return;let P=[];if(N)for(let[b,z]of N.entries()){b===0&&P.push((0,I.ll)` `);let F=z.table,Q=z.on?(0,I.ll)` on ${z.on}`:void 0;if((0,y.is)(F,_.jo)){let G=F[_.jo.Symbol.Name],X=F[_.jo.Symbol.Schema],oe=F[_.jo.Symbol.OriginalName],ne=G===oe?void 0:z.alias;P.push((0,I.ll)`${I.ll.raw(z.joinType)} join ${X?(0,I.ll)`${I.ll.identifier(X)}.`:void 0}${I.ll.identifier(oe)}${ne&&(0,I.ll)` ${I.ll.identifier(ne)}`}${Q}`)}else P.push((0,I.ll)`${I.ll.raw(z.joinType)} join ${F}${Q}`);b<N.length-1&&P.push((0,I.ll)` `)}return I.ll.join(P)}buildLimit(N){return typeof N=="object"||typeof N=="number"&&N>=0?(0,I.ll)` limit ${N}`:void 0}buildOrderBy(N){let P=[];if(N)for(let[b,z]of N.entries())P.push(z),b<N.length-1&&P.push((0,I.ll)`, `);return P.length>0?(0,I.ll)` order by ${I.ll.join(P)}`:void 0}buildFromTable(N){return(0,y.is)(N,h.XI)&&N[h.XI.Symbol.IsAlias]?(0,I.ll)`${(0,I.ll)`${I.ll.identifier(N[h.XI.Symbol.Schema]??"")}.`.if(N[h.XI.Symbol.Schema])}${I.ll.identifier(N[h.XI.Symbol.OriginalName])} ${I.ll.identifier(N[h.XI.Symbol.Name])}`:N}buildSelectQuery({withList:N,fields:P,fieldsFlat:b,where:z,having:F,table:Q,joins:G,orderBy:X,groupBy:oe,limit:ne,offset:we,distinct:Ee,setOperators:$e}){let v=b??(0,q.He)(P);for(let H of v){let ue;if((0,y.is)(H.field,j.V)&&(0,h.Io)(H.field.table)!==((0,y.is)(Q,m.n)?Q._.alias:(0,y.is)(Q,a.V)?Q[J.n].name:(0,y.is)(Q,I.Xs)?void 0:(0,h.Io)(Q))&&(ue=H.field.table,!G?.some(({alias:x})=>x===(ue[h.XI.Symbol.IsAlias]?h.Io(ue):ue[h.XI.Symbol.BaseName])))){let x=(0,h.Io)(H.field.table);throw Error(`Your "${H.path.join("->")}" field references a column "${x}"."${H.field.name}", but the table "${x}" is not part of the query! Did you forget to join it?`)}}let Z=!G||G.length===0,R=this.buildWithCTE(N),S=Ee?(0,I.ll)` distinct`:void 0,E=this.buildSelection(v,{isSingleTable:Z}),A=this.buildFromTable(Q),U=this.buildJoins(G),te=z?(0,I.ll)` where ${z}`:void 0,Y=F?(0,I.ll)` having ${F}`:void 0,D=[];if(oe)for(let[H,ue]of oe.entries())D.push(ue),H<oe.length-1&&D.push((0,I.ll)`, `);let ee=D.length>0?(0,I.ll)` group by ${I.ll.join(D)}`:void 0,le=this.buildOrderBy(X),se=this.buildLimit(ne),ce=we?(0,I.ll)` offset ${we}`:void 0,me=(0,I.ll)`${R}select${S} ${E} from ${A}${U}${te}${ee}${Y}${le}${se}${ce}`;return $e.length>0?this.buildSetOperations(me,$e):me}buildSetOperations(N,P){let[b,...z]=P;if(!b)throw Error("Cannot pass undefined values to any set operator");return z.length===0?this.buildSetOperationQuery({leftSelect:N,setOperator:b}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:N,setOperator:b}),z)}buildSetOperationQuery({leftSelect:N,setOperator:{type:P,isAll:b,rightSelect:z,limit:F,orderBy:Q,offset:G}}){let X,oe=(0,I.ll)`${N.getSQL()} `,ne=(0,I.ll)`${z.getSQL()}`;if(Q&&Q.length>0){let v=[];for(let Z of Q)if((0,y.is)(Z,p.v))v.push(I.ll.identifier(Z.name));else if((0,y.is)(Z,I.Xs)){for(let R=0;R<Z.queryChunks.length;R++){let S=Z.queryChunks[R];(0,y.is)(S,p.v)&&(Z.queryChunks[R]=I.ll.identifier(this.casing.getColumnCasing(S)))}v.push((0,I.ll)`${Z}`)}else v.push((0,I.ll)`${Z}`);X=(0,I.ll)` order by ${I.ll.join(v,(0,I.ll)`, `)}`}let we=typeof F=="object"||typeof F=="number"&&F>=0?(0,I.ll)` limit ${F}`:void 0,Ee=I.ll.raw(`${P} ${b?"all ":""}`),$e=G?(0,I.ll)` offset ${G}`:void 0;return(0,I.ll)`${oe}${Ee}${ne}${X}${we}${$e}`}buildInsertQuery({table:N,values:P,onConflict:b,returning:z,withList:F,select:Q}){let G=[],X=Object.entries(N[h.XI.Symbol.Columns]).filter(([v,Z])=>!Z.shouldDisableInsert()),oe=X.map(([,v])=>I.ll.identifier(this.casing.getColumnCasing(v)));if(Q)(0,y.is)(P,I.Xs)?G.push(P):G.push(P.getSQL());else for(let[v,Z]of(G.push(I.ll.raw("values ")),P.entries())){let R=[];for(let[S,E]of X){let A=Z[S];if(A===void 0||(0,y.is)(A,I.Iw)&&A.value===void 0){let U;if(E.default!==null&&E.default!==void 0)U=(0,y.is)(E.default,I.Xs)?E.default:I.ll.param(E.default,E);else if(E.defaultFn!==void 0){let te=E.defaultFn();U=(0,y.is)(te,I.Xs)?te:I.ll.param(te,E)}else if(E.default||E.onUpdateFn===void 0)U=(0,I.ll)`null`;else{let te=E.onUpdateFn();U=(0,y.is)(te,I.Xs)?te:I.ll.param(te,E)}R.push(U)}else R.push(A)}G.push(R),v<P.length-1&&G.push((0,I.ll)`, `)}let ne=this.buildWithCTE(F),we=I.ll.join(G),Ee=z?(0,I.ll)` returning ${this.buildSelection(z,{isSingleTable:!0})}`:void 0,$e=b?.length?I.ll.join(b):void 0;return(0,I.ll)`${ne}insert into ${N} ${oe} ${we}${$e}${Ee}`}sqlToQuery(N,P){return N.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,invokeSource:P})}buildRelationalQuery({fullSchema:N,schema:P,tableNamesMap:b,table:z,tableConfig:F,queryConfig:Q,tableAlias:G,nestedQueryRelation:X,joinOn:oe}){let ne,we=[],Ee,$e,v=[],Z,R=[];if(Q===!0)we=Object.entries(F.columns).map(([S,E])=>({dbKey:E.name,tsKey:S,field:(0,d.ug)(E,G),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let S=Object.fromEntries(Object.entries(F.columns).map(([Y,D])=>[Y,(0,d.ug)(D,G)]));if(Q.where){let Y=typeof Q.where=="function"?Q.where(S,(0,W.mm)()):Q.where;Z=Y&&(0,d.yY)(Y,G)}let E=[],A=[];if(Q.columns){let Y=!1;for(let[D,ee]of Object.entries(Q.columns))ee!==void 0&&D in F.columns&&(Y||ee!==!0||(Y=!0),A.push(D));A.length>0&&(A=Y?A.filter(D=>Q.columns?.[D]===!0):Object.keys(F.columns).filter(D=>!A.includes(D)))}else A=Object.keys(F.columns);for(let Y of A){let D=F.columns[Y];E.push({tsKey:Y,value:D})}let U=[];if(Q.with&&(U=Object.entries(Q.with).filter(Y=>!!Y[1]).map(([Y,D])=>({tsKey:Y,queryConfig:D,relation:F.relations[Y]}))),Q.extras)for(let[Y,D]of Object.entries(typeof Q.extras=="function"?Q.extras(S,{sql:I.ll}):Q.extras))E.push({tsKey:Y,value:(0,d.Hs)(D,G)});for(let{tsKey:Y,value:D}of E)we.push({dbKey:(0,y.is)(D,I.Xs.Aliased)?D.fieldAlias:F.columns[Y].name,tsKey:Y,field:(0,y.is)(D,j.V)?(0,d.ug)(D,G):D,relationTableTsKey:void 0,isJson:!1,selection:[]});let te=typeof Q.orderBy=="function"?Q.orderBy(S,(0,W.rl)()):Q.orderBy??[];for(let{tsKey:Y,queryConfig:D,relation:ee}of(Array.isArray(te)||(te=[te]),v=te.map(le=>(0,y.is)(le,j.V)?(0,d.ug)(le,G):(0,d.yY)(le,G)),Ee=Q.limit,$e=Q.offset,U)){let le=(0,W.W0)(P,b,ee),se=b[(0,h.Lf)(ee.referencedTable)],ce=`${G}_${Y}`,me=(0,K.Uo)(...le.fields.map((x,fe)=>(0,K.eq)((0,d.ug)(le.references[fe],ce),(0,d.ug)(x,G)))),H=this.buildRelationalQuery({fullSchema:N,schema:P,tableNamesMap:b,table:N[se],tableConfig:P[se],queryConfig:(0,y.is)(ee,W.pD)?D===!0?{limit:1}:{...D,limit:1}:D,tableAlias:ce,joinOn:me,nestedQueryRelation:ee}),ue=(0,I.ll)`(${H.sql})`.as(Y);we.push({dbKey:Y,tsKey:Y,field:ue,relationTableTsKey:se,isJson:!0,selection:H.selection})}}if(we.length===0)throw new $.n9({message:`No fields selected for table "${F.tsName}" ("${G}"). You need to have at least one item in "columns", "with" or "extras". If you need to select all columns, omit the "columns" key or set it to undefined.`});if(Z=(0,K.Uo)(oe,Z),X){let S=(0,I.ll)`json_array(${I.ll.join(we.map(({field:A})=>(0,y.is)(A,p.v)?I.ll.identifier(this.casing.getColumnCasing(A)):(0,y.is)(A,I.Xs.Aliased)?A.sql:A),(0,I.ll)`, `)})`;(0,y.is)(X,W.iv)&&(S=(0,I.ll)`coalesce(json_group_array(${S}), json_array())`);let E=[{dbKey:"data",tsKey:"data",field:S.as("data"),isJson:!0,relationTableTsKey:F.tsName,selection:we}];Ee!==void 0||$e!==void 0||v.length>0?(ne=this.buildSelectQuery({table:(0,d.oG)(z,G),fields:{},fieldsFlat:[{path:[],field:I.ll.raw("*")}],where:Z,limit:Ee,offset:$e,orderBy:v,setOperators:[]}),Z=void 0,Ee=void 0,$e=void 0,v=void 0):ne=(0,d.oG)(z,G),ne=this.buildSelectQuery({table:(0,y.is)(ne,_.jo)?ne:new m.n(ne,{},G),fields:{},fieldsFlat:E.map(({field:A})=>({path:[],field:(0,y.is)(A,j.V)?(0,d.ug)(A,G):A})),joins:R,where:Z,limit:Ee,offset:$e,orderBy:v,setOperators:[]})}else ne=this.buildSelectQuery({table:(0,d.oG)(z,G),fields:{},fieldsFlat:we.map(({field:S})=>({path:[],field:(0,y.is)(S,j.V)?(0,d.ug)(S,G):S})),joins:R,where:Z,limit:Ee,offset:$e,orderBy:v,setOperators:[]});return{tableTsKey:F.tsName,sql:ne,selection:we}}}class C extends V{static[y.i]="SQLiteSyncDialect";migrate(N,P,b){let z=b===void 0||typeof b=="string"?"__drizzle_migrations":b.migrationsTable??"__drizzle_migrations",F=(0,I.ll)`
			CREATE TABLE IF NOT EXISTS ${I.ll.identifier(z)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at numeric
			)
		`;P.run(F);let Q=P.values((0,I.ll)`SELECT id, hash, created_at FROM ${I.ll.identifier(z)} ORDER BY created_at DESC LIMIT 1`)[0]??void 0;P.run((0,I.ll)`BEGIN`);try{for(let G of N)if(!Q||Number(Q[2])<G.folderMillis){for(let X of G.sql)P.run(I.ll.raw(X));P.run((0,I.ll)`INSERT INTO ${I.ll.identifier(z)} ("hash", "created_at") VALUES(${G.hash}, ${G.folderMillis})`)}P.run((0,I.ll)`COMMIT`)}catch(G){throw P.run((0,I.ll)`ROLLBACK`),G}}}class L extends V{static[y.i]="SQLiteAsyncDialect";async migrate(N,P,b){let z=b===void 0||typeof b=="string"?"__drizzle_migrations":b.migrationsTable??"__drizzle_migrations",F=(0,I.ll)`
			CREATE TABLE IF NOT EXISTS ${I.ll.identifier(z)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at numeric
			)
		`;await P.run(F);let Q=(await P.values((0,I.ll)`SELECT id, hash, created_at FROM ${I.ll.identifier(z)} ORDER BY created_at DESC LIMIT 1`))[0]??void 0;await P.transaction(async G=>{for(let X of N)if(!Q||Number(Q[2])<X.folderMillis){for(let oe of X.sql)await G.run(I.ll.raw(oe));await G.run((0,I.ll)`INSERT INTO ${I.ll.identifier(z)} ("hash", "created_at") VALUES(${X.hash}, ${X.folderMillis})`)}})}}},Le.__chunk_86962=(Ue,ie,o)=>{"use strict";o.d(ie,{E:()=>d});let d=Symbol.for("drizzle:Name")},Le.__chunk_86790=(Ue,ie,o)=>{"use strict";o.d(ie,{aj:()=>$,qq:()=>O,uW:()=>j});var d=o(50426),y=o(13191),h=o(98934),i=o(30543),s=o(13348);let c=s.looseObject({callbackURL:s.string(),codeVerifier:s.string(),errorURL:s.string().optional(),newUserURL:s.string().optional(),expiresAt:s.number(),link:s.object({email:s.string(),userId:s.coerce.string()}).optional(),requestSignUp:s.boolean().optional()});var O=class extends i.${code;details;constructor(W,K){super(W,K),this.code=K.code,this.details=K.details}};async function j(W,K,I){let p=(0,d.k)(32);if(W.context.oauthConfig.storeStateStrategy==="cookie"){let J=await(0,y.vX)({key:W.context.secret,data:JSON.stringify(K)}),a=W.context.createAuthCookie(I?.cookieName??"oauth_state",{maxAge:600});return W.setCookie(a.name,J,a.attributes),{state:p,codeVerifier:K.codeVerifier}}let _=W.context.createAuthCookie(I?.cookieName??"state",{maxAge:300});await W.setSignedCookie(_.name,p,W.context.secret,_.attributes);let m=new Date;m.setMinutes(m.getMinutes()+10);let q=await W.context.internalAdapter.createVerificationValue({value:JSON.stringify(K),identifier:p,expiresAt:m});if(!q)throw new O("Unable to create verification. Make sure the database adapter is properly working and there is a verification table in the database",{code:"state_generation_error"});return{state:q.identifier,codeVerifier:K.codeVerifier}}async function $(W,K,I){let p;if(W.context.oauthConfig.storeStateStrategy==="cookie"){let _=W.context.createAuthCookie(I?.cookieName??"oauth_state"),m=W.getCookie(_.name);if(!m)throw new O("State mismatch: auth state cookie not found",{code:"state_mismatch",details:{state:K}});try{let q=await(0,y.zp)({key:W.context.secret,data:m});p=c.parse(JSON.parse(q))}catch(q){throw new O("State invalid: Failed to decrypt or parse auth state",{code:"state_invalid",details:{state:K},cause:q})}(0,h.Aj)(W,_)}else{let _=await W.context.internalAdapter.findVerificationValue(K);if(!_)throw new O("State mismatch: verification not found",{code:"state_mismatch",details:{state:K}});p=c.parse(JSON.parse(_.value));let m=W.context.createAuthCookie(I?.cookieName??"state"),q=await W.getSignedCookie(m.name,W.context.secret);if(!W.context.oauthConfig.skipStateCookieCheck&&(!q||q!==K))throw new O("State mismatch: State not persisted correctly",{code:"state_security_mismatch",details:{state:K}});(0,h.Aj)(W,m),await W.context.internalAdapter.deleteVerificationValue(_.id)}if(p.expiresAt<Date.now())throw new O("Invalid state: request expired",{code:"state_mismatch",details:{expiresAt:p.expiresAt}});return p}},Le.__chunk_86439=(Ue,ie,o)=>{"use strict";o.d(ie,{r:()=>h});var d=o(26772),y=o(40168);let h=(0,d.CN)({is:i=>i.kind==="MergeQueryNode",create:(i,s)=>(0,d.CN)({kind:"MergeQueryNode",into:i,...s&&{with:s}}),cloneWithUsing:(i,s)=>(0,d.CN)({...i,using:s}),cloneWithWhen:(i,s)=>(0,d.CN)({...i,whens:i.whens?(0,d.CN)([...i.whens,s]):(0,d.CN)([s])}),cloneWithThen:(i,s)=>(0,d.CN)({...i,whens:i.whens?(0,d.CN)([...i.whens.slice(0,-1),y.t.cloneWithResult(i.whens[i.whens.length-1],s)]):void 0})})},Le.__chunk_86193=(Ue,ie,o)=>{"use strict";function d(y){return!!y&&(typeof y=="object"||typeof y=="function")&&typeof y.then=="function"}o.d(ie,{y:()=>d})},Le.__chunk_85725=(Ue,ie,o)=>{"use strict";o.d(ie,{D0:()=>y,Rd:()=>d,VS:()=>c,lF:()=>O,mx:()=>s,xW:()=>h});let d=new TextEncoder,y=new TextDecoder;function h(...j){let $=new Uint8Array(j.reduce((K,{length:I})=>K+I,0)),W=0;for(let K of j)$.set(K,W),W+=K.length;return $}function i(j,$,W){if($<0||$>=4294967296)throw RangeError(`value must be >= 0 and <= ${4294967295}. Received ${$}`);j.set([$>>>24,$>>>16,$>>>8,255&$],W)}function s(j){let $=Math.floor(j/4294967296),W=new Uint8Array(8);return i(W,$,0),i(W,j%4294967296,4),W}function c(j){let $=new Uint8Array(4);return i($,j),$}function O(j){let $=new Uint8Array(j.length);for(let W=0;W<j.length;W++){let K=j.charCodeAt(W);if(K>127)throw TypeError("non-ASCII string encountered in encode()");$[W]=K}return $}},Le.__chunk_83754=(Ue,ie,o)=>{"use strict";o.d(ie,{G:()=>h});var d=o(9300),y=o(26772);async function h(i){let s=new d.c,c=new d.c;return i.provideConnection(async O=>(s.resolve(O),await c.promise)).catch(O=>s.reject(O)),(0,y.CN)({connection:await s.promise,release:c.resolve})}},Le.__chunk_83504=(Ue,ie,o)=>{"use strict";function d(h){switch(h){case"a-z":return"abcdefghijklmnopqrstuvwxyz";case"A-Z":return"ABCDEFGHIJKLMNOPQRSTUVWXYZ";case"0-9":return"0123456789";case"-_":return"-_";default:throw Error(`Unsupported alphabet: ${h}`)}}function y(...h){let i=h.map(d).join("");if(i.length===0)throw Error("No valid characters provided for random string generation.");let s=i.length;return(c,...O)=>{let j;if(c<=0)throw Error("Length must be a positive integer.");let $=i,W=s;O.length>0&&(W=($=O.map(d).join("")).length);let K=Math.floor(256/W)*W,I=new Uint8Array(2*c),p=I.length,_="",m=p;for(;_.length<c;)m>=p&&(crypto.getRandomValues(I),m=0),(j=I[m++])<K&&(_+=$[j%W]);return _}}o.d(ie,{q:()=>y})},Le.__chunk_82891=(Ue,ie,o)=>{"use strict";o.d(ie,{V:()=>y});var d=o(26772);class y{nodeStack=[];#e=(0,d.CN)({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),RenameConstraintNode:this.transformRenameConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),RefreshMaterializedViewNode:this.transformRefreshMaterializedView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this),OutputNode:this.transformOutput.bind(this),OrActionNode:this.transformOrAction.bind(this),CollateNode:this.transformCollate.bind(this)});transformNode(i,s){if(!i)return i;this.nodeStack.push(i);let c=this.transformNodeImpl(i,s);return this.nodeStack.pop(),(0,d.CN)(c)}transformNodeImpl(i,s){return this.#e[i.kind](i,s)}transformNodeList(i,s){return i&&(0,d.CN)(i.map(c=>this.transformNode(c,s)))}transformSelectQuery(i,s){return{kind:"SelectQueryNode",from:this.transformNode(i.from,s),selections:this.transformNodeList(i.selections,s),distinctOn:this.transformNodeList(i.distinctOn,s),joins:this.transformNodeList(i.joins,s),groupBy:this.transformNode(i.groupBy,s),orderBy:this.transformNode(i.orderBy,s),where:this.transformNode(i.where,s),frontModifiers:this.transformNodeList(i.frontModifiers,s),endModifiers:this.transformNodeList(i.endModifiers,s),limit:this.transformNode(i.limit,s),offset:this.transformNode(i.offset,s),with:this.transformNode(i.with,s),having:this.transformNode(i.having,s),explain:this.transformNode(i.explain,s),setOperations:this.transformNodeList(i.setOperations,s),fetch:this.transformNode(i.fetch,s),top:this.transformNode(i.top,s)}}transformSelection(i,s){return{kind:"SelectionNode",selection:this.transformNode(i.selection,s)}}transformColumn(i,s){return{kind:"ColumnNode",column:this.transformNode(i.column,s)}}transformAlias(i,s){return{kind:"AliasNode",node:this.transformNode(i.node,s),alias:this.transformNode(i.alias,s)}}transformTable(i,s){return{kind:"TableNode",table:this.transformNode(i.table,s)}}transformFrom(i,s){return{kind:"FromNode",froms:this.transformNodeList(i.froms,s)}}transformReference(i,s){return{kind:"ReferenceNode",column:this.transformNode(i.column,s),table:this.transformNode(i.table,s)}}transformAnd(i,s){return{kind:"AndNode",left:this.transformNode(i.left,s),right:this.transformNode(i.right,s)}}transformOr(i,s){return{kind:"OrNode",left:this.transformNode(i.left,s),right:this.transformNode(i.right,s)}}transformValueList(i,s){return{kind:"ValueListNode",values:this.transformNodeList(i.values,s)}}transformParens(i,s){return{kind:"ParensNode",node:this.transformNode(i.node,s)}}transformJoin(i,s){return{kind:"JoinNode",joinType:i.joinType,table:this.transformNode(i.table,s),on:this.transformNode(i.on,s)}}transformRaw(i,s){return{kind:"RawNode",sqlFragments:(0,d.CN)([...i.sqlFragments]),parameters:this.transformNodeList(i.parameters,s)}}transformWhere(i,s){return{kind:"WhereNode",where:this.transformNode(i.where,s)}}transformInsertQuery(i,s){return{kind:"InsertQueryNode",into:this.transformNode(i.into,s),columns:this.transformNodeList(i.columns,s),values:this.transformNode(i.values,s),returning:this.transformNode(i.returning,s),onConflict:this.transformNode(i.onConflict,s),onDuplicateKey:this.transformNode(i.onDuplicateKey,s),endModifiers:this.transformNodeList(i.endModifiers,s),with:this.transformNode(i.with,s),ignore:i.ignore,orAction:this.transformNode(i.orAction,s),replace:i.replace,explain:this.transformNode(i.explain,s),defaultValues:i.defaultValues,top:this.transformNode(i.top,s),output:this.transformNode(i.output,s)}}transformValues(i,s){return{kind:"ValuesNode",values:this.transformNodeList(i.values,s)}}transformDeleteQuery(i,s){return{kind:"DeleteQueryNode",from:this.transformNode(i.from,s),using:this.transformNode(i.using,s),joins:this.transformNodeList(i.joins,s),where:this.transformNode(i.where,s),returning:this.transformNode(i.returning,s),endModifiers:this.transformNodeList(i.endModifiers,s),with:this.transformNode(i.with,s),orderBy:this.transformNode(i.orderBy,s),limit:this.transformNode(i.limit,s),explain:this.transformNode(i.explain,s),top:this.transformNode(i.top,s),output:this.transformNode(i.output,s)}}transformReturning(i,s){return{kind:"ReturningNode",selections:this.transformNodeList(i.selections,s)}}transformCreateTable(i,s){return{kind:"CreateTableNode",table:this.transformNode(i.table,s),columns:this.transformNodeList(i.columns,s),constraints:this.transformNodeList(i.constraints,s),temporary:i.temporary,ifNotExists:i.ifNotExists,onCommit:i.onCommit,frontModifiers:this.transformNodeList(i.frontModifiers,s),endModifiers:this.transformNodeList(i.endModifiers,s),selectQuery:this.transformNode(i.selectQuery,s)}}transformColumnDefinition(i,s){return{kind:"ColumnDefinitionNode",column:this.transformNode(i.column,s),dataType:this.transformNode(i.dataType,s),references:this.transformNode(i.references,s),primaryKey:i.primaryKey,autoIncrement:i.autoIncrement,unique:i.unique,notNull:i.notNull,unsigned:i.unsigned,defaultTo:this.transformNode(i.defaultTo,s),check:this.transformNode(i.check,s),generated:this.transformNode(i.generated,s),frontModifiers:this.transformNodeList(i.frontModifiers,s),endModifiers:this.transformNodeList(i.endModifiers,s),nullsNotDistinct:i.nullsNotDistinct,identity:i.identity,ifNotExists:i.ifNotExists}}transformAddColumn(i,s){return{kind:"AddColumnNode",column:this.transformNode(i.column,s)}}transformDropTable(i,s){return{kind:"DropTableNode",table:this.transformNode(i.table,s),ifExists:i.ifExists,cascade:i.cascade}}transformOrderBy(i,s){return{kind:"OrderByNode",items:this.transformNodeList(i.items,s)}}transformOrderByItem(i,s){return{kind:"OrderByItemNode",orderBy:this.transformNode(i.orderBy,s),direction:this.transformNode(i.direction,s),collation:this.transformNode(i.collation,s),nulls:i.nulls}}transformGroupBy(i,s){return{kind:"GroupByNode",items:this.transformNodeList(i.items,s)}}transformGroupByItem(i,s){return{kind:"GroupByItemNode",groupBy:this.transformNode(i.groupBy,s)}}transformUpdateQuery(i,s){return{kind:"UpdateQueryNode",table:this.transformNode(i.table,s),from:this.transformNode(i.from,s),joins:this.transformNodeList(i.joins,s),where:this.transformNode(i.where,s),updates:this.transformNodeList(i.updates,s),returning:this.transformNode(i.returning,s),endModifiers:this.transformNodeList(i.endModifiers,s),with:this.transformNode(i.with,s),explain:this.transformNode(i.explain,s),limit:this.transformNode(i.limit,s),top:this.transformNode(i.top,s),output:this.transformNode(i.output,s),orderBy:this.transformNode(i.orderBy,s)}}transformColumnUpdate(i,s){return{kind:"ColumnUpdateNode",column:this.transformNode(i.column,s),value:this.transformNode(i.value,s)}}transformLimit(i,s){return{kind:"LimitNode",limit:this.transformNode(i.limit,s)}}transformOffset(i,s){return{kind:"OffsetNode",offset:this.transformNode(i.offset,s)}}transformOnConflict(i,s){return{kind:"OnConflictNode",columns:this.transformNodeList(i.columns,s),constraint:this.transformNode(i.constraint,s),indexExpression:this.transformNode(i.indexExpression,s),indexWhere:this.transformNode(i.indexWhere,s),updates:this.transformNodeList(i.updates,s),updateWhere:this.transformNode(i.updateWhere,s),doNothing:i.doNothing}}transformOnDuplicateKey(i,s){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(i.updates,s)}}transformCreateIndex(i,s){return{kind:"CreateIndexNode",name:this.transformNode(i.name,s),table:this.transformNode(i.table,s),columns:this.transformNodeList(i.columns,s),unique:i.unique,using:this.transformNode(i.using,s),ifNotExists:i.ifNotExists,where:this.transformNode(i.where,s),nullsNotDistinct:i.nullsNotDistinct}}transformList(i,s){return{kind:"ListNode",items:this.transformNodeList(i.items,s)}}transformDropIndex(i,s){return{kind:"DropIndexNode",name:this.transformNode(i.name,s),table:this.transformNode(i.table,s),ifExists:i.ifExists,cascade:i.cascade}}transformPrimaryKeyConstraint(i,s){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(i.columns,s),name:this.transformNode(i.name,s),deferrable:i.deferrable,initiallyDeferred:i.initiallyDeferred}}transformUniqueConstraint(i,s){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(i.columns,s),name:this.transformNode(i.name,s),nullsNotDistinct:i.nullsNotDistinct,deferrable:i.deferrable,initiallyDeferred:i.initiallyDeferred}}transformForeignKeyConstraint(i,s){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(i.columns,s),references:this.transformNode(i.references,s),name:this.transformNode(i.name,s),onDelete:i.onDelete,onUpdate:i.onUpdate,deferrable:i.deferrable,initiallyDeferred:i.initiallyDeferred}}transformSetOperation(i,s){return{kind:"SetOperationNode",operator:i.operator,expression:this.transformNode(i.expression,s),all:i.all}}transformReferences(i,s){return{kind:"ReferencesNode",table:this.transformNode(i.table,s),columns:this.transformNodeList(i.columns,s),onDelete:i.onDelete,onUpdate:i.onUpdate}}transformCheckConstraint(i,s){return{kind:"CheckConstraintNode",expression:this.transformNode(i.expression,s),name:this.transformNode(i.name,s)}}transformWith(i,s){return{kind:"WithNode",expressions:this.transformNodeList(i.expressions,s),recursive:i.recursive}}transformCommonTableExpression(i,s){return{kind:"CommonTableExpressionNode",name:this.transformNode(i.name,s),materialized:i.materialized,expression:this.transformNode(i.expression,s)}}transformCommonTableExpressionName(i,s){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(i.table,s),columns:this.transformNodeList(i.columns,s)}}transformHaving(i,s){return{kind:"HavingNode",having:this.transformNode(i.having,s)}}transformCreateSchema(i,s){return{kind:"CreateSchemaNode",schema:this.transformNode(i.schema,s),ifNotExists:i.ifNotExists}}transformDropSchema(i,s){return{kind:"DropSchemaNode",schema:this.transformNode(i.schema,s),ifExists:i.ifExists,cascade:i.cascade}}transformAlterTable(i,s){return{kind:"AlterTableNode",table:this.transformNode(i.table,s),renameTo:this.transformNode(i.renameTo,s),setSchema:this.transformNode(i.setSchema,s),columnAlterations:this.transformNodeList(i.columnAlterations,s),addConstraint:this.transformNode(i.addConstraint,s),dropConstraint:this.transformNode(i.dropConstraint,s),renameConstraint:this.transformNode(i.renameConstraint,s),addIndex:this.transformNode(i.addIndex,s),dropIndex:this.transformNode(i.dropIndex,s)}}transformDropColumn(i,s){return{kind:"DropColumnNode",column:this.transformNode(i.column,s)}}transformRenameColumn(i,s){return{kind:"RenameColumnNode",column:this.transformNode(i.column,s),renameTo:this.transformNode(i.renameTo,s)}}transformAlterColumn(i,s){return{kind:"AlterColumnNode",column:this.transformNode(i.column,s),dataType:this.transformNode(i.dataType,s),dataTypeExpression:this.transformNode(i.dataTypeExpression,s),setDefault:this.transformNode(i.setDefault,s),dropDefault:i.dropDefault,setNotNull:i.setNotNull,dropNotNull:i.dropNotNull}}transformModifyColumn(i,s){return{kind:"ModifyColumnNode",column:this.transformNode(i.column,s)}}transformAddConstraint(i,s){return{kind:"AddConstraintNode",constraint:this.transformNode(i.constraint,s)}}transformDropConstraint(i,s){return{kind:"DropConstraintNode",constraintName:this.transformNode(i.constraintName,s),ifExists:i.ifExists,modifier:i.modifier}}transformRenameConstraint(i,s){return{kind:"RenameConstraintNode",oldName:this.transformNode(i.oldName,s),newName:this.transformNode(i.newName,s)}}transformCreateView(i,s){return{kind:"CreateViewNode",name:this.transformNode(i.name,s),temporary:i.temporary,orReplace:i.orReplace,ifNotExists:i.ifNotExists,materialized:i.materialized,columns:this.transformNodeList(i.columns,s),as:this.transformNode(i.as,s)}}transformRefreshMaterializedView(i,s){return{kind:"RefreshMaterializedViewNode",name:this.transformNode(i.name,s),concurrently:i.concurrently,withNoData:i.withNoData}}transformDropView(i,s){return{kind:"DropViewNode",name:this.transformNode(i.name,s),ifExists:i.ifExists,materialized:i.materialized,cascade:i.cascade}}transformGenerated(i,s){return{kind:"GeneratedNode",byDefault:i.byDefault,always:i.always,identity:i.identity,stored:i.stored,expression:this.transformNode(i.expression,s)}}transformDefaultValue(i,s){return{kind:"DefaultValueNode",defaultValue:this.transformNode(i.defaultValue,s)}}transformOn(i,s){return{kind:"OnNode",on:this.transformNode(i.on,s)}}transformSelectModifier(i,s){return{kind:"SelectModifierNode",modifier:i.modifier,rawModifier:this.transformNode(i.rawModifier,s),of:this.transformNodeList(i.of,s)}}transformCreateType(i,s){return{kind:"CreateTypeNode",name:this.transformNode(i.name,s),enum:this.transformNode(i.enum,s)}}transformDropType(i,s){return{kind:"DropTypeNode",name:this.transformNode(i.name,s),ifExists:i.ifExists}}transformExplain(i,s){return{kind:"ExplainNode",format:i.format,options:this.transformNode(i.options,s)}}transformSchemableIdentifier(i,s){return{kind:"SchemableIdentifierNode",schema:this.transformNode(i.schema,s),identifier:this.transformNode(i.identifier,s)}}transformAggregateFunction(i,s){return{kind:"AggregateFunctionNode",func:i.func,aggregated:this.transformNodeList(i.aggregated,s),distinct:i.distinct,orderBy:this.transformNode(i.orderBy,s),withinGroup:this.transformNode(i.withinGroup,s),filter:this.transformNode(i.filter,s),over:this.transformNode(i.over,s)}}transformOver(i,s){return{kind:"OverNode",orderBy:this.transformNode(i.orderBy,s),partitionBy:this.transformNode(i.partitionBy,s)}}transformPartitionBy(i,s){return{kind:"PartitionByNode",items:this.transformNodeList(i.items,s)}}transformPartitionByItem(i,s){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(i.partitionBy,s)}}transformBinaryOperation(i,s){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(i.leftOperand,s),operator:this.transformNode(i.operator,s),rightOperand:this.transformNode(i.rightOperand,s)}}transformUnaryOperation(i,s){return{kind:"UnaryOperationNode",operator:this.transformNode(i.operator,s),operand:this.transformNode(i.operand,s)}}transformUsing(i,s){return{kind:"UsingNode",tables:this.transformNodeList(i.tables,s)}}transformFunction(i,s){return{kind:"FunctionNode",func:i.func,arguments:this.transformNodeList(i.arguments,s)}}transformCase(i,s){return{kind:"CaseNode",value:this.transformNode(i.value,s),when:this.transformNodeList(i.when,s),else:this.transformNode(i.else,s),isStatement:i.isStatement}}transformWhen(i,s){return{kind:"WhenNode",condition:this.transformNode(i.condition,s),result:this.transformNode(i.result,s)}}transformJSONReference(i,s){return{kind:"JSONReferenceNode",reference:this.transformNode(i.reference,s),traversal:this.transformNode(i.traversal,s)}}transformJSONPath(i,s){return{kind:"JSONPathNode",inOperator:this.transformNode(i.inOperator,s),pathLegs:this.transformNodeList(i.pathLegs,s)}}transformJSONPathLeg(i,s){return{kind:"JSONPathLegNode",type:i.type,value:i.value}}transformJSONOperatorChain(i,s){return{kind:"JSONOperatorChainNode",operator:this.transformNode(i.operator,s),values:this.transformNodeList(i.values,s)}}transformTuple(i,s){return{kind:"TupleNode",values:this.transformNodeList(i.values,s)}}transformMergeQuery(i,s){return{kind:"MergeQueryNode",into:this.transformNode(i.into,s),using:this.transformNode(i.using,s),whens:this.transformNodeList(i.whens,s),with:this.transformNode(i.with,s),top:this.transformNode(i.top,s),endModifiers:this.transformNodeList(i.endModifiers,s),output:this.transformNode(i.output,s),returning:this.transformNode(i.returning,s)}}transformMatched(i,s){return{kind:"MatchedNode",not:i.not,bySource:i.bySource}}transformAddIndex(i,s){return{kind:"AddIndexNode",name:this.transformNode(i.name,s),columns:this.transformNodeList(i.columns,s),unique:i.unique,using:this.transformNode(i.using,s),ifNotExists:i.ifNotExists}}transformCast(i,s){return{kind:"CastNode",expression:this.transformNode(i.expression,s),dataType:this.transformNode(i.dataType,s)}}transformFetch(i,s){return{kind:"FetchNode",rowCount:this.transformNode(i.rowCount,s),modifier:i.modifier}}transformTop(i,s){return{kind:"TopNode",expression:i.expression,modifiers:i.modifiers}}transformOutput(i,s){return{kind:"OutputNode",selections:this.transformNodeList(i.selections,s)}}transformDataType(i,s){return i}transformSelectAll(i,s){return i}transformIdentifier(i,s){return i}transformValue(i,s){return i}transformPrimitiveValueList(i,s){return i}transformOperator(i,s){return i}transformDefaultInsertValue(i,s){return i}transformOrAction(i,s){return i}transformCollate(i,s){return i}}},Le.__chunk_82057=(Ue,ie,o)=>{"use strict";o.d(ie,{J:()=>K,G:()=>function p(_){return(0,d.Tn)(_)?p(_((0,$.A)())):(0,d.MH)(_)?_.map(m=>W(m)):[W(_)]}});var d=o(26772),y=o(12163),h=o(9822);let i=(0,d.CN)({is:p=>p.kind==="SelectionNode",create:p=>(0,d.CN)({kind:"SelectionNode",selection:p}),createSelectAll:()=>(0,d.CN)({kind:"SelectionNode",selection:h.U.create()}),createSelectAllFromTable:p=>(0,d.CN)({kind:"SelectionNode",selection:y.q.createSelectAll(p)})});var s=o(66557),c=o(96499),O=o(80282),j=o(7286),$=o(55096);function W(p){return(0,d.Kg)(p)?i.create((0,s.DT)(p)):(0,c.C)(p)?i.create(p.toOperationNode()):i.create((0,O.v0)(p))}function K(p){return p?Array.isArray(p)?p.map(I):[I(p)]:[i.createSelectAll()]}function I(p){if((0,d.Kg)(p))return i.createSelectAllFromTable((0,j.M$)(p));throw Error(`invalid value selectAll expression: ${JSON.stringify(p)}`)}},Le.__chunk_81187=(Ue,ie,o)=>{"use strict";function d(k,N=""){if(!Number.isSafeInteger(k)||k<0){let P=N&&`"${N}" `;throw Error(`${P}expected integer >= 0, got ${k}`)}}function y(k,N,P=""){let b=k instanceof Uint8Array||ArrayBuffer.isView(k)&&k.constructor.name==="Uint8Array",z=k?.length,F=N!==void 0;if(!b||F&&z!==N)throw Error((P&&`"${P}" `)+"expected Uint8Array"+(F?` of length ${N}`:"")+", got "+(b?`length=${z}`:`type=${typeof k}`));return k}function h(k){if(typeof k!="function"||typeof k.create!="function")throw Error("Hash must wrapped by utils.createHasher");d(k.outputLen),d(k.blockLen)}function i(k,N=!0){if(k.destroyed)throw Error("Hash instance has been destroyed");if(N&&k.finished)throw Error("Hash#digest() has already been called")}function s(k,N){y(k,void 0,"digestInto() output");let P=N.outputLen;if(k.length<P)throw Error('"digestInto() output" expected to be of length >='+P)}function c(k){return new Uint32Array(k.buffer,k.byteOffset,Math.floor(k.byteLength/4))}function O(...k){for(let N=0;N<k.length;N++)k[N].fill(0)}function j(k){return new DataView(k.buffer,k.byteOffset,k.byteLength)}function $(k,N){return k<<32-N|k>>>N}function W(k,N){return k<<N|k>>>32-N>>>0}o.d(ie,{$h:()=>J,CC:()=>i,DH:()=>c,DO:()=>y,Fe:()=>d,Ht:()=>s,K_:()=>a,O8:()=>j,Ow:()=>$,aT:()=>m,aZ:()=>W,fd:()=>K,nx:()=>L,qj:()=>C,sd:()=>h,tY:()=>V,uH:()=>O});let K=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68?k=>k:function(k){for(let P=0;P<k.length;P++){var N;k[P]=(N=k[P])<<24&4278190080|N<<8&16711680|N>>>8&65280|N>>>24&255}return k},I=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",p={_0:48,_9:57,A:65,F:70,a:97,f:102};function _(k){return k>=p._0&&k<=p._9?k-p._0:k>=p.A&&k<=p.F?k-(p.A-10):k>=p.a&&k<=p.f?k-(p.a-10):void 0}function m(k){if(typeof k!="string")throw Error("hex string expected, got "+typeof k);if(I)return Uint8Array.fromHex(k);let N=k.length,P=N/2;if(N%2)throw Error("hex string expected, got unpadded hex of length "+N);let b=new Uint8Array(P);for(let z=0,F=0;z<P;z++,F+=2){let Q=_(k.charCodeAt(F)),G=_(k.charCodeAt(F+1));if(Q===void 0||G===void 0)throw Error('hex string expected, got non-hex character "'+(k[F]+k[F+1])+'" at index '+F);b[z]=16*Q+G}return b}let q=async()=>{};async function J(k,N,P){let b=Date.now();for(let z=0;z<k;z++){P(z);let F=Date.now()-b;F>=0&&F<N||(await q(),b+=F)}}function a(k,N=""){return typeof k=="string"?function(P){if(typeof P!="string")throw Error("string expected");return new Uint8Array(new TextEncoder().encode(P))}(k):y(k,void 0,N)}function V(k,N){if(N!==void 0&&{}.toString.call(N)!=="[object Object]")throw Error("options must be object or undefined");return Object.assign(k,N)}function C(k,N={}){let P=(z,F)=>k(F).update(z).digest(),b=k(void 0);return P.outputLen=b.outputLen,P.blockLen=b.blockLen,P.create=z=>k(z),Object.assign(P,N),Object.freeze(P)}let L=k=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,k])})},Le.__chunk_80766=(Ue,ie,o)=>{"use strict";o.d(ie,{E:()=>I,B:()=>p});var d=o(30543),y=o(51016),h=o(65307),i=o(81187);function s(_,m,q,J){var a,V,C,L,k;let N,{c:P,dkLen:b,DK:z,PRF:F,PRFSalt:Q}=function(ne,we,Ee,$e){(0,i.sd)(ne);let{c:v,dkLen:Z,asyncTick:R}=(0,i.tY)({dkLen:32,asyncTick:10},$e);if((0,i.Fe)(v,"c"),(0,i.Fe)(Z,"dkLen"),(0,i.Fe)(R,"asyncTick"),v<1)throw Error("iterations (c) must be >= 1");let S=(0,i.K_)(we,"password"),E=(0,i.K_)(Ee,"salt"),A=new Uint8Array(Z),U=h.w.create(ne,S),te=U._cloneInto().update(E);return{c:v,dkLen:Z,asyncTick:R,DK:A,PRF:U,PRFSalt:te}}(_,m,q,J),G=new Uint8Array(4),X=(0,i.O8)(G),oe=new Uint8Array(F.outputLen);for(let ne=1,we=0;we<b;ne++,we+=F.outputLen){let Ee=z.subarray(we,we+F.outputLen);X.setInt32(0,ne,!1),(N=Q._cloneInto(N)).update(G).digestInto(oe),Ee.set(oe.subarray(0,Ee.length));for(let $e=1;$e<P;$e++){F._cloneInto(N).update(oe).digestInto(oe);for(let v=0;v<Ee.length;v++)Ee[v]^=oe[v]}}return a=F,V=Q,C=z,L=N,k=oe,a.destroy(),V.destroy(),L&&L.destroy(),(0,i.uH)(k),C}var c=o(13839);function O(_,m,q,J,a,V){let C=_[m++]^q[J++],L=_[m++]^q[J++],k=_[m++]^q[J++],N=_[m++]^q[J++],P=_[m++]^q[J++],b=_[m++]^q[J++],z=_[m++]^q[J++],F=_[m++]^q[J++],Q=_[m++]^q[J++],G=_[m++]^q[J++],X=_[m++]^q[J++],oe=_[m++]^q[J++],ne=_[m++]^q[J++],we=_[m++]^q[J++],Ee=_[m++]^q[J++],$e=_[m++]^q[J++],v=C,Z=L,R=k,S=N,E=P,A=b,U=z,te=F,Y=Q,D=G,ee=X,le=oe,se=ne,ce=we,me=Ee,H=$e;for(let ue=0;ue<8;ue+=2)E^=(0,i.aZ)(v+se|0,7),Y^=(0,i.aZ)(E+v|0,9),se^=(0,i.aZ)(Y+E|0,13),v^=(0,i.aZ)(se+Y|0,18),D^=(0,i.aZ)(A+Z|0,7),ce^=(0,i.aZ)(D+A|0,9),Z^=(0,i.aZ)(ce+D|0,13),A^=(0,i.aZ)(Z+ce|0,18),me^=(0,i.aZ)(ee+U|0,7),R^=(0,i.aZ)(me+ee|0,9),U^=(0,i.aZ)(R+me|0,13),ee^=(0,i.aZ)(U+R|0,18),S^=(0,i.aZ)(H+le|0,7),te^=(0,i.aZ)(S+H|0,9),le^=(0,i.aZ)(te+S|0,13),H^=(0,i.aZ)(le+te|0,18),Z^=(0,i.aZ)(v+S|0,7),R^=(0,i.aZ)(Z+v|0,9),S^=(0,i.aZ)(R+Z|0,13),v^=(0,i.aZ)(S+R|0,18),U^=(0,i.aZ)(A+E|0,7),te^=(0,i.aZ)(U+A|0,9),E^=(0,i.aZ)(te+U|0,13),A^=(0,i.aZ)(E+te|0,18),le^=(0,i.aZ)(ee+D|0,7),Y^=(0,i.aZ)(le+ee|0,9),D^=(0,i.aZ)(Y+le|0,13),ee^=(0,i.aZ)(D+Y|0,18),se^=(0,i.aZ)(H+me|0,7),ce^=(0,i.aZ)(se+H|0,9),me^=(0,i.aZ)(ce+se|0,13),H^=(0,i.aZ)(me+ce|0,18);a[V++]=C+v|0,a[V++]=L+Z|0,a[V++]=k+R|0,a[V++]=N+S|0,a[V++]=P+E|0,a[V++]=b+A|0,a[V++]=z+U|0,a[V++]=F+te|0,a[V++]=Q+Y|0,a[V++]=G+D|0,a[V++]=X+ee|0,a[V++]=oe+le|0,a[V++]=ne+se|0,a[V++]=we+ce|0,a[V++]=Ee+me|0,a[V++]=$e+H|0}function j(_,m,q,J,a){let V=J+0,C=J+16*a;for(let L=0;L<16;L++)q[C+L]=_[m+(2*a-1)*16+L];for(let L=0;L<a;L++,V+=16,m+=16)O(q,C,_,m,q,V),L>0&&(C+=16),O(q,V,_,m+=16,q,C)}async function $(_,m,q){let{N:J,r:a,p:V,dkLen:C,blockSize32:L,V:k,B32:N,B:P,tmp:b,blockMixCb:z,asyncTick:F}=function(Q,G,X){let{N:oe,r:ne,p:we,dkLen:Ee,asyncTick:$e,maxmem:v,onProgress:Z}=(0,i.tY)({dkLen:32,asyncTick:10,maxmem:1073742848},X);if((0,i.Fe)(oe,"N"),(0,i.Fe)(ne,"r"),(0,i.Fe)(we,"p"),(0,i.Fe)(Ee,"dkLen"),(0,i.Fe)($e,"asyncTick"),(0,i.Fe)(v,"maxmem"),Z!==void 0&&typeof Z!="function")throw Error("progressCb must be a function");let R=128*ne,S=R/4;if(oe<=1||(oe&oe-1)!=0||oe>4294967296)throw Error('"N" expected a power of 2, and 2^1 <= N <= 2^32');if(we<1||we>137438953440/R)throw Error('"p" expected integer 1..((2^32 - 1) * 32) / (128 * r)');if(Ee<1||Ee>137438953440)throw Error('"dkLen" expected integer 1..(2^32 - 1) * 32');if(R*(oe+we)>v)throw Error('"maxmem" limit was hit, expected 128*r*(N+p) <= "maxmem"='+v);let E=s(c.sc,Q,G,{c:1,dkLen:R*we}),A=(0,i.DH)(E),U=(0,i.DH)(new Uint8Array(R*oe)),te=(0,i.DH)(new Uint8Array(R)),Y=()=>{};if(Z){let D=2*oe*we,ee=Math.max(Math.floor(D/1e4),1),le=0;Y=()=>{le++,Z&&(!(le%ee)||le===D)&&Z(le/D)}}return{N:oe,r:ne,p:we,dkLen:Ee,blockSize32:S,V:U,B32:A,B:E,tmp:te,blockMixCb:Y,asyncTick:$e}}(_,m,q);(0,i.fd)(N);for(let Q=0;Q<V;Q++){let G=L*Q;for(let oe=0;oe<L;oe++)k[oe]=N[G+oe];let X=0;await(0,i.$h)(J-1,F,()=>{j(k,X,k,X+=L,a),z()}),j(k,(J-1)*L,N,G,a),z(),await(0,i.$h)(J,F,()=>{let oe=(N[G+L-16]&J-1)>>>0;for(let ne=0;ne<L;ne++)b[ne]=N[G+ne]^k[oe*L+ne];j(b,0,N,G,a),z()})}return(0,i.fd)(N),function(Q,G,X,oe,ne){let we=s(c.sc,Q,X,{c:1,dkLen:G});return(0,i.uH)(X,oe,ne),we}(_,C,P,k,b)}let W={N:16384,r:16,p:1,dkLen:64};async function K(_,m){return await $(_.normalize("NFKC"),m,{N:W.N,p:W.p,r:W.r,dkLen:W.dkLen,maxmem:128*W.N*W.r*2})}let I=async _=>{let m=y.u.encode(crypto.getRandomValues(new Uint8Array(16))),q=await K(_,m);return`${m}:${y.u.encode(q)}`},p=async({hash:_,password:m})=>{let[q,J]=_.split(":");if(!q||!J)throw new d.$("Invalid password hash");return function(a,V){typeof a=="string"&&(a=new TextEncoder().encode(a)),typeof V=="string"&&(V=new TextEncoder().encode(V));let C=new Uint8Array(a),L=new Uint8Array(V),k=C.length^L.length,N=Math.max(C.length,L.length);for(let P=0;P<N;P++)k|=(P<C.length?C[P]:0)^(P<L.length?L[P]:0);return k===0}(await K(m,q),(0,i.aT)(J))}},Le.__chunk_80594=(Ue,ie,o)=>{"use strict";o.d(ie,{t:()=>a});var d=o(30145),y=o(26772),h=o(19989),i=o(43998);let s=(0,y.CN)({is:V=>V.kind==="AggregateFunctionNode",create:(V,C=[])=>(0,y.CN)({kind:"AggregateFunctionNode",func:V,aggregated:C}),cloneWithDistinct:V=>(0,y.CN)({...V,distinct:!0}),cloneWithOrderBy(V,C,L=!1){let k=L?"withinGroup":"orderBy";return(0,y.CN)({...V,[k]:V[k]?i.O.cloneWithItems(V[k],C):i.O.create(C)})},cloneWithFilter:(V,C)=>(0,y.CN)({...V,filter:V.filter?h.o.cloneWithOperation(V.filter,"And",C):h.o.create(C)}),cloneWithOrFilter:(V,C)=>(0,y.CN)({...V,filter:V.filter?h.o.cloneWithOperation(V.filter,"Or",C):h.o.create(C)}),cloneWithOver:(V,C)=>(0,y.CN)({...V,over:C})}),c=(0,y.CN)({is:V=>V.kind==="FunctionNode",create:(V,C)=>(0,y.CN)({kind:"FunctionNode",func:V,arguments:C})});var O=o(66557),j=o(82057),$=o(93692),W=o(9789),K=o(39523),I=o(34395),p=o(19598),_=o(28227);class m{#e;constructor(C){this.#e=(0,y.CN)(C)}get expressionType(){}as(C){return new q(this,C)}distinct(){return new m({...this.#e,aggregateFunctionNode:s.cloneWithDistinct(this.#e.aggregateFunctionNode)})}orderBy(...C){return new m({...this.#e,aggregateFunctionNode:_.L.cloneWithOrderByItems(this.#e.aggregateFunctionNode,(0,p.xk)(C))})}clearOrderBy(){return new m({...this.#e,aggregateFunctionNode:_.L.cloneWithoutOrderBy(this.#e.aggregateFunctionNode)})}withinGroupOrderBy(...C){return new m({...this.#e,aggregateFunctionNode:s.cloneWithOrderBy(this.#e.aggregateFunctionNode,(0,p.xk)(C),!0)})}filterWhere(...C){return new m({...this.#e,aggregateFunctionNode:s.cloneWithFilter(this.#e.aggregateFunctionNode,(0,I.GB)(C))})}filterWhereRef(C,L,k){return new m({...this.#e,aggregateFunctionNode:s.cloneWithFilter(this.#e.aggregateFunctionNode,(0,I.vC)(C,L,k))})}over(C){let L=(0,K.EQ)();return new m({...this.#e,aggregateFunctionNode:s.cloneWithOver(this.#e.aggregateFunctionNode,(C?C(L):L).toOperationNode())})}$call(C){return C(this)}$castTo(){return new m(this.#e)}$notNull(){return new m(this.#e)}toOperationNode(){return this.#e.aggregateFunctionNode}}class q{#e;#t;constructor(C,L){this.#e=C,this.#t=L}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return $.N.create(this.#e.toOperationNode(),W.O.create(this.#t))}}var J=o(7286);function a(){let V=(L,k)=>new d.Is(c.create(L,(0,O.kU)(k??[]))),C=(L,k)=>new m({aggregateFunctionNode:s.create(L,k?(0,O.kU)(k):void 0)});return Object.assign(V,{agg:C,avg:L=>C("avg",[L]),coalesce:(...L)=>V("coalesce",L),count:L=>C("count",[L]),countAll:L=>new m({aggregateFunctionNode:s.create("count",(0,j.J)(L))}),max:L=>C("max",[L]),min:L=>C("min",[L]),sum:L=>C("sum",[L]),any:L=>V("any",[L]),jsonAgg:L=>new m({aggregateFunctionNode:s.create("json_agg",[(0,y.Kg)(L)?(0,J.M$)(L):L.toOperationNode()])}),toJson:L=>new d.Is(c.create("to_json",[(0,y.Kg)(L)?(0,J.M$)(L):L.toOperationNode()]))})}},Le.__chunk_80338=(Ue,ie,o)=>{"use strict";o.d(ie,{LG:()=>s.LG,fv:()=>It,z8:()=>jt,sg:()=>Q,vv:()=>W,QB:()=>Ft,ld:()=>G});var d=o(26151);o(28195);var y=o(2795),h=o(30543),i=o(99597),s=o(54030),c=o(10816);function O(f){return f.context.skipOriginCheck===!0&&f.context.options.advanced?.disableCSRFCheck===void 0}let j=(0,i.CI)(function(){},"disableOriginCheck: true currently also disables CSRF checks. In a future version, disableOriginCheck will ONLY disable URL validation. To keep CSRF disabled, add disableCSRFCheck: true to your config."),$=(0,c.Di)(async f=>{if(f.request?.method==="GET"||f.request?.method==="OPTIONS"||f.request?.method==="HEAD"||!f.request||(await K(f),f.context.skipOriginCheck))return;let{body:ye,query:Ie}=f,Te=ye?.callbackURL||Ie?.callbackURL,ze=ye?.redirectTo,Ce=ye?.errorCallbackURL,He=ye?.newUserCallbackURL,Ge=(it,gt)=>{if(it&&!f.context.isTrustedOrigin(it,{allowRelativePaths:gt!=="origin"}))throw f.context.logger.error(`Invalid ${gt}: ${it}`),f.context.logger.info(`If it's a valid URL, please add ${it} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${f.context.trustedOrigins}`),new s.LG("FORBIDDEN",{message:`Invalid ${gt}`})};Te&&Ge(Te,"callbackURL"),ze&&Ge(ze,"redirectURL"),Ce&&Ge(Ce,"errorCallbackURL"),He&&Ge(He,"newUserCallbackURL")}),W=f=>(0,c.Di)(async ye=>{if(!ye.request||ye.context.skipOriginCheck)return;let Ie=f(ye),Te=(ze,Ce)=>{if(ze&&!ye.context.isTrustedOrigin(ze,{allowRelativePaths:Ce!=="origin"}))throw ye.context.logger.error(`Invalid ${Ce}: ${ze}`),ye.context.logger.info(`If it's a valid URL, please add ${ze} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${ye.context.trustedOrigins}`),new s.LG("FORBIDDEN",{message:`Invalid ${Ce}`})};for(let ze of Array.isArray(Ie)?Ie:[Ie])Te(ze,"callbackURL")});async function K(f,ye=!1){let Ie=f.request?.headers;if(!Ie||!f.request)return;let Te=Ie.get("origin")||Ie.get("referer")||"",ze=Ie.has("cookie");if(f.context.skipCSRFCheck)return;if(O(f)){f.context.options.advanced?.disableOriginCheck===!0&&j();return}let Ce=f.context.skipOriginCheck;if(Array.isArray(Ce))try{let Ge=new URL(f.context.baseURL).pathname,it=(0,i.Wi)(f.request.url,Ge);if(Ce.some(gt=>it.startsWith(gt)))return}catch{}if(!(ye||ze))return;if(!Te||Te==="null")throw new s.LG("FORBIDDEN",{message:h.q.MISSING_OR_NULL_ORIGIN});let He=Array.isArray(f.context.options.trustedOrigins)?f.context.trustedOrigins:[...f.context.trustedOrigins,...(await f.context.options.trustedOrigins?.(f.request))?.filter(Ge=>!!Ge)||[]];if(!He.some(Ge=>(0,y.Q)(Te,Ge)))throw f.context.logger.error(`Invalid origin: ${Te}`),f.context.logger.info(`If it's a valid URL, please add ${Te} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${He}`),new s.LG("FORBIDDEN",{message:"Invalid origin"})}let I=(0,c.Di)(async f=>{f.request&&await p(f)});async function p(f){let ye=f.request;if(!ye||f.context.skipCSRFCheck||O(f))return;let Ie=ye.headers;if(Ie.has("cookie"))return await K(f);let Te=Ie.get("Sec-Fetch-Site"),ze=Ie.get("Sec-Fetch-Mode"),Ce=Ie.get("Sec-Fetch-Dest");if(Te&&Te.trim()||ze&&ze.trim()||Ce&&Ce.trim()){if(Te==="cross-site"&&ze==="navigate")throw f.context.logger.error("Blocked cross-site navigation login attempt (CSRF protection)",{secFetchSite:Te,secFetchMode:ze,secFetchDest:Ce}),new s.LG("FORBIDDEN",{message:h.q.CROSS_SITE_NAVIGATION_LOGIN_BLOCKED});return await K(f,!0)}}var _=o(46227);let m=new Map;async function q(f,ye){if(!ye.rateLimit.enabled)return;let Ie=new URL(ye.baseURL).pathname,Te=(0,i.Wi)(f.url,Ie),ze=ye.rateLimit.window,Ce=ye.rateLimit.max,He=(0,d.O)(f,ye.options);if(!He)return;let Ge=(0,i.JW)(He,Te),it=[{pathMatcher:$t=>$t.startsWith("/sign-in")||$t.startsWith("/sign-up")||$t.startsWith("/change-password")||$t.startsWith("/change-email"),window:10,max:3}].find($t=>$t.pathMatcher(Te));for(let $t of(it&&(ze=it.window,Ce=it.max),ye.options.plugins||[]))if($t.rateLimit){let Pt=$t.rateLimit.find(qt=>qt.pathMatcher(Te));if(Pt){ze=Pt.window,Ce=Pt.max;break}}if(ye.rateLimit.customRules){let $t=Object.keys(ye.rateLimit.customRules).find(Pt=>Pt.includes("*")?(0,_.U)(Pt)(Te):Pt===Te);if($t){let Pt=ye.rateLimit.customRules[$t],qt=typeof Pt=="function"?await Pt(f,{window:ze,max:Ce}):Pt;if(qt&&(ze=qt.window,Ce=qt.max),qt===!1)return}}let gt=function($t,Pt){if($t.options.rateLimit?.customStorage)return $t.options.rateLimit.customStorage;let qt=$t.rateLimit.storage;return qt==="secondary-storage"?{get:async or=>{let Vt=await $t.options.secondaryStorage?.get(or);return Vt?(0,i.$l)(Vt):null},set:async(or,Vt,lr)=>{let ur=Pt?.window??$t.options.rateLimit?.window??10;await $t.options.secondaryStorage?.set?.(or,JSON.stringify(Vt),ur)}}:qt==="memory"?{async get(or){let Vt=m.get(or);return Vt?Date.now()>=Vt.expiresAt?(m.delete(or),null):Vt.data:null},async set(or,Vt,lr){let ur=Pt?.window??$t.options.rateLimit?.window??10,gr=Date.now()+1e3*ur;m.set(or,{data:Vt,expiresAt:gr})}}:function(or){let Vt="rateLimit",lr=or.adapter;return{get:async ur=>{let gr=(await lr.findMany({model:Vt,where:[{field:"key",value:ur}]}))[0];return typeof gr?.lastRequest=="bigint"&&(gr.lastRequest=Number(gr.lastRequest)),gr},set:async(ur,gr,Or)=>{try{Or?await lr.updateMany({model:Vt,where:[{field:"key",value:ur}],update:{count:gr.count,lastRequest:gr.lastRequest}}):await lr.create({model:Vt,data:{key:ur,count:gr.count,lastRequest:gr.lastRequest}})}catch(ir){or.logger.error("Error setting rate limit",ir)}}}}($t)}(ye,{window:ze}),at=await gt.get(Ge),wt=Date.now();if(at){var Tt,Qt,Jt,er;let $t=wt-at.lastRequest;if(Tt=Ce,Qt=ze,Jt=at,Date.now()-Jt.lastRequest<1e3*Qt&&Jt.count>=Tt)return er=Math.ceil((at.lastRequest+1e3*ze-Date.now())/1e3),new Response(JSON.stringify({message:"Too many requests. Please try again later."}),{status:429,statusText:"Too Many Requests",headers:{"X-Retry-After":er.toString()}});$t>1e3*ze?await gt.set(Ge,{...at,count:1,lastRequest:wt},!0):await gt.set(Ge,{...at,count:at.count+1,lastRequest:wt},!0)}else await gt.set(Ge,{key:Ge,count:1,lastRequest:wt})}var J=o(47121),a=o(12821);o(93219);var V=o(78139),C=o(13191),L=o(70809),k=o(98934),N=o(13348),P=o(31448),b=o(8342),z=o(21880);let F=()=>(0,c.Aw)("/get-session",{method:"GET",operationId:"getSession",query:L.SY,requireHeaders:!0,metadata:{openapi:{operationId:"getSession",description:"Get the current session",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",nullable:!0,properties:{session:{$ref:"#/components/schemas/Session"},user:{$ref:"#/components/schemas/User"}},required:["session","user"]}}}}}}}},async f=>{try{let ye=await f.getSignedCookie(f.context.authCookies.sessionToken.name,f.context.secret);if(!ye)return null;let Ie=(0,L.Zt)(f,f.context.authCookies.sessionData.name),Te=null;if(Ie){let at=f.context.options.session?.cookieCache?.strategy||"compact";if(at==="jwe"){let wt=await(0,V.Do)(Ie,f.context.secret,"better-auth-session");if(!wt||!wt.session||!wt.user)return(0,k.Aj)(f,f.context.authCookies.sessionData),f.json(null);Te={session:{session:wt.session,user:wt.user,updatedAt:wt.updatedAt,version:wt.version},expiresAt:wt.exp?1e3*wt.exp:Date.now()}}else if(at==="jwt"){let wt=await(0,V.RO)(Ie,f.context.secret);if(!wt||!wt.session||!wt.user)return(0,k.Aj)(f,f.context.authCookies.sessionData),f.json(null);Te={session:{session:wt.session,user:wt.user,updatedAt:wt.updatedAt,version:wt.version},expiresAt:wt.exp?1e3*wt.exp:Date.now()}}else{let wt=(0,i.$l)(b.a.decode(P.z.decode(Ie)));if(wt){if(!await(0,z.s)("SHA-256","base64urlnopad").verify(f.context.secret,JSON.stringify({...wt.session,expiresAt:wt.expiresAt}),wt.signature))return(0,k.Aj)(f,f.context.authCookies.sessionData),f.json(null);Te=wt}}}let ze=await f.getSignedCookie(f.context.authCookies.dontRememberToken.name,f.context.secret);if(Te?.session&&f.context.options.session?.cookieCache?.enabled&&!f.query?.disableCookieCache){let at=Te.session,wt=f.context.options.session?.cookieCache?.version,Tt="1";if(wt){if(typeof wt=="string")Tt=wt;else if(typeof wt=="function"){let Qt=wt(at.session,at.user);Tt=Qt instanceof Promise?await Qt:Qt}}if((at.version||"1")!==Tt)(0,k.Aj)(f,f.context.authCookies.sessionData);else{let Qt=new Date(at.session.expiresAt);if(Te.expiresAt<Date.now()||Qt<new Date)(0,k.Aj)(f,f.context.authCookies.sessionData);else{let Jt=f.context.sessionConfig.cookieRefreshCache;if(Jt===!1){f.context.session=at;let Pt=(0,a.dc)(f.context.options,{...at.session,expiresAt:new Date(at.session.expiresAt),createdAt:new Date(at.session.createdAt),updatedAt:new Date(at.session.updatedAt)}),qt=(0,a.kc)(f.context.options,{...at.user,createdAt:new Date(at.user.createdAt),updatedAt:new Date(at.user.updatedAt)});return f.json({session:Pt,user:qt})}if(Te.expiresAt-Date.now()<1e3*Jt.updateAge){let Pt=(0,J.p)(f.context.options.session?.cookieCache?.maxAge||300,"sec"),qt={session:{...at.session,expiresAt:Pt},user:at.user,updatedAt:Date.now()};await(0,k.vt)(f,qt,!1);let or=(0,a.dc)(f.context.options,{...qt.session,expiresAt:new Date(qt.session.expiresAt),createdAt:new Date(qt.session.createdAt),updatedAt:new Date(qt.session.updatedAt)}),Vt=(0,a.kc)(f.context.options,{...qt.user,createdAt:new Date(qt.user.createdAt),updatedAt:new Date(qt.user.updatedAt)});return f.context.session={session:or,user:Vt},f.json({session:or,user:Vt})}let er=(0,a.dc)(f.context.options,{...at.session,expiresAt:new Date(at.session.expiresAt),createdAt:new Date(at.session.createdAt),updatedAt:new Date(at.session.updatedAt)}),$t=(0,a.kc)(f.context.options,{...at.user,createdAt:new Date(at.user.createdAt),updatedAt:new Date(at.user.updatedAt)});return f.context.session={session:er,user:$t},f.json({session:er,user:$t})}}}let Ce=await f.context.internalAdapter.findSession(ye);if(f.context.session=Ce,!Ce||Ce.session.expiresAt<new Date)return(0,k.eC)(f),Ce&&await f.context.internalAdapter.deleteSession(Ce.session.token),f.json(null);if(ze||f.query?.disableRefresh){let at=(0,a.dc)(f.context.options,Ce.session),wt=(0,a.kc)(f.context.options,Ce.user);return f.json({session:at,user:wt})}let He=f.context.sessionConfig.expiresIn,Ge=f.context.sessionConfig.updateAge;if(Ce.session.expiresAt.valueOf()-1e3*He+1e3*Ge<=Date.now()&&(!f.query?.disableRefresh||!f.context.options.session?.disableSessionRefresh)){let at=await f.context.internalAdapter.updateSession(Ce.session.token,{expiresAt:(0,J.p)(f.context.sessionConfig.expiresIn,"sec"),updatedAt:new Date});if(!at)return(0,k.eC)(f),f.json(null,{status:401});let wt=(at.expiresAt.valueOf()-Date.now())/1e3;await(0,k.$G)(f,{session:at,user:Ce.user},!1,{maxAge:wt});let Tt=(0,a.dc)(f.context.options,at),Qt=(0,a.kc)(f.context.options,Ce.user);return f.json({session:Tt,user:Qt})}await(0,k.vt)(f,Ce,!!ze);let it=(0,a.dc)(f.context.options,Ce.session),gt=(0,a.kc)(f.context.options,Ce.user);return f.json({session:it,user:gt})}catch(ye){throw f.context.logger.error("INTERNAL_SERVER_ERROR",ye),new s.LG("INTERNAL_SERVER_ERROR",{message:h.q.FAILED_TO_GET_SESSION})}}),Q=async(f,ye)=>{if(f.context.session)return f.context.session;let Ie=await F()({...f,asResponse:!1,headers:f.headers,returnHeaders:!1,returnStatus:!1,query:{...ye,...f.query}}).catch(Te=>null);return f.context.session=Ie,Ie},G=(0,c.Di)(async f=>{let ye=await Q(f);if(!ye?.session)throw new s.LG("UNAUTHORIZED");return{session:ye}}),X=(0,c.Di)(async f=>{let ye=await Q(f,{disableCookieCache:!0});if(!ye?.session)throw new s.LG("UNAUTHORIZED");return{session:ye}});(0,c.Di)(async f=>{let ye=await Q(f);if(!ye?.session&&(f.request||f.headers))throw new s.LG("UNAUTHORIZED");return{session:ye}});let oe=(0,c.Di)(async f=>{let ye=await Q(f);if(!ye?.session)throw new s.LG("UNAUTHORIZED");if(f.context.sessionConfig.freshAge===0)return{session:ye};let Ie=f.context.sessionConfig.freshAge,Te=new Date(ye.session.updatedAt||ye.session.createdAt).getTime();if(!(Date.now()-Te<1e3*Ie))throw new s.LG("FORBIDDEN",{message:"Session is not fresh"});return{session:ye}}),ne=()=>(0,c.Aw)("/list-sessions",{method:"GET",operationId:"listUserSessions",use:[G],requireHeaders:!0,metadata:{openapi:{operationId:"listUserSessions",description:"List all active sessions for the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"array",items:{$ref:"#/components/schemas/Session"}}}}}}}}},async f=>{try{let ye=(await f.context.internalAdapter.listSessions(f.context.session.user.id)).filter(Ie=>Ie.expiresAt>new Date);return f.json(ye.map(Ie=>(0,a.dc)(f.context.options,Ie)))}catch(ye){throw f.context.logger.error(ye),f.error("INTERNAL_SERVER_ERROR")}}),we=(0,c.Aw)("/revoke-session",{method:"POST",body:N.object({token:N.string().meta({description:"The token to revoke"})}),use:[X],requireHeaders:!0,metadata:{openapi:{description:"Revoke a single session",requestBody:{content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",description:"The token to revoke"}},required:["token"]}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the session was revoked successfully"}},required:["status"]}}}}}}}},async f=>{let ye=f.body.token;if((await f.context.internalAdapter.findSession(ye))?.session.userId===f.context.session.user.id)try{await f.context.internalAdapter.deleteSession(ye)}catch(Ie){throw f.context.logger.error(Ie&&typeof Ie=="object"&&"name"in Ie?Ie.name:"",Ie),new s.LG("INTERNAL_SERVER_ERROR")}return f.json({status:!0})}),Ee=(0,c.Aw)("/revoke-sessions",{method:"POST",use:[X],requireHeaders:!0,metadata:{openapi:{description:"Revoke all sessions for the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if all sessions were revoked successfully"}},required:["status"]}}}}}}}},async f=>{try{await f.context.internalAdapter.deleteSessions(f.context.session.user.id)}catch(ye){throw f.context.logger.error(ye&&typeof ye=="object"&&"name"in ye?ye.name:"",ye),new s.LG("INTERNAL_SERVER_ERROR")}return f.json({status:!0})}),$e=(0,c.Aw)("/revoke-other-sessions",{method:"POST",requireHeaders:!0,use:[X],metadata:{openapi:{description:"Revoke all other sessions for the user except the current one",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if all other sessions were revoked successfully"}},required:["status"]}}}}}}}},async f=>{let ye=f.context.session;if(!ye.user)throw new s.LG("UNAUTHORIZED");let Ie=(await f.context.internalAdapter.listSessions(ye.user.id)).filter(Te=>Te.expiresAt>new Date).filter(Te=>Te.token!==f.context.session.session.token);return await Promise.all(Ie.map(Te=>f.context.internalAdapter.deleteSession(Te.token))),f.json({status:!0})});var v=o(90468);function Z(f,ye){return f&&ye.options.account?.encryptOAuthTokens?(0,C.zp)({key:ye.secret,data:f}):f}function R(f,ye){return ye.options.account?.encryptOAuthTokens&&f?(0,C.vX)({key:ye.secret,data:f}):f}var S=o(75385);let E=(0,c.Aw)("/list-accounts",{method:"GET",use:[G],metadata:{openapi:{operationId:"listUserAccounts",description:"List all accounts linked to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"array",items:{type:"object",properties:{id:{type:"string"},providerId:{type:"string"},createdAt:{type:"string",format:"date-time"},updatedAt:{type:"string",format:"date-time"},accountId:{type:"string"},userId:{type:"string"},scopes:{type:"array",items:{type:"string"}}},required:["id","providerId","createdAt","updatedAt","accountId","userId","scopes"]}}}}}}}}},async f=>{let ye=f.context.session,Ie=await f.context.internalAdapter.findAccounts(ye.user.id);return f.json(Ie.map(Te=>{let{scope:ze,...Ce}=(0,a.eP)(f.context.options,Te);return{...Ce,scopes:ze?.split(",")||[]}}))}),A=(0,c.Aw)("/link-social",{method:"POST",requireHeaders:!0,body:N.object({callbackURL:N.string().meta({description:"The URL to redirect to after the user has signed in"}).optional(),provider:S.w_,idToken:N.object({token:N.string(),nonce:N.string().optional(),accessToken:N.string().optional(),refreshToken:N.string().optional(),scopes:N.array(N.string()).optional()}).optional(),requestSignUp:N.boolean().optional(),scopes:N.array(N.string()).meta({description:"Additional scopes to request from the provider"}).optional(),errorCallbackURL:N.string().meta({description:"The URL to redirect to if there is an error during the link process"}).optional(),disableRedirect:N.boolean().meta({description:"Disable automatic redirection to the provider. Useful for handling the redirection yourself"}).optional(),additionalData:N.record(N.string(),N.any()).optional()}),use:[G],metadata:{openapi:{description:"Link a social account to the user",operationId:"linkSocialAccount",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{url:{type:"string",description:"The authorization URL to redirect the user to"},redirect:{type:"boolean",description:"Indicates if the user should be redirected to the authorization URL"},status:{type:"boolean"}},required:["redirect"]}}}}}}}},async f=>{let ye=f.context.session,Ie=f.context.socialProviders.find(Ce=>Ce.id===f.body.provider);if(!Ie)throw f.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:f.body.provider}),new s.LG("NOT_FOUND",{message:h.q.PROVIDER_NOT_FOUND});if(f.body.idToken){if(!Ie.verifyIdToken)throw f.context.logger.error("Provider does not support id token verification",{provider:f.body.provider}),new s.LG("NOT_FOUND",{message:h.q.ID_TOKEN_NOT_SUPPORTED});let{token:Ce,nonce:He}=f.body.idToken;if(!await Ie.verifyIdToken(Ce,He))throw f.context.logger.error("Invalid id token",{provider:f.body.provider}),new s.LG("UNAUTHORIZED",{message:h.q.INVALID_TOKEN});let Ge=await Ie.getUserInfo({idToken:Ce,accessToken:f.body.idToken.accessToken,refreshToken:f.body.idToken.refreshToken});if(!Ge||!Ge?.user)throw f.context.logger.error("Failed to get user info",{provider:f.body.provider}),new s.LG("UNAUTHORIZED",{message:h.q.FAILED_TO_GET_USER_INFO});let it=String(Ge.user.id);if(!Ge.user.email)throw f.context.logger.error("User email not found",{provider:f.body.provider}),new s.LG("UNAUTHORIZED",{message:h.q.USER_EMAIL_NOT_FOUND});if((await f.context.internalAdapter.findAccounts(ye.user.id)).find(gt=>gt.providerId===Ie.id&&gt.accountId===it))return f.json({url:"",status:!0,redirect:!1});if(!f.context.options.account?.accountLinking?.trustedProviders?.includes(Ie.id)&&!Ge.user.emailVerified||f.context.options.account?.accountLinking?.enabled===!1)throw new s.LG("UNAUTHORIZED",{message:"Account not linked - linking not allowed"});if(Ge.user.email!==ye.user.email&&f.context.options.account?.accountLinking?.allowDifferentEmails!==!0)throw new s.LG("UNAUTHORIZED",{message:"Account not linked - different emails not allowed"});try{await f.context.internalAdapter.createAccount({userId:ye.user.id,providerId:Ie.id,accountId:it,accessToken:f.body.idToken.accessToken,idToken:Ce,refreshToken:f.body.idToken.refreshToken,scope:f.body.idToken.scopes?.join(",")})}catch{throw new s.LG("EXPECTATION_FAILED",{message:"Account not linked - unable to create account"})}if(f.context.options.account?.accountLinking?.updateUserInfoOnLink===!0)try{await f.context.internalAdapter.updateUser(ye.user.id,{name:Ge.user?.name,image:Ge.user?.image})}catch(gt){console.warn("Could not update user - "+gt.toString())}return f.json({url:"",status:!0,redirect:!1})}let Te=await(0,v.Z)(f,{userId:ye.user.id,email:ye.user.email},f.body.additionalData),ze=await Ie.createAuthorizationURL({state:Te.state,codeVerifier:Te.codeVerifier,redirectURI:`${f.context.baseURL}/callback/${Ie.id}`,scopes:f.body.scopes});return f.body.disableRedirect||f.setHeader("Location",ze.toString()),f.json({url:ze.toString(),redirect:!f.body.disableRedirect})}),U=(0,c.Aw)("/unlink-account",{method:"POST",body:N.object({providerId:N.string(),accountId:N.string().optional()}),use:[oe],metadata:{openapi:{description:"Unlink an account",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async f=>{let{providerId:ye,accountId:Ie}=f.body,Te=await f.context.internalAdapter.findAccounts(f.context.session.user.id);if(Te.length===1&&!f.context.options.account?.accountLinking?.allowUnlinkingAll)throw new s.LG("BAD_REQUEST",{message:h.q.FAILED_TO_UNLINK_LAST_ACCOUNT});let ze=Te.find(Ce=>Ie?Ce.accountId===Ie&&Ce.providerId===ye:Ce.providerId===ye);if(!ze)throw new s.LG("BAD_REQUEST",{message:h.q.ACCOUNT_NOT_FOUND});return await f.context.internalAdapter.deleteAccount(ze.id),f.json({status:!0})}),te=(0,c.Aw)("/get-access-token",{method:"POST",body:N.object({providerId:N.string().meta({description:"The provider ID for the OAuth provider"}),accountId:N.string().meta({description:"The account ID associated with the refresh token"}).optional(),userId:N.string().meta({description:"The user ID associated with the account"}).optional()}),metadata:{openapi:{description:"Get a valid access token, doing a refresh if needed",responses:{200:{description:"A Valid access token",content:{"application/json":{schema:{type:"object",properties:{tokenType:{type:"string"},idToken:{type:"string"},accessToken:{type:"string"},accessTokenExpiresAt:{type:"string",format:"date-time"}}}}}},400:{description:"Invalid refresh token or provider configuration"}}}}},async f=>{let ye,{providerId:Ie,accountId:Te,userId:ze}=f.body||{},Ce=f.request,He=await Q(f);if(Ce&&!He)throw f.error("UNAUTHORIZED");let Ge=He?.user?.id||ze;if(!Ge)throw f.error("UNAUTHORIZED");if(!f.context.socialProviders.find(at=>at.id===Ie))throw new s.LG("BAD_REQUEST",{message:`Provider ${Ie} is not supported.`});let it=await(0,L.ec)(f);if(!(ye=it&&Ie===it.providerId&&(!Te||it.id===Te)?it:(await f.context.internalAdapter.findAccounts(Ge)).find(at=>Te?at.id===Te&&at.providerId===Ie:at.providerId===Ie)))throw new s.LG("BAD_REQUEST",{message:"Account not found"});let gt=f.context.socialProviders.find(at=>at.id===Ie);if(!gt)throw new s.LG("BAD_REQUEST",{message:`Provider ${Ie} not found.`});try{let at=null,wt=ye.accessTokenExpiresAt&&new Date(ye.accessTokenExpiresAt).getTime()-Date.now()<5e3;if(ye.refreshToken&&wt&&gt.refreshAccessToken){let Jt=await Z(ye.refreshToken,f.context);at=await gt.refreshAccessToken(Jt);let er={accessToken:await R(at.accessToken,f.context),accessTokenExpiresAt:at.accessTokenExpiresAt,refreshToken:await R(at.refreshToken,f.context),refreshTokenExpiresAt:at.refreshTokenExpiresAt},$t=null;ye.id&&($t=await f.context.internalAdapter.updateAccount(ye.id,er)),f.context.options.account?.storeAccountCookie&&await(0,L.Ce)(f,{...ye,...$t??er})}let Tt=at?.accessTokenExpiresAt?typeof at.accessTokenExpiresAt=="string"?new Date(at.accessTokenExpiresAt):at.accessTokenExpiresAt:ye.accessTokenExpiresAt?typeof ye.accessTokenExpiresAt=="string"?new Date(ye.accessTokenExpiresAt):ye.accessTokenExpiresAt:void 0,Qt={accessToken:at?.accessToken??await Z(ye.accessToken??"",f.context),accessTokenExpiresAt:Tt,scopes:ye.scope?.split(",")??[],idToken:at?.idToken??ye.idToken??void 0};return f.json(Qt)}catch(at){throw new s.LG("BAD_REQUEST",{message:"Failed to get a valid access token",cause:at})}}),Y=(0,c.Aw)("/refresh-token",{method:"POST",body:N.object({providerId:N.string().meta({description:"The provider ID for the OAuth provider"}),accountId:N.string().meta({description:"The account ID associated with the refresh token"}).optional(),userId:N.string().meta({description:"The user ID associated with the account"}).optional()}),metadata:{openapi:{description:"Refresh the access token using a refresh token",responses:{200:{description:"Access token refreshed successfully",content:{"application/json":{schema:{type:"object",properties:{tokenType:{type:"string"},idToken:{type:"string"},accessToken:{type:"string"},refreshToken:{type:"string"},accessTokenExpiresAt:{type:"string",format:"date-time"},refreshTokenExpiresAt:{type:"string",format:"date-time"}}}}}},400:{description:"Invalid refresh token or provider configuration"}}}}},async f=>{let ye,Ie,{providerId:Te,accountId:ze,userId:Ce}=f.body,He=f.request,Ge=await Q(f);if(He&&!Ge)throw f.error("UNAUTHORIZED");let it=Ge?.user?.id||Ce;if(!it)throw new s.LG("BAD_REQUEST",{message:"Either userId or session is required"});let gt=f.context.socialProviders.find(wt=>wt.id===Te);if(!gt)throw new s.LG("BAD_REQUEST",{message:`Provider ${Te} not found.`});if(!gt.refreshAccessToken)throw new s.LG("BAD_REQUEST",{message:`Provider ${Te} does not support token refreshing.`});let at=await(0,L.ec)(f);if(!(ye=at&&(!Te||Te===at?.providerId)?at:(await f.context.internalAdapter.findAccounts(it)).find(wt=>ze?wt.id===ze&&wt.providerId===Te:wt.providerId===Te)))throw new s.LG("BAD_REQUEST",{message:"Account not found"});if(!(Ie=at&&Te===at.providerId?at.refreshToken??void 0:ye.refreshToken??void 0))throw new s.LG("BAD_REQUEST",{message:"Refresh token not found"});try{let wt=await Z(Ie,f.context),Tt=await gt.refreshAccessToken(wt);if(ye.id){let Qt={...ye||{},accessToken:await R(Tt.accessToken,f.context),refreshToken:await R(Tt.refreshToken,f.context),accessTokenExpiresAt:Tt.accessTokenExpiresAt,refreshTokenExpiresAt:Tt.refreshTokenExpiresAt,scope:Tt.scopes?.join(",")||ye.scope,idToken:Tt.idToken||ye.idToken};await f.context.internalAdapter.updateAccount(ye.id,Qt)}return at&&Te===at.providerId&&f.context.options.account?.storeAccountCookie&&await(0,L.Ce)(f,{...at,accessToken:await R(Tt.accessToken,f.context),refreshToken:await R(Tt.refreshToken,f.context),accessTokenExpiresAt:Tt.accessTokenExpiresAt,refreshTokenExpiresAt:Tt.refreshTokenExpiresAt,scope:Tt.scopes?.join(",")||at.scope,idToken:Tt.idToken||at.idToken}),f.json({accessToken:Tt.accessToken,refreshToken:Tt.refreshToken,accessTokenExpiresAt:Tt.accessTokenExpiresAt,refreshTokenExpiresAt:Tt.refreshTokenExpiresAt,scope:Tt.scopes?.join(",")||ye.scope,idToken:Tt.idToken||ye.idToken,providerId:ye.providerId,accountId:ye.accountId})}catch(wt){throw new s.LG("BAD_REQUEST",{message:"Failed to refresh access token",cause:wt})}}),D=N.optional(N.object({accountId:N.string().meta({description:"The provider given account id for which to get the account info"}).optional()})),ee=(0,c.Aw)("/account-info",{method:"GET",use:[G],metadata:{openapi:{description:"Get the account info provided by the provider",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",properties:{id:{type:"string"},name:{type:"string"},email:{type:"string"},image:{type:"string"},emailVerified:{type:"boolean"}},required:["id","emailVerified"]},data:{type:"object",properties:{},additionalProperties:!0}},required:["user","data"],additionalProperties:!1}}}}}}},query:D},async f=>{let ye,Ie=f.query?.accountId;if(Ie){let He=await f.context.internalAdapter.findAccount(Ie);He&&(ye=He)}else if(f.context.options.account?.storeAccountCookie){let He=await(0,L.ec)(f);He&&(ye=He)}if(!ye||ye.userId!==f.context.session.user.id)throw new s.LG("BAD_REQUEST",{message:"Account not found"});let Te=f.context.socialProviders.find(He=>He.id===ye.providerId);if(!Te)throw new s.LG("INTERNAL_SERVER_ERROR",{message:`Provider account provider is ${ye.providerId} but it is not configured`});let ze=await te({...f,method:"POST",body:{accountId:ye.id,providerId:ye.providerId},returnHeaders:!1,returnStatus:!1});if(!ze.accessToken)throw new s.LG("BAD_REQUEST",{message:"Access token not found"});let Ce=await Te.getUserInfo({...ze,accessToken:ze.accessToken});return f.json(Ce)});var le=o(93222),se=o(38427);async function ce(f,ye,Ie,Te=3600,ze){return await(0,V.FA)({email:ye.toLowerCase(),updateTo:Ie,...ze},f,Te)}async function me(f,ye){if(!f.context.options.emailVerification?.sendVerificationEmail)throw f.context.logger.error("Verification email isn't enabled."),new s.LG("BAD_REQUEST",{message:"Verification email isn't enabled"});let Ie=await ce(f.context.secret,ye.email,void 0,f.context.options.emailVerification?.expiresIn),Te=f.body.callbackURL?encodeURIComponent(f.body.callbackURL):encodeURIComponent("/"),ze=`${f.context.baseURL}/verify-email?token=${Ie}&callbackURL=${Te}`;await f.context.runInBackgroundOrAwait(f.context.options.emailVerification.sendVerificationEmail({user:ye,url:ze,token:Ie},f.request))}let H=(0,c.Aw)("/send-verification-email",{method:"POST",operationId:"sendVerificationEmail",body:N.object({email:N.email().meta({description:"The email to send the verification email to"}),callbackURL:N.string().meta({description:"The URL to use for email verification callback"}).optional()}),metadata:{openapi:{operationId:"sendVerificationEmail",description:"Send a verification email to the user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{email:{type:"string",description:"The email to send the verification email to",example:"user@example.com"},callbackURL:{type:"string",description:"The URL to use for email verification callback",example:"https://example.com/callback",nullable:!0}},required:["email"]}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the email was sent successfully",example:!0}}}}}},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string",description:"Error message",example:"Verification email isn't enabled"}}}}}}}}}},async f=>{if(!f.context.options.emailVerification?.sendVerificationEmail)throw f.context.logger.error("Verification email isn't enabled."),new s.LG("BAD_REQUEST",{message:"Verification email isn't enabled"});let{email:ye}=f.body,Ie=await Q(f);if(!Ie){let Te=await f.context.internalAdapter.findUserByEmail(ye);return Te?await me(f,Te.user):await ce(f.context.secret,ye,void 0,f.context.options.emailVerification?.expiresIn),f.json({status:!0})}if(Ie?.user.email!==ye)throw new s.LG("BAD_REQUEST",{message:h.q.EMAIL_MISMATCH});if(Ie?.user.emailVerified)throw new s.LG("BAD_REQUEST",{message:h.q.EMAIL_ALREADY_VERIFIED});return await me(f,Ie.user),f.json({status:!0})}),ue=(0,c.Aw)("/verify-email",{method:"GET",operationId:"verifyEmail",query:N.object({token:N.string().meta({description:"The token to verify the email"}),callbackURL:N.string().meta({description:"The URL to redirect to after email verification"}).optional()}),use:[W(f=>f.query.callbackURL)],metadata:{openapi:{description:"Verify the email of the user",parameters:[{name:"token",in:"query",description:"The token to verify the email",required:!0,schema:{type:"string"}},{name:"callbackURL",in:"query",description:"The URL to redirect to after email verification",required:!1,schema:{type:"string"}}],responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",$ref:"#/components/schemas/User"},status:{type:"boolean",description:"Indicates if the email was verified successfully"}},required:["user","status"]}}}}}}}},async f=>{let ye;function Ie(Ge){throw f.query.callbackURL?f.query.callbackURL.includes("?")?f.redirect(`${f.query.callbackURL}&error=${Ge}`):f.redirect(`${f.query.callbackURL}?error=${Ge}`):new s.LG("UNAUTHORIZED",{message:Ge})}let{token:Te}=f.query;try{ye=await(0,le.V)(Te,new TextEncoder().encode(f.context.secret),{algorithms:["HS256"]})}catch(Ge){return Ge instanceof se.n?Ie("token_expired"):Ie("invalid_token")}let ze=N.object({email:N.email(),updateTo:N.string().optional(),requestType:N.string().optional()}).parse(ye.payload),Ce=await f.context.internalAdapter.findUserByEmail(ze.email);if(!Ce)return Ie("user_not_found");if(ze.updateTo){let Ge=await Q(f);if(Ge&&Ge.user.email!==ze.email)return Ie("unauthorized");switch(ze.requestType){case"change-email-confirmation":{let it=await ce(f.context.secret,ze.email,ze.updateTo,f.context.options.emailVerification?.expiresIn,{requestType:"change-email-verification"}),gt=f.query.callbackURL?encodeURIComponent(f.query.callbackURL):encodeURIComponent("/"),at=`${f.context.baseURL}/verify-email?token=${it}&callbackURL=${gt}`;if(f.context.options.emailVerification?.sendVerificationEmail&&await f.context.runInBackgroundOrAwait(f.context.options.emailVerification.sendVerificationEmail({user:{...Ce.user,email:ze.updateTo},url:at,token:it},f.request)),f.query.callbackURL)throw f.redirect(f.query.callbackURL);return f.json({status:!0})}case"change-email-verification":{let it=Ge;if(!it){let at=await f.context.internalAdapter.createSession(Ce.user.id);if(!at)throw new s.LG("INTERNAL_SERVER_ERROR",{message:h.q.FAILED_TO_CREATE_SESSION});it={session:at,user:Ce.user}}f.context.options.emailVerification?.onEmailVerification&&await f.context.options.emailVerification.onEmailVerification(Ce.user,f.request);let gt=await f.context.internalAdapter.updateUserByEmail(ze.email,{email:ze.updateTo,emailVerified:!0});if(f.context.options.emailVerification?.afterEmailVerification&&await f.context.options.emailVerification.afterEmailVerification(gt,f.request),await(0,k.$G)(f,{session:it.session,user:{...it.user,email:ze.updateTo,emailVerified:!0}}),f.query.callbackURL)throw f.redirect(f.query.callbackURL);return f.json({status:!0,user:(0,a.kc)(f.context.options,gt)})}default:{let it=Ge;if(!it){let Tt=await f.context.internalAdapter.createSession(Ce.user.id);if(!Tt)throw new s.LG("INTERNAL_SERVER_ERROR",{message:h.q.FAILED_TO_CREATE_SESSION});it={session:Tt,user:Ce.user}}let gt=await f.context.internalAdapter.updateUserByEmail(ze.email,{email:ze.updateTo,emailVerified:!1}),at=await ce(f.context.secret,ze.updateTo),wt=f.query.callbackURL?encodeURIComponent(f.query.callbackURL):encodeURIComponent("/");if(f.context.options.emailVerification?.sendVerificationEmail&&await f.context.runInBackgroundOrAwait(f.context.options.emailVerification.sendVerificationEmail({user:gt,url:`${f.context.baseURL}/verify-email?token=${at}&callbackURL=${wt}`,token:at},f.request)),await(0,k.$G)(f,{session:it.session,user:{...it.user,email:ze.updateTo,emailVerified:!1}}),f.query.callbackURL)throw f.redirect(f.query.callbackURL);return f.json({status:!0,user:(0,a.kc)(f.context.options,gt)})}}}if(Ce.user.emailVerified){if(f.query.callbackURL)throw f.redirect(f.query.callbackURL);return f.json({status:!0,user:null})}f.context.options.emailVerification?.beforeEmailVerification&&await f.context.options.emailVerification.beforeEmailVerification(Ce.user,f.request),f.context.options.emailVerification?.onEmailVerification&&await f.context.options.emailVerification.onEmailVerification(Ce.user,f.request);let He=await f.context.internalAdapter.updateUserByEmail(ze.email,{emailVerified:!0});if(f.context.options.emailVerification?.afterEmailVerification&&await f.context.options.emailVerification.afterEmailVerification(He,f.request),f.context.options.emailVerification?.autoSignInAfterVerification){let Ge=await Q(f);if(Ge&&Ge.user.email===ze.email)await(0,k.$G)(f,{session:Ge.session,user:{...Ge.user,emailVerified:!0}});else{let it=await f.context.internalAdapter.createSession(Ce.user.id);if(!it)throw new s.LG("INTERNAL_SERVER_ERROR",{message:"Failed to create session"});await(0,k.$G)(f,{session:it,user:{...Ce.user,emailVerified:!0}})}}if(f.query.callbackURL)throw f.redirect(f.query.callbackURL);return f.json({status:!0,user:null})});var x=o(68113);async function fe(f,ye){let{userInfo:Ie,account:Te,callbackURL:ze,disableSignUp:Ce,overrideUserInfo:He}=ye,Ge=await f.context.internalAdapter.findOAuthUser(Ie.email.toLowerCase(),Te.accountId,Te.providerId).catch(wt=>{x.vF.error(`Better auth was unable to query your database.
Error: `,wt);let Tt=f.context.options.onAPIError?.errorURL||`${f.context.baseURL}/error`;throw f.redirect(`${Tt}?error=internal_server_error`)}),it=Ge?.user,gt=!it;if(Ge){let wt=Ge.linkedAccount??Ge.accounts.find(Tt=>Tt.providerId===Te.providerId&&Tt.accountId===Te.accountId);if(wt){let Tt=f.context.options.account?.updateAccountOnSignIn!==!1?Object.fromEntries(Object.entries({idToken:Te.idToken,accessToken:await R(Te.accessToken,f.context),refreshToken:await R(Te.refreshToken,f.context),accessTokenExpiresAt:Te.accessTokenExpiresAt,refreshTokenExpiresAt:Te.refreshTokenExpiresAt,scope:Te.scope}).filter(([Qt,Jt])=>Jt!==void 0)):{};f.context.options.account?.storeAccountCookie&&await(0,L.Ce)(f,{...wt,...Tt}),Object.keys(Tt).length>0&&await f.context.internalAdapter.updateAccount(wt.id,Tt),Ie.emailVerified&&!Ge.user.emailVerified&&Ie.email.toLowerCase()===Ge.user.email&&await f.context.internalAdapter.updateUser(Ge.user.id,{emailVerified:!0})}else{let Tt=f.context.options.account?.accountLinking,Qt=f.context.options.account?.accountLinking?.trustedProviders;if(!(ye.isTrustedProvider||Qt?.includes(Te.providerId))&&!Ie.emailVerified||Tt?.enabled===!1||Tt?.disableImplicitLinking===!0)return(0,x.yz)()&&x.vF.warn(`User already exist but account isn't linked to ${Te.providerId}. To read more about how account linking works in Better Auth see https://www.better-auth.com/docs/concepts/users-accounts#account-linking.`),{error:"account not linked",data:null};try{await f.context.internalAdapter.linkAccount({providerId:Te.providerId,accountId:Ie.id.toString(),userId:Ge.user.id,accessToken:await R(Te.accessToken,f.context),refreshToken:await R(Te.refreshToken,f.context),idToken:Te.idToken,accessTokenExpiresAt:Te.accessTokenExpiresAt,refreshTokenExpiresAt:Te.refreshTokenExpiresAt,scope:Te.scope})}catch(Jt){return x.vF.error("Unable to link account",Jt),{error:"unable to link account",data:null}}Ie.emailVerified&&!Ge.user.emailVerified&&Ie.email.toLowerCase()===Ge.user.email&&await f.context.internalAdapter.updateUser(Ge.user.id,{emailVerified:!0})}if(He){let{id:Tt,...Qt}=Ie;it=await f.context.internalAdapter.updateUser(Ge.user.id,{...Qt,email:Ie.email.toLowerCase(),emailVerified:Ie.email.toLowerCase()===Ge.user.email&&Ge.user.emailVerified||Ie.emailVerified})}}else{if(Ce)return{error:"signup disabled",data:null,isRegister:!1};try{let{id:wt,...Tt}=Ie,Qt={accessToken:await R(Te.accessToken,f.context),refreshToken:await R(Te.refreshToken,f.context),idToken:Te.idToken,accessTokenExpiresAt:Te.accessTokenExpiresAt,refreshTokenExpiresAt:Te.refreshTokenExpiresAt,scope:Te.scope,providerId:Te.providerId,accountId:Ie.id.toString()},{user:Jt,account:er}=await f.context.internalAdapter.createOAuthUser({...Tt,email:Ie.email.toLowerCase()},Qt);if(it=Jt,f.context.options.account?.storeAccountCookie&&await(0,L.Ce)(f,er),!Ie.emailVerified&&it&&f.context.options.emailVerification?.sendOnSignUp&&f.context.options.emailVerification?.sendVerificationEmail){let $t=await ce(f.context.secret,it.email,void 0,f.context.options.emailVerification?.expiresIn),Pt=`${f.context.baseURL}/verify-email?token=${$t}&callbackURL=${ze}`;await f.context.runInBackgroundOrAwait(f.context.options.emailVerification.sendVerificationEmail({user:it,url:Pt,token:$t},f.request))}}catch(wt){return x.vF.error(wt),wt instanceof s.LG?{error:wt.message,data:null,isRegister:!1}:{error:"unable to create user",data:null,isRegister:!1}}}if(!it)return{error:"unable to create user",data:null,isRegister:!1};let at=await f.context.internalAdapter.createSession(it.id);return at?{data:{session:at,user:it},error:null,isRegister:gt}:{error:"unable to create session",data:null,isRegister:!1}}var ge=o(67869);let Se=N.object({code:N.string().optional(),error:N.string().optional(),device_id:N.string().optional(),error_description:N.string().optional(),state:N.string().optional(),user:N.string().optional()}),Re=(0,c.Aw)("/callback/:id",{method:["GET","POST"],operationId:"handleOAuthCallback",body:Se.optional(),query:Se.optional(),metadata:{...ge.B,allowedMediaTypes:["application/x-www-form-urlencoded","application/json"]}},async f=>{let ye,Ie,Te,ze=f.context.options.onAPIError?.errorURL||`${f.context.baseURL}/error`;if(f.method==="POST"){let ir=f.body?Se.parse(f.body):{},vr=f.query?Se.parse(f.query):{},Cr=Se.parse({...ir,...vr}),Mr=new URLSearchParams;for(let[Ti,Kr]of Object.entries(Cr))Kr!=null&&Mr.set(Ti,String(Kr));let Wr=`${f.context.baseURL}/callback/${f.params.id}?${Mr.toString()}`;throw f.redirect(Wr)}try{if(f.method==="GET")ye=Se.parse(f.query);else if(f.method==="POST")ye=Se.parse(f.body);else throw Error("Unsupported method")}catch(ir){throw f.context.logger.error("INVALID_CALLBACK_REQUEST",ir),f.redirect(`${ze}?error=invalid_callback_request`)}let{code:Ce,error:He,state:Ge,error_description:it,device_id:gt,user:at}=ye;if(!Ge){f.context.logger.error("State not found",He);let ir=`${ze}${ze.includes("?")?"&":"?"}state=state_not_found`;throw f.redirect(ir)}let{codeVerifier:wt,callbackURL:Tt,link:Qt,errorURL:Jt,newUserURL:er,requestSignUp:$t}=await(0,v.B)(f);function Pt(ir,vr){let Cr=Jt??ze,Mr=new URLSearchParams({error:ir});vr&&Mr.set("error_description",vr);let Wr=`${Cr}${Cr.includes("?")?"&":"?"}${Mr.toString()}`;throw f.redirect(Wr)}if(He&&Pt(He,it),!Ce)throw f.context.logger.error("Code not found"),Pt("no_code");let qt=f.context.socialProviders.find(ir=>ir.id===f.params.id);if(!qt)throw f.context.logger.error("Oauth provider with id",f.params.id,"not found"),Pt("oauth_provider_not_found");try{Ie=await qt.validateAuthorizationCode({code:Ce,codeVerifier:wt,deviceId:gt,redirectURI:`${f.context.baseURL}/callback/${qt.id}`})}catch(ir){throw f.context.logger.error("",ir),Pt("invalid_code")}if(!Ie)throw Pt("invalid_code");let or=at?(0,i.$l)(at):null,Vt=await qt.getUserInfo({...Ie,user:or??void 0}).then(ir=>ir?.user);if(!Vt)return f.context.logger.error("Unable to get user info"),Pt("unable_to_get_user_info");if(!Tt)throw f.context.logger.error("No callback URL found"),Pt("no_callback_url");if(Qt){let ir;if(!f.context.options.account?.accountLinking?.trustedProviders?.includes(qt.id)&&!Vt.emailVerified||f.context.options.account?.accountLinking?.enabled===!1)return f.context.logger.error("Unable to link account - untrusted provider"),Pt("unable_to_link_account");if(Vt.email!==Qt.email&&f.context.options.account?.accountLinking?.allowDifferentEmails!==!0)return Pt("email_doesn't_match");let vr=await f.context.internalAdapter.findAccount(String(Vt.id));if(vr){if(vr.userId.toString()!==Qt.userId.toString())return Pt("account_already_linked_to_different_user");let Cr=Object.fromEntries(Object.entries({accessToken:await R(Ie.accessToken,f.context),refreshToken:await R(Ie.refreshToken,f.context),idToken:Ie.idToken,accessTokenExpiresAt:Ie.accessTokenExpiresAt,refreshTokenExpiresAt:Ie.refreshTokenExpiresAt,scope:Ie.scopes?.join(",")}).filter(([Mr,Wr])=>Wr!==void 0));await f.context.internalAdapter.updateAccount(vr.id,Cr)}else if(!await f.context.internalAdapter.createAccount({userId:Qt.userId,providerId:qt.id,accountId:String(Vt.id),...Ie,accessToken:await R(Ie.accessToken,f.context),refreshToken:await R(Ie.refreshToken,f.context),scope:Ie.scopes?.join(",")}))return Pt("unable_to_link_account");try{ir=Tt.toString()}catch{ir=Tt}throw f.redirect(ir)}if(!Vt.email)return f.context.logger.error("Provider did not return email. This could be due to misconfiguration in the provider settings."),Pt("email_not_found");let lr={providerId:qt.id,accountId:String(Vt.id),...Ie,scope:Ie.scopes?.join(",")},ur=await fe(f,{userInfo:{...Vt,id:String(Vt.id),email:Vt.email,name:Vt.name||Vt.email},account:lr,callbackURL:Tt,disableSignUp:qt.disableImplicitSignUp&&!$t||qt.options?.disableSignUp,overrideUserInfo:qt.options?.overrideUserInfoOnSignIn});if(ur.error)return f.context.logger.error(ur.error.split(" ").join("_")),Pt(ur.error.split(" ").join("_"));let{session:gr,user:Or}=ur.data;await(0,k.$G)(f,{session:gr,user:Or});try{Te=(ur.isRegister&&er||Tt).toString()}catch{Te=ur.isRegister&&er||Tt}throw f.redirect(Te)});function ae(f){return f.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/&(?!amp;|lt;|gt;|quot;|#39;|#x[0-9a-fA-F]+;|#[0-9]+;)/g,"&amp;")}let Ae=(f,ye="Unknown",Ie=null)=>{let Te=f.onAPIError?.customizeDefaultErrorPage;return`<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Error</title>
    <style>
      * {
        box-sizing: border-box;
      }
      body {
        font-family: ${Te?.font?.defaultFamily||"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif"};
        background: ${Te?.colors?.background||"var(--background)"};
        color: var(--foreground);
        margin: 0;
      }
      :root,
      :host {
        --spacing: 0.25rem;
        --container-md: 28rem;
        --text-sm: ${Te?.size?.textSm||"0.875rem"};
        --text-sm--line-height: calc(1.25 / 0.875);
        --text-2xl: ${Te?.size?.text2xl||"1.5rem"};
        --text-2xl--line-height: calc(2 / 1.5);
        --text-4xl: ${Te?.size?.text4xl||"2.25rem"};
        --text-4xl--line-height: calc(2.5 / 2.25);
        --text-6xl: ${Te?.size?.text6xl||"3rem"};
        --text-6xl--line-height: 1;
        --font-weight-medium: 500;
        --font-weight-semibold: 600;
        --font-weight-bold: 700;
        --default-transition-duration: 150ms;
        --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        --radius: ${Te?.size?.radiusSm||"0.625rem"};
        --default-mono-font-family: ${Te?.font?.monoFamily||"var(--font-geist-mono)"};
        --primary: ${Te?.colors?.primary||"black"};
        --primary-foreground: ${Te?.colors?.primaryForeground||"white"};
        --background: ${Te?.colors?.background||"white"};
        --foreground: ${Te?.colors?.foreground||"oklch(0.271 0 0)"};
        --border: ${Te?.colors?.border||"oklch(0.89 0 0)"};
        --destructive: ${Te?.colors?.destructive||"oklch(0.55 0.15 25.723)"};
        --muted-foreground: ${Te?.colors?.mutedForeground||"oklch(0.545 0 0)"};
        --corner-border: ${Te?.colors?.cornerBorder||"#404040"};
      }

      button, .btn {
        cursor: pointer;
        background: none;
        border: none;
        color: inherit;
        font: inherit;
        transition: all var(--default-transition-duration)
          var(--default-transition-timing-function);
      }
      button:hover, .btn:hover {
        opacity: 0.8;
      }

      @media (prefers-color-scheme: dark) {
        :root,
        :host {
          --primary: ${Te?.colors?.primary||"white"};
          --primary-foreground: ${Te?.colors?.primaryForeground||"black"};
          --background: ${Te?.colors?.background||"oklch(0.15 0 0)"};
          --foreground: ${Te?.colors?.foreground||"oklch(0.98 0 0)"};
          --border: ${Te?.colors?.border||"oklch(0.27 0 0)"};
          --destructive: ${Te?.colors?.destructive||"oklch(0.65 0.15 25.723)"};
          --muted-foreground: ${Te?.colors?.mutedForeground||"oklch(0.65 0 0)"};
          --corner-border: ${Te?.colors?.cornerBorder||"#a0a0a0"};
        }
      }
      @media (max-width: 640px) {
        :root, :host {
          --text-6xl: 2.5rem;
          --text-2xl: 1.25rem;
          --text-sm: 0.8125rem;
        }
      }
      @media (max-width: 480px) {
        :root, :host {
          --text-6xl: 2rem;
          --text-2xl: 1.125rem;
        }
      }
    </style>
  </head>
  <body style="width: 100vw; min-height: 100vh; overflow-x: hidden; overflow-y: auto;">
    <div
        style="
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
            position: relative;
            width: 100%;
            min-height: 100vh;
            padding: 1rem;
        "
        >
${Te?.disableBackgroundGrid?"":`
      <div
        style="
          position: absolute;
          inset: 0;
          background-image: linear-gradient(to right, ${Te?.colors?.gridColor||"var(--border)"} 1px, transparent 1px),
            linear-gradient(to bottom, ${Te?.colors?.gridColor||"var(--border)"} 1px, transparent 1px);
          background-size: 40px 40px;
          opacity: 0.6;
          pointer-events: none;
          width: 100vw;
          height: 100vh;
        "
      ></div>
      <div
        style="
          position: absolute;
          inset: 0;
          display: flex;
          align-items: center;
          justify-content: center;
          background: ${Te?.colors?.background||"var(--background)"};
          mask-image: radial-gradient(ellipse at center, transparent 20%, black);
          -webkit-mask-image: radial-gradient(ellipse at center, transparent 20%, black);
          pointer-events: none;
        "
      ></div>
`}

<div
  style="
    position: relative;
    z-index: 10;
    border: 2px solid var(--border);
    background: ${Te?.colors?.cardBackground||"var(--background)"};
    padding: 1.5rem;
    max-width: 42rem;
    width: 100%;
  "
>
    ${Te?.disableCornerDecorations?"":`
        <!-- Corner decorations -->
        <div
          style="
            position: absolute;
            top: -2px;
            left: -2px;
            width: 2rem;
            height: 2rem;
            border-top: 4px solid var(--corner-border);
            border-left: 4px solid var(--corner-border);
          "
        ></div>
        <div
          style="
            position: absolute;
            top: -2px;
            right: -2px;
            width: 2rem;
            height: 2rem;
            border-top: 4px solid var(--corner-border);
            border-right: 4px solid var(--corner-border);
          "
        ></div>
  
        <div
          style="
            position: absolute;
            bottom: -2px;
            left: -2px;
            width: 2rem;
            height: 2rem;
            border-bottom: 4px solid var(--corner-border);
            border-left: 4px solid var(--corner-border);
          "
        ></div>
        <div
          style="
            position: absolute;
            bottom: -2px;
            right: -2px;
            width: 2rem;
            height: 2rem;
            border-bottom: 4px solid var(--corner-border);
            border-right: 4px solid var(--corner-border);
          "
        ></div>`}

        <div style="text-align: center; margin-bottom: 1.5rem;">
          <div style="margin-bottom: 1.5rem;">
            <div
              style="
                display: inline-block;
                border: 2px solid ${Te?.disableTitleBorder?"transparent":Te?.colors?.titleBorder||"var(--destructive)"};
                padding: 0.375rem 1rem;
              "
            >
              <h1
                style="
                  font-size: var(--text-6xl);
                  font-weight: var(--font-weight-semibold);
                  color: ${Te?.colors?.titleColor||"var(--foreground)"};
                  letter-spacing: -0.02em;
                  margin: 0;
                "
              >
                ERROR
              </h1>
            </div>
            <div
              style="
                height: 2px;
                background-color: var(--border);
                width: calc(100% + 3rem);
                margin-left: -1.5rem;
                margin-top: 1.5rem;
              "
            ></div>
          </div>

          <h2
            style="
              font-size: var(--text-2xl);
              font-weight: var(--font-weight-semibold);
              color: var(--foreground);
              margin: 0 0 1rem;
            "
          >
            Something went wrong
          </h2>

          <div
            style="
                display: inline-flex;
                align-items: center;
                gap: 0.5rem;
                border: 2px solid var(--border);
                background-color: var(--muted);
                padding: 0.375rem 0.75rem;
                margin: 0 0 1rem;
                flex-wrap: wrap;
                justify-content: center;
            "
            >
            <span
                style="
                font-size: 0.75rem;
                color: var(--muted-foreground);
                font-weight: var(--font-weight-semibold);
                "
            >
                CODE:
            </span>
            <span
                style="
                font-size: var(--text-sm);
                font-family: var(--default-mono-font-family, monospace);
                color: var(--foreground);
                word-break: break-all;
                "
            >
                ${ae(ye)}
            </span>
            </div>

          <p
            style="
              color: var(--muted-foreground);
              max-width: 28rem;
              margin: 0 auto;
              font-size: var(--text-sm);
              line-height: 1.5;
              text-wrap: pretty;
            "
          >
            ${Ie||`We encountered an unexpected error. Please try again or return to the home page. If you're a developer, you can find more information about the error <a href='https://better-auth.com/docs/reference/errors/${encodeURIComponent(ye)}' target='_blank' rel="noopener noreferrer" style='color: var(--foreground); text-decoration: underline;'>here</a>.`}
          </p>
        </div>

        <div
          style="
            display: flex;
            gap: 0.75rem;
            margin-top: 1.5rem;
            justify-content: center;
            flex-wrap: wrap;
          "
        >
          <a
            href="/"
            style="
              text-decoration: none;
            "
          >
            <div
              style="
                border: 2px solid var(--border);
                background: var(--primary);
                color: var(--primary-foreground);
                padding: 0.5rem 1rem;
                border-radius: 0;
                white-space: nowrap;
              "
              class="btn"
            >
              Go Home
            </div>
          </a>
          <a
            href="https://better-auth.com/docs/reference/errors/${encodeURIComponent(ye)}?askai=${encodeURIComponent(`What does the error code ${ye} mean?`)}"
            target="_blank"
            rel="noopener noreferrer"
            style="
              text-decoration: none;
            "
          >
            <div
              style="
                border: 2px solid var(--border);
                background: transparent;
                color: var(--foreground);
                padding: 0.5rem 1rem;
                border-radius: 0;
                white-space: nowrap;
              "
              class="btn"
            >
              Ask AI
            </div>
          </a>
        </div>
      </div>
    </div>
  </body>
</html>`},lt=(0,c.Aw)("/error",{method:"GET",metadata:{...ge.B,openapi:{description:"Displays an error page",responses:{200:{description:"Success",content:{"text/html":{schema:{type:"string",description:"The HTML content of the error page"}}}}}}}},async f=>{let ye=new URL(f.request?.url||""),Ie=ye.searchParams.get("error")||"UNKNOWN",Te=ye.searchParams.get("error_description")||null,ze=/^[\'A-Za-z0-9_-]+$/.test(Ie||"")?Ie:"UNKNOWN",Ce=Te?ae(Te):null,He=new URLSearchParams;He.set("error",ze),Te&&He.set("error_description",Te);let Ge=f.context.options,it=Ge.onAPIError?.errorURL;return it?new Response(null,{status:302,headers:{Location:`${it}${it.includes("?")?"&":"?"}${He.toString()}`}}):x.KV&&!Ge.onAPIError?.customizeDefaultErrorPage?new Response(null,{status:302,headers:{Location:`/?${He.toString()}`}}):new Response(Ae(f.context.options,ze,Ce),{headers:{"Content-Type":"text/html"}})}),Je=(0,c.Aw)("/ok",{method:"GET",metadata:{...ge.B,openapi:{description:"Check if the API is working",responses:{200:{description:"API is working",content:{"application/json":{schema:{type:"object",properties:{ok:{type:"boolean",description:"Indicates if the API is working"}},required:["ok"]}}}}}}}},async f=>f.json({ok:!0}));var rt=o(80287),Ye=o(38550);function St(f,ye,Ie){let Te=ye?new URL(ye,f.baseURL):new URL(`${f.baseURL}/error`);return Ie&&Object.entries(Ie).forEach(([ze,Ce])=>Te.searchParams.set(ze,Ce)),Te.href}let bt=(0,c.Aw)("/request-password-reset",{method:"POST",body:N.object({email:N.email().meta({description:"The email address of the user to send a password reset email to"}),redirectTo:N.string().meta({description:"The URL to redirect the user to reset their password. If the token isn't valid or expired, it'll be redirected with a query parameter `?error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?token=VALID_TOKEN"}).optional()}),metadata:{openapi:{operationId:"requestPasswordReset",description:"Send a password reset email to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"},message:{type:"string"}}}}}}}}}},async f=>{if(!f.context.options.emailAndPassword?.sendResetPassword)throw f.context.logger.error("Reset password isn't enabled.Please pass an emailAndPassword.sendResetPassword function in your auth config!"),new s.LG("BAD_REQUEST",{message:"Reset password isn't enabled"});let{email:ye,redirectTo:Ie}=f.body,Te=await f.context.internalAdapter.findUserByEmail(ye,{includeAccounts:!0});if(!Te)return(0,rt.$)(24),await f.context.internalAdapter.findVerificationValue("dummy-verification-token"),f.context.logger.error("Reset Password: User not found",{email:ye}),f.json({status:!0,message:"If this email exists in our system, check your email for the reset link"});let ze=(0,J.p)(f.context.options.emailAndPassword.resetPasswordTokenExpiresIn||3600,"sec"),Ce=(0,rt.$)(24);await f.context.internalAdapter.createVerificationValue({value:Te.user.id,identifier:`reset-password:${Ce}`,expiresAt:ze});let He=Ie?encodeURIComponent(Ie):"",Ge=`${f.context.baseURL}/reset-password/${Ce}?callbackURL=${He}`;return await f.context.runInBackgroundOrAwait(f.context.options.emailAndPassword.sendResetPassword({user:Te.user,url:Ge,token:Ce},f.request)),f.json({status:!0,message:"If this email exists in our system, check your email for the reset link"})}),qe=(0,c.Aw)("/reset-password/:token",{method:"GET",operationId:"forgetPasswordCallback",query:N.object({callbackURL:N.string().meta({description:"The URL to redirect the user to reset their password"})}),use:[W(f=>f.query.callbackURL)],metadata:{openapi:{operationId:"resetPasswordCallback",description:"Redirects the user to the callback URL with the token",parameters:[{name:"token",in:"path",required:!0,description:"The token to reset the password",schema:{type:"string"}},{name:"callbackURL",in:"query",required:!0,description:"The URL to redirect the user to reset their password",schema:{type:"string"}}],responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string"}}}}}}}}}},async f=>{let{token:ye}=f.params,{callbackURL:Ie}=f.query;if(!ye||!Ie)throw f.redirect(St(f.context,Ie,{error:"INVALID_TOKEN"}));let Te=await f.context.internalAdapter.findVerificationValue(`reset-password:${ye}`);throw!Te||Te.expiresAt<new Date?f.redirect(St(f.context,Ie,{error:"INVALID_TOKEN"})):f.redirect(function(ze,Ce,He){let Ge=new URL(Ce,ze.baseURL);return He&&Object.entries(He).forEach(([it,gt])=>Ge.searchParams.set(it,gt)),Ge.href}(f.context,Ie,{token:ye}))}),re=(0,c.Aw)("/reset-password",{method:"POST",operationId:"resetPassword",query:N.object({token:N.string().optional()}).optional(),body:N.object({newPassword:N.string().meta({description:"The new password to set"}),token:N.string().meta({description:"The token to reset the password"}).optional()}),metadata:{openapi:{operationId:"resetPassword",description:"Reset the password for a user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async f=>{let ye=f.body.token||f.query?.token;if(!ye)throw new s.LG("BAD_REQUEST",{message:h.q.INVALID_TOKEN});let{newPassword:Ie}=f.body,Te=f.context.password?.config.minPasswordLength,ze=f.context.password?.config.maxPasswordLength;if(Ie.length<Te)throw new s.LG("BAD_REQUEST",{message:h.q.PASSWORD_TOO_SHORT});if(Ie.length>ze)throw new s.LG("BAD_REQUEST",{message:h.q.PASSWORD_TOO_LONG});let Ce=`reset-password:${ye}`,He=await f.context.internalAdapter.findVerificationValue(Ce);if(!He||He.expiresAt<new Date)throw new s.LG("BAD_REQUEST",{message:h.q.INVALID_TOKEN});let Ge=He.value,it=await f.context.password.hash(Ie);if((await f.context.internalAdapter.findAccounts(Ge)).find(gt=>gt.providerId==="credential")?await f.context.internalAdapter.updatePassword(Ge,it):await f.context.internalAdapter.createAccount({userId:Ge,providerId:"credential",password:it,accountId:Ge}),await f.context.internalAdapter.deleteVerificationValue(He.id),f.context.options.emailAndPassword?.onPasswordReset){let gt=await f.context.internalAdapter.findUserById(Ge);gt&&await f.context.options.emailAndPassword.onPasswordReset({user:gt},f.request)}return f.context.options.emailAndPassword?.revokeSessionsOnPasswordReset&&await f.context.internalAdapter.deleteSessions(Ge),f.json({status:!0})}),We=(0,c.Aw)("/verify-password",{method:"POST",body:N.object({password:N.string().meta({description:"The password to verify"})}),metadata:{scope:"server",openapi:{operationId:"verifyPassword",description:"Verify the current user's password",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}},use:[X]},async f=>{let{password:ye}=f.body,Ie=f.context.session;if(!await(0,Ye.L)(f,{password:ye,userId:Ie.user.id}))throw new s.LG("BAD_REQUEST",{message:h.q.INVALID_PASSWORD});return f.json({status:!0})}),ut=N.object({callbackURL:N.string().meta({description:"Callback URL to redirect to after the user has signed in"}).optional(),newUserCallbackURL:N.string().optional(),errorCallbackURL:N.string().meta({description:"Callback URL to redirect to if an error happens"}).optional(),provider:S.w_,disableRedirect:N.boolean().meta({description:"Disable automatic redirection to the provider. Useful for handling the redirection yourself"}).optional(),idToken:N.optional(N.object({token:N.string().meta({description:"ID token from the provider"}),nonce:N.string().meta({description:"Nonce used to generate the token"}).optional(),accessToken:N.string().meta({description:"Access token from the provider"}).optional(),refreshToken:N.string().meta({description:"Refresh token from the provider"}).optional(),expiresAt:N.number().meta({description:"Expiry date of the token"}).optional()})),scopes:N.array(N.string()).meta({description:"Array of scopes to request from the provider. This will override the default scopes passed."}).optional(),requestSignUp:N.boolean().meta({description:"Explicitly request sign-up. Useful when disableImplicitSignUp is true for this provider"}).optional(),loginHint:N.string().meta({description:"The login hint to use for the authorization code request"}).optional(),additionalData:N.record(N.string(),N.any()).optional().meta({description:"Additional data to be passed through the OAuth flow"})}),kt=()=>(0,c.Aw)("/sign-in/social",{method:"POST",operationId:"socialSignIn",body:ut,metadata:{$Infer:{body:{},returned:{}},openapi:{description:"Sign in with a social provider",operationId:"socialSignIn",responses:{200:{description:"Success - Returns either session details or redirect URL",content:{"application/json":{schema:{type:"object",description:"Session response when idToken is provided",properties:{token:{type:"string"},user:{type:"object",$ref:"#/components/schemas/User"},url:{type:"string"},redirect:{type:"boolean",enum:[!1]}},required:["redirect","token","user"]}}}}}}}},async f=>{let ye=f.context.socialProviders.find(Ce=>Ce.id===f.body.provider);if(!ye)throw f.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:f.body.provider}),new s.LG("NOT_FOUND",{message:h.q.PROVIDER_NOT_FOUND});if(f.body.idToken){if(!ye.verifyIdToken)throw f.context.logger.error("Provider does not support id token verification",{provider:f.body.provider}),new s.LG("NOT_FOUND",{message:h.q.ID_TOKEN_NOT_SUPPORTED});let{token:Ce,nonce:He}=f.body.idToken;if(!await ye.verifyIdToken(Ce,He))throw f.context.logger.error("Invalid id token",{provider:f.body.provider}),new s.LG("UNAUTHORIZED",{message:h.q.INVALID_TOKEN});let Ge=await ye.getUserInfo({idToken:Ce,accessToken:f.body.idToken.accessToken,refreshToken:f.body.idToken.refreshToken});if(!Ge||!Ge?.user)throw f.context.logger.error("Failed to get user info",{provider:f.body.provider}),new s.LG("UNAUTHORIZED",{message:h.q.FAILED_TO_GET_USER_INFO});if(!Ge.user.email)throw f.context.logger.error("User email not found",{provider:f.body.provider}),new s.LG("UNAUTHORIZED",{message:h.q.USER_EMAIL_NOT_FOUND});let it=await fe(f,{userInfo:{...Ge.user,email:Ge.user.email,id:String(Ge.user.id),name:Ge.user.name||"",image:Ge.user.image,emailVerified:Ge.user.emailVerified||!1},account:{providerId:ye.id,accountId:String(Ge.user.id),accessToken:f.body.idToken.accessToken},callbackURL:f.body.callbackURL,disableSignUp:ye.disableImplicitSignUp&&!f.body.requestSignUp||ye.disableSignUp});if(it.error)throw new s.LG("UNAUTHORIZED",{message:it.error});return await(0,k.$G)(f,it.data),f.json({redirect:!1,token:it.data.session.token,url:void 0,user:(0,a.kc)(f.context.options,it.data.user)})}let{codeVerifier:Ie,state:Te}=await(0,v.Z)(f,void 0,f.body.additionalData),ze=await ye.createAuthorizationURL({state:Te,codeVerifier:Ie,redirectURI:`${f.context.baseURL}/callback/${ye.id}`,scopes:f.body.scopes,loginHint:f.body.loginHint});return f.body.disableRedirect||f.setHeader("Location",ze.toString()),f.json({url:ze.toString(),redirect:!f.body.disableRedirect})}),Ct=()=>(0,c.Aw)("/sign-in/email",{method:"POST",operationId:"signInEmail",use:[I],body:N.object({email:N.string().meta({description:"Email of the user"}),password:N.string().meta({description:"Password of the user"}),callbackURL:N.string().meta({description:"Callback URL to use as a redirect for email verification"}).optional(),rememberMe:N.boolean().meta({description:"If this is false, the session will not be remembered. Default is `true`."}).default(!0).optional()}),metadata:{allowedMediaTypes:["application/x-www-form-urlencoded","application/json"],$Infer:{body:{},returned:{}},openapi:{operationId:"signInEmail",description:"Sign in with email and password",responses:{200:{description:"Success - Returns either session details or redirect URL",content:{"application/json":{schema:{type:"object",description:"Session response when idToken is provided",properties:{redirect:{type:"boolean",enum:[!1]},token:{type:"string",description:"Session token"},url:{type:"string",nullable:!0},user:{type:"object",$ref:"#/components/schemas/User"}},required:["redirect","token","user"]}}}}}}}},async f=>{if(!f.context.options?.emailAndPassword?.enabled)throw f.context.logger.error("Email and password is not enabled. Make sure to enable it in the options on you `auth.ts` file. Check `https://better-auth.com/docs/authentication/email-password` for more!"),new s.LG("BAD_REQUEST",{message:"Email and password is not enabled"});let{email:ye,password:Ie}=f.body;if(!N.email().safeParse(ye).success)throw new s.LG("BAD_REQUEST",{message:h.q.INVALID_EMAIL});let Te=await f.context.internalAdapter.findUserByEmail(ye,{includeAccounts:!0});if(!Te)throw await f.context.password.hash(Ie),f.context.logger.error("User not found",{email:ye}),new s.LG("UNAUTHORIZED",{message:h.q.INVALID_EMAIL_OR_PASSWORD});let ze=Te.accounts.find(Ge=>Ge.providerId==="credential");if(!ze)throw await f.context.password.hash(Ie),f.context.logger.error("Credential account not found",{email:ye}),new s.LG("UNAUTHORIZED",{message:h.q.INVALID_EMAIL_OR_PASSWORD});let Ce=ze?.password;if(!Ce)throw await f.context.password.hash(Ie),f.context.logger.error("Password not found",{email:ye}),new s.LG("UNAUTHORIZED",{message:h.q.INVALID_EMAIL_OR_PASSWORD});if(!await f.context.password.verify({hash:Ce,password:Ie}))throw f.context.logger.error("Invalid password"),new s.LG("UNAUTHORIZED",{message:h.q.INVALID_EMAIL_OR_PASSWORD});if(f.context.options?.emailAndPassword?.requireEmailVerification&&!Te.user.emailVerified){if(!f.context.options?.emailVerification?.sendVerificationEmail)throw new s.LG("FORBIDDEN",{message:h.q.EMAIL_NOT_VERIFIED});if(f.context.options?.emailVerification?.sendOnSignIn){let Ge=await ce(f.context.secret,Te.user.email,void 0,f.context.options.emailVerification?.expiresIn),it=f.body.callbackURL?encodeURIComponent(f.body.callbackURL):encodeURIComponent("/"),gt=`${f.context.baseURL}/verify-email?token=${Ge}&callbackURL=${it}`;await f.context.runInBackgroundOrAwait(f.context.options.emailVerification.sendVerificationEmail({user:Te.user,url:gt,token:Ge},f.request))}throw new s.LG("FORBIDDEN",{message:h.q.EMAIL_NOT_VERIFIED})}let He=await f.context.internalAdapter.createSession(Te.user.id,f.body.rememberMe===!1);if(!He)throw f.context.logger.error("Failed to create session"),new s.LG("UNAUTHORIZED",{message:h.q.FAILED_TO_CREATE_SESSION});return await(0,k.$G)(f,{session:He,user:Te.user},f.body.rememberMe===!1),f.body.callbackURL&&f.setHeader("Location",f.body.callbackURL),f.json({redirect:!!f.body.callbackURL,token:He.token,url:f.body.callbackURL,user:(0,a.kc)(f.context.options,Te.user)})}),tt=(0,c.Aw)("/sign-out",{method:"POST",operationId:"signOut",requireHeaders:!0,metadata:{openapi:{operationId:"signOut",description:"Sign out the current user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async f=>{let ye=await f.getSignedCookie(f.context.authCookies.sessionToken.name,f.context.secret);if(ye)try{await f.context.internalAdapter.deleteSession(ye)}catch(Ie){f.context.logger.error("Failed to delete session from database",Ie)}return(0,k.eC)(f),f.json({success:!0})});var Ot=o(13015);let Wt=N.object({name:N.string(),email:N.email(),password:N.string().nonempty(),image:N.string().optional(),callbackURL:N.string().optional(),rememberMe:N.boolean().optional()}).and(N.record(N.string(),N.any())),yt=()=>(0,c.Aw)("/sign-up/email",{method:"POST",operationId:"signUpWithEmailAndPassword",use:[I],body:Wt,metadata:{allowedMediaTypes:["application/x-www-form-urlencoded","application/json"],$Infer:{body:{},returned:{}},openapi:{operationId:"signUpWithEmailAndPassword",description:"Sign up a user using email and password",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},email:{type:"string",description:"The email of the user"},password:{type:"string",description:"The password of the user"},image:{type:"string",description:"The profile image URL of the user"},callbackURL:{type:"string",description:"The URL to use for email verification callback"},rememberMe:{type:"boolean",description:"If this is false, the session will not be remembered. Default is `true`."}},required:["name","email","password"]}}}},responses:{200:{description:"Successfully created user",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",nullable:!0,description:"Authentication token for the session"},user:{type:"object",properties:{id:{type:"string",description:"The unique identifier of the user"},email:{type:"string",format:"email",description:"The email address of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",format:"uri",nullable:!0,description:"The profile image URL of the user"},emailVerified:{type:"boolean",description:"Whether the email has been verified"},createdAt:{type:"string",format:"date-time",description:"When the user was created"},updatedAt:{type:"string",format:"date-time",description:"When the user was last updated"}},required:["id","email","name","emailVerified","createdAt","updatedAt"]}},required:["user"]}}}},422:{description:"Unprocessable Entity. User already exists or failed to create user.",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}}}}}},async f=>(0,Ot.iD)(f.context.adapter,async()=>{let ye;if(!f.context.options.emailAndPassword?.enabled||f.context.options.emailAndPassword?.disableSignUp)throw new s.LG("BAD_REQUEST",{message:"Email and password sign up is not enabled"});let Ie=f.body,{name:Te,email:ze,password:Ce,image:He,callbackURL:Ge,rememberMe:it,...gt}=Ie;if(!N.email().safeParse(ze).success)throw new s.LG("BAD_REQUEST",{message:h.q.INVALID_EMAIL});if(!Ce||typeof Ce!="string")throw new s.LG("BAD_REQUEST",{message:h.q.INVALID_PASSWORD});let at=f.context.password.config.minPasswordLength;if(Ce.length<at)throw f.context.logger.error("Password is too short"),new s.LG("BAD_REQUEST",{message:h.q.PASSWORD_TOO_SHORT});let wt=f.context.password.config.maxPasswordLength;if(Ce.length>wt)throw f.context.logger.error("Password is too long"),new s.LG("BAD_REQUEST",{message:h.q.PASSWORD_TOO_LONG});if((await f.context.internalAdapter.findUserByEmail(ze))?.user)throw f.context.logger.info(`Sign-up attempt for existing email: ${ze}`),new s.LG("UNPROCESSABLE_ENTITY",{message:h.q.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});let Tt=await f.context.password.hash(Ce);try{let Jt=(0,a.pS)(f.context.options,gt,"create");if(!(ye=await f.context.internalAdapter.createUser({email:ze.toLowerCase(),name:Te,image:He,...Jt,emailVerified:!1})))throw new s.LG("BAD_REQUEST",{message:h.q.FAILED_TO_CREATE_USER})}catch(Jt){throw(0,x.yz)()&&f.context.logger.error("Failed to create user",Jt),Jt instanceof s.LG?Jt:(f.context.logger?.error("Failed to create user",Jt),new s.LG("UNPROCESSABLE_ENTITY",{message:h.q.FAILED_TO_CREATE_USER}))}if(!ye)throw new s.LG("UNPROCESSABLE_ENTITY",{message:h.q.FAILED_TO_CREATE_USER});if(await f.context.internalAdapter.linkAccount({userId:ye.id,providerId:"credential",accountId:ye.id,password:Tt}),f.context.options.emailVerification?.sendOnSignUp??f.context.options.emailAndPassword.requireEmailVerification){let Jt=await ce(f.context.secret,ye.email,void 0,f.context.options.emailVerification?.expiresIn),er=Ie.callbackURL?encodeURIComponent(Ie.callbackURL):encodeURIComponent("/"),$t=`${f.context.baseURL}/verify-email?token=${Jt}&callbackURL=${er}`;f.context.options.emailVerification?.sendVerificationEmail&&await f.context.runInBackgroundOrAwait(f.context.options.emailVerification.sendVerificationEmail({user:ye,url:$t,token:Jt},f.request))}if(f.context.options.emailAndPassword.autoSignIn===!1||f.context.options.emailAndPassword.requireEmailVerification)return f.json({token:null,user:(0,a.kc)(f.context.options,ye)});let Qt=await f.context.internalAdapter.createSession(ye.id,it===!1);if(!Qt)throw new s.LG("BAD_REQUEST",{message:h.q.FAILED_TO_CREATE_SESSION});return await(0,k.$G)(f,{session:Qt,user:ye},it===!1),f.json({token:Qt.token,user:(0,a.kc)(f.context.options,ye)})}));var ct=o(50426);let vt=N.record(N.string().meta({description:"Field name must be a string"}),N.any()),Ut=()=>(0,c.Aw)("/update-user",{method:"POST",operationId:"updateUser",body:vt,use:[G],metadata:{$Infer:{body:{}},openapi:{operationId:"updateUser",description:"Update the current user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},image:{type:"string",description:"The image of the user",nullable:!0}}}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",$ref:"#/components/schemas/User"}}}}}}}}}},async f=>{let ye=f.body;if(typeof ye!="object"||Array.isArray(ye))throw new s.LG("BAD_REQUEST",{message:"Body must be an object"});if(ye.email)throw new s.LG("BAD_REQUEST",{message:h.q.EMAIL_CAN_NOT_BE_UPDATED});let{name:Ie,image:Te,...ze}=ye,Ce=f.context.session,He=(0,a.pS)(f.context.options,ze,"update");if(Te===void 0&&Ie===void 0&&Object.keys(He).length===0)throw new s.LG("BAD_REQUEST",{message:"No fields to update"});let Ge=await f.context.internalAdapter.updateUser(Ce.user.id,{name:Ie,image:Te,...He})??{...Ce.user,...Ie!==void 0&&{name:Ie},...Te!==void 0&&{image:Te},...He};return await(0,k.$G)(f,{session:Ce.session,user:Ge}),f.json({status:!0})}),nr=(0,c.Aw)("/change-password",{method:"POST",operationId:"changePassword",body:N.object({newPassword:N.string().meta({description:"The new password to set"}),currentPassword:N.string().meta({description:"The current password is required"}),revokeOtherSessions:N.boolean().meta({description:"Must be a boolean value"}).optional()}),use:[X],metadata:{openapi:{operationId:"changePassword",description:"Change the password of the user",responses:{200:{description:"Password successfully changed",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",nullable:!0,description:"New session token if other sessions were revoked"},user:{type:"object",properties:{id:{type:"string",description:"The unique identifier of the user"},email:{type:"string",format:"email",description:"The email address of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",format:"uri",nullable:!0,description:"The profile image URL of the user"},emailVerified:{type:"boolean",description:"Whether the email has been verified"},createdAt:{type:"string",format:"date-time",description:"When the user was created"},updatedAt:{type:"string",format:"date-time",description:"When the user was last updated"}},required:["id","email","name","emailVerified","createdAt","updatedAt"]}},required:["user"]}}}}}}}},async f=>{let{newPassword:ye,currentPassword:Ie,revokeOtherSessions:Te}=f.body,ze=f.context.session,Ce=f.context.password.config.minPasswordLength;if(ye.length<Ce)throw f.context.logger.error("Password is too short"),new s.LG("BAD_REQUEST",{message:h.q.PASSWORD_TOO_SHORT});let He=f.context.password.config.maxPasswordLength;if(ye.length>He)throw f.context.logger.error("Password is too long"),new s.LG("BAD_REQUEST",{message:h.q.PASSWORD_TOO_LONG});let Ge=(await f.context.internalAdapter.findAccounts(ze.user.id)).find(at=>at.providerId==="credential"&&at.password);if(!Ge||!Ge.password)throw new s.LG("BAD_REQUEST",{message:h.q.CREDENTIAL_ACCOUNT_NOT_FOUND});let it=await f.context.password.hash(ye);if(!await f.context.password.verify({hash:Ge.password,password:Ie}))throw new s.LG("BAD_REQUEST",{message:h.q.INVALID_PASSWORD});await f.context.internalAdapter.updateAccount(Ge.id,{password:it});let gt=null;if(Te){await f.context.internalAdapter.deleteSessions(ze.user.id);let at=await f.context.internalAdapter.createSession(ze.user.id);if(!at)throw new s.LG("INTERNAL_SERVER_ERROR",{message:h.q.FAILED_TO_GET_SESSION});await(0,k.$G)(f,{session:at,user:ze.user}),gt=at.token}return f.json({token:gt,user:(0,a.kc)(f.context.options,ze.user)})}),br=(0,c.Aw)({method:"POST",body:N.object({newPassword:N.string().meta({description:"The new password to set is required"})}),use:[X]},async f=>{let{newPassword:ye}=f.body,Ie=f.context.session,Te=f.context.password.config.minPasswordLength;if(ye.length<Te)throw f.context.logger.error("Password is too short"),new s.LG("BAD_REQUEST",{message:h.q.PASSWORD_TOO_SHORT});let ze=f.context.password.config.maxPasswordLength;if(ye.length>ze)throw f.context.logger.error("Password is too long"),new s.LG("BAD_REQUEST",{message:h.q.PASSWORD_TOO_LONG});let Ce=(await f.context.internalAdapter.findAccounts(Ie.user.id)).find(Ge=>Ge.providerId==="credential"&&Ge.password),He=await f.context.password.hash(ye);if(!Ce)return await f.context.internalAdapter.linkAccount({userId:Ie.user.id,providerId:"credential",accountId:Ie.user.id,password:He}),f.json({status:!0});throw new s.LG("BAD_REQUEST",{message:"user already has a password"})}),ke=(0,c.Aw)("/delete-user",{method:"POST",use:[X],body:N.object({callbackURL:N.string().meta({description:"The callback URL to redirect to after the user is deleted"}).optional(),password:N.string().meta({description:"The password of the user is required to delete the user"}).optional(),token:N.string().meta({description:"The token to delete the user is required"}).optional()}),metadata:{openapi:{operationId:"deleteUser",description:"Delete the user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{callbackURL:{type:"string",description:"The callback URL to redirect to after the user is deleted"},password:{type:"string",description:"The user's password. Required if session is not fresh"},token:{type:"string",description:"The deletion verification token"}}}}}},responses:{200:{description:"User deletion processed successfully",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the operation was successful"},message:{type:"string",enum:["User deleted","Verification email sent"],description:"Status message of the deletion process"}},required:["success","message"]}}}}}}}},async f=>{if(!f.context.options.user?.deleteUser?.enabled)throw f.context.logger.error("Delete user is disabled. Enable it in the options"),new s.LG("NOT_FOUND");let ye=f.context.session;if(f.body.password){let ze=(await f.context.internalAdapter.findAccounts(ye.user.id)).find(Ce=>Ce.providerId==="credential"&&Ce.password);if(!ze||!ze.password)throw new s.LG("BAD_REQUEST",{message:h.q.CREDENTIAL_ACCOUNT_NOT_FOUND});if(!await f.context.password.verify({hash:ze.password,password:f.body.password}))throw new s.LG("BAD_REQUEST",{message:h.q.INVALID_PASSWORD})}if(f.body.token)return await xe({...f,query:{token:f.body.token}}),f.json({success:!0,message:"User deleted"});if(f.context.options.user.deleteUser?.sendDeleteAccountVerification){let ze=(0,ct.k)(32,"0-9","a-z");await f.context.internalAdapter.createVerificationValue({value:ye.user.id,identifier:`delete-account-${ze}`,expiresAt:new Date(Date.now()+1e3*(f.context.options.user.deleteUser?.deleteTokenExpiresIn||86400))});let Ce=`${f.context.baseURL}/delete-user/callback?token=${ze}&callbackURL=${f.body.callbackURL||"/"}`;return await f.context.runInBackgroundOrAwait(f.context.options.user.deleteUser.sendDeleteAccountVerification({user:ye.user,url:Ce,token:ze},f.request)),f.json({success:!0,message:"Verification email sent"})}if(!f.body.password&&f.context.sessionConfig.freshAge!==0){let ze=new Date(ye.session.createdAt).getTime(),Ce=1e3*f.context.sessionConfig.freshAge;if(Date.now()-ze>1e3*Ce)throw new s.LG("BAD_REQUEST",{message:h.q.SESSION_EXPIRED})}let Ie=f.context.options.user.deleteUser?.beforeDelete;Ie&&await Ie(ye.user,f.request),await f.context.internalAdapter.deleteUser(ye.user.id),await f.context.internalAdapter.deleteSessions(ye.user.id),(0,k.eC)(f);let Te=f.context.options.user.deleteUser?.afterDelete;return Te&&await Te(ye.user,f.request),f.json({success:!0,message:"User deleted"})}),xe=(0,c.Aw)("/delete-user/callback",{method:"GET",query:N.object({token:N.string().meta({description:"The token to verify the deletion request"}),callbackURL:N.string().meta({description:"The URL to redirect to after deletion"}).optional()}),use:[W(f=>f.query.callbackURL)],metadata:{openapi:{description:"Callback to complete user deletion with verification token",responses:{200:{description:"User successfully deleted",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the deletion was successful"},message:{type:"string",enum:["User deleted"],description:"Confirmation message"}},required:["success","message"]}}}}}}}},async f=>{if(!f.context.options.user?.deleteUser?.enabled)throw f.context.logger.error("Delete user is disabled. Enable it in the options"),new s.LG("NOT_FOUND");let ye=await Q(f);if(!ye)throw new s.LG("NOT_FOUND",{message:h.q.FAILED_TO_GET_USER_INFO});let Ie=await f.context.internalAdapter.findVerificationValue(`delete-account-${f.query.token}`);if(!Ie||Ie.expiresAt<new Date||Ie.value!==ye.user.id)throw new s.LG("NOT_FOUND",{message:h.q.INVALID_TOKEN});let Te=f.context.options.user.deleteUser?.beforeDelete;Te&&await Te(ye.user,f.request),await f.context.internalAdapter.deleteUser(ye.user.id),await f.context.internalAdapter.deleteSessions(ye.user.id),await f.context.internalAdapter.deleteAccounts(ye.user.id),await f.context.internalAdapter.deleteVerificationValue(Ie.id),(0,k.eC)(f);let ze=f.context.options.user.deleteUser?.afterDelete;if(ze&&await ze(ye.user,f.request),f.query.callbackURL)throw f.redirect(f.query.callbackURL||"/");return f.json({success:!0,message:"User deleted"})}),Fe=(0,c.Aw)("/change-email",{method:"POST",body:N.object({newEmail:N.email().meta({description:"The new email address to set must be a valid email address"}),callbackURL:N.string().meta({description:"The URL to redirect to after email verification"}).optional()}),use:[X],metadata:{openapi:{operationId:"changeEmail",responses:{200:{description:"Email change request processed successfully",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",$ref:"#/components/schemas/User"},status:{type:"boolean",description:"Indicates if the request was successful"},message:{type:"string",enum:["Email updated","Verification email sent"],description:"Status message of the email change process",nullable:!0}},required:["status"]}}}},422:{description:"Unprocessable Entity. Email already exists",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}}}}}},async f=>{if(!f.context.options.user?.changeEmail?.enabled)throw f.context.logger.error("Change email is disabled."),new s.LG("BAD_REQUEST",{message:"Change email is disabled"});let ye=f.body.newEmail.toLowerCase();if(ye===f.context.session.user.email)throw f.context.logger.error("Email is the same"),new s.LG("BAD_REQUEST",{message:"Email is the same"});if(await f.context.internalAdapter.findUserByEmail(ye))throw f.context.logger.error("Email already exists"),new s.LG("UNPROCESSABLE_ENTITY",{message:h.q.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});if(f.context.session.user.emailVerified!==!0&&f.context.options.user.changeEmail.updateEmailWithoutVerification){if(await f.context.internalAdapter.updateUserByEmail(f.context.session.user.email,{email:ye}),await(0,k.$G)(f,{session:f.context.session.session,user:{...f.context.session.user,email:ye}}),f.context.options.emailVerification?.sendVerificationEmail){let ze=await ce(f.context.secret,ye,void 0,f.context.options.emailVerification?.expiresIn),Ce=`${f.context.baseURL}/verify-email?token=${ze}&callbackURL=${f.body.callbackURL||"/"}`;await f.context.runInBackgroundOrAwait(f.context.options.emailVerification.sendVerificationEmail({user:{...f.context.session.user,email:ye},url:Ce,token:ze},f.request))}return f.json({status:!0})}if(f.context.session.user.emailVerified&&(f.context.options.user.changeEmail.sendChangeEmailConfirmation||f.context.options.user.changeEmail.sendChangeEmailVerification)){let ze=await ce(f.context.secret,f.context.session.user.email,ye,f.context.options.emailVerification?.expiresIn,{requestType:"change-email-confirmation"}),Ce=`${f.context.baseURL}/verify-email?token=${ze}&callbackURL=${f.body.callbackURL||"/"}`,He=f.context.options.user.changeEmail.sendChangeEmailConfirmation||f.context.options.user.changeEmail.sendChangeEmailVerification;return He&&await f.context.runInBackgroundOrAwait(He({user:f.context.session.user,newEmail:ye,url:Ce,token:ze},f.request)),f.json({status:!0})}if(!f.context.options.emailVerification?.sendVerificationEmail)throw f.context.logger.error("Verification email isn't enabled."),new s.LG("BAD_REQUEST",{message:"Verification email isn't enabled"});let Ie=await ce(f.context.secret,f.context.session.user.email,ye,f.context.options.emailVerification?.expiresIn,{requestType:"change-email-verification"}),Te=`${f.context.baseURL}/verify-email?token=${Ie}&callbackURL=${f.body.callbackURL||"/"}`;return await f.context.runInBackgroundOrAwait(f.context.options.emailVerification.sendVerificationEmail({user:{...f.context.session.user,email:ye},url:Te,token:Ie},f.request)),f.json({status:!0})}),Ze=(0,o(53186).zG)((f,ye,Ie)=>{if(Array.isArray(f[ye])&&Array.isArray(Ie))return f[ye]=Ie,!0}),ht=new WeakMap;async function dt(f,ye){let Ie={};for(let Te of ye){let ze=!1;try{ze=Te.matcher(f)}catch(Ce){let He=ht.get(Te.handler)??"unknown";throw f.context.logger.error(`An error occurred during ${He} hook matcher execution:`,Ce),new s.LG("INTERNAL_SERVER_ERROR",{message:"An error occurred during hook matcher execution. Check the logs for more details."})}if(ze){let Ce=await Te.handler({...f,returnHeaders:!1}).catch(He=>{throw He instanceof s.LG&&(0,x.p8)(f.context.logger.level,"debug")&&(He.stack=He.errorStack),He});if(Ce&&typeof Ce=="object"){if("context"in Ce&&typeof Ce.context=="object"){let{headers:He,...Ge}=Ce.context;He instanceof Headers&&(Ie.headers?He.forEach((it,gt)=>{Ie.headers?.set(gt,it)}):Ie.headers=He),Ie=Ze(Ge,Ie);continue}return Ce}}}return{context:Ie}}async function Et(f,ye){for(let Ie of ye)if(Ie.matcher(f)){let Te=await Ie.handler(f).catch(ze=>{if(ze instanceof s.LG)return(0,x.p8)(f.context.logger.level,"debug")&&(ze.stack=ze.errorStack),{response:ze,headers:ze.headers?new Headers(ze.headers):null};throw ze});Te.headers&&Te.headers.forEach((ze,Ce)=>{f.context.responseHeaders?Ce.toLowerCase()==="set-cookie"?f.context.responseHeaders.append(Ce,ze):f.context.responseHeaders.set(Ce,ze):f.context.responseHeaders=new Headers({[Ce]:ze})}),Te.response&&(f.context.returned=Te.response)}return{response:f.context.returned,headers:f.context.responseHeaders}}function It(f,ye){let Ie=new Map;f.plugins?.forEach(ze=>{if(ze.endpoints){for(let[Ce,He]of Object.entries(ze.endpoints))if(He&&"path"in He&&typeof He.path=="string"){let Ge=He.path,it=[];He.options&&"method"in He.options&&(Array.isArray(He.options.method)?it=He.options.method:typeof He.options.method=="string"&&(it=[He.options.method])),it.length===0&&(it=["*"]),Ie.has(Ge)||Ie.set(Ge,[]),Ie.get(Ge).push({pluginId:ze.id,endpointKey:Ce,methods:it})}}});let Te=[];for(let[ze,Ce]of Ie.entries())if(Ce.length>1){let He=new Map,Ge=!1;for(let it of Ce)for(let gt of it.methods)He.has(gt)||He.set(gt,[]),He.get(gt).push(it.pluginId),He.get(gt).length>1&&(Ge=!0),(gt==="*"&&Ce.length>1||gt!=="*"&&He.has("*"))&&(Ge=!0);if(Ge){let it=[...new Set(Ce.map(at=>at.pluginId))],gt=[];for(let[at,wt]of He.entries())(wt.length>1||at==="*"&&Ce.length>1||at!=="*"&&He.has("*"))&&gt.push(at);Te.push({path:ze,plugins:it,conflictingMethods:gt})}}if(Te.length>0){let ze=Te.map(Ce=>`  - "${Ce.path}" [${Ce.conflictingMethods.join(", ")}] used by plugins: ${Ce.plugins.join(", ")}`).join(`
`);ye.error(`Endpoint path conflicts detected! Multiple plugins are trying to use the same endpoint paths with conflicting HTTP methods:
${ze}

To resolve this, you can:
	1. Use only one of the conflicting plugins
	2. Configure the plugins to use different paths (if supported)
	3. Ensure plugins use different HTTP methods for the same path
`)}}function jt(f,ye){let Ie=ye.plugins?.reduce((ze,Ce)=>({...ze,...Ce.endpoints}),{})??{},Te=ye.plugins?.map(ze=>ze.middlewares?.map(Ce=>{let He=async Ge=>{let it=await f;return Ce.middleware({...Ge,context:{...it,...Ge.context}})};return He.options=Ce.middleware.options,{path:Ce.path,middleware:He}})).filter(ze=>ze!==void 0).flat()||[];return{api:function(ze,Ce){let He={};for(let[Ge,it]of Object.entries(ze))He[Ge]=async gt=>{let at=async()=>{let wt=await Ce,Tt={...gt,context:{...wt,returned:void 0,responseHeaders:void 0,session:null},path:it.path,headers:gt?.headers?new Headers(gt?.headers):void 0};return(0,Ot.Qs)(Tt,async()=>{let{beforeHooks:Qt,afterHooks:Jt}=function(qt){let or=qt.options.plugins||[],Vt=[],lr=[],ur=qt.options.hooks?.before;ur&&(ht.set(ur,"user"),Vt.push({matcher:()=>!0,handler:ur}));let gr=qt.options.hooks?.after;gr&&(ht.set(gr,"user"),lr.push({matcher:()=>!0,handler:gr}));let Or=or.filter(vr=>vr.hooks?.before).map(vr=>vr.hooks?.before).flat(),ir=or.filter(vr=>vr.hooks?.after).map(vr=>vr.hooks?.after).flat();return Or.length&&Vt.push(...Or),ir.length&&lr.push(...ir),{beforeHooks:Vt,afterHooks:lr}}(wt),er=await dt(Tt,Qt);if("context"in er&&er.context&&typeof er.context=="object"){let{headers:qt,...or}=er.context;qt&&qt.forEach((Vt,lr)=>{Tt.headers.set(lr,Vt)}),Tt=Ze(or,Tt)}else if(er)return gt?.asResponse?(0,s.Zr)(er,{headers:gt?.headers}):gt?.returnHeaders?{headers:gt?.headers,response:er}:er;Tt.asResponse=!1,Tt.returnHeaders=!0,Tt.returnStatus=!0;let $t=await(0,Ot.Qs)(Tt,()=>it(Tt)).catch(qt=>{if(qt instanceof s.LG)return{response:qt,status:qt.statusCode,headers:qt.headers?new Headers(qt.headers):null};throw qt});if($t&&$t instanceof Response)return $t;Tt.context.returned=$t.response,Tt.context.responseHeaders=$t.headers;let Pt=await Et(Tt,Jt);if(Pt.response&&($t.response=Pt.response),$t.response instanceof s.LG&&(0,x.p8)(wt.logger.level,"debug")&&($t.response.stack=$t.response.errorStack),$t.response instanceof s.LG&&!gt?.asResponse)throw $t.response;return gt?.asResponse?(0,s.Zr)($t.response,{headers:$t.headers,status:$t.status}):gt?.returnHeaders?gt?.returnStatus?{headers:$t.headers,response:$t.response,status:$t.status}:{headers:$t.headers,response:$t.response}:gt?.returnStatus?{response:$t.response,status:$t.status}:$t.response})};return await(0,Ot.ty)()?at():(0,Ot.uy)(new WeakMap,at)},He[Ge].path=it.path,He[Ge].options=it.options;return He}({signInSocial:kt(),callbackOAuth:Re,getSession:F(),signOut:tt,signUpEmail:yt(),signInEmail:Ct(),resetPassword:re,verifyPassword:We,verifyEmail:ue,sendVerificationEmail:H,changeEmail:Fe,changePassword:nr,setPassword:br,updateUser:Ut(),deleteUser:ke,requestPasswordReset:bt,requestPasswordResetCallback:qe,listSessions:ne(),revokeSession:we,revokeSessions:Ee,revokeOtherSessions:$e,linkSocialAccount:A,listUserAccounts:E,deleteUserCallback:xe,unlinkAccount:U,refreshToken:Y,getAccessToken:te,accountInfo:ee,...Ie,ok:Je,error:lt},f),middlewares:Te}}let Ft=(f,ye)=>{let{api:Ie,middlewares:Te}=jt(f,ye),ze=new URL(f.baseURL).pathname;return(0,s.aE)(Ie,{routerContext:f,openapi:{disabled:!0},basePath:ze,routerMiddleware:[{path:"/**",middleware:$},...Te],allowedMediaTypes:["application/json"],skipTrailingSlashes:ye.advanced?.skipTrailingSlashes??!1,async onRequest(Ce){let He=f.options.disabledPaths||[],Ge=(0,i.Wi)(Ce.url,ze);if(He.includes(Ge))return new Response("Not Found",{status:404});let it=Ce;for(let at of f.options.plugins||[])if(at.onRequest){let wt=await at.onRequest(it,f);if(wt&&"response"in wt)return wt.response;wt&&"request"in wt&&(it=wt.request)}return await q(it,f)||it},async onResponse(Ce){for(let He of f.options.plugins||[])if(He.onResponse){let Ge=await He.onResponse(Ce,f);if(Ge)return Ge.response}return Ce},onError(Ce){if(Ce instanceof s.LG&&Ce.status==="FOUND")return;if(ye.onAPIError?.throw)throw Ce;if(ye.onAPIError?.onError){ye.onAPIError.onError(Ce,f);return}let He=ye.logger?.level,Ge=He==="error"||He==="warn"||He==="debug"?x.vF:void 0;if(ye.logger?.disabled!==!0){if(Ce&&typeof Ce=="object"&&"message"in Ce&&typeof Ce.message=="string"&&(Ce.message.includes("no column")||Ce.message.includes("column")||Ce.message.includes("relation")||Ce.message.includes("table")||Ce.message.includes("does not exist"))){f.logger?.error(Ce.message);return}Ce instanceof s.LG?(Ce.status==="INTERNAL_SERVER_ERROR"&&f.logger.error(Ce.status,Ce),Ge?.error(Ce.message)):f.logger?.error(Ce&&typeof Ce=="object"&&"name"in Ce?Ce.name:"",Ce)}}})}},Le.__chunk_80287=(Ue,ie,o)=>{"use strict";o.d(ie,{$:()=>d.$C}),o(86790),o(90468),o(67869);var d=o(99597)},Le.__chunk_80282=(Ue,ie,o)=>{"use strict";o.d(ie,{SS:()=>O,YK:()=>s,v0:()=>c});var d=o(8587),y=o(35889),h=o(55096),i=o(26772);function s(j){if((0,y.N)(j))return j.toOperationNode();if((0,i.Tn)(j))return j((0,h.A)()).toOperationNode();throw Error(`invalid expression: ${JSON.stringify(j)}`)}function c(j){if((0,y.N)(j))return j.toOperationNode();if((0,i.Tn)(j))return j((0,h.A)()).toOperationNode();throw Error(`invalid aliased expression: ${JSON.stringify(j)}`)}function O(j){return(0,d.B)(j)||(0,d.q)(j)||(0,i.Tn)(j)}},Le.__chunk_79895=(Ue,ie,o)=>{"use strict";o.d(ie,{zZ:()=>N});var d=Object.defineProperty,y=Object.defineProperties,h=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,O=(P,b,z)=>b in P?d(P,b,{enumerable:!0,configurable:!0,writable:!0,value:z}):P[b]=z,j=(P,b)=>{for(var z in b||(b={}))s.call(b,z)&&O(P,z,b[z]);if(i)for(var z of i(b))c.call(b,z)&&O(P,z,b[z]);return P},$=(P,b)=>y(P,h(b)),W=class extends Error{constructor(P,b,z){super(b||P.toString(),{cause:z}),this.status=P,this.statusText=b,this.error=z,Error.captureStackTrace(this,this.constructor)}},K=async(P,b)=>{var z,F,Q,G,X,oe;let ne=b||{},we={onRequest:[b?.onRequest],onResponse:[b?.onResponse],onSuccess:[b?.onSuccess],onError:[b?.onError],onRetry:[b?.onRetry]};if(!b||!b?.plugins)return{url:P,options:ne,hooks:we};for(let Ee of b?.plugins||[]){if(Ee.init){let $e=await((z=Ee.init)==null?void 0:z.call(Ee,P.toString(),b));ne=$e.options||ne,P=$e.url}we.onRequest.push((F=Ee.hooks)==null?void 0:F.onRequest),we.onResponse.push((Q=Ee.hooks)==null?void 0:Q.onResponse),we.onSuccess.push((G=Ee.hooks)==null?void 0:G.onSuccess),we.onError.push((X=Ee.hooks)==null?void 0:X.onError),we.onRetry.push((oe=Ee.hooks)==null?void 0:oe.onRetry)}return{url:P,options:ne,hooks:we}},I=class{constructor(P){this.options=P}shouldAttemptRetry(P,b){return this.options.shouldRetry?Promise.resolve(P<this.options.attempts&&this.options.shouldRetry(b)):Promise.resolve(P<this.options.attempts)}getDelay(){return this.options.delay}},p=class{constructor(P){this.options=P}shouldAttemptRetry(P,b){return this.options.shouldRetry?Promise.resolve(P<this.options.attempts&&this.options.shouldRetry(b)):Promise.resolve(P<this.options.attempts)}getDelay(P){return Math.min(this.options.maxDelay,this.options.baseDelay*2**P)}},_=async P=>{let b={},z=async F=>typeof F=="function"?await F():F;if(P?.auth){if(P.auth.type==="Bearer"){let F=await z(P.auth.token);if(!F)return b;b.authorization=`Bearer ${F}`}else if(P.auth.type==="Basic"){let[F,Q]=await Promise.all([z(P.auth.username),z(P.auth.password)]);if(!F||!Q)return b;b.authorization=`Basic ${btoa(`${F}:${Q}`)}`}else if(P.auth.type==="Custom"){let[F,Q]=await Promise.all([z(P.auth.prefix),z(P.auth.value)]);if(!Q)return b;b.authorization=`${F??""} ${Q}`}}return b},m=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function q(P){if(P===void 0)return!1;let b=typeof P;return b==="string"||b==="number"||b==="boolean"||b===null||b==="object"&&(!!Array.isArray(P)||!P.buffer&&(P.constructor&&P.constructor.name==="Object"||typeof P.toJSON=="function"))}function J(P){try{return JSON.parse(P)}catch{return P}}function a(P){return typeof P=="function"}async function V(P){let b=new Headers(P?.headers);for(let[z,F]of Object.entries(await _(P)||{}))b.set(z,F);if(!b.has("content-type")){let z=q(P?.body)?"application/json":null;z&&b.set("content-type",z)}return b}var C=class Kh extends Error{constructor(b,z){super(z||JSON.stringify(b,null,2)),this.issues=b,Object.setPrototypeOf(this,Kh.prototype)}};async function L(P,b){let z=await P["~standard"].validate(b);if(z.issues)throw new C(z.issues);return z.value}var k=["get","post","put","patch","delete"],N=async(P,b)=>{var z,F,Q,G,X,oe,ne,we;let{hooks:Ee,url:$e,options:v}=await K(P,b),Z=function(x){if(x?.customFetchImpl)return x.customFetchImpl;if(typeof Sr<"u"&&a(Sr.fetch))return Sr.fetch;if(typeof window<"u"&&a(window.fetch))return window.fetch;throw Error("No fetch implementation found")}(v),R=new AbortController,S=(z=v.signal)!=null?z:R.signal,E=function(x,fe){let{baseURL:ge,params:Se,query:Re}=fe||{query:{},params:{},baseURL:""},ae=x.startsWith("http")?x.split("/").slice(0,3).join("/"):ge||"";if(x.startsWith("@")){let Ye=x.toString().split("@")[1].split("/")[0];k.includes(Ye)&&(x=x.replace(`@${Ye}/`,"/"))}ae.endsWith("/")||(ae+="/");let[Ae,lt]=x.replace(ae,"").split("?"),Je=new URLSearchParams(lt);for(let[Ye,St]of Object.entries(Re||{})){let bt;if(St!=null){if(typeof St=="string")bt=St;else if(Array.isArray(St)){for(let qe of St)Je.append(Ye,qe);continue}else bt=JSON.stringify(St);Je.set(Ye,bt)}}if(Se)if(Array.isArray(Se))for(let[Ye,St]of Ae.split("/").filter(bt=>bt.startsWith(":")).entries()){let bt=Se[Ye];Ae=Ae.replace(St,bt)}else for(let[Ye,St]of Object.entries(Se))Ae=Ae.replace(`:${Ye}`,String(St));(Ae=Ae.split("/").map(encodeURIComponent).join("/")).startsWith("/")&&(Ae=Ae.slice(1));let rt=Je.toString();return rt=rt.length>0?`?${rt}`.replace(/\+/g,"%20"):"",ae.startsWith("http")?new URL(`${Ae}${rt}`,ae):`${ae}${Ae}${rt}`}($e,v),A=function(x){if(!x?.body)return null;let fe=new Headers(x?.headers);if(q(x.body)&&!fe.has("content-type")){for(let[ge,Se]of Object.entries(x?.body))Se instanceof Date&&(x.body[ge]=Se.toISOString());return JSON.stringify(x.body)}return fe.has("content-type")&&fe.get("content-type")==="application/x-www-form-urlencoded"&&q(x.body)?new URLSearchParams(x.body).toString():x.body}(v),U=await V(v),te=function(x,fe){var ge;if(fe?.method)return fe.method.toUpperCase();if(x.startsWith("@")){let Se=(ge=x.split("@")[1])==null?void 0:ge.split("/")[0];return k.includes(Se)?Se.toUpperCase():fe?.body?"POST":"GET"}return fe?.body?"POST":"GET"}($e,v),Y=$(j({},v),{url:E,headers:U,body:A,method:te,signal:S});for(let x of Ee.onRequest)if(x){let fe=await x(Y);typeof fe=="object"&&fe!==null&&(Y=fe)}("pipeTo"in Y&&typeof Y.pipeTo=="function"||typeof((F=b?.body)==null?void 0:F.pipe)=="function")&&!("duplex"in Y)&&(Y.duplex="half");let{clearTimeout:D}=function(x,fe){let ge;return!x?.signal&&x?.timeout&&(ge=setTimeout(()=>fe?.abort(),x?.timeout)),{abortTimeout:ge,clearTimeout:()=>{ge&&clearTimeout(ge)}}}(v,R),ee=await Z(Y.url,Y);D();let le={response:ee,request:Y};for(let x of Ee.onResponse)if(x){let fe=await x($(j({},le),{response:(Q=b?.hookOptions)!=null&&Q.cloneResponse?ee.clone():ee}));fe instanceof Response?ee=fe:typeof fe=="object"&&fe!==null&&(ee=fe.response)}if(ee.ok){if(Y.method==="HEAD")return{data:"",error:null};let x=function(ge){let Se=ge.headers.get("content-type"),Re=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!Se)return"json";let ae=Se.split(";").shift()||"";return m.test(ae)?"json":Re.has(ae)||ae.startsWith("text/")?"text":"blob"}(ee),fe={data:null,response:ee,request:Y};if(x==="json"||x==="text"){let ge=await ee.text(),Se=(G=Y.jsonParser)!=null?G:J;fe.data=await Se(ge)}else fe.data=await ee[x]();for(let ge of(Y?.output&&Y.output&&!Y.disableValidation&&(fe.data=await L(Y.output,fe.data)),Ee.onSuccess))ge&&await ge($(j({},fe),{response:(X=b?.hookOptions)!=null&&X.cloneResponse?ee.clone():ee}));return b?.throw?fe.data:{data:fe.data,error:null}}let se=(oe=b?.jsonParser)!=null?oe:J,ce=await ee.text(),me=function(x){try{return JSON.parse(x),!0}catch{return!1}}(ce),H=me?await se(ce):null,ue={response:ee,responseText:ce,request:Y,error:$(j({},H),{status:ee.status,statusText:ee.statusText})};for(let x of Ee.onError)x&&await x($(j({},ue),{response:(ne=b?.hookOptions)!=null&&ne.cloneResponse?ee.clone():ee}));if(b?.retry){let x=function(ge){if(typeof ge=="number")return new I({type:"linear",attempts:ge,delay:1e3});switch(ge.type){case"linear":return new I(ge);case"exponential":return new p(ge);default:throw Error("Invalid retry strategy")}}(b.retry),fe=(we=b.retryAttempt)!=null?we:0;if(await x.shouldAttemptRetry(fe,ee)){for(let Se of Ee.onRetry)Se&&await Se(le);let ge=x.getDelay(fe);return await new Promise(Se=>setTimeout(Se,ge)),await N(P,$(j({},b),{retryAttempt:fe+1}))}}if(b?.throw)throw new W(ee.status,ee.statusText,me?H:ce);return{data:null,error:$(j({},H),{status:ee.status,statusText:ee.statusText})}}},Le.__chunk_78139=(Ue,ie,o)=>{"use strict";o.d(ie,{FA:()=>Wt,Do:()=>br,lT:()=>nr,RO:()=>yt});var d=o(65307),y=o(81187);let h=Uint8Array.of(0),i=Uint8Array.of(),s=(ke,xe,Fe,Ze,ht)=>function(dt,Et,It,jt=32){(0,y.sd)(dt),(0,y.Fe)(jt,"length");let Ft=dt.outputLen;if(jt>255*Ft)throw Error("Length must be <= 255*HashLen");let f=Math.ceil(jt/Ft);It===void 0?It=i:(0,y.DO)(It,void 0,"info");let ye=new Uint8Array(f*Ft),Ie=d.w.create(dt,Et),Te=Ie._cloneInto(),ze=new Uint8Array(Ie.outputLen);for(let Ce=0;Ce<f;Ce++)h[0]=Ce+1,Te.update(Ce===0?i:ze).update(It).update(h).digestInto(ze),ye.set(ze,Ft*Ce),Ie._cloneInto(Te);return Ie.destroy(),Te.destroy(),(0,y.uH)(ze,h),ye.slice(0,jt)}(ke,function(dt,Et,It){return(0,y.sd)(dt),It===void 0&&(It=new Uint8Array(dt.outputLen)),(0,d.w)(dt,It,Et)}(ke,xe,Fe),Ze,ht);var c=o(13839),O=o(25527),j=o(64463),$=o(22352),W=o(95709);async function K(ke,xe,Fe){let Ze=await(0,W.j)(ke,xe,"sign");return(0,$.O)(ke,Ze),new Uint8Array(await crypto.subtle.sign((0,j.B)(ke,Ze.algorithm),Ze,Fe))}var I=o(14588),p=o(38427),_=o(85725),m=o(94616),q=o(73790),J=o(97646);class a{#e;#t;#r;constructor(xe){if(!(xe instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this.#e=xe}setProtectedHeader(xe){if(this.#t)throw TypeError("setProtectedHeader can only be called once");return this.#t=xe,this}setUnprotectedHeader(xe){if(this.#r)throw TypeError("setUnprotectedHeader can only be called once");return this.#r=xe,this}async sign(xe,Fe){let Ze,ht,dt,Et;if(!this.#t&&!this.#r)throw new p.Ye("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!(0,I.f)(this.#t,this.#r))throw new p.Ye("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let It={...this.#t,...this.#r},jt=(0,q.n)(p.Ye,new Map([["b64",!0]]),Fe?.crit,this.#t,It),Ft=!0;if(jt.has("b64")&&typeof(Ft=this.#t.b64)!="boolean")throw new p.Ye('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:f}=It;if(typeof f!="string"||!f)throw new p.Ye('JWS "alg" (Algorithm) Header Parameter missing or invalid');(0,m.y)(f,xe,"sign"),Ft?(Ze=(0,O.l)(this.#e),ht=(0,_.lF)(Ze)):(ht=this.#e,Ze=""),this.#t?(dt=(0,O.l)(JSON.stringify(this.#t)),Et=(0,_.lF)(dt)):(dt="",Et=new Uint8Array);let ye=(0,_.xW)(Et,(0,_.lF)("."),ht),Ie=await(0,J.l)(xe,f),Te=await K(f,Ie,ye),ze={signature:(0,O.l)(Te),payload:Ze};return this.#r&&(ze.header=this.#r),this.#t&&(ze.protected=dt),ze}}class V{#e;constructor(xe){this.#e=new a(xe)}setProtectedHeader(xe){return this.#e.setProtectedHeader(xe),this}async sign(xe,Fe){let Ze=await this.#e.sign(xe,Fe);if(Ze.payload===void 0)throw TypeError("use the flattened module for creating JWS with b64: false");return`${Ze.protected}.${Ze.payload}.${Ze.signature}`}}var C=o(43917);class L{#e;#t;constructor(xe={}){this.#t=new C.cE(xe)}setIssuer(xe){return this.#t.iss=xe,this}setSubject(xe){return this.#t.sub=xe,this}setAudience(xe){return this.#t.aud=xe,this}setJti(xe){return this.#t.jti=xe,this}setNotBefore(xe){return this.#t.nbf=xe,this}setExpirationTime(xe){return this.#t.exp=xe,this}setIssuedAt(xe){return this.#t.iat=xe,this}setProtectedHeader(xe){return this.#e=xe,this}async sign(xe,Fe){let Ze=new V(this.#t.data());if(Ze.setProtectedHeader(this.#e),Array.isArray(this.#e?.crit)&&this.#e.crit.includes("b64")&&this.#e.b64===!1)throw new p.Dp("JWTs MUST NOT use unencoded payload");return Ze.sign(xe,Fe)}}var k=o(93222);async function N(ke,xe){let Fe=`SHA-${ke.slice(-3)}`;return new Uint8Array(await crypto.subtle.digest(Fe,xe))}var P=o(56559),b=o(20138),z=o(5401);async function F(ke){if((0,P.D2)(ke)){if(ke.type!=="secret")return ke.export({format:"jwk"});ke=ke.export()}if(ke instanceof Uint8Array)return{kty:"oct",k:(0,O.l)(ke)};if(!(0,P.R7)(ke))throw TypeError((0,z.X)(ke,"CryptoKey","KeyObject","Uint8Array"));if(!ke.extractable)throw TypeError("non-extractable CryptoKey cannot be exported as a JWK");let{ext:xe,key_ops:Fe,alg:Ze,use:ht,...dt}=await crypto.subtle.exportKey("jwk",ke);return dt.kty==="AKP"&&(dt.alg=Ze),dt}async function Q(ke){return F(ke)}let G=(ke,xe)=>{if(typeof ke!="string"||!ke)throw new p._L(`${xe} missing or invalid`)};async function X(ke,xe){let Fe,Ze;if((0,b.ll)(ke))Fe=ke;else if((0,P.P2)(ke))Fe=await Q(ke);else throw TypeError((0,z.X)(ke,"CryptoKey","KeyObject","JSON Web Key"));if((xe??="sha256")!=="sha256"&&xe!=="sha384"&&xe!=="sha512")throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(Fe.kty){case"AKP":G(Fe.alg,'"alg" (Algorithm) Parameter'),G(Fe.pub,'"pub" (Public key) Parameter'),Ze={alg:Fe.alg,kty:Fe.kty,pub:Fe.pub};break;case"EC":G(Fe.crv,'"crv" (Curve) Parameter'),G(Fe.x,'"x" (X Coordinate) Parameter'),G(Fe.y,'"y" (Y Coordinate) Parameter'),Ze={crv:Fe.crv,kty:Fe.kty,x:Fe.x,y:Fe.y};break;case"OKP":G(Fe.crv,'"crv" (Subtype of Key Pair) Parameter'),G(Fe.x,'"x" (Public Key) Parameter'),Ze={crv:Fe.crv,kty:Fe.kty,x:Fe.x};break;case"RSA":G(Fe.e,'"e" (Exponent) Parameter'),G(Fe.n,'"n" (Modulus) Parameter'),Ze={e:Fe.e,kty:Fe.kty,n:Fe.n};break;case"oct":G(Fe.k,'"k" (Key Value) Parameter'),Ze={k:Fe.k,kty:Fe.kty};break;default:throw new p.T0('"kty" (Key Type) Parameter missing or unsupported')}let ht=(0,_.lF)(JSON.stringify(Ze));return(0,O.l)(await N(xe,ht))}let oe=Symbol();function ne(ke){switch(ke){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new p.T0(`Unsupported JWE Algorithm: ${ke}`)}}let we=ke=>crypto.getRandomValues(new Uint8Array(ne(ke)>>3));function Ee(ke,xe){if(xe.length<<3!==ne(ke))throw new p.aA("Invalid Initialization Vector length")}function $e(ke,xe){let Fe=ke.byteLength<<3;if(Fe!==xe)throw new p.aA(`Invalid Content Encryption Key length. Expected ${xe} bits, got ${Fe} bits`)}var v=o(75740);async function Z(ke,xe,Fe,Ze,ht){if(!(Fe instanceof Uint8Array))throw TypeError((0,z.X)(Fe,"Uint8Array"));let dt=parseInt(ke.slice(1,4),10),Et=await crypto.subtle.importKey("raw",Fe.subarray(dt>>3),"AES-CBC",!1,["encrypt"]),It=await crypto.subtle.importKey("raw",Fe.subarray(0,dt>>3),{hash:`SHA-${dt<<1}`,name:"HMAC"},!1,["sign"]),jt=new Uint8Array(await crypto.subtle.encrypt({iv:Ze,name:"AES-CBC"},Et,xe)),Ft=(0,_.xW)(ht,Ze,jt,(0,_.mx)(ht.length<<3));return{ciphertext:jt,tag:new Uint8Array((await crypto.subtle.sign("HMAC",It,Ft)).slice(0,dt>>3)),iv:Ze}}async function R(ke,xe,Fe,Ze,ht){let dt;Fe instanceof Uint8Array?dt=await crypto.subtle.importKey("raw",Fe,"AES-GCM",!1,["encrypt"]):((0,v.$)(Fe,ke,"encrypt"),dt=Fe);let Et=new Uint8Array(await crypto.subtle.encrypt({additionalData:ht,iv:Ze,name:"AES-GCM",tagLength:128},dt,xe)),It=Et.slice(-16);return{ciphertext:Et.slice(0,-16),tag:It,iv:Ze}}async function S(ke,xe,Fe,Ze,ht){if(!(0,P.R7)(Fe)&&!(Fe instanceof Uint8Array))throw TypeError((0,z.X)(Fe,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));switch(Ze?Ee(ke,Ze):Ze=we(ke),ke){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return Fe instanceof Uint8Array&&$e(Fe,parseInt(ke.slice(-3),10)),Z(ke,xe,Fe,Ze,ht);case"A128GCM":case"A192GCM":case"A256GCM":return Fe instanceof Uint8Array&&$e(Fe,parseInt(ke.slice(1,4),10)),R(ke,xe,Fe,Ze,ht);default:throw new p.T0("Unsupported JWE Content Encryption Algorithm")}}function E(ke,xe){if(ke.algorithm.length!==parseInt(xe.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${xe}`)}function A(ke,xe,Fe){return ke instanceof Uint8Array?crypto.subtle.importKey("raw",ke,"AES-KW",!0,[Fe]):((0,v.$)(ke,xe,Fe),ke)}async function U(ke,xe,Fe){let Ze=await A(xe,ke,"wrapKey");E(Ze,ke);let ht=await crypto.subtle.importKey("raw",Fe,{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.wrapKey("raw",ht,Ze,"AES-KW"))}async function te(ke,xe,Fe){let Ze=await A(xe,ke,"unwrapKey");E(Ze,ke);let ht=await crypto.subtle.unwrapKey("raw",Fe,Ze,"AES-KW",{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.exportKey("raw",ht))}function Y(ke){return(0,_.xW)((0,_.VS)(ke.length),ke)}async function D(ke,xe,Fe){let Ze=xe>>3,ht=Math.ceil(Ze/32),dt=new Uint8Array(32*ht);for(let Et=1;Et<=ht;Et++){let It=new Uint8Array(4+ke.length+Fe.length);It.set((0,_.VS)(Et),0),It.set(ke,4),It.set(Fe,4+ke.length);let jt=await N("sha256",It);dt.set(jt,(Et-1)*32)}return dt.slice(0,Ze)}async function ee(ke,xe,Fe,Ze,ht=new Uint8Array,dt=new Uint8Array){var Et;(0,v.$)(ke,"ECDH"),(0,v.$)(xe,"ECDH","deriveBits");let It=Y((0,_.lF)(Fe)),jt=Y(ht),Ft=Y(dt),f=(0,_.VS)(Ze),ye=new Uint8Array,Ie=(0,_.xW)(It,jt,Ft,f,ye);return D(new Uint8Array(await crypto.subtle.deriveBits({name:ke.algorithm.name,public:ke},xe,(Et=ke).algorithm.name==="X25519"?256:Math.ceil(parseInt(Et.algorithm.namedCurve.slice(-3),10)/8)<<3)),Ze,Ie)}function le(ke){switch(ke.algorithm.namedCurve){case"P-256":case"P-384":case"P-521":return!0;default:return ke.algorithm.name==="X25519"}}let se=(ke,xe)=>(0,_.xW)((0,_.lF)(ke),Uint8Array.of(0),xe);async function ce(ke,xe,Fe,Ze){if(!(ke instanceof Uint8Array)||ke.length<8)throw new p.aA("PBES2 Salt Input must be 8 or more octets");let ht=se(xe,ke),dt=parseInt(xe.slice(13,16),10),Et={hash:`SHA-${xe.slice(8,11)}`,iterations:Fe,name:"PBKDF2",salt:ht},It=await(Ze instanceof Uint8Array?crypto.subtle.importKey("raw",Ze,"PBKDF2",!1,["deriveBits"]):((0,v.$)(Ze,xe,"deriveBits"),Ze));return new Uint8Array(await crypto.subtle.deriveBits(Et,It,dt))}async function me(ke,xe,Fe,Ze=2048,ht=crypto.getRandomValues(new Uint8Array(16))){let dt=await ce(ht,ke,Ze,xe);return{encryptedKey:await U(ke.slice(-6),dt,Fe),p2c:Ze,p2s:(0,O.l)(ht)}}async function H(ke,xe,Fe,Ze,ht){let dt=await ce(ht,ke,Ze,xe);return te(ke.slice(-6),dt,Fe)}let ue=ke=>{switch(ke){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new p.T0(`alg ${ke} is not supported either by JOSE or your javascript runtime`)}};async function x(ke,xe,Fe){return(0,v.$)(xe,ke,"encrypt"),(0,$.O)(ke,xe),new Uint8Array(await crypto.subtle.encrypt(ue(ke),xe,Fe))}async function fe(ke,xe,Fe){return(0,v.$)(xe,ke,"decrypt"),(0,$.O)(ke,xe),new Uint8Array(await crypto.subtle.decrypt(ue(ke),xe,Fe))}function ge(ke){switch(ke){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new p.T0(`Unsupported JWE Algorithm: ${ke}`)}}let Se=ke=>crypto.getRandomValues(new Uint8Array(ge(ke)>>3));async function Re(ke,xe){if(!(ke instanceof Uint8Array))throw TypeError("First argument must be a buffer");if(!(xe instanceof Uint8Array))throw TypeError("Second argument must be a buffer");let Fe={name:"HMAC",hash:"SHA-256"},Ze=await crypto.subtle.generateKey(Fe,!1,["sign"]),ht=new Uint8Array(await crypto.subtle.sign(Fe,Ze,ke)),dt=new Uint8Array(await crypto.subtle.sign(Fe,Ze,xe)),Et=0,It=-1;for(;++It<32;)Et|=ht[It]^dt[It];return Et===0}async function ae(ke,xe,Fe,Ze,ht,dt){let Et,It;if(!(xe instanceof Uint8Array))throw TypeError((0,z.X)(xe,"Uint8Array"));let jt=parseInt(ke.slice(1,4),10),Ft=await crypto.subtle.importKey("raw",xe.subarray(jt>>3),"AES-CBC",!1,["decrypt"]),f=await crypto.subtle.importKey("raw",xe.subarray(0,jt>>3),{hash:`SHA-${jt<<1}`,name:"HMAC"},!1,["sign"]),ye=(0,_.xW)(dt,Ze,Fe,(0,_.mx)(dt.length<<3)),Ie=new Uint8Array((await crypto.subtle.sign("HMAC",f,ye)).slice(0,jt>>3));try{Et=await Re(ht,Ie)}catch{}if(!Et)throw new p.xO;try{It=new Uint8Array(await crypto.subtle.decrypt({iv:Ze,name:"AES-CBC"},Ft,Fe))}catch{}if(!It)throw new p.xO;return It}async function Ae(ke,xe,Fe,Ze,ht,dt){let Et;xe instanceof Uint8Array?Et=await crypto.subtle.importKey("raw",xe,"AES-GCM",!1,["decrypt"]):((0,v.$)(xe,ke,"decrypt"),Et=xe);try{return new Uint8Array(await crypto.subtle.decrypt({additionalData:dt,iv:Ze,name:"AES-GCM",tagLength:128},Et,(0,_.xW)(Fe,ht)))}catch{throw new p.xO}}async function lt(ke,xe,Fe,Ze,ht,dt){if(!(0,P.R7)(xe)&&!(xe instanceof Uint8Array))throw TypeError((0,z.X)(xe,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(!Ze)throw new p.aA("JWE Initialization Vector missing");if(!ht)throw new p.aA("JWE Authentication Tag missing");switch(Ee(ke,Ze),ke){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return xe instanceof Uint8Array&&$e(xe,parseInt(ke.slice(-3),10)),ae(ke,xe,Fe,Ze,ht,dt);case"A128GCM":case"A192GCM":case"A256GCM":return xe instanceof Uint8Array&&$e(xe,parseInt(ke.slice(1,4),10)),Ae(ke,xe,Fe,Ze,ht,dt);default:throw new p.T0("Unsupported JWE Content Encryption Algorithm")}}async function Je(ke,xe,Fe,Ze){let ht=ke.slice(0,7),dt=await S(ht,Fe,xe,Ze,new Uint8Array);return{encryptedKey:dt.ciphertext,iv:(0,O.l)(dt.iv),tag:(0,O.l)(dt.tag)}}async function rt(ke,xe,Fe,Ze,ht){return lt(ke.slice(0,7),xe,Fe,Ze,ht,new Uint8Array)}async function Ye(ke,xe,Fe,Ze,ht={}){let dt,Et,It;switch(ke){case"dir":It=Fe;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let jt;if((0,P.Tz)(Fe),!le(Fe))throw new p.T0("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:Ft,apv:f}=ht;jt=ht.epk?await(0,J.l)(ht.epk,ke):(await crypto.subtle.generateKey(Fe.algorithm,!0,["deriveBits"])).privateKey;let{x:ye,y:Ie,crv:Te,kty:ze}=await Q(jt),Ce=await ee(Fe,jt,ke==="ECDH-ES"?xe:ke,ke==="ECDH-ES"?ge(xe):parseInt(ke.slice(-5,-2),10),Ft,f);if(Et={epk:{x:ye,crv:Te,kty:ze}},ze==="EC"&&(Et.epk.y=Ie),Ft&&(Et.apu=(0,O.l)(Ft)),f&&(Et.apv=(0,O.l)(f)),ke==="ECDH-ES"){It=Ce;break}It=Ze||Se(xe);let He=ke.slice(-6);dt=await U(He,Ce,It);break}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":It=Ze||Se(xe),(0,P.Tz)(Fe),dt=await x(ke,Fe,It);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{It=Ze||Se(xe);let{p2c:jt,p2s:Ft}=ht;({encryptedKey:dt,...Et}=await me(ke,Fe,It,jt,Ft));break}case"A128KW":case"A192KW":case"A256KW":It=Ze||Se(xe),dt=await U(ke,Fe,It);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{It=Ze||Se(xe);let{iv:jt}=ht;({encryptedKey:dt,...Et}=await Je(ke,Fe,It,jt));break}default:throw new p.T0('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:It,encryptedKey:dt,parameters:Et}}class St{#e;#t;#r;#i;#n;#s;#a;#o;constructor(xe){if(!(xe instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this.#e=xe}setKeyManagementParameters(xe){if(this.#o)throw TypeError("setKeyManagementParameters can only be called once");return this.#o=xe,this}setProtectedHeader(xe){if(this.#t)throw TypeError("setProtectedHeader can only be called once");return this.#t=xe,this}setSharedUnprotectedHeader(xe){if(this.#r)throw TypeError("setSharedUnprotectedHeader can only be called once");return this.#r=xe,this}setUnprotectedHeader(xe){if(this.#i)throw TypeError("setUnprotectedHeader can only be called once");return this.#i=xe,this}setAdditionalAuthenticatedData(xe){return this.#n=xe,this}setContentEncryptionKey(xe){if(this.#s)throw TypeError("setContentEncryptionKey can only be called once");return this.#s=xe,this}setInitializationVector(xe){if(this.#a)throw TypeError("setInitializationVector can only be called once");return this.#a=xe,this}async encrypt(xe,Fe){let Ze,ht,dt,Et,It,jt;if(!this.#t&&!this.#i&&!this.#r)throw new p.aA("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!(0,I.f)(this.#t,this.#i,this.#r))throw new p.aA("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let Ft={...this.#t,...this.#i,...this.#r};if((0,q.n)(p.aA,new Map,Fe?.crit,this.#t,Ft),Ft.zip!==void 0)throw new p.T0('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:f,enc:ye}=Ft;if(typeof f!="string"||!f)throw new p.aA('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof ye!="string"||!ye)throw new p.aA('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(this.#s&&(f==="dir"||f==="ECDH-ES"))throw TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${f}`);(0,m.y)(f==="dir"?ye:f,xe,"encrypt");{let He,Ge=await(0,J.l)(xe,f);({cek:ht,encryptedKey:Ze,parameters:He}=await Ye(f,ye,Ge,this.#s,this.#o)),He&&(Fe&&oe in Fe?this.#i?this.#i={...this.#i,...He}:this.setUnprotectedHeader(He):this.#t?this.#t={...this.#t,...He}:this.setProtectedHeader(He))}if(this.#t?(Et=(0,O.l)(JSON.stringify(this.#t)),It=(0,_.lF)(Et)):(Et="",It=new Uint8Array),this.#n){jt=(0,O.l)(this.#n);let He=(0,_.lF)(jt);dt=(0,_.xW)(It,(0,_.lF)("."),He)}else dt=It;let{ciphertext:Ie,tag:Te,iv:ze}=await S(ye,this.#e,ht,this.#a,dt),Ce={ciphertext:(0,O.l)(Ie)};return ze&&(Ce.iv=(0,O.l)(ze)),Te&&(Ce.tag=(0,O.l)(Te)),Ze&&(Ce.encrypted_key=(0,O.l)(Ze)),jt&&(Ce.aad=jt),this.#t&&(Ce.protected=Et),this.#r&&(Ce.unprotected=this.#r),this.#i&&(Ce.header=this.#i),Ce}}class bt{#e;constructor(xe){this.#e=new St(xe)}setContentEncryptionKey(xe){return this.#e.setContentEncryptionKey(xe),this}setInitializationVector(xe){return this.#e.setInitializationVector(xe),this}setProtectedHeader(xe){return this.#e.setProtectedHeader(xe),this}setKeyManagementParameters(xe){return this.#e.setKeyManagementParameters(xe),this}async encrypt(xe,Fe){let Ze=await this.#e.encrypt(xe,Fe);return[Ze.protected,Ze.encrypted_key,Ze.iv,Ze.ciphertext,Ze.tag].join(".")}}class qe{#e;#t;#r;#i;#n;#s;#a;#o;constructor(xe={}){this.#o=new C.cE(xe)}setIssuer(xe){return this.#o.iss=xe,this}setSubject(xe){return this.#o.sub=xe,this}setAudience(xe){return this.#o.aud=xe,this}setJti(xe){return this.#o.jti=xe,this}setNotBefore(xe){return this.#o.nbf=xe,this}setExpirationTime(xe){return this.#o.exp=xe,this}setIssuedAt(xe){return this.#o.iat=xe,this}setProtectedHeader(xe){if(this.#i)throw TypeError("setProtectedHeader can only be called once");return this.#i=xe,this}setKeyManagementParameters(xe){if(this.#r)throw TypeError("setKeyManagementParameters can only be called once");return this.#r=xe,this}setContentEncryptionKey(xe){if(this.#e)throw TypeError("setContentEncryptionKey can only be called once");return this.#e=xe,this}setInitializationVector(xe){if(this.#t)throw TypeError("setInitializationVector can only be called once");return this.#t=xe,this}replicateIssuerAsHeader(){return this.#n=!0,this}replicateSubjectAsHeader(){return this.#s=!0,this}replicateAudienceAsHeader(){return this.#a=!0,this}async encrypt(xe,Fe){let Ze=new bt(this.#o.data());return this.#i&&(this.#n||this.#s||this.#a)&&(this.#i={...this.#i,iss:this.#n?this.#o.iss:void 0,sub:this.#s?this.#o.sub:void 0,aud:this.#a?this.#o.aud:void 0}),Ze.setProtectedHeader(this.#i),this.#t&&Ze.setInitializationVector(this.#t),this.#e&&Ze.setContentEncryptionKey(this.#e),this.#r&&Ze.setKeyManagementParameters(this.#r),Ze.encrypt(xe,Fe)}}var re=o(88691),We=o(58780);async function ut(ke,xe,Fe,Ze,ht){switch(ke){case"dir":if(Fe!==void 0)throw new p.aA("Encountered unexpected JWE Encrypted Key");return xe;case"ECDH-ES":if(Fe!==void 0)throw new p.aA("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let dt,Et;if(!(0,re.G)(Ze.epk))throw new p.aA('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if((0,P.Tz)(xe),!le(xe))throw new p.T0("ECDH with the provided key is not allowed or not supported by your javascript runtime");let It=await(0,We.Og)(Ze.epk,ke);if((0,P.Tz)(It),Ze.apu!==void 0){if(typeof Ze.apu!="string")throw new p.aA('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{dt=(0,O.D)(Ze.apu)}catch{throw new p.aA("Failed to base64url decode the apu")}}if(Ze.apv!==void 0){if(typeof Ze.apv!="string")throw new p.aA('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{Et=(0,O.D)(Ze.apv)}catch{throw new p.aA("Failed to base64url decode the apv")}}let jt=await ee(It,xe,ke==="ECDH-ES"?Ze.enc:ke,ke==="ECDH-ES"?ge(Ze.enc):parseInt(ke.slice(-5,-2),10),dt,Et);if(ke==="ECDH-ES")return jt;if(Fe===void 0)throw new p.aA("JWE Encrypted Key missing");return te(ke.slice(-6),jt,Fe)}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(Fe===void 0)throw new p.aA("JWE Encrypted Key missing");return(0,P.Tz)(xe),fe(ke,xe,Fe);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let dt;if(Fe===void 0)throw new p.aA("JWE Encrypted Key missing");if(typeof Ze.p2c!="number")throw new p.aA('JOSE Header "p2c" (PBES2 Count) missing or invalid');let Et=ht?.maxPBES2Count||1e4;if(Ze.p2c>Et)throw new p.aA('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof Ze.p2s!="string")throw new p.aA('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{dt=(0,O.D)(Ze.p2s)}catch{throw new p.aA("Failed to base64url decode the p2s")}return H(ke,xe,Fe,Ze.p2c,dt)}case"A128KW":case"A192KW":case"A256KW":if(Fe===void 0)throw new p.aA("JWE Encrypted Key missing");return te(ke,xe,Fe);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let dt,Et;if(Fe===void 0)throw new p.aA("JWE Encrypted Key missing");if(typeof Ze.iv!="string")throw new p.aA('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof Ze.tag!="string")throw new p.aA('JOSE Header "tag" (Authentication Tag) missing or invalid');try{dt=(0,O.D)(Ze.iv)}catch{throw new p.aA("Failed to base64url decode the iv")}try{Et=(0,O.D)(Ze.tag)}catch{throw new p.aA("Failed to base64url decode the tag")}return rt(ke,xe,Fe,dt,Et)}default:throw new p.T0('Invalid or unsupported "alg" (JWE Algorithm) header value')}}var kt=o(46372);async function Ct(ke,xe,Fe){let Ze,ht,dt,Et,It,jt,Ft;if(!(0,re.G)(ke))throw new p.aA("Flattened JWE must be an object");if(ke.protected===void 0&&ke.header===void 0&&ke.unprotected===void 0)throw new p.aA("JOSE Header missing");if(ke.iv!==void 0&&typeof ke.iv!="string")throw new p.aA("JWE Initialization Vector incorrect type");if(typeof ke.ciphertext!="string")throw new p.aA("JWE Ciphertext missing or incorrect type");if(ke.tag!==void 0&&typeof ke.tag!="string")throw new p.aA("JWE Authentication Tag incorrect type");if(ke.protected!==void 0&&typeof ke.protected!="string")throw new p.aA("JWE Protected Header incorrect type");if(ke.encrypted_key!==void 0&&typeof ke.encrypted_key!="string")throw new p.aA("JWE Encrypted Key incorrect type");if(ke.aad!==void 0&&typeof ke.aad!="string")throw new p.aA("JWE AAD incorrect type");if(ke.header!==void 0&&!(0,re.G)(ke.header))throw new p.aA("JWE Shared Unprotected Header incorrect type");if(ke.unprotected!==void 0&&!(0,re.G)(ke.unprotected))throw new p.aA("JWE Per-Recipient Unprotected Header incorrect type");if(ke.protected)try{let gt=(0,O.D)(ke.protected);Ze=JSON.parse(_.D0.decode(gt))}catch{throw new p.aA("JWE Protected Header is invalid")}if(!(0,I.f)(Ze,ke.header,ke.unprotected))throw new p.aA("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let f={...Ze,...ke.header,...ke.unprotected};if((0,q.n)(p.aA,new Map,Fe?.crit,Ze,f),f.zip!==void 0)throw new p.T0('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:ye,enc:Ie}=f;if(typeof ye!="string"||!ye)throw new p.aA("missing JWE Algorithm (alg) in JWE Header");if(typeof Ie!="string"||!Ie)throw new p.aA("missing JWE Encryption Algorithm (enc) in JWE Header");let Te=Fe&&(0,kt.F)("keyManagementAlgorithms",Fe.keyManagementAlgorithms),ze=Fe&&(0,kt.F)("contentEncryptionAlgorithms",Fe.contentEncryptionAlgorithms);if(Te&&!Te.has(ye)||!Te&&ye.startsWith("PBES2"))throw new p.Rb('"alg" (Algorithm) Header Parameter value not allowed');if(ze&&!ze.has(Ie))throw new p.Rb('"enc" (Encryption Algorithm) Header Parameter value not allowed');if(ke.encrypted_key!==void 0)try{ht=(0,O.D)(ke.encrypted_key)}catch{throw new p.aA("Failed to base64url decode the encrypted_key")}let Ce=!1;typeof xe=="function"&&(xe=await xe(Ze,ke),Ce=!0),(0,m.y)(ye==="dir"?Ie:ye,xe,"decrypt");let He=await(0,J.l)(xe,ye);try{dt=await ut(ye,He,ht,f,Fe)}catch(gt){if(gt instanceof TypeError||gt instanceof p.aA||gt instanceof p.T0)throw gt;dt=Se(Ie)}if(ke.iv!==void 0)try{Et=(0,O.D)(ke.iv)}catch{throw new p.aA("Failed to base64url decode the iv")}if(ke.tag!==void 0)try{It=(0,O.D)(ke.tag)}catch{throw new p.aA("Failed to base64url decode the tag")}let Ge=ke.protected!==void 0?(0,_.lF)(ke.protected):new Uint8Array;jt=ke.aad!==void 0?(0,_.xW)(Ge,(0,_.lF)("."),(0,_.lF)(ke.aad)):Ge;try{Ft=(0,O.D)(ke.ciphertext)}catch{throw new p.aA("Failed to base64url decode the ciphertext")}let it={plaintext:await lt(Ie,dt,Ft,Et,It,jt)};if(ke.protected!==void 0&&(it.protectedHeader=Ze),ke.aad!==void 0)try{it.additionalAuthenticatedData=(0,O.D)(ke.aad)}catch{throw new p.aA("Failed to base64url decode the aad")}return ke.unprotected!==void 0&&(it.sharedUnprotectedHeader=ke.unprotected),ke.header!==void 0&&(it.unprotectedHeader=ke.header),Ce?{...it,key:He}:it}async function tt(ke,xe,Fe){if(ke instanceof Uint8Array&&(ke=_.D0.decode(ke)),typeof ke!="string")throw new p.aA("Compact JWE must be a string or Uint8Array");let{0:Ze,1:ht,2:dt,3:Et,4:It,length:jt}=ke.split(".");if(jt!==5)throw new p.aA("Invalid Compact JWE");let Ft=await Ct({ciphertext:Et,iv:dt||void 0,protected:Ze,tag:It||void 0,encrypted_key:ht||void 0},xe,Fe),f={plaintext:Ft.plaintext,protectedHeader:Ft.protectedHeader};return typeof xe=="function"?{...f,key:Ft.key}:f}async function Ot(ke,xe,Fe){let Ze=await tt(ke,xe,Fe),ht=(0,C.k6)(Ze.protectedHeader,Ze.plaintext,Fe),{protectedHeader:dt}=Ze;if(dt.iss!==void 0&&dt.iss!==ht.iss)throw new p.ie('replicated "iss" claim header parameter mismatch',ht,"iss","mismatch");if(dt.sub!==void 0&&dt.sub!==ht.sub)throw new p.ie('replicated "sub" claim header parameter mismatch',ht,"sub","mismatch");if(dt.aud!==void 0&&JSON.stringify(dt.aud)!==JSON.stringify(ht.aud))throw new p.ie('replicated "aud" claim header parameter mismatch',ht,"aud","mismatch");let Et={payload:ht,protectedHeader:dt};return typeof xe=="function"?{...Et,key:Ze.key}:Et}async function Wt(ke,xe,Fe=3600){return await new L(ke).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime(Math.floor(Date.now()/1e3)+Fe).sign(new TextEncoder().encode(xe))}async function yt(ke,xe){try{return(await(0,k.V)(ke,new TextEncoder().encode(xe))).payload}catch{return null}}let ct=new Uint8Array([66,101,116,116,101,114,65,117,116,104,46,106,115,32,71,101,110,101,114,97,116,101,100,32,69,110,99,114,121,112,116,105,111,110,32,75,101,121]),vt=()=>Date.now()/1e3|0,Ut="A256CBC-HS512";async function nr(ke,xe,Fe,Ze=3600){let ht=s(c.sc,new TextEncoder().encode(xe),new TextEncoder().encode(Fe),ct,64),dt=await X({kty:"oct",k:O.l(ht)},"sha256");return await new qe(ke).setProtectedHeader({alg:"dir",enc:Ut,kid:dt}).setIssuedAt().setExpirationTime(vt()+Ze).setJti(crypto.randomUUID()).encrypt(ht)}async function br(ke,xe,Fe){if(!ke)return null;try{let{payload:Ze}=await Ot(ke,async({kid:ht})=>{let dt=s(c.sc,new TextEncoder().encode(xe),new TextEncoder().encode(Fe),ct,64);if(ht===void 0||ht===await X({kty:"oct",k:O.l(dt)},"sha256"))return dt;throw Error("no matching decryption secret")},{clockTolerance:15,keyManagementAlgorithms:["dir"],contentEncryptionAlgorithms:[Ut,"A256GCM"]});return Ze}catch{return null}}},Le.__chunk_77438=(Ue,ie,o)=>{"use strict";o.d(ie,{i:()=>d,is:()=>y});let d=Symbol.for("drizzle:entityKind");function y(h,i){if(!h||typeof h!="object")return!1;if(h instanceof i)return!0;if(!Object.prototype.hasOwnProperty.call(i,d))throw Error(`Class "${i.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let s=Object.getPrototypeOf(h).constructor;if(s)for(;s;){if(d in s&&s[d]===i[d])return!0;s=Object.getPrototypeOf(s)}return!1}Symbol.for("drizzle:hasOwnEntityKind")},Le.__chunk_76984=(Ue,ie,o)=>{"use strict";o.d(ie,{C:()=>y,O:()=>h});var d=o(31448);function y(i){let s=c=>new Date(new Date().getTime()+1e3*c);return{tokenType:i.token_type,accessToken:i.access_token,refreshToken:i.refresh_token,accessTokenExpiresAt:i.expires_in?s(i.expires_in):void 0,refreshTokenExpiresAt:i.refresh_token_expires_in?s(i.refresh_token_expires_in):void 0,scopes:i?.scope?typeof i.scope=="string"?i.scope.split(" "):i.scope:[],idToken:i.id_token,raw:i}}async function h(i){let s=new TextEncoder().encode(i),c=await crypto.subtle.digest("SHA-256",s);return d.z.encode(new Uint8Array(c),{padding:!1})}},Le.__chunk_76351=Ue=>{function ie(d,y){var h=!1,i=this;return Promise.all(d.map(function(){var s=arguments;return i(function(){if(!h)return y.apply(void 0,s).catch(function(c){throw h=!0,c})})}))}function o(d){return d.queue=0,d.map=ie,d}Ue.exports=function(d){return o(d?function(y){var h=0,i=[];function s(){var j;--h<y&&(j=i.shift(),O.queue=i.length,j&&c(j.fn).then(j.resolve).catch(j.reject))}function c(j){h++;try{return Promise.resolve(j()).then(function($){return s(),$},function($){throw s(),$})}catch($){return s(),Promise.reject($)}}var O=function(j){return h>=y?new Promise(function($,W){i.push({fn:j,resolve:$,reject:W}),O.queue=i.length}):c(j)};return O}(d):function(y){return y()})}},Le.__chunk_75740=(Ue,ie,o)=>{"use strict";o.d(ie,{$:()=>c,Y:()=>s});let d=(O,j="algorithm.name")=>TypeError(`CryptoKey does not support this operation, its ${j} must be ${O}`),y=(O,j)=>O.name===j;function h(O){return parseInt(O.name.slice(4),10)}function i(O,j){if(j&&!O.usages.includes(j))throw TypeError(`CryptoKey does not support this operation, its usages must include ${j}.`)}function s(O,j,$){switch(j){case"HS256":case"HS384":case"HS512":{if(!y(O.algorithm,"HMAC"))throw d("HMAC");let W=parseInt(j.slice(2),10);if(h(O.algorithm.hash)!==W)throw d(`SHA-${W}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!y(O.algorithm,"RSASSA-PKCS1-v1_5"))throw d("RSASSA-PKCS1-v1_5");let W=parseInt(j.slice(2),10);if(h(O.algorithm.hash)!==W)throw d(`SHA-${W}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!y(O.algorithm,"RSA-PSS"))throw d("RSA-PSS");let W=parseInt(j.slice(2),10);if(h(O.algorithm.hash)!==W)throw d(`SHA-${W}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":if(!y(O.algorithm,"Ed25519"))throw d("Ed25519");break;case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":if(!y(O.algorithm,j))throw d(j);break;case"ES256":case"ES384":case"ES512":{if(!y(O.algorithm,"ECDSA"))throw d("ECDSA");let W=function(K){switch(K){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(j);if(O.algorithm.namedCurve!==W)throw d(W,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}i(O,$)}function c(O,j,$){switch(j){case"A128GCM":case"A192GCM":case"A256GCM":{if(!y(O.algorithm,"AES-GCM"))throw d("AES-GCM");let W=parseInt(j.slice(1,4),10);if(O.algorithm.length!==W)throw d(W,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!y(O.algorithm,"AES-KW"))throw d("AES-KW");let W=parseInt(j.slice(1,4),10);if(O.algorithm.length!==W)throw d(W,"algorithm.length");break}case"ECDH":switch(O.algorithm.name){case"ECDH":case"X25519":break;default:throw d("ECDH or X25519")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!y(O.algorithm,"PBKDF2"))throw d("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!y(O.algorithm,"RSA-OAEP"))throw d("RSA-OAEP");let W=parseInt(j.slice(9),10)||1;if(h(O.algorithm.hash)!==W)throw d(`SHA-${W}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}i(O,$)}},Le.__chunk_75454=(Ue,ie,o)=>{"use strict";o.d(ie,{bj:()=>c,uc:()=>j});var d=o(93692),y=o(9789),h=o(35889),i=o(7286),s=o(26772);class c{#e;get table(){return this.#e}constructor(W){this.#e=W}as(W){return new O(this.#e,W)}}class O{#e;#t;get table(){return this.#e}get alias(){return this.#t}constructor(W,K){this.#e=W,this.#t=K}toOperationNode(){return d.N.create((0,i.M$)(this.#e),y.O.create(this.#t))}}function j($){return(0,s.Gv)($)&&(0,h.N)($)&&(0,s.Kg)($.table)&&(0,s.Kg)($.alias)}},Le.__chunk_75416=(Ue,ie,o)=>{"use strict";o.d(ie,{v:()=>y});var d=o(26772);let y=(0,d.CN)({is:h=>h.kind==="ListNode",create:h=>(0,d.CN)({kind:"ListNode",items:(0,d.CN)(h)})})},Le.__chunk_75385=(Ue,ie,o)=>{"use strict";let d;o.d(ie,{w_:()=>$e,GY:()=>we});var y=o(95965),h=o(12897),i=o(5307);o(31878);var s=o(79895),c=o(25527),O=o(85725),j=o(88691);function $(v){let Z;if(typeof v=="string"){let R=v.split(".");(R.length===3||R.length===5)&&([Z]=R)}else if(typeof v=="object"&&v)if("protected"in v)Z=v.protected;else throw TypeError("Token does not contain a Protected Header");try{if(typeof Z!="string"||!Z)throw Error();let R=JSON.parse(O.D0.decode((0,c.D)(Z)));if(!(0,j.G)(R))throw Error();return R}catch{throw TypeError("Invalid Token or Protected Header formatting")}}var W=o(93222),K=o(38427);function I(v){let Z,R;if(typeof v!="string")throw new K.Dp("JWTs must use Compact JWS serialization, JWT must be a string");let{1:S,length:E}=v.split(".");if(E===5)throw new K.Dp("Only JWTs using Compact JWS serialization can be decoded");if(E!==3)throw new K.Dp("Invalid JWT");if(!S)throw new K.Dp("JWTs must contain a payload");try{Z=(0,c.D)(S)}catch{throw new K.Dp("Failed to base64url decode the payload")}try{R=JSON.parse(O.D0.decode(Z))}catch{throw new K.Dp("Failed to parse the decoded payload as JSON")}if(!(0,j.G)(R))throw new K.Dp("Invalid JWT Claims Set");return R}var p=o(58780),_=o(54030);let m=async v=>{let{data:Z}=await(0,s.zZ)("https://appleid.apple.com/auth/keys");if(!Z?.keys)throw new _.LG("BAD_REQUEST",{message:"Keys not found"});let R=Z.keys.find(S=>S.kid===v);if(!R)throw Error(`JWK with kid ${v} not found`);return await(0,p.Og)(R,R.alg)};var q=o(39311);o(68113);var J=o(30543);let a=async(v,Z,R)=>{let S=`https://cognito-idp.${Z}.amazonaws.com/${R}/.well-known/jwks.json`;try{let{data:E}=await(0,s.zZ)(S);if(!E?.keys)throw new _.LG("BAD_REQUEST",{message:"Keys not found"});let A=E.keys.find(U=>U.kid===v);if(!A)throw Error(`JWK with kid ${v} not found`);return await(0,p.Og)(A,A.alg)}catch(E){throw q.vF.error("Failed to fetch Cognito public key:",E),E}};function V(v){return(0,j.G)(v)}class C{#e;#t=new WeakMap;constructor(Z){if(!function(R){return R&&typeof R=="object"&&Array.isArray(R.keys)&&R.keys.every(V)}(Z))throw new K.Dm("JSON Web Key Set malformed");this.#e=structuredClone(Z)}jwks(){return this.#e}async getKey(Z,R){let{alg:S,kid:E}={...Z,...R?.header},A=function(D){switch(typeof D=="string"&&D.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";case"ML":return"AKP";default:throw new K.T0('Unsupported "alg" value for a JSON Web Key Set')}}(S),U=this.#e.keys.filter(D=>{let ee=A===D.kty;if(ee&&typeof E=="string"&&(ee=E===D.kid),ee&&(typeof D.alg=="string"||A==="AKP")&&(ee=S===D.alg),ee&&typeof D.use=="string"&&(ee=D.use==="sig"),ee&&Array.isArray(D.key_ops)&&(ee=D.key_ops.includes("verify")),ee)switch(S){case"ES256":ee=D.crv==="P-256";break;case"ES384":ee=D.crv==="P-384";break;case"ES512":ee=D.crv==="P-521";break;case"Ed25519":case"EdDSA":ee=D.crv==="Ed25519"}return ee}),{0:te,length:Y}=U;if(Y===0)throw new K.BT;if(Y!==1){let D=new K.$4,ee=this.#t;throw D[Symbol.asyncIterator]=async function*(){for(let le of U)try{yield await L(ee,le,S)}catch{}},D}return L(this.#t,te,S)}}async function L(v,Z,R){let S=v.get(Z)||v.set(Z,{}).get(Z);if(S[R]===void 0){let E=await(0,p.Og)({...Z,ext:!0},R);if(E instanceof Uint8Array||E.type!=="public")throw new K.Dm("JSON Web Key Set members must be public keys");S[R]=E}return S[R]}function k(v){let Z=new C(v),R=async(S,E)=>Z.getKey(S,E);return Object.defineProperties(R,{jwks:{value:()=>structuredClone(Z.jwks()),enumerable:!1,configurable:!1,writable:!1}}),R}typeof navigator<"u"&&navigator.userAgent?.startsWith?.("Mozilla/5.0 ")||(d="jose/v6.1.3");let N=Symbol();async function P(v,Z,R,S=fetch){let E=await S(v,{method:"GET",signal:R,redirect:"manual",headers:Z}).catch(A=>{throw A.name==="TimeoutError"?new K.xb:A});if(E.status!==200)throw new K.i4("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await E.json()}catch{throw new K.i4("Failed to parse the JSON Web Key Set HTTP response as JSON")}}let b=Symbol();class z{#e;#t;#r;#i;#n;#s;#a;#o;#l;#u;constructor(Z,R){if(!(Z instanceof URL))throw TypeError("url must be an instance of URL");this.#e=new URL(Z.href),this.#t=typeof R?.timeoutDuration=="number"?R?.timeoutDuration:5e3,this.#r=typeof R?.cooldownDuration=="number"?R?.cooldownDuration:3e4,this.#i=typeof R?.cacheMaxAge=="number"?R?.cacheMaxAge:6e5,this.#a=new Headers(R?.headers),d&&!this.#a.has("User-Agent")&&this.#a.set("User-Agent",d),this.#a.has("accept")||(this.#a.set("accept","application/json"),this.#a.append("accept","application/jwk-set+json")),this.#o=R?.[N],R?.[b]!==void 0&&(this.#u=R?.[b],function(S,E){return!!(!(typeof S!="object"||S===null||!("uat"in S)||typeof S.uat!="number"||Date.now()-S.uat>=E)&&"jwks"in S&&(0,j.G)(S.jwks)&&Array.isArray(S.jwks.keys)&&Array.prototype.every.call(S.jwks.keys,j.G))}(R?.[b],this.#i)&&(this.#n=this.#u.uat,this.#l=k(this.#u.jwks)))}pendingFetch(){return!!this.#s}coolingDown(){return typeof this.#n=="number"&&Date.now()<this.#n+this.#r}fresh(){return typeof this.#n=="number"&&Date.now()<this.#n+this.#i}jwks(){return this.#l?.jwks()}async getKey(Z,R){this.#l&&this.fresh()||await this.reload();try{return await this.#l(Z,R)}catch(S){if(S instanceof K.BT&&this.coolingDown()===!1)return await this.reload(),this.#l(Z,R);throw S}}async reload(){this.#s&&(typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent,1)&&(this.#s=void 0),this.#s||=P(this.#e.href,this.#a,AbortSignal.timeout(this.#t),this.#o).then(Z=>{this.#l=k(Z),this.#u&&(this.#u.uat=Date.now(),this.#u.jwks=Z),this.#n=Date.now(),this.#s=void 0}).catch(Z=>{throw this.#s=void 0,Z}),await this.#s}}var F=o(76984);let Q=(v="")=>v.split("://").map(Z=>Z.replace(/\/{2,}/g,"/")).join("://"),G=v=>{let Z=v||"https://gitlab.com";return{authorizationEndpoint:Q(`${Z}/oauth/authorize`),tokenEndpoint:Q(`${Z}/oauth/token`),userinfoEndpoint:Q(`${Z}/api/v4/user`)}},X=async v=>{let{data:Z}=await(0,s.zZ)("https://www.googleapis.com/oauth2/v3/certs");if(!Z?.keys)throw new _.LG("BAD_REQUEST",{message:"Keys not found"});let R=Z.keys.find(S=>S.kid===v);if(!R)throw Error(`JWK with kid ${v} not found`);return await(0,p.Og)(R,R.alg)};var oe=o(31448),ne=o(13348);let we={apple:v=>({id:"apple",name:"Apple",async createAuthorizationURL({state:Z,scopes:R,redirectURI:S}){let E=v.disableDefaultScope?[]:["email","name"];return v.scope&&E.push(...v.scope),R&&E.push(...R),await(0,y.J)({id:"apple",options:v,authorizationEndpoint:"https://appleid.apple.com/auth/authorize",scopes:E,state:Z,redirectURI:S,responseMode:"form_post",responseType:"code id_token"})},validateAuthorizationCode:async({code:Z,codeVerifier:R,redirectURI:S})=>(0,i.PB)({code:Z,codeVerifier:R,redirectURI:S,options:v,tokenEndpoint:"https://appleid.apple.com/auth/token"}),async verifyIdToken(Z,R){if(v.disableIdTokenSignIn)return!1;if(v.verifyIdToken)return v.verifyIdToken(Z,R);let{kid:S,alg:E}=$(Z);if(!S||!E)return!1;let{payload:A}=await(0,W.V)(Z,await m(S),{algorithms:[E],issuer:"https://appleid.apple.com",audience:v.audience&&v.audience.length?v.audience:v.appBundleIdentifier?v.appBundleIdentifier:v.clientId,maxTokenAge:"1h"});return["email_verified","is_private_email"].forEach(U=>{A[U]!==void 0&&(A[U]=!!A[U])}),(!R||A.nonce===R)&&!!A},refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async Z=>(0,h.J)({refreshToken:Z,options:{clientId:v.clientId,clientKey:v.clientKey,clientSecret:v.clientSecret},tokenEndpoint:"https://appleid.apple.com/auth/token"}),async getUserInfo(Z){let R;if(v.getUserInfo)return v.getUserInfo(Z);if(!Z.idToken)return null;let S=I(Z.idToken);if(!S)return null;R=Z.user?.name?`${Z.user.name.firstName||""} ${Z.user.name.lastName||""}`.trim()||" ":S.name||" ";let E=typeof S.email_verified=="boolean"?S.email_verified:S.email_verified==="true",A={...S,name:R},U=await v.mapProfileToUser?.(A);return{user:{id:S.sub,name:A.name,emailVerified:E,email:S.email,...U},data:A}},options:v}),atlassian:v=>({id:"atlassian",name:"Atlassian",async createAuthorizationURL({state:Z,scopes:R,codeVerifier:S,redirectURI:E}){if(!v.clientId||!v.clientSecret)throw q.vF.error("Client Id and Secret are required for Atlassian"),new J.$("CLIENT_ID_AND_SECRET_REQUIRED");if(!S)throw new J.$("codeVerifier is required for Atlassian");let A=v.disableDefaultScope?[]:["read:jira-user","offline_access"];return v.scope&&A.push(...v.scope),R&&A.push(...R),(0,y.J)({id:"atlassian",options:v,authorizationEndpoint:"https://auth.atlassian.com/authorize",scopes:A,state:Z,codeVerifier:S,redirectURI:E,additionalParams:{audience:"api.atlassian.com"},prompt:v.prompt})},validateAuthorizationCode:async({code:Z,codeVerifier:R,redirectURI:S})=>(0,i.PB)({code:Z,codeVerifier:R,redirectURI:S,options:v,tokenEndpoint:"https://auth.atlassian.com/oauth/token"}),refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async Z=>(0,h.J)({refreshToken:Z,options:{clientId:v.clientId,clientSecret:v.clientSecret},tokenEndpoint:"https://auth.atlassian.com/oauth/token"}),async getUserInfo(Z){if(v.getUserInfo)return v.getUserInfo(Z);if(!Z.accessToken)return null;try{let{data:R}=await(0,s.zZ)("https://api.atlassian.com/me",{headers:{Authorization:`Bearer ${Z.accessToken}`}});if(!R)return null;let S=await v.mapProfileToUser?.(R);return{user:{id:R.account_id,name:R.name,email:R.email,image:R.picture,emailVerified:!1,...S},data:R}}catch(R){return q.vF.error("Failed to fetch user info from Figma:",R),null}},options:v}),cognito:v=>{if(!v.domain||!v.region||!v.userPoolId)throw q.vF.error("Domain, region and userPoolId are required for Amazon Cognito. Make sure to provide them in the options."),new J.$("DOMAIN_AND_REGION_REQUIRED");let Z=v.domain.replace(/^https?:\/\//,""),R=`https://${Z}/oauth2/authorize`,S=`https://${Z}/oauth2/token`,E=`https://${Z}/oauth2/userinfo`;return{id:"cognito",name:"Cognito",async createAuthorizationURL({state:A,scopes:U,codeVerifier:te,redirectURI:Y}){if(!v.clientId)throw q.vF.error("ClientId is required for Amazon Cognito. Make sure to provide them in the options."),new J.$("CLIENT_ID_AND_SECRET_REQUIRED");if(v.requireClientSecret&&!v.clientSecret)throw q.vF.error("Client Secret is required when requireClientSecret is true. Make sure to provide it in the options."),new J.$("CLIENT_SECRET_REQUIRED");let D=v.disableDefaultScope?[]:["openid","profile","email"];v.scope&&D.push(...v.scope),U&&D.push(...U);let ee=await(0,y.J)({id:"cognito",options:{...v},authorizationEndpoint:R,scopes:D,state:A,codeVerifier:te,redirectURI:Y,prompt:v.prompt}),le=ee.searchParams.get("scope");if(le){ee.searchParams.delete("scope");let se=encodeURIComponent(le),ce=ee.toString(),me=ce.includes("?")?"&":"?";return new URL(`${ce}${me}scope=${se}`)}return ee},validateAuthorizationCode:async({code:A,codeVerifier:U,redirectURI:te})=>(0,i.PB)({code:A,codeVerifier:U,redirectURI:te,options:v,tokenEndpoint:S}),refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async A=>(0,h.J)({refreshToken:A,options:{clientId:v.clientId,clientKey:v.clientKey,clientSecret:v.clientSecret},tokenEndpoint:S}),async verifyIdToken(A,U){if(v.disableIdTokenSignIn)return!1;if(v.verifyIdToken)return v.verifyIdToken(A,U);try{let{kid:te,alg:Y}=$(A);if(!te||!Y)return!1;let D=await a(te,v.region,v.userPoolId),ee=`https://cognito-idp.${v.region}.amazonaws.com/${v.userPoolId}`,{payload:le}=await(0,W.V)(A,D,{algorithms:[Y],issuer:ee,audience:v.clientId,maxTokenAge:"1h"});return!(U&&le.nonce!==U)}catch(te){return q.vF.error("Failed to verify ID token:",te),!1}},async getUserInfo(A){if(v.getUserInfo)return v.getUserInfo(A);if(A.idToken)try{let U=I(A.idToken);if(!U)return null;let te=U.name||U.given_name||U.username||U.email,Y={...U,name:te},D=await v.mapProfileToUser?.(Y);return{user:{id:U.sub,name:Y.name,email:U.email,image:U.picture,emailVerified:U.email_verified,...D},data:Y}}catch(U){q.vF.error("Failed to decode ID token:",U)}if(A.accessToken)try{let{data:U}=await(0,s.zZ)(E,{headers:{Authorization:`Bearer ${A.accessToken}`}});if(U){let te=await v.mapProfileToUser?.(U);return{user:{id:U.sub,name:U.name||U.given_name||U.username,email:U.email,image:U.picture,emailVerified:U.email_verified,...te},data:U}}}catch(U){q.vF.error("Failed to fetch user info from Cognito:",U)}return null},options:v}},discord:v=>({id:"discord",name:"Discord",createAuthorizationURL({state:Z,scopes:R,redirectURI:S}){let E=v.disableDefaultScope?[]:["identify","email"];R&&E.push(...R),v.scope&&E.push(...v.scope);let A=E.includes("bot")&&v.permissions!==void 0?`&permissions=${v.permissions}`:"";return new URL(`https://discord.com/api/oauth2/authorize?scope=${E.join("+")}&response_type=code&client_id=${v.clientId}&redirect_uri=${encodeURIComponent(v.redirectURI||S)}&state=${Z}&prompt=${v.prompt||"none"}${A}`)},validateAuthorizationCode:async({code:Z,redirectURI:R})=>(0,i.PB)({code:Z,redirectURI:R,options:v,tokenEndpoint:"https://discord.com/api/oauth2/token"}),refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async Z=>(0,h.J)({refreshToken:Z,options:{clientId:v.clientId,clientKey:v.clientKey,clientSecret:v.clientSecret},tokenEndpoint:"https://discord.com/api/oauth2/token"}),async getUserInfo(Z){if(v.getUserInfo)return v.getUserInfo(Z);let{data:R,error:S}=await(0,s.zZ)("https://discord.com/api/users/@me",{headers:{authorization:`Bearer ${Z.accessToken}`}});if(S)return null;if(R.avatar===null)R.image_url=`https://cdn.discordapp.com/embed/avatars/${R.discriminator==="0"?Number(BigInt(R.id)>>BigInt(22))%6:parseInt(R.discriminator)%5}.png`;else{let A=R.avatar.startsWith("a_")?"gif":"png";R.image_url=`https://cdn.discordapp.com/avatars/${R.id}/${R.avatar}.${A}`}let E=await v.mapProfileToUser?.(R);return{user:{id:R.id,name:R.global_name||R.username||"",email:R.email,emailVerified:R.verified,image:R.image_url,...E},data:R}},options:v}),facebook:v=>({id:"facebook",name:"Facebook",async createAuthorizationURL({state:Z,scopes:R,redirectURI:S,loginHint:E}){let A=v.disableDefaultScope?[]:["email","public_profile"];return v.scope&&A.push(...v.scope),R&&A.push(...R),await(0,y.J)({id:"facebook",options:v,authorizationEndpoint:"https://www.facebook.com/v24.0/dialog/oauth",scopes:A,state:Z,redirectURI:S,loginHint:E,additionalParams:v.configId?{config_id:v.configId}:{}})},validateAuthorizationCode:async({code:Z,redirectURI:R})=>(0,i.PB)({code:Z,redirectURI:R,options:v,tokenEndpoint:"https://graph.facebook.com/v24.0/oauth/access_token"}),async verifyIdToken(Z,R){if(v.disableIdTokenSignIn)return!1;if(v.verifyIdToken)return v.verifyIdToken(Z,R);if(Z.split(".").length===3)try{let{payload:S}=await(0,W.V)(Z,function(E,A){let U=new z(E,void 0),te=async(Y,D)=>U.getKey(Y,D);return Object.defineProperties(te,{coolingDown:{get:()=>U.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>U.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>U.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>U.pendingFetch(),enumerable:!0,configurable:!1},jwks:{value:()=>U.jwks(),enumerable:!0,configurable:!1,writable:!1}}),te}(new URL("https://limited.facebook.com/.well-known/oauth/openid/jwks/")),{algorithms:["RS256"],audience:v.clientId,issuer:"https://www.facebook.com"});return R&&S.nonce!==R?!1:!!S}catch{return!1}return!0},refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async Z=>(0,h.J)({refreshToken:Z,options:{clientId:v.clientId,clientKey:v.clientKey,clientSecret:v.clientSecret},tokenEndpoint:"https://graph.facebook.com/v24.0/oauth/access_token"}),async getUserInfo(Z){if(v.getUserInfo)return v.getUserInfo(Z);if(Z.idToken&&Z.idToken.split(".").length===3){let A=I(Z.idToken),U={id:A.sub,name:A.name,email:A.email,picture:{data:{url:A.picture,height:100,width:100,is_silhouette:!1}}},te=await v.mapProfileToUser?.({...U,email_verified:!1});return{user:{...U,emailVerified:!1,...te},data:A}}let{data:R,error:S}=await(0,s.zZ)("https://graph.facebook.com/me?fields="+["id","name","email","picture",...v?.fields||[]].join(","),{auth:{type:"Bearer",token:Z.accessToken}});if(S)return null;let E=await v.mapProfileToUser?.(R);return{user:{id:R.id,name:R.name,email:R.email,image:R.picture.data.url,emailVerified:R.email_verified,...E},data:R}},options:v}),figma:v=>({id:"figma",name:"Figma",async createAuthorizationURL({state:Z,scopes:R,codeVerifier:S,redirectURI:E}){if(!v.clientId||!v.clientSecret)throw q.vF.error("Client Id and Client Secret are required for Figma. Make sure to provide them in the options."),new J.$("CLIENT_ID_AND_SECRET_REQUIRED");if(!S)throw new J.$("codeVerifier is required for Figma");let A=v.disableDefaultScope?[]:["current_user:read"];return v.scope&&A.push(...v.scope),R&&A.push(...R),await(0,y.J)({id:"figma",options:v,authorizationEndpoint:"https://www.figma.com/oauth",scopes:A,state:Z,codeVerifier:S,redirectURI:E})},validateAuthorizationCode:async({code:Z,codeVerifier:R,redirectURI:S})=>(0,i.PB)({code:Z,codeVerifier:R,redirectURI:S,options:v,tokenEndpoint:"https://api.figma.com/v1/oauth/token",authentication:"basic"}),refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async Z=>(0,h.J)({refreshToken:Z,options:{clientId:v.clientId,clientKey:v.clientKey,clientSecret:v.clientSecret},tokenEndpoint:"https://api.figma.com/v1/oauth/token",authentication:"basic"}),async getUserInfo(Z){if(v.getUserInfo)return v.getUserInfo(Z);try{let{data:R}=await(0,s.zZ)("https://api.figma.com/v1/me",{headers:{Authorization:`Bearer ${Z.accessToken}`}});if(!R)return q.vF.error("Failed to fetch user from Figma"),null;let S=await v.mapProfileToUser?.(R);return{user:{id:R.id,name:R.handle,email:R.email,image:R.img_url,emailVerified:!1,...S},data:R}}catch(R){return q.vF.error("Failed to fetch user info from Figma:",R),null}},options:v}),github:v=>({id:"github",name:"GitHub",createAuthorizationURL({state:Z,scopes:R,loginHint:S,codeVerifier:E,redirectURI:A}){let U=v.disableDefaultScope?[]:["read:user","user:email"];return v.scope&&U.push(...v.scope),R&&U.push(...R),(0,y.J)({id:"github",options:v,authorizationEndpoint:"https://github.com/login/oauth/authorize",scopes:U,state:Z,codeVerifier:E,redirectURI:A,loginHint:S,prompt:v.prompt})},validateAuthorizationCode:async({code:Z,codeVerifier:R,redirectURI:S})=>{let{body:E,headers:A}=(0,i.em)({code:Z,codeVerifier:R,redirectURI:S,options:v}),{data:U,error:te}=await(0,s.zZ)("https://github.com/login/oauth/access_token",{method:"POST",body:E,headers:A});return te?(q.vF.error("GitHub OAuth token exchange failed:",te),null):"error"in U?(q.vF.error("GitHub OAuth token exchange failed:",U),null):(0,F.C)(U)},refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async Z=>(0,h.J)({refreshToken:Z,options:{clientId:v.clientId,clientKey:v.clientKey,clientSecret:v.clientSecret},tokenEndpoint:"https://github.com/login/oauth/access_token"}),async getUserInfo(Z){if(v.getUserInfo)return v.getUserInfo(Z);let{data:R,error:S}=await(0,s.zZ)("https://api.github.com/user",{headers:{"User-Agent":"better-auth",authorization:`Bearer ${Z.accessToken}`}});if(S)return null;let{data:E}=await(0,s.zZ)("https://api.github.com/user/emails",{headers:{Authorization:`Bearer ${Z.accessToken}`,"User-Agent":"better-auth"}});!R.email&&E&&(R.email=(E.find(te=>te.primary)??E[0])?.email);let A=E?.find(te=>te.email===R.email)?.verified??!1,U=await v.mapProfileToUser?.(R);return{user:{id:R.id,name:R.name||R.login,email:R.email,image:R.avatar_url,emailVerified:A,...U},data:R}},options:v}),microsoft:v=>{let Z=v.tenantId||"common",R=v.authority||"https://login.microsoftonline.com",S=`${R}/${Z}/oauth2/v2.0/authorize`,E=`${R}/${Z}/oauth2/v2.0/token`;return{id:"microsoft",name:"Microsoft EntraID",createAuthorizationURL(A){let U=v.disableDefaultScope?[]:["openid","profile","email","User.Read","offline_access"];return v.scope&&U.push(...v.scope),A.scopes&&U.push(...A.scopes),(0,y.J)({id:"microsoft",options:v,authorizationEndpoint:S,state:A.state,codeVerifier:A.codeVerifier,scopes:U,redirectURI:A.redirectURI,prompt:v.prompt,loginHint:A.loginHint})},validateAuthorizationCode:({code:A,codeVerifier:U,redirectURI:te})=>(0,i.PB)({code:A,codeVerifier:U,redirectURI:te,options:v,tokenEndpoint:E}),async getUserInfo(A){if(v.getUserInfo)return v.getUserInfo(A);if(!A.idToken)return null;let U=I(A.idToken),te=v.profilePhotoSize||48;await(0,s.zZ)(`https://graph.microsoft.com/v1.0/me/photos/${te}x${te}/$value`,{headers:{Authorization:`Bearer ${A.accessToken}`},async onResponse(ee){if(!v.disableProfilePhoto&&ee.response.ok)try{let le=await ee.response.clone().arrayBuffer();U.picture=`data:image/jpeg;base64, ${oe.K.encode(le)}`}catch(le){q.vF.error(le&&typeof le=="object"&&"name"in le?le.name:"",le)}}});let Y=await v.mapProfileToUser?.(U),D=U.email_verified!==void 0?U.email_verified:!!(U.email&&(U.verified_primary_email?.includes(U.email)||U.verified_secondary_email?.includes(U.email)));return{user:{id:U.sub,name:U.name,email:U.email,image:U.picture,emailVerified:D,...Y},data:U}},refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async A=>{let U=v.disableDefaultScope?[]:["openid","profile","email","User.Read","offline_access"];return v.scope&&U.push(...v.scope),(0,h.J)({refreshToken:A,options:{clientId:v.clientId,clientSecret:v.clientSecret},extraParams:{scope:U.join(" ")},tokenEndpoint:E})},options:v}},google:v=>({id:"google",name:"Google",async createAuthorizationURL({state:Z,scopes:R,codeVerifier:S,redirectURI:E,loginHint:A,display:U}){if(!v.clientId||!v.clientSecret)throw q.vF.error("Client Id and Client Secret is required for Google. Make sure to provide them in the options."),new J.$("CLIENT_ID_AND_SECRET_REQUIRED");if(!S)throw new J.$("codeVerifier is required for Google");let te=v.disableDefaultScope?[]:["email","profile","openid"];return v.scope&&te.push(...v.scope),R&&te.push(...R),await(0,y.J)({id:"google",options:v,authorizationEndpoint:"https://accounts.google.com/o/oauth2/v2/auth",scopes:te,state:Z,codeVerifier:S,redirectURI:E,prompt:v.prompt,accessType:v.accessType,display:U||v.display,loginHint:A,hd:v.hd,additionalParams:{include_granted_scopes:"true"}})},validateAuthorizationCode:async({code:Z,codeVerifier:R,redirectURI:S})=>(0,i.PB)({code:Z,codeVerifier:R,redirectURI:S,options:v,tokenEndpoint:"https://oauth2.googleapis.com/token"}),refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async Z=>(0,h.J)({refreshToken:Z,options:{clientId:v.clientId,clientKey:v.clientKey,clientSecret:v.clientSecret},tokenEndpoint:"https://oauth2.googleapis.com/token"}),async verifyIdToken(Z,R){if(v.disableIdTokenSignIn)return!1;if(v.verifyIdToken)return v.verifyIdToken(Z,R);let{kid:S,alg:E}=$(Z);if(!S||!E)return!1;let{payload:A}=await(0,W.V)(Z,await X(S),{algorithms:[E],issuer:["https://accounts.google.com","accounts.google.com"],audience:v.clientId,maxTokenAge:"1h"});return!R||A.nonce===R},async getUserInfo(Z){if(v.getUserInfo)return v.getUserInfo(Z);if(!Z.idToken)return null;let R=I(Z.idToken),S=await v.mapProfileToUser?.(R);return{user:{id:R.sub,name:R.name,email:R.email,image:R.picture,emailVerified:R.email_verified,...S},data:R}},options:v}),huggingface:v=>({id:"huggingface",name:"Hugging Face",createAuthorizationURL({state:Z,scopes:R,codeVerifier:S,redirectURI:E}){let A=v.disableDefaultScope?[]:["openid","profile","email"];return v.scope&&A.push(...v.scope),R&&A.push(...R),(0,y.J)({id:"huggingface",options:v,authorizationEndpoint:"https://huggingface.co/oauth/authorize",scopes:A,state:Z,codeVerifier:S,redirectURI:E})},validateAuthorizationCode:async({code:Z,codeVerifier:R,redirectURI:S})=>(0,i.PB)({code:Z,codeVerifier:R,redirectURI:S,options:v,tokenEndpoint:"https://huggingface.co/oauth/token"}),refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async Z=>(0,h.J)({refreshToken:Z,options:{clientId:v.clientId,clientKey:v.clientKey,clientSecret:v.clientSecret},tokenEndpoint:"https://huggingface.co/oauth/token"}),async getUserInfo(Z){if(v.getUserInfo)return v.getUserInfo(Z);let{data:R,error:S}=await(0,s.zZ)("https://huggingface.co/oauth/userinfo",{method:"GET",headers:{Authorization:`Bearer ${Z.accessToken}`}});if(S)return null;let E=await v.mapProfileToUser?.(R);return{user:{id:R.sub,name:R.name||R.preferred_username,email:R.email,image:R.picture,emailVerified:R.email_verified??!1,...E},data:R}},options:v}),slack:v=>({id:"slack",name:"Slack",createAuthorizationURL({state:Z,scopes:R,redirectURI:S}){let E=v.disableDefaultScope?[]:["openid","profile","email"];R&&E.push(...R),v.scope&&E.push(...v.scope);let A=new URL("https://slack.com/openid/connect/authorize");return A.searchParams.set("scope",E.join(" ")),A.searchParams.set("response_type","code"),A.searchParams.set("client_id",v.clientId),A.searchParams.set("redirect_uri",v.redirectURI||S),A.searchParams.set("state",Z),A},validateAuthorizationCode:async({code:Z,redirectURI:R})=>(0,i.PB)({code:Z,redirectURI:R,options:v,tokenEndpoint:"https://slack.com/api/openid.connect.token"}),refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async Z=>(0,h.J)({refreshToken:Z,options:{clientId:v.clientId,clientKey:v.clientKey,clientSecret:v.clientSecret},tokenEndpoint:"https://slack.com/api/openid.connect.token"}),async getUserInfo(Z){if(v.getUserInfo)return v.getUserInfo(Z);let{data:R,error:S}=await(0,s.zZ)("https://slack.com/api/openid.connect.userInfo",{headers:{authorization:`Bearer ${Z.accessToken}`}});if(S)return null;let E=await v.mapProfileToUser?.(R);return{user:{id:R["https://slack.com/user_id"],name:R.name||"",email:R.email,emailVerified:R.email_verified,image:R.picture||R["https://slack.com/user_image_512"],...E},data:R}},options:v}),spotify:v=>({id:"spotify",name:"Spotify",createAuthorizationURL({state:Z,scopes:R,codeVerifier:S,redirectURI:E}){let A=v.disableDefaultScope?[]:["user-read-email"];return v.scope&&A.push(...v.scope),R&&A.push(...R),(0,y.J)({id:"spotify",options:v,authorizationEndpoint:"https://accounts.spotify.com/authorize",scopes:A,state:Z,codeVerifier:S,redirectURI:E})},validateAuthorizationCode:async({code:Z,codeVerifier:R,redirectURI:S})=>(0,i.PB)({code:Z,codeVerifier:R,redirectURI:S,options:v,tokenEndpoint:"https://accounts.spotify.com/api/token"}),refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async Z=>(0,h.J)({refreshToken:Z,options:{clientId:v.clientId,clientKey:v.clientKey,clientSecret:v.clientSecret},tokenEndpoint:"https://accounts.spotify.com/api/token"}),async getUserInfo(Z){if(v.getUserInfo)return v.getUserInfo(Z);let{data:R,error:S}=await(0,s.zZ)("https://api.spotify.com/v1/me",{method:"GET",headers:{Authorization:`Bearer ${Z.accessToken}`}});if(S)return null;let E=await v.mapProfileToUser?.(R);return{user:{id:R.id,name:R.display_name,email:R.email,image:R.images[0]?.url,emailVerified:!1,...E},data:R}},options:v}),twitch:v=>({id:"twitch",name:"Twitch",createAuthorizationURL({state:Z,scopes:R,redirectURI:S}){let E=v.disableDefaultScope?[]:["user:read:email","openid"];return v.scope&&E.push(...v.scope),R&&E.push(...R),(0,y.J)({id:"twitch",redirectURI:S,options:v,authorizationEndpoint:"https://id.twitch.tv/oauth2/authorize",scopes:E,state:Z,claims:v.claims||["email","email_verified","preferred_username","picture"]})},validateAuthorizationCode:async({code:Z,redirectURI:R})=>(0,i.PB)({code:Z,redirectURI:R,options:v,tokenEndpoint:"https://id.twitch.tv/oauth2/token"}),refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async Z=>(0,h.J)({refreshToken:Z,options:{clientId:v.clientId,clientKey:v.clientKey,clientSecret:v.clientSecret},tokenEndpoint:"https://id.twitch.tv/oauth2/token"}),async getUserInfo(Z){if(v.getUserInfo)return v.getUserInfo(Z);let R=Z.idToken;if(!R)return q.vF.error("No idToken found in token"),null;let S=I(R),E=await v.mapProfileToUser?.(S);return{user:{id:S.sub,name:S.preferred_username,email:S.email,image:S.picture,emailVerified:S.email_verified,...E},data:S}},options:v}),twitter:v=>({id:"twitter",name:"Twitter",createAuthorizationURL(Z){let R=v.disableDefaultScope?[]:["users.read","tweet.read","offline.access","users.email"];return v.scope&&R.push(...v.scope),Z.scopes&&R.push(...Z.scopes),(0,y.J)({id:"twitter",options:v,authorizationEndpoint:"https://x.com/i/oauth2/authorize",scopes:R,state:Z.state,codeVerifier:Z.codeVerifier,redirectURI:Z.redirectURI})},validateAuthorizationCode:async({code:Z,codeVerifier:R,redirectURI:S})=>(0,i.PB)({code:Z,codeVerifier:R,authentication:"basic",redirectURI:S,options:v,tokenEndpoint:"https://api.x.com/2/oauth2/token"}),refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async Z=>(0,h.J)({refreshToken:Z,options:{clientId:v.clientId,clientKey:v.clientKey,clientSecret:v.clientSecret},authentication:"basic",tokenEndpoint:"https://api.x.com/2/oauth2/token"}),async getUserInfo(Z){if(v.getUserInfo)return v.getUserInfo(Z);let{data:R,error:S}=await(0,s.zZ)("https://api.x.com/2/users/me?user.fields=profile_image_url",{method:"GET",headers:{Authorization:`Bearer ${Z.accessToken}`}});if(S)return null;let{data:E,error:A}=await(0,s.zZ)("https://api.x.com/2/users/me?user.fields=confirmed_email",{method:"GET",headers:{Authorization:`Bearer ${Z.accessToken}`}}),U=!1;!A&&E?.data?.confirmed_email&&(R.data.email=E.data.confirmed_email,U=!0);let te=await v.mapProfileToUser?.(R);return{user:{id:R.data.id,name:R.data.name,email:R.data.email||R.data.username||null,image:R.data.profile_image_url,emailVerified:U,...te},data:R}},options:v}),dropbox:v=>({id:"dropbox",name:"Dropbox",createAuthorizationURL:async({state:Z,scopes:R,codeVerifier:S,redirectURI:E})=>{let A=v.disableDefaultScope?[]:["account_info.read"];v.scope&&A.push(...v.scope),R&&A.push(...R);let U={};return v.accessType&&(U.token_access_type=v.accessType),await(0,y.J)({id:"dropbox",options:v,authorizationEndpoint:"https://www.dropbox.com/oauth2/authorize",scopes:A,state:Z,redirectURI:E,codeVerifier:S,additionalParams:U})},validateAuthorizationCode:async({code:Z,codeVerifier:R,redirectURI:S})=>await(0,i.PB)({code:Z,codeVerifier:R,redirectURI:S,options:v,tokenEndpoint:"https://api.dropboxapi.com/oauth2/token"}),refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async Z=>(0,h.J)({refreshToken:Z,options:{clientId:v.clientId,clientKey:v.clientKey,clientSecret:v.clientSecret},tokenEndpoint:"https://api.dropbox.com/oauth2/token"}),async getUserInfo(Z){if(v.getUserInfo)return v.getUserInfo(Z);let{data:R,error:S}=await(0,s.zZ)("https://api.dropboxapi.com/2/users/get_current_account",{method:"POST",headers:{Authorization:`Bearer ${Z.accessToken}`}});if(S)return null;let E=await v.mapProfileToUser?.(R);return{user:{id:R.account_id,name:R.name?.display_name,email:R.email,emailVerified:R.email_verified||!1,image:R.profile_photo_url,...E},data:R}},options:v}),kick:v=>({id:"kick",name:"Kick",createAuthorizationURL({state:Z,scopes:R,redirectURI:S,codeVerifier:E}){let A=v.disableDefaultScope?[]:["user:read"];return v.scope&&A.push(...v.scope),R&&A.push(...R),(0,y.J)({id:"kick",redirectURI:S,options:v,authorizationEndpoint:"https://id.kick.com/oauth/authorize",scopes:A,codeVerifier:E,state:Z})},validateAuthorizationCode:async({code:Z,redirectURI:R,codeVerifier:S})=>(0,i.PB)({code:Z,redirectURI:R,options:v,tokenEndpoint:"https://id.kick.com/oauth/token",codeVerifier:S}),refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async Z=>(0,h.J)({refreshToken:Z,options:{clientId:v.clientId,clientSecret:v.clientSecret},tokenEndpoint:"https://id.kick.com/oauth/token"}),async getUserInfo(Z){if(v.getUserInfo)return v.getUserInfo(Z);let{data:R,error:S}=await(0,s.zZ)("https://api.kick.com/public/v1/users",{method:"GET",headers:{Authorization:`Bearer ${Z.accessToken}`}});if(S)return null;let E=R.data[0],A=await v.mapProfileToUser?.(E);return{user:{id:E.user_id,name:E.name,email:E.email,image:E.profile_picture,emailVerified:!1,...A},data:E}},options:v}),linear:v=>{let Z="https://api.linear.app/oauth/token";return{id:"linear",name:"Linear",createAuthorizationURL({state:R,scopes:S,loginHint:E,redirectURI:A}){let U=v.disableDefaultScope?[]:["read"];return v.scope&&U.push(...v.scope),S&&U.push(...S),(0,y.J)({id:"linear",options:v,authorizationEndpoint:"https://linear.app/oauth/authorize",scopes:U,state:R,redirectURI:A,loginHint:E})},validateAuthorizationCode:async({code:R,redirectURI:S})=>(0,i.PB)({code:R,redirectURI:S,options:v,tokenEndpoint:Z}),refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async R=>(0,h.J)({refreshToken:R,options:{clientId:v.clientId,clientKey:v.clientKey,clientSecret:v.clientSecret},tokenEndpoint:Z}),async getUserInfo(R){if(v.getUserInfo)return v.getUserInfo(R);let{data:S,error:E}=await(0,s.zZ)("https://api.linear.app/graphql",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${R.accessToken}`},body:JSON.stringify({query:`
							query {
								viewer {
									id
									name
									email
									avatarUrl
									active
									createdAt
									updatedAt
								}
							}
						`})});if(E||!S?.data?.viewer)return null;let A=S.data.viewer,U=await v.mapProfileToUser?.(A);return{user:{id:S.data.viewer.id,name:S.data.viewer.name,email:S.data.viewer.email,image:S.data.viewer.avatarUrl,emailVerified:!1,...U},data:A}},options:v}},linkedin:v=>{let Z="https://www.linkedin.com/oauth/v2/accessToken";return{id:"linkedin",name:"Linkedin",createAuthorizationURL:async({state:R,scopes:S,redirectURI:E,loginHint:A})=>{let U=v.disableDefaultScope?[]:["profile","email","openid"];return v.scope&&U.push(...v.scope),S&&U.push(...S),await(0,y.J)({id:"linkedin",options:v,authorizationEndpoint:"https://www.linkedin.com/oauth/v2/authorization",scopes:U,state:R,loginHint:A,redirectURI:E})},validateAuthorizationCode:async({code:R,redirectURI:S})=>await(0,i.PB)({code:R,redirectURI:S,options:v,tokenEndpoint:Z}),refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async R=>(0,h.J)({refreshToken:R,options:{clientId:v.clientId,clientKey:v.clientKey,clientSecret:v.clientSecret},tokenEndpoint:Z}),async getUserInfo(R){if(v.getUserInfo)return v.getUserInfo(R);let{data:S,error:E}=await(0,s.zZ)("https://api.linkedin.com/v2/userinfo",{method:"GET",headers:{Authorization:`Bearer ${R.accessToken}`}});if(E)return null;let A=await v.mapProfileToUser?.(S);return{user:{id:S.sub,name:S.name,email:S.email,emailVerified:S.email_verified||!1,image:S.picture,...A},data:S}},options:v}},gitlab:v=>{let{authorizationEndpoint:Z,tokenEndpoint:R,userinfoEndpoint:S}=G(v.issuer),E="gitlab";return{id:E,name:"Gitlab",createAuthorizationURL:async({state:A,scopes:U,codeVerifier:te,loginHint:Y,redirectURI:D})=>{let ee=v.disableDefaultScope?[]:["read_user"];return v.scope&&ee.push(...v.scope),U&&ee.push(...U),await(0,y.J)({id:E,options:v,authorizationEndpoint:Z,scopes:ee,state:A,redirectURI:D,codeVerifier:te,loginHint:Y})},validateAuthorizationCode:async({code:A,redirectURI:U,codeVerifier:te})=>(0,i.PB)({code:A,redirectURI:U,options:v,codeVerifier:te,tokenEndpoint:R}),refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async A=>(0,h.J)({refreshToken:A,options:{clientId:v.clientId,clientKey:v.clientKey,clientSecret:v.clientSecret},tokenEndpoint:R}),async getUserInfo(A){if(v.getUserInfo)return v.getUserInfo(A);let{data:U,error:te}=await(0,s.zZ)(S,{headers:{authorization:`Bearer ${A.accessToken}`}});if(te||U.state!=="active"||U.locked)return null;let Y=await v.mapProfileToUser?.(U);return{user:{id:U.id,name:U.name??U.username,email:U.email,image:U.avatar_url,emailVerified:U.email_verified??!1,...Y},data:U}},options:v}},tiktok:v=>({id:"tiktok",name:"TikTok",createAuthorizationURL({state:Z,scopes:R,redirectURI:S}){let E=v.disableDefaultScope?[]:["user.info.profile"];return v.scope&&E.push(...v.scope),R&&E.push(...R),new URL(`https://www.tiktok.com/v2/auth/authorize?scope=${E.join(",")}&response_type=code&client_key=${v.clientKey}&redirect_uri=${encodeURIComponent(v.redirectURI||S)}&state=${Z}`)},validateAuthorizationCode:async({code:Z,redirectURI:R})=>(0,i.PB)({code:Z,redirectURI:v.redirectURI||R,options:{clientKey:v.clientKey,clientSecret:v.clientSecret},tokenEndpoint:"https://open.tiktokapis.com/v2/oauth/token/"}),refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async Z=>(0,h.J)({refreshToken:Z,options:{clientSecret:v.clientSecret},tokenEndpoint:"https://open.tiktokapis.com/v2/oauth/token/",authentication:"post",extraParams:{client_key:v.clientKey}}),async getUserInfo(Z){if(v.getUserInfo)return v.getUserInfo(Z);let{data:R,error:S}=await(0,s.zZ)("https://open.tiktokapis.com/v2/user/info/?fields=open_id,avatar_large_url,display_name,username",{headers:{authorization:`Bearer ${Z.accessToken}`}});return S?null:{user:{email:R.data.user.email||R.data.user.username,id:R.data.user.open_id,name:R.data.user.display_name||R.data.user.username,image:R.data.user.avatar_large_url,emailVerified:!1},data:R}},options:v}),reddit:v=>({id:"reddit",name:"Reddit",createAuthorizationURL({state:Z,scopes:R,redirectURI:S}){let E=v.disableDefaultScope?[]:["identity"];return v.scope&&E.push(...v.scope),R&&E.push(...R),(0,y.J)({id:"reddit",options:v,authorizationEndpoint:"https://www.reddit.com/api/v1/authorize",scopes:E,state:Z,redirectURI:S,duration:v.duration})},validateAuthorizationCode:async({code:Z,redirectURI:R})=>{let S=new URLSearchParams({grant_type:"authorization_code",code:Z,redirect_uri:v.redirectURI||R}),{data:E,error:A}=await(0,s.zZ)("https://www.reddit.com/api/v1/access_token",{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded",accept:"text/plain","user-agent":"better-auth",Authorization:`Basic ${oe.K.encode(`${v.clientId}:${v.clientSecret}`)}`},body:S.toString()});if(A)throw A;return(0,F.C)(E)},refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async Z=>(0,h.J)({refreshToken:Z,options:{clientId:v.clientId,clientKey:v.clientKey,clientSecret:v.clientSecret},authentication:"basic",tokenEndpoint:"https://www.reddit.com/api/v1/access_token"}),async getUserInfo(Z){if(v.getUserInfo)return v.getUserInfo(Z);let{data:R,error:S}=await(0,s.zZ)("https://oauth.reddit.com/api/v1/me",{headers:{Authorization:`Bearer ${Z.accessToken}`,"User-Agent":"better-auth"}});if(S)return null;let E=await v.mapProfileToUser?.(R);return{user:{id:R.id,name:R.name,email:R.oauth_client_id,emailVerified:R.has_verified_email,image:R.icon_img?.split("?")[0],...E},data:R}},options:v}),roblox:v=>({id:"roblox",name:"Roblox",createAuthorizationURL({state:Z,scopes:R,redirectURI:S}){let E=v.disableDefaultScope?[]:["openid","profile"];return v.scope&&E.push(...v.scope),R&&E.push(...R),new URL(`https://apis.roblox.com/oauth/v1/authorize?scope=${E.join("+")}&response_type=code&client_id=${v.clientId}&redirect_uri=${encodeURIComponent(v.redirectURI||S)}&state=${Z}&prompt=${v.prompt||"select_account consent"}`)},validateAuthorizationCode:async({code:Z,redirectURI:R})=>(0,i.PB)({code:Z,redirectURI:v.redirectURI||R,options:v,tokenEndpoint:"https://apis.roblox.com/oauth/v1/token",authentication:"post"}),refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async Z=>(0,h.J)({refreshToken:Z,options:{clientId:v.clientId,clientKey:v.clientKey,clientSecret:v.clientSecret},tokenEndpoint:"https://apis.roblox.com/oauth/v1/token"}),async getUserInfo(Z){if(v.getUserInfo)return v.getUserInfo(Z);let{data:R,error:S}=await(0,s.zZ)("https://apis.roblox.com/oauth/v1/userinfo",{headers:{authorization:`Bearer ${Z.accessToken}`}});if(S)return null;let E=await v.mapProfileToUser?.(R);return{user:{id:R.sub,name:R.nickname||R.preferred_username||"",image:R.picture,email:R.preferred_username||null,emailVerified:!1,...E},data:{...R}}},options:v}),salesforce:v=>{let Z=(v.environment??"production")==="sandbox",R=v.loginUrl?`https://${v.loginUrl}/services/oauth2/authorize`:Z?"https://test.salesforce.com/services/oauth2/authorize":"https://login.salesforce.com/services/oauth2/authorize",S=v.loginUrl?`https://${v.loginUrl}/services/oauth2/token`:Z?"https://test.salesforce.com/services/oauth2/token":"https://login.salesforce.com/services/oauth2/token",E=v.loginUrl?`https://${v.loginUrl}/services/oauth2/userinfo`:Z?"https://test.salesforce.com/services/oauth2/userinfo":"https://login.salesforce.com/services/oauth2/userinfo";return{id:"salesforce",name:"Salesforce",async createAuthorizationURL({state:A,scopes:U,codeVerifier:te,redirectURI:Y}){if(!v.clientId||!v.clientSecret)throw q.vF.error("Client Id and Client Secret are required for Salesforce. Make sure to provide them in the options."),new J.$("CLIENT_ID_AND_SECRET_REQUIRED");if(!te)throw new J.$("codeVerifier is required for Salesforce");let D=v.disableDefaultScope?[]:["openid","email","profile"];return v.scope&&D.push(...v.scope),U&&D.push(...U),(0,y.J)({id:"salesforce",options:v,authorizationEndpoint:R,scopes:D,state:A,codeVerifier:te,redirectURI:v.redirectURI||Y})},validateAuthorizationCode:async({code:A,codeVerifier:U,redirectURI:te})=>(0,i.PB)({code:A,codeVerifier:U,redirectURI:v.redirectURI||te,options:v,tokenEndpoint:S}),refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async A=>(0,h.J)({refreshToken:A,options:{clientId:v.clientId,clientSecret:v.clientSecret},tokenEndpoint:S}),async getUserInfo(A){if(v.getUserInfo)return v.getUserInfo(A);try{let{data:U}=await(0,s.zZ)(E,{headers:{Authorization:`Bearer ${A.accessToken}`}});if(!U)return q.vF.error("Failed to fetch user info from Salesforce"),null;let te=await v.mapProfileToUser?.(U);return{user:{id:U.user_id,name:U.name,email:U.email,image:U.photos?.picture||U.photos?.thumbnail,emailVerified:U.email_verified??!1,...te},data:U}}catch(U){return q.vF.error("Failed to fetch user info from Salesforce:",U),null}},options:v}},vk:v=>({id:"vk",name:"VK",async createAuthorizationURL({state:Z,scopes:R,codeVerifier:S,redirectURI:E}){let A=v.disableDefaultScope?[]:["email","phone"];return v.scope&&A.push(...v.scope),R&&A.push(...R),(0,y.J)({id:"vk",options:v,authorizationEndpoint:"https://id.vk.com/authorize",scopes:A,state:Z,redirectURI:E,codeVerifier:S})},validateAuthorizationCode:async({code:Z,codeVerifier:R,redirectURI:S,deviceId:E})=>(0,i.PB)({code:Z,codeVerifier:R,redirectURI:v.redirectURI||S,options:v,deviceId:E,tokenEndpoint:"https://id.vk.com/oauth2/auth"}),refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async Z=>(0,h.J)({refreshToken:Z,options:{clientId:v.clientId,clientKey:v.clientKey,clientSecret:v.clientSecret},tokenEndpoint:"https://id.vk.com/oauth2/auth"}),async getUserInfo(Z){if(v.getUserInfo)return v.getUserInfo(Z);if(!Z.accessToken)return null;let R=new URLSearchParams({access_token:Z.accessToken,client_id:v.clientId}).toString(),{data:S,error:E}=await(0,s.zZ)("https://id.vk.com/oauth2/user_info",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:R});if(E)return null;let A=await v.mapProfileToUser?.(S);return S.user.email||A?.email?{user:{id:S.user.user_id,first_name:S.user.first_name,last_name:S.user.last_name,email:S.user.email,image:S.user.avatar,emailVerified:!1,birthday:S.user.birthday,sex:S.user.sex,name:`${S.user.first_name} ${S.user.last_name}`,...A},data:S}:null},options:v}),zoom:v=>{let Z={pkce:!0,...v};return{id:"zoom",name:"Zoom",createAuthorizationURL:async({state:R,redirectURI:S,codeVerifier:E})=>{let A=new URLSearchParams({response_type:"code",redirect_uri:Z.redirectURI?Z.redirectURI:S,client_id:Z.clientId,state:R});if(Z.pkce){let te=await(0,F.O)(E);A.set("code_challenge_method","S256"),A.set("code_challenge",te)}let U=new URL("https://zoom.us/oauth/authorize");return U.search=A.toString(),U},validateAuthorizationCode:async({code:R,redirectURI:S,codeVerifier:E})=>(0,i.PB)({code:R,redirectURI:Z.redirectURI||S,codeVerifier:E,options:Z,tokenEndpoint:"https://zoom.us/oauth/token",authentication:"post"}),refreshAccessToken:Z.refreshAccessToken?Z.refreshAccessToken:async R=>(0,h.J)({refreshToken:R,options:{clientId:Z.clientId,clientKey:Z.clientKey,clientSecret:Z.clientSecret},tokenEndpoint:"https://zoom.us/oauth/token"}),async getUserInfo(R){if(Z.getUserInfo)return Z.getUserInfo(R);let{data:S,error:E}=await(0,s.zZ)("https://api.zoom.us/v2/users/me",{headers:{authorization:`Bearer ${R.accessToken}`}});if(E)return null;let A=await Z.mapProfileToUser?.(S);return{user:{id:S.id,name:S.display_name,image:S.pic_url,email:S.email,emailVerified:!!S.verified,...A},data:{...S}}}}},notion:v=>{let Z="https://api.notion.com/v1/oauth/token";return{id:"notion",name:"Notion",createAuthorizationURL({state:R,scopes:S,loginHint:E,redirectURI:A}){let U=(v.disableDefaultScope,[]);return v.scope&&U.push(...v.scope),S&&U.push(...S),(0,y.J)({id:"notion",options:v,authorizationEndpoint:"https://api.notion.com/v1/oauth/authorize",scopes:U,state:R,redirectURI:A,loginHint:E,additionalParams:{owner:"user"}})},validateAuthorizationCode:async({code:R,redirectURI:S})=>(0,i.PB)({code:R,redirectURI:S,options:v,tokenEndpoint:Z,authentication:"basic"}),refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async R=>(0,h.J)({refreshToken:R,options:{clientId:v.clientId,clientKey:v.clientKey,clientSecret:v.clientSecret},tokenEndpoint:Z}),async getUserInfo(R){if(v.getUserInfo)return v.getUserInfo(R);let{data:S,error:E}=await(0,s.zZ)("https://api.notion.com/v1/users/me",{headers:{Authorization:`Bearer ${R.accessToken}`,"Notion-Version":"2022-06-28"}});if(E||!S)return null;let A=S.bot?.owner?.user;if(!A)return null;let U=await v.mapProfileToUser?.(A);return{user:{id:A.id,name:A.name||"Notion User",email:A.person?.email||null,image:A.avatar_url,emailVerified:!1,...U},data:A}},options:v}},kakao:v=>({id:"kakao",name:"Kakao",createAuthorizationURL({state:Z,scopes:R,redirectURI:S}){let E=v.disableDefaultScope?[]:["account_email","profile_image","profile_nickname"];return v.scope&&E.push(...v.scope),R&&E.push(...R),(0,y.J)({id:"kakao",options:v,authorizationEndpoint:"https://kauth.kakao.com/oauth/authorize",scopes:E,state:Z,redirectURI:S})},validateAuthorizationCode:async({code:Z,redirectURI:R})=>(0,i.PB)({code:Z,redirectURI:R,options:v,tokenEndpoint:"https://kauth.kakao.com/oauth/token"}),refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async Z=>(0,h.J)({refreshToken:Z,options:{clientId:v.clientId,clientKey:v.clientKey,clientSecret:v.clientSecret},tokenEndpoint:"https://kauth.kakao.com/oauth/token"}),async getUserInfo(Z){if(v.getUserInfo)return v.getUserInfo(Z);let{data:R,error:S}=await(0,s.zZ)("https://kapi.kakao.com/v2/user/me",{headers:{Authorization:`Bearer ${Z.accessToken}`}});if(S||!R)return null;let E=await v.mapProfileToUser?.(R),A=R.kakao_account||{},U=A.profile||{};return{user:{id:String(R.id),name:U.nickname||A.name||void 0,email:A.email,image:U.profile_image_url||U.thumbnail_image_url,emailVerified:!!A.is_email_valid&&!!A.is_email_verified,...E},data:R}},options:v}),naver:v=>({id:"naver",name:"Naver",createAuthorizationURL({state:Z,scopes:R,redirectURI:S}){let E=v.disableDefaultScope?[]:["profile","email"];return v.scope&&E.push(...v.scope),R&&E.push(...R),(0,y.J)({id:"naver",options:v,authorizationEndpoint:"https://nid.naver.com/oauth2.0/authorize",scopes:E,state:Z,redirectURI:S})},validateAuthorizationCode:async({code:Z,redirectURI:R})=>(0,i.PB)({code:Z,redirectURI:R,options:v,tokenEndpoint:"https://nid.naver.com/oauth2.0/token"}),refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async Z=>(0,h.J)({refreshToken:Z,options:{clientId:v.clientId,clientKey:v.clientKey,clientSecret:v.clientSecret},tokenEndpoint:"https://nid.naver.com/oauth2.0/token"}),async getUserInfo(Z){if(v.getUserInfo)return v.getUserInfo(Z);let{data:R,error:S}=await(0,s.zZ)("https://openapi.naver.com/v1/nid/me",{headers:{Authorization:`Bearer ${Z.accessToken}`}});if(S||!R||R.resultcode!=="00")return null;let E=await v.mapProfileToUser?.(R),A=R.response||{};return{user:{id:A.id,name:A.name||A.nickname,email:A.email,image:A.profile_image,emailVerified:!1,...E},data:R}},options:v}),line:v=>{let Z="https://api.line.me/oauth2/v2.1/token";return{id:"line",name:"LINE",async createAuthorizationURL({state:R,scopes:S,codeVerifier:E,redirectURI:A,loginHint:U}){let te=v.disableDefaultScope?[]:["openid","profile","email"];return v.scope&&te.push(...v.scope),S&&te.push(...S),await(0,y.J)({id:"line",options:v,authorizationEndpoint:"https://access.line.me/oauth2/v2.1/authorize",scopes:te,state:R,codeVerifier:E,redirectURI:A,loginHint:U})},validateAuthorizationCode:async({code:R,codeVerifier:S,redirectURI:E})=>(0,i.PB)({code:R,codeVerifier:S,redirectURI:E,options:v,tokenEndpoint:Z}),refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async R=>(0,h.J)({refreshToken:R,options:{clientId:v.clientId,clientSecret:v.clientSecret},tokenEndpoint:Z}),async verifyIdToken(R,S){if(v.disableIdTokenSignIn)return!1;if(v.verifyIdToken)return v.verifyIdToken(R,S);let E=new URLSearchParams;E.set("id_token",R),E.set("client_id",v.clientId),S&&E.set("nonce",S);let{data:A,error:U}=await(0,s.zZ)("https://api.line.me/oauth2/v2.1/verify",{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:E});return!U&&!!A&&A.aud===v.clientId&&(!A.nonce||A.nonce===S)},async getUserInfo(R){if(v.getUserInfo)return v.getUserInfo(R);let S=null;if(R.idToken)try{S=I(R.idToken)}catch{}if(!S){let{data:Y}=await(0,s.zZ)("https://api.line.me/oauth2/v2.1/userinfo",{headers:{authorization:`Bearer ${R.accessToken}`}});S=Y||null}if(!S)return null;let E=await v.mapProfileToUser?.(S),A=S.sub||S.userId,U=S.name||S.displayName,te=S.picture||S.pictureUrl||void 0;return{user:{id:A,name:U,email:S.email,image:te,emailVerified:!1,...E},data:S}},options:v}},paybin:v=>{let Z=v.issuer||"https://idp.paybin.io",R=`${Z}/oauth2/authorize`,S=`${Z}/oauth2/token`;return{id:"paybin",name:"Paybin",async createAuthorizationURL({state:E,scopes:A,codeVerifier:U,redirectURI:te,loginHint:Y}){if(!v.clientId||!v.clientSecret)throw q.vF.error("Client Id and Client Secret is required for Paybin. Make sure to provide them in the options."),new J.$("CLIENT_ID_AND_SECRET_REQUIRED");if(!U)throw new J.$("codeVerifier is required for Paybin");let D=v.disableDefaultScope?[]:["openid","email","profile"];return v.scope&&D.push(...v.scope),A&&D.push(...A),await(0,y.J)({id:"paybin",options:v,authorizationEndpoint:R,scopes:D,state:E,codeVerifier:U,redirectURI:te,prompt:v.prompt,loginHint:Y})},validateAuthorizationCode:async({code:E,codeVerifier:A,redirectURI:U})=>(0,i.PB)({code:E,codeVerifier:A,redirectURI:U,options:v,tokenEndpoint:S}),refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async E=>(0,h.J)({refreshToken:E,options:{clientId:v.clientId,clientKey:v.clientKey,clientSecret:v.clientSecret},tokenEndpoint:S}),async getUserInfo(E){if(v.getUserInfo)return v.getUserInfo(E);if(!E.idToken)return null;let A=I(E.idToken),U=await v.mapProfileToUser?.(A);return{user:{id:A.sub,name:A.name||A.preferred_username||(A.email?A.email.split("@")[0]:"User")||"User",email:A.email,image:A.picture,emailVerified:A.email_verified||!1,...U},data:A}},options:v}},paypal:v=>{let Z=(v.environment||"sandbox")==="sandbox",R=Z?"https://www.sandbox.paypal.com/signin/authorize":"https://www.paypal.com/signin/authorize",S=Z?"https://api-m.sandbox.paypal.com/v1/oauth2/token":"https://api-m.paypal.com/v1/oauth2/token",E=Z?"https://api-m.sandbox.paypal.com/v1/identity/oauth2/userinfo":"https://api-m.paypal.com/v1/identity/oauth2/userinfo";return{id:"paypal",name:"PayPal",async createAuthorizationURL({state:A,codeVerifier:U,redirectURI:te}){if(!v.clientId||!v.clientSecret)throw q.vF.error("Client Id and Client Secret is required for PayPal. Make sure to provide them in the options."),new J.$("CLIENT_ID_AND_SECRET_REQUIRED");return await(0,y.J)({id:"paypal",options:v,authorizationEndpoint:R,scopes:[],state:A,codeVerifier:U,redirectURI:te,prompt:v.prompt})},validateAuthorizationCode:async({code:A,redirectURI:U})=>{let te=oe.K.encode(`${v.clientId}:${v.clientSecret}`);try{let Y=await(0,s.zZ)(S,{method:"POST",headers:{Authorization:`Basic ${te}`,Accept:"application/json","Accept-Language":"en_US","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"authorization_code",code:A,redirect_uri:U}).toString()});if(!Y.data)throw new J.$("FAILED_TO_GET_ACCESS_TOKEN");let D=Y.data;return{accessToken:D.access_token,refreshToken:D.refresh_token,accessTokenExpiresAt:D.expires_in?new Date(Date.now()+1e3*D.expires_in):void 0,idToken:D.id_token}}catch(Y){throw q.vF.error("PayPal token exchange failed:",Y),new J.$("FAILED_TO_GET_ACCESS_TOKEN")}},refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async A=>{let U=oe.K.encode(`${v.clientId}:${v.clientSecret}`);try{let te=await(0,s.zZ)(S,{method:"POST",headers:{Authorization:`Basic ${U}`,Accept:"application/json","Accept-Language":"en_US","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:A}).toString()});if(!te.data)throw new J.$("FAILED_TO_REFRESH_ACCESS_TOKEN");let Y=te.data;return{accessToken:Y.access_token,refreshToken:Y.refresh_token,accessTokenExpiresAt:Y.expires_in?new Date(Date.now()+1e3*Y.expires_in):void 0}}catch(te){throw q.vF.error("PayPal token refresh failed:",te),new J.$("FAILED_TO_REFRESH_ACCESS_TOKEN")}},async verifyIdToken(A,U){if(v.disableIdTokenSignIn)return!1;if(v.verifyIdToken)return v.verifyIdToken(A,U);try{return!!I(A).sub}catch(te){return q.vF.error("Failed to verify PayPal ID token:",te),!1}},async getUserInfo(A){if(v.getUserInfo)return v.getUserInfo(A);if(!A.accessToken)return q.vF.error("Access token is required to fetch PayPal user info"),null;try{let U=await(0,s.zZ)(`${E}?schema=paypalv1.1`,{headers:{Authorization:`Bearer ${A.accessToken}`,Accept:"application/json"}});if(!U.data)return q.vF.error("Failed to fetch user info from PayPal"),null;let te=U.data,Y=await v.mapProfileToUser?.(te);return{user:{id:te.user_id,name:te.name,email:te.email,image:te.picture,emailVerified:te.email_verified,...Y},data:te}}catch(U){return q.vF.error("Failed to fetch user info from PayPal:",U),null}},options:v}},polar:v=>({id:"polar",name:"Polar",createAuthorizationURL({state:Z,scopes:R,codeVerifier:S,redirectURI:E}){let A=v.disableDefaultScope?[]:["openid","profile","email"];return v.scope&&A.push(...v.scope),R&&A.push(...R),(0,y.J)({id:"polar",options:v,authorizationEndpoint:"https://polar.sh/oauth2/authorize",scopes:A,state:Z,codeVerifier:S,redirectURI:E,prompt:v.prompt})},validateAuthorizationCode:async({code:Z,codeVerifier:R,redirectURI:S})=>(0,i.PB)({code:Z,codeVerifier:R,redirectURI:S,options:v,tokenEndpoint:"https://api.polar.sh/v1/oauth2/token"}),refreshAccessToken:v.refreshAccessToken?v.refreshAccessToken:async Z=>(0,h.J)({refreshToken:Z,options:{clientId:v.clientId,clientKey:v.clientKey,clientSecret:v.clientSecret},tokenEndpoint:"https://api.polar.sh/v1/oauth2/token"}),async getUserInfo(Z){if(v.getUserInfo)return v.getUserInfo(Z);let{data:R,error:S}=await(0,s.zZ)("https://api.polar.sh/v1/oauth2/userinfo",{headers:{Authorization:`Bearer ${Z.accessToken}`}});if(S)return null;let E=await v.mapProfileToUser?.(R);return{user:{id:R.id,name:R.public_name||R.username,email:R.email,image:R.avatar_url,emailVerified:R.email_verified??!1,...E},data:R}},options:v}),vercel:v=>({id:"vercel",name:"Vercel",createAuthorizationURL({state:Z,scopes:R,codeVerifier:S,redirectURI:E}){let A;if(!S)throw new J.$("codeVerifier is required for Vercel");return(v.scope!==void 0||R!==void 0)&&(A=[],v.scope&&A.push(...v.scope),R&&A.push(...R)),(0,y.J)({id:"vercel",options:v,authorizationEndpoint:"https://vercel.com/oauth/authorize",scopes:A,state:Z,codeVerifier:S,redirectURI:E})},validateAuthorizationCode:async({code:Z,codeVerifier:R,redirectURI:S})=>(0,i.PB)({code:Z,codeVerifier:R,redirectURI:S,options:v,tokenEndpoint:"https://api.vercel.com/login/oauth/token"}),async getUserInfo(Z){if(v.getUserInfo)return v.getUserInfo(Z);let{data:R,error:S}=await(0,s.zZ)("https://api.vercel.com/login/oauth/userinfo",{headers:{Authorization:`Bearer ${Z.accessToken}`}});if(S||!R)return null;let E=await v.mapProfileToUser?.(R);return{user:{id:R.sub,name:R.name??R.preferred_username,email:R.email,image:R.picture,emailVerified:R.email_verified??!1,...E},data:R}},options:v})},Ee=Object.keys(we),$e=ne.enum(Ee).or(ne.string())},Le.__chunk_75034=(Ue,ie,o)=>{"use strict";o.d(ie,{Eb:()=>O,N9:()=>j,X0:()=>$});var d=o(58772),y=o(77438),h=o(64354),i=o(11793),s=o(45041);class c extends i.k{constructor(K){super(),this.resultCb=K}static[y.i]="ExecuteResultSync";async execute(){return this.resultCb()}sync(){return this.resultCb()}}class O{constructor(K,I,p,_,m,q){this.mode=K,this.executeMethod=I,this.query=p,this.cache=_,this.queryMetadata=m,this.cacheConfig=q,_&&_.strategy()==="all"&&q===void 0&&(this.cacheConfig={enable:!0,autoInvalidate:!0}),this.cacheConfig?.enable||(this.cacheConfig=void 0)}static[y.i]="PreparedQuery";joinsNotNullableMap;async queryWithCache(K,I,p){if(this.cache===void 0||(0,y.is)(this.cache,d.Th)||this.queryMetadata===void 0)try{return await p()}catch(_){throw new h.Rv(K,I,_)}if(this.cacheConfig&&!this.cacheConfig.enable)try{return await p()}catch(_){throw new h.Rv(K,I,_)}if((this.queryMetadata.type==="insert"||this.queryMetadata.type==="update"||this.queryMetadata.type==="delete")&&this.queryMetadata.tables.length>0)try{let[_]=await Promise.all([p(),this.cache.onMutate({tables:this.queryMetadata.tables})]);return _}catch(_){throw new h.Rv(K,I,_)}if(!this.cacheConfig)try{return await p()}catch(_){throw new h.Rv(K,I,_)}if(this.queryMetadata.type==="select"){let _=await this.cache.get(this.cacheConfig.tag??await(0,d.h1)(K,I),this.queryMetadata.tables,this.cacheConfig.tag!==void 0,this.cacheConfig.autoInvalidate);if(_===void 0){let m;try{m=await p()}catch(q){throw new h.Rv(K,I,q)}return await this.cache.put(this.cacheConfig.tag??await(0,d.h1)(K,I),m,this.cacheConfig.autoInvalidate?this.queryMetadata.tables:[],this.cacheConfig.tag!==void 0,this.cacheConfig.config),m}return _}try{return await p()}catch(_){throw new h.Rv(K,I,_)}}getQuery(){return this.query}mapRunResult(K,I){return K}mapAllResult(K,I){throw Error("Not implemented")}mapGetResult(K,I){throw Error("Not implemented")}execute(K){return this.mode==="async"?this[this.executeMethod](K):new c(()=>this[this.executeMethod](K))}mapResult(K,I){switch(this.executeMethod){case"run":return this.mapRunResult(K,I);case"all":return this.mapAllResult(K,I);case"get":return this.mapGetResult(K,I)}}}class j{constructor(K){this.dialect=K}static[y.i]="SQLiteSession";prepareOneTimeQuery(K,I,p,_,m,q,J){return this.prepareQuery(K,I,p,_,m,q,J)}run(K){let I=this.dialect.sqlToQuery(K);try{return this.prepareOneTimeQuery(I,void 0,"run",!1).run()}catch(p){throw new h.n9({cause:p,message:`Failed to run the query '${I.sql}'`})}}extractRawRunValueFromBatchResult(K){return K}all(K){return this.prepareOneTimeQuery(this.dialect.sqlToQuery(K),void 0,"run",!1).all()}extractRawAllValueFromBatchResult(K){throw Error("Not implemented")}get(K){return this.prepareOneTimeQuery(this.dialect.sqlToQuery(K),void 0,"run",!1).get()}extractRawGetValueFromBatchResult(K){throw Error("Not implemented")}values(K){return this.prepareOneTimeQuery(this.dialect.sqlToQuery(K),void 0,"run",!1).values()}async count(K){return(await this.values(K))[0][0]}extractRawValuesValueFromBatchResult(K){throw Error("Not implemented")}}class $ extends s.N{constructor(K,I,p,_,m=0){super(K,I,p,_),this.schema=_,this.nestedIndex=m}static[y.i]="SQLiteTransaction";rollback(){throw new h.jY}}},Le.__chunk_74623=(Ue,ie,o)=>{"use strict";o.d(ie,{s:()=>y});var d=o(26772);let y=(0,d.CN)({is:h=>h.kind==="AndNode",create:(h,i)=>(0,d.CN)({kind:"AndNode",left:h,right:i})})},Le.__chunk_74500=(Ue,ie,o)=>{"use strict";function d(y){return y}o.d(ie,{E:()=>d})},Le.__chunk_73790=(Ue,ie,o)=>{"use strict";o.d(ie,{n:()=>y});var d=o(38427);function y(h,i,s,c,O){let j;if(O.crit!==void 0&&c?.crit===void 0)throw new h('"crit" (Critical) Header Parameter MUST be integrity protected');if(!c||c.crit===void 0)return new Set;if(!Array.isArray(c.crit)||c.crit.length===0||c.crit.some($=>typeof $!="string"||$.length===0))throw new h('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let $ of(j=s!==void 0?new Map([...Object.entries(s),...i.entries()]):i,c.crit)){if(!j.has($))throw new d.T0(`Extension Header Parameter "${$}" is not recognized`);if(O[$]===void 0)throw new h(`Extension Header Parameter "${$}" is missing`);if(j.get($)&&c[$]===void 0)throw new h(`Extension Header Parameter "${$}" MUST be integrity protected`)}return new Set(c.crit)}},Le.__chunk_72391=(Ue,ie,o)=>{"use strict";o.d(ie,{q:()=>y});var d=o(26772);let y=(0,d.CN)({is:h=>h.kind==="ValueNode",create:h=>(0,d.CN)({kind:"ValueNode",value:h}),createImmediate:h=>(0,d.CN)({kind:"ValueNode",value:h,immediate:!0})})},Le.__chunk_72197=(Ue,ie,o)=>{"use strict";o.d(ie,{n:()=>p});var d=o(70451),y=o(88780),h=o(26772);class i{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#e=(0,h.CN)({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),RenameConstraintNode:this.visitRenameConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),RefreshMaterializedViewNode:this.visitRefreshMaterializedView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),MergeQueryNode:this.visitMergeQuery.bind(this),MatchedNode:this.visitMatched.bind(this),AddIndexNode:this.visitAddIndex.bind(this),CastNode:this.visitCast.bind(this),FetchNode:this.visitFetch.bind(this),TopNode:this.visitTop.bind(this),OutputNode:this.visitOutput.bind(this),OrActionNode:this.visitOrAction.bind(this),CollateNode:this.visitCollate.bind(this)});visitNode=a=>{this.nodeStack.push(a),this.#e[a.kind](a),this.nodeStack.pop()}}var s=o(47248),c=o(55867),O=o(2170),j=o(9378),$=o(12308),W=o(40168),K=o(56899);let I=/'/g;class p extends i{#e="";#t=[];get numParameters(){return this.#t.length}compileQuery(a,V){return this.#e="",this.#t=[],this.nodeStack.splice(0,this.nodeStack.length),this.visitNode(a),(0,h.CN)({query:a,queryId:V,sql:this.getSql(),parameters:[...this.#t]})}getSql(){return this.#e}visitSelectQuery(a){let V=this.parentNode!==void 0&&!c.k.is(this.parentNode)&&!y.o.is(this.parentNode)&&!d.B.is(this.parentNode)&&!j.Y.is(this.parentNode)&&!$.i.is(this.parentNode);this.parentNode===void 0&&a.explain&&(this.visitNode(a.explain),this.append(" ")),V&&this.append("("),a.with&&(this.visitNode(a.with),this.append(" ")),this.append("select"),a.distinctOn&&(this.append(" "),this.compileDistinctOn(a.distinctOn)),a.frontModifiers?.length&&(this.append(" "),this.compileList(a.frontModifiers," ")),a.top&&(this.append(" "),this.visitNode(a.top)),a.selections&&(this.append(" "),this.compileList(a.selections)),a.from&&(this.append(" "),this.visitNode(a.from)),a.joins&&(this.append(" "),this.compileList(a.joins," ")),a.where&&(this.append(" "),this.visitNode(a.where)),a.groupBy&&(this.append(" "),this.visitNode(a.groupBy)),a.having&&(this.append(" "),this.visitNode(a.having)),a.setOperations&&(this.append(" "),this.compileList(a.setOperations," ")),a.orderBy&&(this.append(" "),this.visitNode(a.orderBy)),a.limit&&(this.append(" "),this.visitNode(a.limit)),a.offset&&(this.append(" "),this.visitNode(a.offset)),a.fetch&&(this.append(" "),this.visitNode(a.fetch)),a.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...a.endModifiers])," ")),V&&this.append(")")}visitFrom(a){this.append("from "),this.compileList(a.froms)}visitSelection(a){this.visitNode(a.selection)}visitColumn(a){this.visitNode(a.column)}compileDistinctOn(a){this.append("distinct on ("),this.compileList(a),this.append(")")}compileList(a,V=", "){let C=a.length-1;for(let L=0;L<=C;L++)this.visitNode(a[L]),L<C&&this.append(V)}visitWhere(a){this.append("where "),this.visitNode(a.where)}visitHaving(a){this.append("having "),this.visitNode(a.having)}visitInsertQuery(a){let V=this.parentNode!==void 0&&!c.k.is(this.parentNode)&&!O.z.is(this.parentNode)&&!W.t.is(this.parentNode);this.parentNode===void 0&&a.explain&&(this.visitNode(a.explain),this.append(" ")),V&&this.append("("),a.with&&(this.visitNode(a.with),this.append(" ")),this.append(a.replace?"replace":"insert"),a.ignore&&((0,K.u)("`InsertQueryNode.ignore` is deprecated. Use `InsertQueryNode.orAction` instead."),this.append(" ignore")),a.orAction&&(this.append(" "),this.visitNode(a.orAction)),a.top&&(this.append(" "),this.visitNode(a.top)),a.into&&(this.append(" into "),this.visitNode(a.into)),a.columns&&(this.append(" ("),this.compileList(a.columns),this.append(")")),a.output&&(this.append(" "),this.visitNode(a.output)),a.values&&(this.append(" "),this.visitNode(a.values)),a.defaultValues&&(this.append(" "),this.append("default values")),a.onConflict&&(this.append(" "),this.visitNode(a.onConflict)),a.onDuplicateKey&&(this.append(" "),this.visitNode(a.onDuplicateKey)),a.returning&&(this.append(" "),this.visitNode(a.returning)),V&&this.append(")"),a.endModifiers?.length&&(this.append(" "),this.compileList(a.endModifiers," "))}visitValues(a){this.append("values "),this.compileList(a.values)}visitDeleteQuery(a){let V=this.parentNode!==void 0&&!c.k.is(this.parentNode)&&!O.z.is(this.parentNode);this.parentNode===void 0&&a.explain&&(this.visitNode(a.explain),this.append(" ")),V&&this.append("("),a.with&&(this.visitNode(a.with),this.append(" ")),this.append("delete "),a.top&&(this.visitNode(a.top),this.append(" ")),this.visitNode(a.from),a.output&&(this.append(" "),this.visitNode(a.output)),a.using&&(this.append(" "),this.visitNode(a.using)),a.joins&&(this.append(" "),this.compileList(a.joins," ")),a.where&&(this.append(" "),this.visitNode(a.where)),a.orderBy&&(this.append(" "),this.visitNode(a.orderBy)),a.limit&&(this.append(" "),this.visitNode(a.limit)),a.returning&&(this.append(" "),this.visitNode(a.returning)),V&&this.append(")"),a.endModifiers?.length&&(this.append(" "),this.compileList(a.endModifiers," "))}visitReturning(a){this.append("returning "),this.compileList(a.selections)}visitAlias(a){this.visitNode(a.node),this.append(" as "),this.visitNode(a.alias)}visitReference(a){a.table&&(this.visitNode(a.table),this.append(".")),this.visitNode(a.column)}visitSelectAll(a){this.append("*")}visitIdentifier(a){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(a),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(a){if(!(0,h.Kg)(a.name))throw Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(a.name))}visitAnd(a){this.visitNode(a.left),this.append(" and "),this.visitNode(a.right)}visitOr(a){this.visitNode(a.left),this.append(" or "),this.visitNode(a.right)}visitValue(a){a.immediate?this.appendImmediateValue(a.value):this.appendValue(a.value)}visitValueList(a){this.append("("),this.compileList(a.values),this.append(")")}visitTuple(a){this.append("("),this.compileList(a.values),this.append(")")}visitPrimitiveValueList(a){this.append("(");let{values:V}=a;for(let C=0;C<V.length;++C)this.appendValue(V[C]),C!==V.length-1&&this.append(", ");this.append(")")}visitParens(a){this.append("("),this.visitNode(a.node),this.append(")")}visitJoin(a){this.append(q[a.joinType]),this.append(" "),this.visitNode(a.table),a.on&&(this.append(" "),this.visitNode(a.on))}visitOn(a){this.append("on "),this.visitNode(a.on)}visitRaw(a){let{sqlFragments:V,parameters:C}=a;for(let L=0;L<V.length;++L)this.append(V[L]),C.length>L&&this.visitNode(C[L])}visitOperator(a){this.append(a.operator)}visitTable(a){this.visitNode(a.table)}visitSchemableIdentifier(a){a.schema&&(this.visitNode(a.schema),this.append(".")),this.visitNode(a.identifier)}visitCreateTable(a){this.append("create "),a.frontModifiers&&a.frontModifiers.length>0&&(this.compileList(a.frontModifiers," "),this.append(" ")),a.temporary&&this.append("temporary "),this.append("table "),a.ifNotExists&&this.append("if not exists "),this.visitNode(a.table),a.selectQuery?(this.append(" as "),this.visitNode(a.selectQuery)):(this.append(" ("),this.compileList([...a.columns,...a.constraints??[]]),this.append(")"),a.onCommit&&(this.append(" on commit "),this.append(a.onCommit)),a.endModifiers&&a.endModifiers.length>0&&(this.append(" "),this.compileList(a.endModifiers," ")))}visitColumnDefinition(a){a.ifNotExists&&this.append("if not exists "),this.visitNode(a.column),this.append(" "),this.visitNode(a.dataType),a.unsigned&&this.append(" unsigned"),a.frontModifiers&&a.frontModifiers.length>0&&(this.append(" "),this.compileList(a.frontModifiers," ")),a.generated&&(this.append(" "),this.visitNode(a.generated)),a.identity&&this.append(" identity"),a.defaultTo&&(this.append(" "),this.visitNode(a.defaultTo)),a.notNull&&this.append(" not null"),a.unique&&this.append(" unique"),a.nullsNotDistinct&&this.append(" nulls not distinct"),a.primaryKey&&this.append(" primary key"),a.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),a.references&&(this.append(" "),this.visitNode(a.references)),a.check&&(this.append(" "),this.visitNode(a.check)),a.endModifiers&&a.endModifiers.length>0&&(this.append(" "),this.compileList(a.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(a){this.append("references "),this.visitNode(a.table),this.append(" ("),this.compileList(a.columns),this.append(")"),a.onDelete&&(this.append(" on delete "),this.append(a.onDelete)),a.onUpdate&&(this.append(" on update "),this.append(a.onUpdate))}visitDropTable(a){this.append("drop table "),a.ifExists&&this.append("if exists "),this.visitNode(a.table),a.cascade&&this.append(" cascade")}visitDataType(a){this.append(a.dataType)}visitOrderBy(a){this.append("order by "),this.compileList(a.items)}visitOrderByItem(a){this.visitNode(a.orderBy),a.collation&&(this.append(" "),this.visitNode(a.collation)),a.direction&&(this.append(" "),this.visitNode(a.direction)),a.nulls&&(this.append(" nulls "),this.append(a.nulls))}visitGroupBy(a){this.append("group by "),this.compileList(a.items)}visitGroupByItem(a){this.visitNode(a.groupBy)}visitUpdateQuery(a){let V=this.parentNode!==void 0&&!c.k.is(this.parentNode)&&!O.z.is(this.parentNode)&&!W.t.is(this.parentNode);if(this.parentNode===void 0&&a.explain&&(this.visitNode(a.explain),this.append(" ")),V&&this.append("("),a.with&&(this.visitNode(a.with),this.append(" ")),this.append("update "),a.top&&(this.visitNode(a.top),this.append(" ")),a.table&&(this.visitNode(a.table),this.append(" ")),this.append("set "),a.updates&&this.compileList(a.updates),a.output&&(this.append(" "),this.visitNode(a.output)),a.from&&(this.append(" "),this.visitNode(a.from)),a.joins){if(!a.from)throw Error("Joins in an update query are only supported as a part of a PostgreSQL 'update set from join' query. If you want to create a MySQL 'update join set' query, see https://kysely.dev/docs/examples/update/my-sql-joins");this.append(" "),this.compileList(a.joins," ")}a.where&&(this.append(" "),this.visitNode(a.where)),a.returning&&(this.append(" "),this.visitNode(a.returning)),a.orderBy&&(this.append(" "),this.visitNode(a.orderBy)),a.limit&&(this.append(" "),this.visitNode(a.limit)),V&&this.append(")"),a.endModifiers?.length&&(this.append(" "),this.compileList(a.endModifiers," "))}visitColumnUpdate(a){this.visitNode(a.column),this.append(" = "),this.visitNode(a.value)}visitLimit(a){this.append("limit "),this.visitNode(a.limit)}visitOffset(a){this.append("offset "),this.visitNode(a.offset)}visitOnConflict(a){this.append("on conflict"),a.columns?(this.append(" ("),this.compileList(a.columns),this.append(")")):a.constraint?(this.append(" on constraint "),this.visitNode(a.constraint)):a.indexExpression&&(this.append(" ("),this.visitNode(a.indexExpression),this.append(")")),a.indexWhere&&(this.append(" "),this.visitNode(a.indexWhere)),a.doNothing===!0?this.append(" do nothing"):a.updates&&(this.append(" do update set "),this.compileList(a.updates),a.updateWhere&&(this.append(" "),this.visitNode(a.updateWhere)))}visitOnDuplicateKey(a){this.append("on duplicate key update "),this.compileList(a.updates)}visitCreateIndex(a){this.append("create "),a.unique&&this.append("unique "),this.append("index "),a.ifNotExists&&this.append("if not exists "),this.visitNode(a.name),a.table&&(this.append(" on "),this.visitNode(a.table)),a.using&&(this.append(" using "),this.visitNode(a.using)),a.columns&&(this.append(" ("),this.compileList(a.columns),this.append(")")),a.nullsNotDistinct&&this.append(" nulls not distinct"),a.where&&(this.append(" "),this.visitNode(a.where))}visitDropIndex(a){this.append("drop index "),a.ifExists&&this.append("if exists "),this.visitNode(a.name),a.table&&(this.append(" on "),this.visitNode(a.table)),a.cascade&&this.append(" cascade")}visitCreateSchema(a){this.append("create schema "),a.ifNotExists&&this.append("if not exists "),this.visitNode(a.schema)}visitDropSchema(a){this.append("drop schema "),a.ifExists&&this.append("if exists "),this.visitNode(a.schema),a.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(a){a.name&&(this.append("constraint "),this.visitNode(a.name),this.append(" ")),this.append("primary key ("),this.compileList(a.columns),this.append(")"),this.buildDeferrable(a)}buildDeferrable(a){a.deferrable!==void 0&&(a.deferrable?this.append(" deferrable"):this.append(" not deferrable")),a.initiallyDeferred!==void 0&&(a.initiallyDeferred?this.append(" initially deferred"):this.append(" initially immediate"))}visitUniqueConstraint(a){a.name&&(this.append("constraint "),this.visitNode(a.name),this.append(" ")),this.append("unique"),a.nullsNotDistinct&&this.append(" nulls not distinct"),this.append(" ("),this.compileList(a.columns),this.append(")"),this.buildDeferrable(a)}visitCheckConstraint(a){a.name&&(this.append("constraint "),this.visitNode(a.name),this.append(" ")),this.append("check ("),this.visitNode(a.expression),this.append(")")}visitForeignKeyConstraint(a){a.name&&(this.append("constraint "),this.visitNode(a.name),this.append(" ")),this.append("foreign key ("),this.compileList(a.columns),this.append(") "),this.visitNode(a.references),a.onDelete&&(this.append(" on delete "),this.append(a.onDelete)),a.onUpdate&&(this.append(" on update "),this.append(a.onUpdate)),this.buildDeferrable(a)}visitList(a){this.compileList(a.items)}visitWith(a){this.append("with "),a.recursive&&this.append("recursive "),this.compileList(a.expressions)}visitCommonTableExpression(a){this.visitNode(a.name),this.append(" as "),(0,h.Lm)(a.materialized)&&(a.materialized||this.append("not "),this.append("materialized ")),this.visitNode(a.expression)}visitCommonTableExpressionName(a){this.visitNode(a.table),a.columns&&(this.append("("),this.compileList(a.columns),this.append(")"))}visitAlterTable(a){this.append("alter table "),this.visitNode(a.table),this.append(" "),a.renameTo&&(this.append("rename to "),this.visitNode(a.renameTo)),a.setSchema&&(this.append("set schema "),this.visitNode(a.setSchema)),a.addConstraint&&this.visitNode(a.addConstraint),a.dropConstraint&&this.visitNode(a.dropConstraint),a.renameConstraint&&this.visitNode(a.renameConstraint),a.columnAlterations&&this.compileColumnAlterations(a.columnAlterations),a.addIndex&&this.visitNode(a.addIndex),a.dropIndex&&this.visitNode(a.dropIndex)}visitAddColumn(a){this.append("add column "),this.visitNode(a.column)}visitRenameColumn(a){this.append("rename column "),this.visitNode(a.column),this.append(" to "),this.visitNode(a.renameTo)}visitDropColumn(a){this.append("drop column "),this.visitNode(a.column)}visitAlterColumn(a){this.append("alter column "),this.visitNode(a.column),this.append(" "),a.dataType&&(this.announcesNewColumnDataType()&&this.append("type "),this.visitNode(a.dataType),a.dataTypeExpression&&(this.append("using "),this.visitNode(a.dataTypeExpression))),a.setDefault&&(this.append("set default "),this.visitNode(a.setDefault)),a.dropDefault&&this.append("drop default"),a.setNotNull&&this.append("set not null"),a.dropNotNull&&this.append("drop not null")}visitModifyColumn(a){this.append("modify column "),this.visitNode(a.column)}visitAddConstraint(a){this.append("add "),this.visitNode(a.constraint)}visitDropConstraint(a){this.append("drop constraint "),a.ifExists&&this.append("if exists "),this.visitNode(a.constraintName),a.modifier==="cascade"?this.append(" cascade"):a.modifier==="restrict"&&this.append(" restrict")}visitRenameConstraint(a){this.append("rename constraint "),this.visitNode(a.oldName),this.append(" to "),this.visitNode(a.newName)}visitSetOperation(a){this.append(a.operator),this.append(" "),a.all&&this.append("all "),this.visitNode(a.expression)}visitCreateView(a){this.append("create "),a.orReplace&&this.append("or replace "),a.materialized&&this.append("materialized "),a.temporary&&this.append("temporary "),this.append("view "),a.ifNotExists&&this.append("if not exists "),this.visitNode(a.name),this.append(" "),a.columns&&(this.append("("),this.compileList(a.columns),this.append(") ")),a.as&&(this.append("as "),this.visitNode(a.as))}visitRefreshMaterializedView(a){this.append("refresh materialized view "),a.concurrently&&this.append("concurrently "),this.visitNode(a.name),a.withNoData?this.append(" with no data"):this.append(" with data")}visitDropView(a){this.append("drop "),a.materialized&&this.append("materialized "),this.append("view "),a.ifExists&&this.append("if exists "),this.visitNode(a.name),a.cascade&&this.append(" cascade")}visitGenerated(a){this.append("generated "),a.always&&this.append("always "),a.byDefault&&this.append("by default "),this.append("as "),a.identity&&this.append("identity"),a.expression&&(this.append("("),this.visitNode(a.expression),this.append(")")),a.stored&&this.append(" stored")}visitDefaultValue(a){this.append("default "),this.visitNode(a.defaultValue)}visitSelectModifier(a){a.rawModifier?this.visitNode(a.rawModifier):this.append(_[a.modifier]),a.of&&(this.append(" of "),this.compileList(a.of,", "))}visitCreateType(a){this.append("create type "),this.visitNode(a.name),a.enum&&(this.append(" as enum "),this.visitNode(a.enum))}visitDropType(a){this.append("drop type "),a.ifExists&&this.append("if exists "),this.visitNode(a.name)}visitExplain(a){this.append("explain"),(a.options||a.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),a.options&&(this.visitNode(a.options),a.format&&this.append(this.getExplainOptionsDelimiter())),a.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(a.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(a){this.append("default")}visitAggregateFunction(a){this.append(a.func),this.append("("),a.distinct&&this.append("distinct "),this.compileList(a.aggregated),a.orderBy&&(this.append(" "),this.visitNode(a.orderBy)),this.append(")"),a.withinGroup&&(this.append(" within group ("),this.visitNode(a.withinGroup),this.append(")")),a.filter&&(this.append(" filter("),this.visitNode(a.filter),this.append(")")),a.over&&(this.append(" "),this.visitNode(a.over))}visitOver(a){this.append("over("),a.partitionBy&&(this.visitNode(a.partitionBy),a.orderBy&&this.append(" ")),a.orderBy&&this.visitNode(a.orderBy),this.append(")")}visitPartitionBy(a){this.append("partition by "),this.compileList(a.items)}visitPartitionByItem(a){this.visitNode(a.partitionBy)}visitBinaryOperation(a){this.visitNode(a.leftOperand),this.append(" "),this.visitNode(a.operator),this.append(" "),this.visitNode(a.rightOperand)}visitUnaryOperation(a){this.visitNode(a.operator),this.isMinusOperator(a.operator)||this.append(" "),this.visitNode(a.operand)}isMinusOperator(a){return s.zX.is(a)&&a.operator==="-"}visitUsing(a){this.append("using "),this.compileList(a.tables)}visitFunction(a){this.append(a.func),this.append("("),this.compileList(a.arguments),this.append(")")}visitCase(a){this.append("case"),a.value&&(this.append(" "),this.visitNode(a.value)),a.when&&(this.append(" "),this.compileList(a.when," ")),a.else&&(this.append(" else "),this.visitNode(a.else)),this.append(" end"),a.isStatement&&this.append(" case")}visitWhen(a){this.append("when "),this.visitNode(a.condition),a.result&&(this.append(" then "),this.visitNode(a.result))}visitJSONReference(a){this.visitNode(a.reference),this.visitNode(a.traversal)}visitJSONPath(a){for(let V of(a.inOperator&&this.visitNode(a.inOperator),this.append("'$"),a.pathLegs))this.visitNode(V);this.append("'")}visitJSONPathLeg(a){let V=a.type==="ArrayLocation";this.append(V?"[":"."),this.append(String(a.value)),V&&this.append("]")}visitJSONOperatorChain(a){for(let V=0,C=a.values.length;V<C;V++)V===C-1?this.visitNode(a.operator):this.append("->"),this.visitNode(a.values[V])}visitMergeQuery(a){a.with&&(this.visitNode(a.with),this.append(" ")),this.append("merge "),a.top&&(this.visitNode(a.top),this.append(" ")),this.append("into "),this.visitNode(a.into),a.using&&(this.append(" "),this.visitNode(a.using)),a.whens&&(this.append(" "),this.compileList(a.whens," ")),a.returning&&(this.append(" "),this.visitNode(a.returning)),a.output&&(this.append(" "),this.visitNode(a.output)),a.endModifiers?.length&&(this.append(" "),this.compileList(a.endModifiers," "))}visitMatched(a){a.not&&this.append("not "),this.append("matched"),a.bySource&&this.append(" by source")}visitAddIndex(a){this.append("add "),a.unique&&this.append("unique "),this.append("index "),this.visitNode(a.name),a.columns&&(this.append(" ("),this.compileList(a.columns),this.append(")")),a.using&&(this.append(" using "),this.visitNode(a.using))}visitCast(a){this.append("cast("),this.visitNode(a.expression),this.append(" as "),this.visitNode(a.dataType),this.append(")")}visitFetch(a){this.append("fetch next "),this.visitNode(a.rowCount),this.append(` rows ${a.modifier}`)}visitOutput(a){this.append("output "),this.compileList(a.selections)}visitTop(a){this.append(`top(${a.expression})`),a.modifiers&&this.append(` ${a.modifiers}`)}visitOrAction(a){this.append(a.action)}visitCollate(a){this.append("collate "),this.visitNode(a.collation)}append(a){this.#e+=a}appendValue(a){this.addParameter(a),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(a){let V=this.getLeftIdentifierWrapper(),C=this.getRightIdentifierWrapper(),L="";for(let k of a)L+=k,k===V?L+=V:k===C&&(L+=C);return L}sanitizeStringLiteral(a){return a.replace(I,"''")}addParameter(a){this.#t.push(a)}appendImmediateValue(a){if((0,h.Kg)(a))this.appendStringLiteral(a);else if((0,h.Et)(a)||(0,h.Lm)(a)||(0,h.sI)(a))this.append(a.toString());else if((0,h.kZ)(a))this.append("null");else if((0,h.$P)(a))this.appendImmediateValue(a.toISOString());else throw Error(`invalid immediate value ${a}`)}appendStringLiteral(a){this.append("'"),this.append(this.sanitizeStringLiteral(a)),this.append("'")}sortSelectModifiers(a){return a.sort((V,C)=>V.modifier&&C.modifier?m[V.modifier]-m[C.modifier]:1),(0,h.CN)(a)}compileColumnAlterations(a){this.compileList(a)}announcesNewColumnDataType(){return!0}}let _=(0,h.CN)({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),m=(0,h.CN)({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),q=(0,h.CN)({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",CrossJoin:"cross join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral",LateralCrossJoin:"cross join lateral",OuterApply:"outer apply",CrossApply:"cross apply",Using:"using"})},Le.__chunk_70809=(Ue,ie,o)=>{"use strict";o.d(ie,{Ce:()=>W,R_:()=>j,SY:()=>I,Uh:()=>O,Zt:()=>$,ec:()=>K});var d=o(78139);o(13191);var y=o(99597),h=o(13348);function i(p){let _=p.split("."),m=parseInt(_[_.length-1]||"0",10);return isNaN(m)?0:m}function s(p,_){let m={};for(let q in p)m[q]={name:q,value:"",attributes:{..._,maxAge:0}};return m}let c=p=>(_,m,q)=>{let J=function(V,C){let L={};for(let[k,N]of Object.entries(function(P){let b=P.headers?.get("cookie");if(!b)return{};let z={};for(let F of b.split("; ")){let[Q,...G]=F.split("=");Q&&G.length>0&&(z[Q]=G.join("="))}return z}(C)))k.startsWith(V)&&(L[k]=N);return L}(_,q),a=q.context.logger;return{getValue:()=>function(V){return Object.keys(V).sort((C,L)=>i(C)-i(L)).map(C=>V[C]).join("")}(J),hasChunks:()=>Object.keys(J).length>0,chunk(V,C){let L=s(J,m);for(let k in J)delete J[k];for(let k of function(N,P,b,z){let F=Math.ceil(P.value.length/3896);if(F===1)return b[P.name]=P.value,[P];let Q=[];for(let G=0;G<F;G++){let X=`${P.name}.${G}`,oe=3896*G,ne=P.value.substring(oe,oe+3896);Q.push({...P,name:X,value:ne}),b[X]=ne}return z.debug(`CHUNKING_${N.toUpperCase()}_COOKIE`,{message:`${N} cookie exceeds allowed 4096 bytes.`,emptyCookieSize:200,valueSize:P.value.length,chunkCount:F,chunks:Q.map(G=>G.value.length+200)}),Q}(p,{name:_,value:V,attributes:{...m,...C}},J,a))L[k.name]=k;return Object.values(L)},clean(){let V=s(J,m);for(let C in J)delete J[C];return Object.values(V)},setCookies(V){for(let C of V)q.setCookie(C.name,C.value,C.attributes)}}},O=c("Session"),j=c("Account");function $(p,_){let m=p.getCookie(_);if(m)return m;let q=[],J=p.headers?.get("cookie");if(!J)return null;let a={};for(let V of J.split("; ")){let[C,...L]=V.split("=");C&&L.length>0&&(a[C]=L.join("="))}for(let[V,C]of Object.entries(a))if(V.startsWith(_+".")){let L=parseInt(V.split(".").at(-1)||"0",10);isNaN(L)||q.push({index:L,value:C})}return q.length>0?(q.sort((V,C)=>V.index-C.index),q.map(V=>V.value).join("")):null}async function W(p,_){let m=p.context.authCookies.accountData,q={maxAge:300,...m.attributes},J=await(0,d.lT)(_,p.context.secret,"better-auth-account",q.maxAge);if(J.length>4096){let a=j(m.name,q,p),V=a.chunk(J,q);a.setCookies(V)}else{let a=j(m.name,q,p);if(a.hasChunks()){let V=a.clean();a.setCookies(V)}p.setCookie(m.name,J,q)}}async function K(p){let _=$(p,p.context.authCookies.accountData.name);if(_){let m=(0,y.$l)(await(0,d.Do)(_,p.context.secret,"better-auth-account"));if(m)return m}return null}let I=h.optional(h.object({disableCookieCache:h.coerce.boolean().meta({description:"Disable cookie cache and fetch session from database"}).optional(),disableRefresh:h.coerce.boolean().meta({description:"Disable session refresh. Useful for checking session status, without updating the session"}).optional()}))},Le.__chunk_70451=(Ue,ie,o)=>{"use strict";o.d(ie,{B:()=>h,o:()=>y});var d=o(26772);let y=["preserve rows","delete rows","drop"],h=(0,d.CN)({is:i=>i.kind==="CreateTableNode",create:i=>(0,d.CN)({kind:"CreateTableNode",table:i,columns:(0,d.CN)([])}),cloneWithColumn:(i,s)=>(0,d.CN)({...i,columns:(0,d.CN)([...i.columns,s])}),cloneWithConstraint:(i,s)=>(0,d.CN)({...i,constraints:i.constraints?(0,d.CN)([...i.constraints,s]):(0,d.CN)([s])}),cloneWithFrontModifier:(i,s)=>(0,d.CN)({...i,frontModifiers:i.frontModifiers?(0,d.CN)([...i.frontModifiers,s]):(0,d.CN)([s])}),cloneWithEndModifier:(i,s)=>(0,d.CN)({...i,endModifiers:i.endModifiers?(0,d.CN)([...i.endModifiers,s]):(0,d.CN)([s])}),cloneWith:(i,s)=>(0,d.CN)({...i,...s})})},Le.__chunk_70356=(Ue,ie,o)=>{"use strict";o.d(ie,{DV:()=>j,He:()=>function q(J,a){return Object.entries(J).reduce((V,[C,L])=>{if(typeof C!="string")return V;let k=a?[...a,C]:[C];return(0,y.is)(L,d.V)||(0,y.is)(L,h.Xs)||(0,y.is)(L,h.Xs.Aliased)||(0,y.is)(L,i.n)?V.push({path:k,field:L}):(0,y.is)(L,s.XI)?V.push(...q(L[s.XI.Symbol.Columns],k)):V.push(...q(L,k)),V},[])},Ll:()=>p,Lq:()=>_,XJ:()=>W,YD:()=>K,a6:()=>O,q:()=>$,su:()=>m,zN:()=>I});var d=o(21979),y=o(77438),h=o(38560),i=o(11999),s=o(95769),c=o(90208);function O(q,J,a){let V={},C=q.reduce((L,{path:k,field:N},P)=>{let b;b=(0,y.is)(N,d.V)?N:(0,y.is)(N,h.Xs)?N.decoder:(0,y.is)(N,i.n)?N._.sql.decoder:N.sql.decoder;let z=L;for(let[F,Q]of k.entries())if(F<k.length-1)Q in z||(z[Q]={}),z=z[Q];else{let G=J[P],X=z[Q]=G===null?null:b.mapFromDriverValue(G);if(a&&(0,y.is)(N,d.V)&&k.length===2){let oe=k[0];oe in V?typeof V[oe]=="string"&&V[oe]!==(0,s.Io)(N.table)&&(V[oe]=!1):V[oe]=X===null&&(0,s.Io)(N.table)}}return L},{});if(a&&Object.keys(V).length>0)for(let[L,k]of Object.entries(V))typeof k!="string"||a[k]||(C[L]=null);return C}function j(q,J){let a=Object.keys(q),V=Object.keys(J);if(a.length!==V.length)return!1;for(let[C,L]of a.entries())if(L!==V[C])return!1;return!0}function $(q,J){let a=Object.entries(J).filter(([,V])=>V!==void 0).map(([V,C])=>(0,y.is)(C,h.Xs)||(0,y.is)(C,d.V)?[V,C]:[V,new h.Iw(C,q[s.XI.Symbol.Columns][V])]);if(a.length===0)throw Error("No values to set");return Object.fromEntries(a)}function W(q,J){for(let a of J)for(let V of Object.getOwnPropertyNames(a.prototype))V!=="constructor"&&Object.defineProperty(q.prototype,V,Object.getOwnPropertyDescriptor(a.prototype,V)||Object.create(null))}function K(q){return q[s.XI.Symbol.Columns]}function I(q){return(0,y.is)(q,i.n)?q._.alias:(0,y.is)(q,h.Ss)?q[c.n].name:(0,y.is)(q,h.Xs)?void 0:q[s.XI.Symbol.IsAlias]?q[s.XI.Symbol.Name]:q[s.XI.Symbol.BaseName]}function p(q,J){return{name:typeof q=="string"&&q.length>0?q:"",config:typeof q=="object"?q:J}}function _(q){if(typeof q!="object"||q===null||q.constructor.name!=="Object")return!1;if("logger"in q){let J=typeof q.logger;return J==="boolean"||J==="object"&&typeof q.logger.logQuery=="function"||J==="undefined"}if("schema"in q){let J=typeof q.schema;return J==="object"||J==="undefined"}if("casing"in q){let J=typeof q.casing;return J==="string"||J==="undefined"}if("mode"in q)return q.mode==="default"&&q.mode==="planetscale"&&q.mode===void 0;if("connection"in q){let J=typeof q.connection;return J==="string"||J==="object"||J==="undefined"}if("client"in q){let J=typeof q.client;return J==="object"||J==="function"||J==="undefined"}return Object.keys(q).length===0}let m=typeof TextDecoder>"u"?null:new TextDecoder},Le.__chunk_69252=(Ue,ie,o)=>{"use strict";o.d(ie,{Y:()=>y,i:()=>h});var d=o(38560);function y(i){return(0,d.ll)`${i} asc`}function h(i){return(0,d.ll)`${i} desc`}},Le.__chunk_68506=(Ue,ie,o)=>{"use strict";o.d(ie,{H:()=>c,Q:()=>s});let d=Symbol.for("better-auth:global"),y=null,h={},i="1.4.18";function s(){return Sr[d]||(Sr[d]={version:i,epoch:1,context:h},y=Sr[d]),(y=Sr[d]).version!==i&&(y.version=i,y.epoch++),Sr[d]}function c(){return s().version}},Le.__chunk_68113=(Ue,ie,o)=>{"use strict";o.d(ie,{$F:()=>d.$F,KV:()=>d.KV,Km:()=>d.Km,Nu:()=>d.Nu,_K:()=>d._K,h:()=>y.h,lh:()=>d.lh,p8:()=>y.p8,vF:()=>y.vF,yz:()=>d.yz});var d=o(2543);o(54260);var y=o(39311)},Le.__chunk_67869=(Ue,ie,o)=>{"use strict";o.d(ie,{B:()=>d});let d={scope:"server"}},Le.__chunk_67365=(Ue,ie,o)=>{"use strict";o.d(ie,{v:()=>I,o:()=>K});var d=o(28289),y=o(21979),h=o(77438),i=o(86962);class s{static[h.i]="SQLiteForeignKeyBuilder";reference;_onUpdate;_onDelete;constructor(_,m){this.reference=()=>{let{name:q,columns:J,foreignColumns:a}=_();return{name:q,columns:J,foreignTable:a[0].table,foreignColumns:a}},m&&(this._onUpdate=m.onUpdate,this._onDelete=m.onDelete)}onUpdate(_){return this._onUpdate=_,this}onDelete(_){return this._onDelete=_,this}build(_){return new c(_,this)}}class c{constructor(_,m){this.table=_,this.reference=m.reference,this.onUpdate=m._onUpdate,this.onDelete=m._onDelete}static[h.i]="SQLiteForeignKey";reference;onUpdate;onDelete;getName(){let{name:_,columns:m,foreignColumns:q}=this.reference(),J=m.map(C=>C.name),a=q.map(C=>C.name),V=[this.table[i.E],...J,q[0].table[i.E],...a];return _??`${V.join("_")}_fk`}}function O(p,_){return`${p[i.E]}_${_.join("_")}_unique`}class j{constructor(_,m){this.name=m,this.columns=_}static[h.i]=null;columns;build(_){return new W(_,this.columns,this.name)}}class ${static[h.i]=null;name;constructor(_){this.name=_}on(..._){return new j(_,this.name)}}class W{constructor(_,m,q){this.table=_,this.columns=m,this.name=q??O(this.table,this.columns.map(J=>J.name))}static[h.i]=null;columns;name;getName(){return this.name}}class K extends d.Q{static[h.i]="SQLiteColumnBuilder";foreignKeyConfigs=[];references(_,m={}){return this.foreignKeyConfigs.push({ref:_,actions:m}),this}unique(_){return this.config.isUnique=!0,this.config.uniqueName=_,this}generatedAlwaysAs(_,m){return this.config.generated={as:_,type:"always",mode:m?.mode??"virtual"},this}buildForeignKeys(_,m){return this.foreignKeyConfigs.map(({ref:q,actions:J})=>((a,V)=>{let C=new s(()=>({columns:[_],foreignColumns:[a()]}));return V.onUpdate&&C.onUpdate(V.onUpdate),V.onDelete&&C.onDelete(V.onDelete),C.build(m)})(q,J))}}class I extends y.V{constructor(_,m){m.uniqueName||(m.uniqueName=O(_,[m.name])),super(_,m),this.table=_}static[h.i]="SQLiteColumn"}},Le.__chunk_67177=(Ue,ie,o)=>{"use strict";o.d(ie,{Pv:()=>i,w:()=>h});var d=o(77438);class y{static[d.i]="ConsoleLogWriter";write(c){console.log(c)}}class h{static[d.i]="DefaultLogger";writer;constructor(c){this.writer=c?.writer??new y}logQuery(c,O){let j=O.map(W=>{try{return JSON.stringify(W)}catch{return String(W)}}),$=j.length?` -- params: [${j.join(", ")}]`:"";this.writer.write(`Query: ${c}${$}`)}}class i{static[d.i]="NoopLogger";logQuery(){}}},Le.__chunk_67176=(Ue,ie,o)=>{"use strict";o.d(ie,{f:()=>m});var d=o(77438),y=o(67177),h=o(6525),i=o(45041),s=o(87698),c=o(58772),O=o(38560),j=o(75034),$=o(70356);class W extends j.N9{constructor(J,a,V,C={}){super(a),this.client=J,this.schema=V,this.options=C,this.logger=C.logger??new y.Pv,this.cache=C.cache??new c.Th}static[d.i]="SQLiteD1Session";logger;cache;prepareQuery(J,a,V,C,L,k,N){return new p(this.client.prepare(J.sql),J,this.logger,this.cache,k,N,a,V,C,L)}async batch(J){let a=[],V=[];for(let C of J){let L=C._prepare(),k=L.getQuery();if(a.push(L),k.params.length>0)V.push(L.stmt.bind(...k.params));else{let N=L.getQuery();V.push(this.client.prepare(N.sql).bind(...N.params))}}return(await this.client.batch(V)).map((C,L)=>a[L].mapResult(C,!0))}extractRawAllValueFromBatchResult(J){return J.results}extractRawGetValueFromBatchResult(J){return J.results[0]}extractRawValuesValueFromBatchResult(J){return I(J.results)}async transaction(J,a){let V=new K("async",this.dialect,this,this.schema);await this.run(O.ll.raw(`begin${a?.behavior?" "+a.behavior:""}`));try{let C=await J(V);return await this.run((0,O.ll)`commit`),C}catch(C){throw await this.run((0,O.ll)`rollback`),C}}}class K extends j.X0{static[d.i]="D1Transaction";async transaction(J){let a=`sp${this.nestedIndex}`,V=new K("async",this.dialect,this.session,this.schema,this.nestedIndex+1);await this.session.run(O.ll.raw(`savepoint ${a}`));try{let C=await J(V);return await this.session.run(O.ll.raw(`release savepoint ${a}`)),C}catch(C){throw await this.session.run(O.ll.raw(`rollback to savepoint ${a}`)),C}}}function I(q){let J=[];for(let a of q){let V=Object.keys(a).map(C=>a[C]);J.push(V)}return J}class p extends j.Eb{constructor(J,a,V,C,L,k,N,P,b,z){super("async",P,a,C,L,k),this.logger=V,this._isResponseInArrayMode=b,this.customResultMapper=z,this.fields=N,this.stmt=J}static[d.i]="D1PreparedQuery";customResultMapper;fields;stmt;async run(J){let a=(0,O.Ct)(this.query.params,J??{});return this.logger.logQuery(this.query.sql,a),await this.queryWithCache(this.query.sql,a,async()=>this.stmt.bind(...a).run())}async all(J){let{fields:a,query:V,logger:C,stmt:L,customResultMapper:k}=this;if(!a&&!k){let P=(0,O.Ct)(V.params,J??{});return C.logQuery(V.sql,P),await this.queryWithCache(V.sql,P,async()=>L.bind(...P).all().then(({results:b})=>this.mapAllResult(b)))}let N=await this.values(J);return this.mapAllResult(N)}mapAllResult(J,a){return a&&(J=I(J.results)),this.fields||this.customResultMapper?this.customResultMapper?this.customResultMapper(J):J.map(V=>(0,$.a6)(this.fields,V,this.joinsNotNullableMap)):J}async get(J){let{fields:a,joinsNotNullableMap:V,query:C,logger:L,stmt:k,customResultMapper:N}=this;if(!a&&!N){let b=(0,O.Ct)(C.params,J??{});return L.logQuery(C.sql,b),await this.queryWithCache(C.sql,b,async()=>k.bind(...b).all().then(({results:z})=>z[0]))}let P=await this.values(J);return P[0]?N?N(P):(0,$.a6)(a,P[0],V):void 0}mapGetResult(J,a){return a&&(J=I(J.results)[0]),this.fields||this.customResultMapper?this.customResultMapper?this.customResultMapper([J]):(0,$.a6)(this.fields,J,this.joinsNotNullableMap):J}async values(J){let a=(0,O.Ct)(this.query.params,J??{});return this.logger.logQuery(this.query.sql,a),await this.queryWithCache(this.query.sql,a,async()=>this.stmt.bind(...a).raw())}isResponseInArrayMode(){return this._isResponseInArrayMode}}class _ extends i.N{static[d.i]="D1Database";async batch(J){return this.session.batch(J)}}function m(q,J={}){let a,V,C=new s.ZR({casing:J.casing});if(J.logger===!0?a=new y.w:J.logger!==!1&&(a=J.logger),J.schema){let N=(0,h._k)(J.schema,h.DZ);V={fullSchema:J.schema,schema:N.tables,tableNamesMap:N.tableNamesMap}}let L=new W(q,C,V,{logger:a,cache:J.cache}),k=new _("async",C,L,V);return k.$client=q,k.$cache=J.cache,k.$cache&&(k.$cache.invalidate=J.cache?.onMutate),k}},Le.__chunk_66557=(Ue,ie,o)=>{"use strict";o.d(ie,{$O:()=>m,DT:()=>a,NF:()=>q,Ow:()=>C,RY:()=>V,kU:()=>_,q5:()=>J,vd:()=>p});var d=o(93692),y=o(66142),h=o(12163),i=o(59204),s=o(26772),c=o(80282),O=o(9789),j=o(19598),$=o(47248),W=o(5702),K=o(47959),I=o(3122);function p(k){return(0,s.Kg)(k)?J(k):k.toOperationNode()}function _(k){return(0,s.MH)(k)?k.map(N=>m(N)):[m(k)]}function m(k){return(0,c.SS)(k)?(0,c.YK)(k):p(k)}function q(k,N){let P=J(k);if((0,$.Xm)(N))return W.Q.create(P,K.k.create($.zX.create(N)));let b=N.slice(0,-1);if((0,$.Xm)(b))return W.Q.create(P,I.c.create($.zX.create(b)));throw Error(`Invalid JSON operator: ${N}`)}function J(k){if(!k.includes("."))return h.q.create(y.Z.create(k));let N=k.split(".").map(L);if(N.length===3)return function(P){let[b,z,F]=P;return h.q.create(y.Z.create(F),i.H.createWithSchema(b,z))}(N);if(N.length===2)return function(P){let[b,z]=P;return h.q.create(y.Z.create(z),i.H.create(b))}(N);throw Error(`invalid column reference ${k}`)}function a(k){let N=" as ";if(!k.includes(N))return J(k);{let[P,b]=k.split(N).map(L);return d.N.create(J(P),O.O.create(b))}}function V(k){return y.Z.create(k)}function C(k){if(!k.includes(" "))return V(k);{let[N,P]=k.split(" ").map(L);if(!(0,j.bE)(P))throw Error(`invalid order direction "${P}" next to "${N}"`);return(0,j.xk)([N,P])[0]}}function L(k){return k.trim()}},Le.__chunk_66142=(Ue,ie,o)=>{"use strict";o.d(ie,{Z:()=>h});var d=o(26772),y=o(9789);let h=(0,d.CN)({is:i=>i.kind==="ColumnNode",create:i=>(0,d.CN)({kind:"ColumnNode",column:y.O.create(i)})})},Le.__chunk_65307=(Ue,ie,o)=>{"use strict";o.d(ie,{w:()=>h});var d=o(81187);class y{oHash;iHash;blockLen;outputLen;finished=!1;destroyed=!1;constructor(s,c){if((0,d.sd)(s),(0,d.DO)(c,void 0,"key"),this.iHash=s.create(),typeof this.iHash.update!="function")throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let O=this.blockLen,j=new Uint8Array(O);j.set(c.length>O?s.create().update(c).digest():c);for(let $=0;$<j.length;$++)j[$]^=54;this.iHash.update(j),this.oHash=s.create();for(let $=0;$<j.length;$++)j[$]^=106;this.oHash.update(j),(0,d.uH)(j)}update(s){return(0,d.CC)(this),this.iHash.update(s),this}digestInto(s){(0,d.CC)(this),(0,d.DO)(s,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto(s),this.oHash.update(s),this.oHash.digestInto(s),this.destroy()}digest(){let s=new Uint8Array(this.oHash.outputLen);return this.digestInto(s),s}_cloneInto(s){s||=Object.create(Object.getPrototypeOf(this),{});let{oHash:c,iHash:O,finished:j,destroyed:$,blockLen:W,outputLen:K}=this;return s.finished=j,s.destroyed=$,s.blockLen=W,s.outputLen=K,s.oHash=c._cloneInto(s.oHash),s.iHash=O._cloneInto(s.iHash),s}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let h=(i,s,c)=>new y(i,s).update(c).digest();h.create=(i,s)=>new y(i,s)},Le.__chunk_64683=(Ue,ie,o)=>{"use strict";o.d(ie,{F:()=>d,x:()=>y});class d extends Error{node;constructor(i){super("no result"),this.node=i}}function y(h){return Object.prototype.hasOwnProperty.call(h,"prototype")}},Le.__chunk_64463=(Ue,ie,o)=>{"use strict";o.d(ie,{B:()=>y});var d=o(38427);function y(h,i){let s=`SHA-${h.slice(-3)}`;switch(h){case"HS256":case"HS384":case"HS512":return{hash:s,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:s,name:"RSA-PSS",saltLength:parseInt(h.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:s,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:s,name:"ECDSA",namedCurve:i.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return{name:h};default:throw new d.T0(`alg ${h} is not supported either by JOSE or your javascript runtime`)}}},Le.__chunk_64354=(Ue,ie,o)=>{"use strict";o.d(ie,{Rv:()=>h,jY:()=>i,n9:()=>y});var d=o(77438);class y extends Error{static[d.i]="DrizzleError";constructor({message:c,cause:O}){super(c),this.name="DrizzleError",this.cause=O}}class h extends Error{constructor(c,O,j){super(`Failed query: ${c}
params: ${O}`),this.query=c,this.params=O,this.cause=j,Error.captureStackTrace(this,h),j&&(this.cause=j)}}class i extends y{static[d.i]="TransactionRollbackError";constructor(){super({message:"Rollback"})}}},Le.__chunk_63440=(Ue,ie,o)=>{"use strict";o.d(ie,{L:()=>j});var d=o(26772),y=o(4816);let h=(0,d.CN)({is:$=>$.kind==="GroupByNode",create:$=>(0,d.CN)({kind:"GroupByNode",items:(0,d.CN)($)}),cloneWithItems:($,W)=>(0,d.CN)({...$,items:(0,d.CN)([...$.items,...W])})});var i=o(74623),s=o(95971);let c=(0,d.CN)({is:$=>$.kind==="HavingNode",create:$=>(0,d.CN)({kind:"HavingNode",having:$}),cloneWithOperation:($,W,K)=>(0,d.CN)({...$,having:W==="And"?i.s.create($.having,K):s.K.create($.having,K)})});var O=o(28227);let j=(0,d.CN)({is:$=>$.kind==="SelectQueryNode",create:$=>(0,d.CN)({kind:"SelectQueryNode",...$&&{with:$}}),createFrom:($,W)=>(0,d.CN)({kind:"SelectQueryNode",from:y.N.create($),...W&&{with:W}}),cloneWithSelections:($,W)=>(0,d.CN)({...$,selections:$.selections?(0,d.CN)([...$.selections,...W]):(0,d.CN)(W)}),cloneWithDistinctOn:($,W)=>(0,d.CN)({...$,distinctOn:$.distinctOn?(0,d.CN)([...$.distinctOn,...W]):(0,d.CN)(W)}),cloneWithFrontModifier:($,W)=>(0,d.CN)({...$,frontModifiers:$.frontModifiers?(0,d.CN)([...$.frontModifiers,W]):(0,d.CN)([W])}),cloneWithOrderByItems:($,W)=>O.L.cloneWithOrderByItems($,W),cloneWithGroupByItems:($,W)=>(0,d.CN)({...$,groupBy:$.groupBy?h.cloneWithItems($.groupBy,W):h.create(W)}),cloneWithLimit:($,W)=>(0,d.CN)({...$,limit:W}),cloneWithOffset:($,W)=>(0,d.CN)({...$,offset:W}),cloneWithFetch:($,W)=>(0,d.CN)({...$,fetch:W}),cloneWithHaving:($,W)=>(0,d.CN)({...$,having:$.having?c.cloneWithOperation($.having,"And",W):c.create(W)}),cloneWithSetOperations:($,W)=>(0,d.CN)({...$,setOperations:$.setOperations?(0,d.CN)([...$.setOperations,...W]):(0,d.CN)([...W])}),cloneWithoutSelections:$=>(0,d.CN)({...$,selections:[]}),cloneWithoutLimit:$=>(0,d.CN)({...$,limit:void 0}),cloneWithoutOffset:$=>(0,d.CN)({...$,offset:void 0}),cloneWithoutOrderBy:$=>O.L.cloneWithoutOrderBy($),cloneWithoutGroupBy:$=>(0,d.CN)({...$,groupBy:void 0})})},Le.__chunk_63328=(Ue,ie,o)=>{"use strict";o.d(ie,{createKyselyAdapter:()=>d.x,kyselyAdapter:()=>i});var d=o(43805),y=o(11305),h=o(1261);let i=(s,c)=>{let O=null,j=K=>({getFieldName:I,schema:p,getDefaultFieldName:_,getDefaultModelName:m,getFieldAttributes:q,getModelName:J})=>{let a=k=>{let N=[],P=[];if(k)for(let[b,z]of Object.entries(k)){let F=p[m(b)]?.fields,[Q,G]=b.includes(".")?b.split("."):[void 0,b];if(F)for(let[X,oe]of(F.id={type:"string"},Object.entries(F)))N.push((0,y.l)`${y.l.ref(`join_${G}`)}.${y.l.ref(oe.fieldName||X)} as ${y.l.ref(`_joined_${G}_${oe.fieldName||X}`)}`),P.push({joinModel:b,joinModelRef:G,fieldName:oe.fieldName||X})}return{allSelectsStr:P,allSelects:N}},V=async(k,N,P,b)=>{let z;if(c?.type==="mysql"){await N.execute();let F=k.id?"id":b.length>0&&b[0]?.field?b[0].field:"id";if(!k.id&&b.length===0)return await K.selectFrom(P).selectAll().orderBy(I({model:P,field:F}),"desc").limit(1).executeTakeFirst();let Q=k[F]||b[0]?.value;return await K.selectFrom(P).selectAll().orderBy(I({model:P,field:F}),"desc").where(I({model:P,field:F}),"=",Q).limit(1).executeTakeFirst()}return c?.type==="mssql"?await N.outputAll("inserted").executeTakeFirst():await N.returningAll().executeTakeFirst()};function C(k,N){if(!N)return{and:null,or:null};let P={and:[],or:[]};return N.forEach(b=>{let{field:z,value:F,operator:Q="=",connector:G="AND"}=b,X=I({model:k,field:z}),oe=ne=>{let we=`${k}.${X}`;return Q.toLowerCase()==="in"?ne(we,"in",Array.isArray(F)?F:[F]):Q.toLowerCase()==="not_in"?ne(we,"not in",Array.isArray(F)?F:[F]):Q==="contains"?ne(we,"like",`%${F}%`):Q==="starts_with"?ne(we,"like",`${F}%`):Q==="ends_with"?ne(we,"like",`%${F}`):ne(we,Q==="eq"?"=":Q==="ne"?"<>":Q==="gt"?">":Q==="gte"?">=":Q==="lt"?"<":Q==="lte"?"<=":Q,F)};G==="OR"?P.or.push(oe):P.and.push(oe)}),{and:P.and.length?P.and:null,or:P.or.length?P.or:null}}function L(k,N,P){if(!N||!k.length)return k;let b=new Map;for(let F of k){let Q={},G={};for(let[ne]of Object.entries(N))G[J(ne)]={};for(let[ne,we]of Object.entries(F)){let Ee=String(ne),$e=!1;for(let{joinModel:v,fieldName:Z,joinModelRef:R}of P)if(Ee===`_joined_${R}_${Z}`){G[J(v)][I({model:v,field:Z})]=we,$e=!0;break}$e||(Q[ne]=we)}let X=Q.id;if(!X)continue;if(!b.has(X)){let ne={...Q};for(let[we,Ee]of Object.entries(N))ne[J(we)]=Ee.relation==="one-to-one"?null:[];b.set(X,ne)}let oe=b.get(X);for(let[ne,we]of Object.entries(N)){let Ee=we.relation==="one-to-one",$e=we.limit??100,v=G[J(ne)],Z=v&&Object.keys(v).length>0&&Object.values(v).some(R=>R!=null);if(Ee)oe[J(ne)]=Z?v:null;else{let R=J(ne);if(Array.isArray(oe[R])&&Z){if(oe[R].length>=$e)continue;let S=I({model:ne,field:"id"}),E=v[S];E?!oe[R].some(A=>A[S]===E)&&oe[R].length<$e&&oe[R].push(v):oe[R].length<$e&&oe[R].push(v)}}}}let z=Array.from(b.values());for(let F of z)for(let[Q,G]of Object.entries(N))if(G.relation!=="one-to-one"){let X=J(Q);if(Array.isArray(F[X])){let oe=G.limit??100;F[X].length>oe&&(F[X]=F[X].slice(0,oe))}}return z}return{create:async({data:k,model:N})=>await V(k,K.insertInto(N).values(k),N,[]),async findOne({model:k,where:N,select:P,join:b}){let{and:z,or:F}=C(k,N),Q=K.selectFrom(we=>{let Ee=we.selectFrom(k);return z&&(Ee=Ee.where($e=>$e.and(z.map(v=>v($e))))),F&&(Ee=Ee.where($e=>$e.or(F.map(v=>v($e))))),Ee.selectAll().as("primary")}).selectAll("primary");if(b)for(let[we,Ee]of Object.entries(b)){let[$e,v]=we.includes(".")?we.split("."):[void 0,we];Q=Q.leftJoin(`${we} as join_${v}`,Z=>Z.onRef(`join_${v}.${Ee.on.to}`,"=",`primary.${Ee.on.from}`))}let{allSelectsStr:G,allSelects:X}=a(b);Q=Q.select(X);let oe=await Q.execute();if(!oe||!Array.isArray(oe)||oe.length===0)return null;let ne=oe[0];return b?L(oe,b,G)[0]:ne},async findMany({model:k,where:N,limit:P,offset:b,sortBy:z,join:F}){let{and:Q,or:G}=C(k,N),X=K.selectFrom(Ee=>{let $e=Ee.selectFrom(k);return c?.type==="mssql"?b!==void 0?(z||($e=$e.orderBy(I({model:k,field:"id"}))),$e=$e.offset(b).fetch(P||100)):P!==void 0&&($e=$e.top(P)):(P!==void 0&&($e=$e.limit(P)),b!==void 0&&($e=$e.offset(b))),z?.field&&($e=$e.orderBy(`${I({model:k,field:z.field})}`,z.direction)),Q&&($e=$e.where(v=>v.and(Q.map(Z=>Z(v))))),G&&($e=$e.where(v=>v.or(G.map(Z=>Z(v))))),$e.selectAll().as("primary")}).selectAll("primary");if(F)for(let[Ee,$e]of Object.entries(F)){let[v,Z]=Ee.includes(".")?Ee.split("."):[void 0,Ee];X=X.leftJoin(`${Ee} as join_${Z}`,R=>R.onRef(`join_${Z}.${$e.on.to}`,"=",`primary.${$e.on.from}`))}let{allSelectsStr:oe,allSelects:ne}=a(F);X=X.select(ne),z?.field&&(X=X.orderBy(`${I({model:k,field:z.field})}`,z.direction));let we=await X.execute();return we?F?L(we,F,oe):we:[]},async update({model:k,where:N,update:P}){let{and:b,or:z}=C(k,N),F=K.updateTable(k).set(P);return b&&(F=F.where(Q=>Q.and(b.map(G=>G(Q))))),z&&(F=F.where(Q=>Q.or(z.map(G=>G(Q))))),await V(P,F,k,N)},async updateMany({model:k,where:N,update:P}){let{and:b,or:z}=C(k,N),F=K.updateTable(k).set(P);b&&(F=F.where(G=>G.and(b.map(X=>X(G))))),z&&(F=F.where(G=>G.or(z.map(X=>X(G)))));let Q=(await F.executeTakeFirst()).numUpdatedRows;return Q>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:Number(Q)},async count({model:k,where:N}){let{and:P,or:b}=C(k,N),z=K.selectFrom(k).select(K.fn.count("id").as("count"));P&&(z=z.where(Q=>Q.and(P.map(G=>G(Q))))),b&&(z=z.where(Q=>Q.or(b.map(G=>G(Q)))));let F=await z.execute();return typeof F[0].count=="number"?F[0].count:typeof F[0].count=="bigint"?Number(F[0].count):parseInt(F[0].count)},async delete({model:k,where:N}){let{and:P,or:b}=C(k,N),z=K.deleteFrom(k);P&&(z=z.where(F=>F.and(P.map(Q=>Q(F))))),b&&(z=z.where(F=>F.or(b.map(Q=>Q(F))))),await z.execute()},async deleteMany({model:k,where:N}){let{and:P,or:b}=C(k,N),z=K.deleteFrom(k);P&&(z=z.where(Q=>Q.and(P.map(G=>G(Q))))),b&&(z=z.where(Q=>Q.or(b.map(G=>G(Q)))));let F=(await z.executeTakeFirst()).numDeletedRows;return F>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:Number(F)},options:c}},$=null;$={config:{adapterId:"kysely",adapterName:"Kysely Adapter",usePlural:c?.usePlural,debugLogs:c?.debugLogs,supportsBooleans:!!(c?.type!=="sqlite"&&c?.type!=="mssql"&&c?.type!=="mysql"&&c?.type),supportsDates:!!(c?.type!=="sqlite"&&c?.type!=="mssql"&&c?.type),supportsJSON:c?.type==="postgres",supportsArrays:!1,supportsUUIDs:c?.type==="postgres",transaction:!!c?.transaction&&(K=>s.transaction().execute(I=>K((0,h.II)({config:$.config,adapter:j(I)})(O))))},adapter:j(s)};let W=(0,h.II)($);return K=>(O=K,W(K))}},Le.__chunk_62049=(Ue,ie,o)=>{"use strict";o.d(ie,{R:()=>s});var d=o(26772),y=o(83754),h=o(56899);let i=(0,d.CN)([]);class s{#e;constructor(O=i){this.#e=O}get plugins(){return this.#e}transformQuery(O,j){for(let $ of this.#e){let W=$.transformQuery({node:O,queryId:j});if(W.kind===O.kind)O=W;else throw Error(`KyselyPlugin.transformQuery must return a node of the same kind that was given to it. The plugin was given a ${O.kind} but it returned a ${W.kind}`)}return O}async executeQuery(O){return await this.provideConnection(async j=>{let $=await j.executeQuery(O);return"numUpdatedOrDeletedRows"in $&&(0,h.u)("kysely:warning: outdated driver/plugin detected! `QueryResult.numUpdatedOrDeletedRows` has been replaced with `QueryResult.numAffectedRows`."),await this.#t($,O.queryId)})}async*stream(O,j){let{connection:$,release:W}=await(0,y.G)(this);try{for await(let K of $.streamQuery(O,j))yield await this.#t(K,O.queryId)}finally{W()}}async#t(O,j){for(let $ of this.#e)O=await $.transformResult({result:O,queryId:j});return O}}},Le.__chunk_61477=(Ue,ie,o)=>{"use strict";o.d(ie,{OU:()=>O});var d=o(30145),y=o(26772),h=o(37852),i=o(40168),s=o(34395),c=o(89709);class O{#e;constructor(I){this.#e=(0,y.CN)(I)}when(...I){return new j({...this.#e,node:h.P.cloneWithWhen(this.#e.node,i.t.create((0,s.GB)(I)))})}}class j{#e;constructor(I){this.#e=(0,y.CN)(I)}then(I){return new $({...this.#e,node:h.P.cloneWithThen(this.#e.node,(0,c.qH)(I)?(0,c.dJ)(I):(0,c.$s)(I))})}}class ${#e;constructor(I){this.#e=(0,y.CN)(I)}when(...I){return new j({...this.#e,node:h.P.cloneWithWhen(this.#e.node,i.t.create((0,s.GB)(I)))})}else(I){return new W({...this.#e,node:h.P.cloneWith(this.#e.node,{else:(0,c.qH)(I)?(0,c.dJ)(I):(0,c.$s)(I)})})}end(){return new d.Is(h.P.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new d.Is(h.P.cloneWith(this.#e.node,{isStatement:!0}))}}class W{#e;constructor(I){this.#e=(0,y.CN)(I)}end(){return new d.Is(h.P.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new d.Is(h.P.cloneWith(this.#e.node,{isStatement:!0}))}}},Le.__chunk_60626=(Ue,ie,o)=>{"use strict";o.d(ie,{e:()=>s});var d=o(26772),y=o(4816),h=o(30756),i=o(28227);let s=(0,d.CN)({is:c=>c.kind==="DeleteQueryNode",create:(c,O)=>(0,d.CN)({kind:"DeleteQueryNode",from:y.N.create(c),...O&&{with:O}}),cloneWithOrderByItems:(c,O)=>i.L.cloneWithOrderByItems(c,O),cloneWithoutOrderBy:c=>i.L.cloneWithoutOrderBy(c),cloneWithLimit:(c,O)=>(0,d.CN)({...c,limit:O}),cloneWithoutLimit:c=>(0,d.CN)({...c,limit:void 0}),cloneWithUsing:(c,O)=>(0,d.CN)({...c,using:c.using!==void 0?h.f.cloneWithTables(c.using,O):h.f.create(O)})})},Le.__chunk_59204=(Ue,ie,o)=>{"use strict";o.d(ie,{H:()=>h});var d=o(26772),y=o(3580);let h=(0,d.CN)({is:i=>i.kind==="TableNode",create:i=>(0,d.CN)({kind:"TableNode",table:y.y.create(i)}),createWithSchema:(i,s)=>(0,d.CN)({kind:"TableNode",table:y.y.createWithSchema(i,s)})})},Le.__chunk_58780=(Ue,ie,o)=>{"use strict";o.d(ie,{Og:()=>s});var d=o(25527),y=o(55337),h=o(38427),i=o(88691);async function s(c,O,j){let $;if(!(0,i.G)(c))throw TypeError("JWK must be an object");switch(O??=c.alg,$??=j?.extractable??c.ext,c.kty){case"oct":if(typeof c.k!="string"||!c.k)throw TypeError('missing "k" (Key Value) Parameter value');return(0,d.D)(c.k);case"RSA":if("oth"in c&&c.oth!==void 0)throw new h.T0('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');return(0,y.x)({...c,alg:O,ext:$});case"AKP":if(typeof c.alg!="string"||!c.alg)throw TypeError('missing "alg" (Algorithm) Parameter value');if(O!==void 0&&O!==c.alg)throw TypeError("JWK alg and alg option value mismatch");return(0,y.x)({...c,ext:$});case"EC":case"OKP":return(0,y.x)({...c,alg:O,ext:$});default:throw new h.T0('Unsupported "kty" (Key Type) Parameter value')}}},Le.__chunk_58772=(Ue,ie,o)=>{"use strict";o.d(ie,{Th:()=>h,h1:()=>i});var d=o(77438);class y{static[d.i]="Cache"}class h extends y{strategy(){return"all"}static[d.i]="NoopCache";async get(c){}async put(c,O,j,$){}async onMutate(c){}}async function i(s,c){let O=`${s}-${JSON.stringify(c)}`,j=new TextEncoder().encode(O);return[...new Uint8Array(await crypto.subtle.digest("SHA-256",j))].map($=>$.toString(16).padStart(2,"0")).join("")}},Le.__chunk_58571=(Ue,ie,o)=>{"use strict";o.d(ie,{A:()=>W,E:()=>j});var d=o(43805),y=o(540),h=o(48157),i=o(68113),s=o(11305),c=o(1261);let O={postgres:{string:["character varying","varchar","text","uuid"],number:["int4","integer","bigint","smallint","numeric","real","double precision"],boolean:["bool","boolean"],date:["timestamptz","timestamp","date"],json:["json","jsonb"]},mysql:{string:["varchar","text","uuid"],number:["integer","int","bigint","smallint","decimal","float","double"],boolean:["boolean","tinyint"],date:["timestamp","datetime","date"],json:["json"]},sqlite:{string:["TEXT"],number:["INTEGER","REAL"],boolean:["INTEGER","BOOLEAN"],date:["DATE","INTEGER"],json:["TEXT"]},mssql:{string:["varchar","nvarchar","uniqueidentifier"],number:["int","bigint","smallint","decimal","float","double"],boolean:["bit","smallint"],date:["datetime2","date","datetime"],json:["varchar","nvarchar"]}};function j(K,I,p){if(I==="string[]"||I==="number[]")return K.toLowerCase().includes("json");let _=O[p];return(Array.isArray(I)?_.string.map(m=>m.toLowerCase()):_[I].map(m=>m.toLowerCase())).includes(K.toLowerCase().split("(")[0].trim())}async function $(K){try{let I=await(0,s.l)`SHOW search_path`.execute(K);if(I.rows[0]?.search_path)return I.rows[0].search_path.split(",").map(p=>p.trim()).map(p=>p.replace(/^["']|["']$/g,"")).filter(p=>!p.startsWith("$"))[0]||"public"}catch{}return"public"}async function W(K){let I=(0,y._)(K),p=(0,i.h)(K.logger),{kysely:_,databaseType:m}=await(0,d.x)(K);m||(p.warn("Could not determine database type, defaulting to sqlite. Please provide a type in the database options to avoid this."),m="sqlite"),_||(p.error("Only kysely adapter is supported for migrations. You can use `generate` command to generate the schema, if you're using a different adapter."),process.exit(1));let q="public";if(m==="postgres"){q=await $(_),p.debug(`PostgreSQL migration: Using schema '${q}' (from search_path)`);try{(await(0,s.l)`
				SELECT schema_name 
				FROM information_schema.schemata 
				WHERE schema_name = ${q}
			`.execute(_)).rows[0]||p.warn(`Schema '${q}' does not exist. Tables will be inspected from available schemas. Consider creating the schema first or checking your database configuration.`)}catch(G){p.debug(`Could not verify schema existence: ${G instanceof Error?G.message:String(G)}`)}}let J=await _.introspection.getTables(),a=J;if(m==="postgres")try{let G=await(0,s.l)`
				SELECT table_name 
				FROM information_schema.tables 
				WHERE table_schema = ${q}
				AND table_type = 'BASE TABLE'
			`.execute(_),X=new Set(G.rows.map(oe=>oe.table_name));a=J.filter(oe=>oe.schema===q&&X.has(oe.name)),p.debug(`Found ${a.length} table(s) in schema '${q}': ${a.map(oe=>oe.name).join(", ")||"(none)"}`)}catch(G){p.warn(`Could not filter tables by schema. Using all discovered tables. Error: ${G instanceof Error?G.message:String(G)}`)}let V=[],C=[];for(let[G,X]of Object.entries(I)){let oe=a.find(we=>we.name===G);if(!oe){let we=V.findIndex(v=>v.table===G),Ee={table:G,fields:X.fields,order:X.order||1/0},$e=V.findIndex(v=>(v.order||1/0)>Ee.order);$e===-1?we===-1?V.push(Ee):V[we].fields={...V[we].fields,...X.fields}:V.splice($e,0,Ee);continue}let ne={};for(let[we,Ee]of Object.entries(X.fields)){let $e=oe.columns.find(v=>v.name===we);if(!$e){ne[we]=Ee;continue}!j($e.dataType,Ee.type,m)&&p.warn(`Field ${we} in table ${G} has a different type in the database. Expected ${Ee.type} but got ${$e.dataType}.`)}Object.keys(ne).length>0&&C.push({table:G,fields:ne,order:X.order||1/0})}let L=[],k=K.advanced?.database?.generateId==="uuid",N=K.advanced?.database?.useNumberId||K.advanced?.database?.generateId==="serial";function P(G,X){let oe=G.type,ne=m||"sqlite",we={string:{sqlite:"text",postgres:"text",mysql:G.unique?"varchar(255)":G.references?"varchar(36)":G.sortable||G.index?"varchar(255)":"text",mssql:G.unique||G.sortable?"varchar(255)":G.references?"varchar(36)":"varchar(8000)"},boolean:{sqlite:"integer",postgres:"boolean",mysql:"boolean",mssql:"smallint"},number:{sqlite:G.bigint?"bigint":"integer",postgres:G.bigint?"bigint":"integer",mysql:G.bigint?"bigint":"integer",mssql:G.bigint?"bigint":"integer"},date:{sqlite:"date",postgres:"timestamptz",mysql:"timestamp(3)",mssql:(0,s.l)`datetime2(3)`},json:{sqlite:"text",postgres:"jsonb",mysql:"json",mssql:"varchar(8000)"},id:{postgres:N?(0,s.l)`integer GENERATED BY DEFAULT AS IDENTITY`:k?"uuid":"text",mysql:N?"integer":"varchar(36)",mssql:N?"integer":"varchar(36)",sqlite:N?"integer":"text"},foreignKeyId:{postgres:N?"integer":k?"uuid":"text",mysql:N?"integer":"varchar(36)",mssql:N?"integer":"varchar(36)",sqlite:N?"integer":"text"},"string[]":{sqlite:"text",postgres:"jsonb",mysql:"json",mssql:"varchar(8000)"},"number[]":{sqlite:"text",postgres:"jsonb",mysql:"json",mssql:"varchar(8000)"}};if(X==="id"||G.references?.field==="id")return X==="id"?we.id[ne]:we.foreignKeyId[ne];if(Array.isArray(oe))return"text";if(!(oe in we))throw Error(`Unsupported field type '${String(oe)}' for field '${X}'. Allowed types are: string, number, boolean, date, string[], number[]. If you need to store structured data, store it as a JSON string (type: "string") or split it into primitive fields. See https://better-auth.com/docs/advanced/schema#additional-fields`);return we[oe][ne]}let b=(0,c.jt)({schema:(0,h.getAuthTables)(K),usePlural:!1}),z=(0,c.yk)({schema:(0,h.getAuthTables)(K),usePlural:!1});function F(G,X){try{return`${b(G)}.${z({model:G,field:X})}`}catch{return`${G}.${X}`}}if(C.length)for(let G of C)for(let[X,oe]of Object.entries(G.fields)){let ne=P(oe,X),we=_.schema.alterTable(G.table);if(oe.index){let $e=_.schema.alterTable(G.table).addIndex(`${G.table}_${X}_idx`);L.push($e)}let Ee=we.addColumn(X,ne,$e=>($e=oe.required!==!1?$e.notNull():$e,oe.references&&($e=$e.references(F(oe.references.model,oe.references.field)).onDelete(oe.references.onDelete||"cascade")),oe.unique&&($e=$e.unique()),oe.type==="date"&&typeof oe.defaultValue=="function"&&(m==="postgres"||m==="mysql"||m==="mssql")&&($e=m==="mysql"?$e.defaultTo((0,s.l)`CURRENT_TIMESTAMP(3)`):$e.defaultTo((0,s.l)`CURRENT_TIMESTAMP`)),$e));L.push(Ee)}let Q=[];if(K.advanced?.database?.useNumberId&&p.warn("`useNumberId` is deprecated. Please use `generateId` with `serial` instead."),V.length)for(let G of V){let X=P({type:N?"number":"string"},"id"),oe=_.schema.createTable(G.table).addColumn("id",X,ne=>N?m==="postgres"||m==="sqlite"?ne.primaryKey().notNull():m==="mssql"?ne.identity().primaryKey().notNull():ne.autoIncrement().primaryKey().notNull():k&&m==="postgres"?ne.primaryKey().defaultTo((0,s.l)`pg_catalog.gen_random_uuid()`).notNull():ne.primaryKey().notNull());for(let[ne,we]of Object.entries(G.fields)){let Ee=P(we,ne);if(oe=oe.addColumn(ne,Ee,$e=>($e=we.required!==!1?$e.notNull():$e,we.references&&($e=$e.references(F(we.references.model,we.references.field)).onDelete(we.references.onDelete||"cascade")),we.unique&&($e=$e.unique()),we.type==="date"&&typeof we.defaultValue=="function"&&(m==="postgres"||m==="mysql"||m==="mssql")&&($e=m==="mysql"?$e.defaultTo((0,s.l)`CURRENT_TIMESTAMP(3)`):$e.defaultTo((0,s.l)`CURRENT_TIMESTAMP`)),$e)),we.index){let $e=_.schema.createIndex(`${G.table}_${ne}_${we.unique?"uidx":"idx"}`).on(G.table).columns([ne]);Q.push(we.unique?$e.unique():$e)}}L.push(oe)}if(Q.length)for(let G of Q)L.push(G);return{toBeCreated:V,toBeAdded:C,runMigrations:async function(){for(let G of L)await G.execute()},compileMigrations:async function(){return L.map(G=>G.compile().sql).join(`;

`)+";"}}}},Le.__chunk_58090=(Ue,ie,o)=>{"use strict";o.d(ie,{n:()=>bt});var d=o(48582),y=o(82057),h=o(66142),i=o(11528),s=o(48300),c=o(26772),O=o(89709);let j=(0,c.CN)({is:qe=>qe.kind==="ValuesNode",create:qe=>(0,c.CN)({kind:"ValuesNode",values:(0,c.CN)(qe)})});var $=o(80282);let W=(0,c.CN)({is:qe=>qe.kind==="DefaultInsertValueNode",create:()=>(0,c.CN)({kind:"DefaultInsertValueNode"})});var K=o(55096);function I(qe){let re=(0,c.Tn)(qe)?qe((0,K.A)()):qe;return function(We){let ut=function(kt){let Ct=new Map;for(let tt of kt)for(let Ot of Object.keys(tt))Ct.has(Ot)||tt[Ot]===void 0||Ct.set(Ot,Ct.size);return Ct}(We);return[(0,c.CN)([...ut.keys()].map(h.Z.create)),j.create(We.map(kt=>function(Ct,tt){let Ot=Object.keys(Ct),Wt=Array.from({length:tt.size}),yt=!1,ct=Ot.length;for(let vt of Ot){let Ut=tt.get(vt);if((0,c.b0)(Ut)){ct--;continue}let nr=Ct[vt];((0,c.b0)(nr)||(0,$.SS)(nr))&&(yt=!0),Wt[Ut]=nr}if(ct<tt.size||yt){let vt=W.create();return s.s.create(Wt.map(Ut=>(0,c.b0)(Ut)?vt:(0,O.$s)(Ut)))}return i.h.create(Wt)}(kt,ut)))]}((0,c.MH)(re)?re:(0,c.CN)([re]))}var p=o(88780),_=o(28227);let m=(0,c.CN)({is:qe=>qe.kind==="ColumnUpdateNode",create:(qe,re)=>(0,c.CN)({kind:"ColumnUpdateNode",column:qe,value:re})});var q=o(66557);function J(qe){return Object.entries((0,c.Tn)(qe)?qe((0,K.A)()):qe).filter(([re,We])=>We!==void 0).map(([re,We])=>m.create(h.Z.create(re),(0,O.$s)(We)))}let a=(0,c.CN)({is:qe=>qe.kind==="OnDuplicateKeyNode",create:qe=>(0,c.CN)({kind:"OnDuplicateKeyNode",updates:qe})});class V{insertId;numInsertedOrUpdatedRows;constructor(re,We){this.insertId=re,this.numInsertedOrUpdatedRows=We}}var C=o(64683),L=o(9789),k=o(19989);let N=(0,c.CN)({is:qe=>qe.kind==="OnConflictNode",create:()=>(0,c.CN)({kind:"OnConflictNode"}),cloneWith:(qe,re)=>(0,c.CN)({...qe,...re}),cloneWithIndexWhere:(qe,re)=>(0,c.CN)({...qe,indexWhere:qe.indexWhere?k.o.cloneWithOperation(qe.indexWhere,"And",re):k.o.create(re)}),cloneWithIndexOrWhere:(qe,re)=>(0,c.CN)({...qe,indexWhere:qe.indexWhere?k.o.cloneWithOperation(qe.indexWhere,"Or",re):k.o.create(re)}),cloneWithUpdateWhere:(qe,re)=>(0,c.CN)({...qe,updateWhere:qe.updateWhere?k.o.cloneWithOperation(qe.updateWhere,"And",re):k.o.create(re)}),cloneWithUpdateOrWhere:(qe,re)=>(0,c.CN)({...qe,updateWhere:qe.updateWhere?k.o.cloneWithOperation(qe.updateWhere,"Or",re):k.o.create(re)}),cloneWithoutIndexWhere:qe=>(0,c.CN)({...qe,indexWhere:void 0}),cloneWithoutUpdateWhere:qe=>(0,c.CN)({...qe,updateWhere:void 0})});var P=o(34395);class b{#e;constructor(re){this.#e=(0,c.CN)(re)}column(re){let We=h.Z.create(re);return new b({...this.#e,onConflictNode:N.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?(0,c.CN)([...this.#e.onConflictNode.columns,We]):(0,c.CN)([We])})})}columns(re){let We=re.map(h.Z.create);return new b({...this.#e,onConflictNode:N.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?(0,c.CN)([...this.#e.onConflictNode.columns,...We]):(0,c.CN)(We)})})}constraint(re){return new b({...this.#e,onConflictNode:N.cloneWith(this.#e.onConflictNode,{constraint:L.O.create(re)})})}expression(re){return new b({...this.#e,onConflictNode:N.cloneWith(this.#e.onConflictNode,{indexExpression:re.toOperationNode()})})}where(...re){return new b({...this.#e,onConflictNode:N.cloneWithIndexWhere(this.#e.onConflictNode,(0,P.GB)(re))})}whereRef(re,We,ut){return new b({...this.#e,onConflictNode:N.cloneWithIndexWhere(this.#e.onConflictNode,(0,P.vC)(re,We,ut))})}clearWhere(){return new b({...this.#e,onConflictNode:N.cloneWithoutIndexWhere(this.#e.onConflictNode)})}doNothing(){return new z({...this.#e,onConflictNode:N.cloneWith(this.#e.onConflictNode,{doNothing:!0})})}doUpdateSet(re){return new F({...this.#e,onConflictNode:N.cloneWith(this.#e.onConflictNode,{updates:J(re)})})}$call(re){return re(this)}}class z{#e;constructor(re){this.#e=(0,c.CN)(re)}toOperationNode(){return this.#e.onConflictNode}}class F{#e;constructor(re){this.#e=(0,c.CN)(re)}where(...re){return new F({...this.#e,onConflictNode:N.cloneWithUpdateWhere(this.#e.onConflictNode,(0,P.GB)(re))})}whereRef(re,We,ut){return new F({...this.#e,onConflictNode:N.cloneWithUpdateWhere(this.#e.onConflictNode,(0,P.vC)(re,We,ut))})}clearWhere(){return new F({...this.#e,onConflictNode:N.cloneWithoutUpdateWhere(this.#e.onConflictNode)})}$call(re){return re(this)}toOperationNode(){return this.#e.onConflictNode}}var Q=o(98686);let G=(0,c.CN)({is:qe=>qe.kind==="OrActionNode",create:qe=>(0,c.CN)({kind:"OrActionNode",action:qe})});class X{#e;constructor(re){this.#e=(0,c.CN)(re)}values(re){let[We,ut]=I(re);return new X({...this.#e,queryNode:p.o.cloneWith(this.#e.queryNode,{columns:We,values:ut})})}columns(re){return new X({...this.#e,queryNode:p.o.cloneWith(this.#e.queryNode,{columns:(0,c.CN)(re.map(h.Z.create))})})}expression(re){return new X({...this.#e,queryNode:p.o.cloneWith(this.#e.queryNode,{values:(0,$.YK)(re)})})}defaultValues(){return new X({...this.#e,queryNode:p.o.cloneWith(this.#e.queryNode,{defaultValues:!0})})}modifyEnd(re){return new X({...this.#e,queryNode:_.L.cloneWithEndModifier(this.#e.queryNode,re.toOperationNode())})}ignore(){return new X({...this.#e,queryNode:p.o.cloneWith(this.#e.queryNode,{orAction:G.create("ignore")})})}orIgnore(){return new X({...this.#e,queryNode:p.o.cloneWith(this.#e.queryNode,{orAction:G.create("ignore")})})}orAbort(){return new X({...this.#e,queryNode:p.o.cloneWith(this.#e.queryNode,{orAction:G.create("abort")})})}orFail(){return new X({...this.#e,queryNode:p.o.cloneWith(this.#e.queryNode,{orAction:G.create("fail")})})}orReplace(){return new X({...this.#e,queryNode:p.o.cloneWith(this.#e.queryNode,{orAction:G.create("replace")})})}orRollback(){return new X({...this.#e,queryNode:p.o.cloneWith(this.#e.queryNode,{orAction:G.create("rollback")})})}top(re,We){return new X({...this.#e,queryNode:_.L.cloneWithTop(this.#e.queryNode,(0,Q.f)(re,We))})}onConflict(re){return new X({...this.#e,queryNode:p.o.cloneWith(this.#e.queryNode,{onConflict:re(new b({onConflictNode:N.create()})).toOperationNode()})})}onDuplicateKeyUpdate(re){return new X({...this.#e,queryNode:p.o.cloneWith(this.#e.queryNode,{onDuplicateKey:a.create(J(re))})})}returning(re){return new X({...this.#e,queryNode:_.L.cloneWithReturning(this.#e.queryNode,(0,y.G)(re))})}returningAll(){return new X({...this.#e,queryNode:_.L.cloneWithReturning(this.#e.queryNode,(0,y.J)())})}output(re){return new X({...this.#e,queryNode:_.L.cloneWithOutput(this.#e.queryNode,(0,y.G)(re))})}outputAll(re){return new X({...this.#e,queryNode:_.L.cloneWithOutput(this.#e.queryNode,(0,y.J)(re))})}clearReturning(){return new X({...this.#e,queryNode:_.L.cloneWithoutReturning(this.#e.queryNode)})}$call(re){return re(this)}$if(re,We){return re?We(this):new X({...this.#e})}$castTo(){return new X(this.#e)}$narrowType(){return new X(this.#e)}$assertType(){return new X(this.#e)}withPlugin(re){return new X({...this.#e,executor:this.#e.executor.withPlugin(re)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let re=this.compile(),We=await this.#e.executor.executeQuery(re),{adapter:ut}=this.#e.executor,kt=re.query;return kt.returning&&ut.supportsReturning||kt.output&&ut.supportsOutput?We.rows:[new V(We.insertId,We.numAffectedRows??BigInt(0))]}async executeTakeFirst(){let[re]=await this.execute();return re}async executeTakeFirstOrThrow(re=C.F){let We=await this.executeTakeFirst();if(We===void 0)throw(0,C.x)(re)?new re(this.toOperationNode()):re(this.toOperationNode());return We}async*stream(re=100){let We=this.compile();for await(let ut of this.#e.executor.stream(We,re))yield*ut.rows}async explain(re,We){return await new X({...this.#e,queryNode:_.L.cloneWithExplain(this.#e.queryNode,re,We)}).execute()}}var oe=o(93048),ne=o(7286);class we{numDeletedRows;constructor(re){this.numDeletedRows=re}}var Ee=o(60626),$e=o(7757),v=o(19598);class Z{#e;constructor(re){this.#e=(0,c.CN)(re)}where(...re){return new Z({...this.#e,queryNode:_.L.cloneWithWhere(this.#e.queryNode,(0,P.GB)(re))})}whereRef(re,We,ut){return new Z({...this.#e,queryNode:_.L.cloneWithWhere(this.#e.queryNode,(0,P.vC)(re,We,ut))})}clearWhere(){return new Z({...this.#e,queryNode:_.L.cloneWithoutWhere(this.#e.queryNode)})}top(re,We){return new Z({...this.#e,queryNode:_.L.cloneWithTop(this.#e.queryNode,(0,Q.f)(re,We))})}using(re){return new Z({...this.#e,queryNode:Ee.e.cloneWithUsing(this.#e.queryNode,(0,ne.JB)(re))})}innerJoin(...re){return this.#t("InnerJoin",re)}leftJoin(...re){return this.#t("LeftJoin",re)}rightJoin(...re){return this.#t("RightJoin",re)}fullJoin(...re){return this.#t("FullJoin",re)}#t(re,We){return new Z({...this.#e,queryNode:_.L.cloneWithJoin(this.#e.queryNode,(0,oe.a)(re,We))})}returning(re){return new Z({...this.#e,queryNode:_.L.cloneWithReturning(this.#e.queryNode,(0,y.G)(re))})}returningAll(re){return new Z({...this.#e,queryNode:_.L.cloneWithReturning(this.#e.queryNode,(0,y.J)(re))})}output(re){return new Z({...this.#e,queryNode:_.L.cloneWithOutput(this.#e.queryNode,(0,y.G)(re))})}outputAll(re){return new Z({...this.#e,queryNode:_.L.cloneWithOutput(this.#e.queryNode,(0,y.J)(re))})}clearReturning(){return new Z({...this.#e,queryNode:_.L.cloneWithoutReturning(this.#e.queryNode)})}clearLimit(){return new Z({...this.#e,queryNode:Ee.e.cloneWithoutLimit(this.#e.queryNode)})}orderBy(...re){return new Z({...this.#e,queryNode:_.L.cloneWithOrderByItems(this.#e.queryNode,(0,v.xk)(re))})}clearOrderBy(){return new Z({...this.#e,queryNode:_.L.cloneWithoutOrderBy(this.#e.queryNode)})}limit(re){return new Z({...this.#e,queryNode:Ee.e.cloneWithLimit(this.#e.queryNode,$e.a.create((0,O.$s)(re)))})}modifyEnd(re){return new Z({...this.#e,queryNode:_.L.cloneWithEndModifier(this.#e.queryNode,re.toOperationNode())})}$call(re){return re(this)}$if(re,We){return re?We(this):new Z({...this.#e})}$castTo(){return new Z(this.#e)}$narrowType(){return new Z(this.#e)}$assertType(){return new Z(this.#e)}withPlugin(re){return new Z({...this.#e,executor:this.#e.executor.withPlugin(re)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let re=this.compile(),We=await this.#e.executor.executeQuery(re),{adapter:ut}=this.#e.executor,kt=re.query;return kt.returning&&ut.supportsReturning||kt.output&&ut.supportsOutput?We.rows:[new we(We.numAffectedRows??BigInt(0))]}async executeTakeFirst(){let[re]=await this.execute();return re}async executeTakeFirstOrThrow(re=C.F){let We=await this.executeTakeFirst();if(We===void 0)throw(0,C.x)(re)?new re(this.toOperationNode()):re(this.toOperationNode());return We}async*stream(re=100){let We=this.compile();for await(let ut of this.#e.executor.stream(We,re))yield*ut.rows}async explain(re,We){return await new Z({...this.#e,queryNode:_.L.cloneWithExplain(this.#e.queryNode,re,We)}).execute()}}var R=o(40640);class S{numUpdatedRows;numChangedRows;constructor(re,We){this.numUpdatedRows=re,this.numChangedRows=We}}class E{#e;constructor(re){this.#e=(0,c.CN)(re)}where(...re){return new E({...this.#e,queryNode:_.L.cloneWithWhere(this.#e.queryNode,(0,P.GB)(re))})}whereRef(re,We,ut){return new E({...this.#e,queryNode:_.L.cloneWithWhere(this.#e.queryNode,(0,P.vC)(re,We,ut))})}clearWhere(){return new E({...this.#e,queryNode:_.L.cloneWithoutWhere(this.#e.queryNode)})}top(re,We){return new E({...this.#e,queryNode:_.L.cloneWithTop(this.#e.queryNode,(0,Q.f)(re,We))})}from(re){return new E({...this.#e,queryNode:R.U.cloneWithFromItems(this.#e.queryNode,(0,ne.JB)(re))})}innerJoin(...re){return this.#t("InnerJoin",re)}leftJoin(...re){return this.#t("LeftJoin",re)}rightJoin(...re){return this.#t("RightJoin",re)}fullJoin(...re){return this.#t("FullJoin",re)}#t(re,We){return new E({...this.#e,queryNode:_.L.cloneWithJoin(this.#e.queryNode,(0,oe.a)(re,We))})}orderBy(...re){return new E({...this.#e,queryNode:_.L.cloneWithOrderByItems(this.#e.queryNode,(0,v.xk)(re))})}clearOrderBy(){return new E({...this.#e,queryNode:_.L.cloneWithoutOrderBy(this.#e.queryNode)})}limit(re){return new E({...this.#e,queryNode:R.U.cloneWithLimit(this.#e.queryNode,$e.a.create((0,O.$s)(re)))})}set(...re){return new E({...this.#e,queryNode:R.U.cloneWithUpdates(this.#e.queryNode,function(...We){return We.length===2?[m.create((0,q.$O)(We[0]),(0,O.$s)(We[1]))]:J(We[0])}(...re))})}returning(re){return new E({...this.#e,queryNode:_.L.cloneWithReturning(this.#e.queryNode,(0,y.G)(re))})}returningAll(re){return new E({...this.#e,queryNode:_.L.cloneWithReturning(this.#e.queryNode,(0,y.J)(re))})}output(re){return new E({...this.#e,queryNode:_.L.cloneWithOutput(this.#e.queryNode,(0,y.G)(re))})}outputAll(re){return new E({...this.#e,queryNode:_.L.cloneWithOutput(this.#e.queryNode,(0,y.J)(re))})}modifyEnd(re){return new E({...this.#e,queryNode:_.L.cloneWithEndModifier(this.#e.queryNode,re.toOperationNode())})}clearReturning(){return new E({...this.#e,queryNode:_.L.cloneWithoutReturning(this.#e.queryNode)})}$call(re){return re(this)}$if(re,We){return re?We(this):new E({...this.#e})}$castTo(){return new E(this.#e)}$narrowType(){return new E(this.#e)}$assertType(){return new E(this.#e)}withPlugin(re){return new E({...this.#e,executor:this.#e.executor.withPlugin(re)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let re=this.compile(),We=await this.#e.executor.executeQuery(re),{adapter:ut}=this.#e.executor,kt=re.query;return kt.returning&&ut.supportsReturning||kt.output&&ut.supportsOutput?We.rows:[new S(We.numAffectedRows??BigInt(0),We.numChangedRows)]}async executeTakeFirst(){let[re]=await this.execute();return re}async executeTakeFirstOrThrow(re=C.F){let We=await this.executeTakeFirst();if(We===void 0)throw(0,C.x)(re)?new re(this.toOperationNode()):re(this.toOperationNode());return We}async*stream(re=100){let We=this.compile();for await(let ut of this.#e.executor.stream(We,re))yield*ut.rows}async explain(re,We){return await new E({...this.#e,queryNode:_.L.cloneWithExplain(this.#e.queryNode,re,We)}).execute()}}var A=o(63440),U=o(59204);let te=(0,c.CN)({is:qe=>qe.kind==="CommonTableExpressionNameNode",create:(qe,re)=>(0,c.CN)({kind:"CommonTableExpressionNameNode",table:U.H.create(qe),columns:re?(0,c.CN)(re.map(h.Z.create)):void 0})});var Y=o(39523);let D=(0,c.CN)({is:qe=>qe.kind==="CommonTableExpressionNode",create:(qe,re)=>(0,c.CN)({kind:"CommonTableExpressionNode",name:qe,expression:re}),cloneWith:(qe,re)=>(0,c.CN)({...qe,...re})});class ee{#e;constructor(re){this.#e=(0,c.CN)(re)}materialized(){return new ee({...this.#e,node:D.cloneWith(this.#e.node,{materialized:!0})})}notMaterialized(){return new ee({...this.#e,node:D.cloneWith(this.#e.node,{materialized:!1})})}toOperationNode(){return this.#e.node}}function le(qe,re){var We;let ut=re((0,Y.bl)()).toOperationNode();return(0,c.Tn)(qe)?qe((We=ut,kt=>new ee({node:D.create(se(kt),We)}))).toOperationNode():D.create(se(qe),ut)}function se(qe){if(!qe.includes("("))return te.create(qe);{let re=qe.split(/[\(\)]/),We=re[0],ut=re[1].split(",").map(kt=>kt.trim());return te.create(We,ut)}}let ce=(0,c.CN)({is:qe=>qe.kind==="WithNode",create:(qe,re)=>(0,c.CN)({kind:"WithNode",expressions:(0,c.CN)([qe]),...re}),cloneWithExpression:(qe,re)=>(0,c.CN)({...qe,expressions:(0,c.CN)([...qe.expressions,re])})});var me=o(30797),H=o(21430),ue=o(86439);let x=(0,c.CN)({is:qe=>qe.kind==="MatchedNode",create:(qe,re=!1)=>(0,c.CN)({kind:"MatchedNode",not:qe,bySource:re})});var fe=o(35889),ge=o(2170),Se=o(40168);function Re(qe,re,We){return Se.t.create((0,P.KN)([x.create(!qe.isMatched,qe.bySource),...re&&re.length>0?[re.length===3&&We?(0,P.vC)(re[0],re[1],re[2]):(0,P.GB)(re)]:[]],"and",!1))}function ae(qe){return(0,c.Kg)(qe)?ge.z.create([qe],[]):(0,fe.N)(qe)?qe.toOperationNode():qe}var Ae=o(8224);class lt{numChangedRows;constructor(re){this.numChangedRows=re}}class Je{#e;constructor(re){this.#e=(0,c.CN)(re)}modifyEnd(re){return new Je({...this.#e,queryNode:_.L.cloneWithEndModifier(this.#e.queryNode,re.toOperationNode())})}top(re,We){return new Je({...this.#e,queryNode:_.L.cloneWithTop(this.#e.queryNode,(0,Q.f)(re,We))})}using(...re){return new rt({...this.#e,queryNode:ue.r.cloneWithUsing(this.#e.queryNode,(0,oe.a)("Using",re))})}returning(re){return new Je({...this.#e,queryNode:_.L.cloneWithReturning(this.#e.queryNode,(0,y.G)(re))})}returningAll(re){return new Je({...this.#e,queryNode:_.L.cloneWithReturning(this.#e.queryNode,(0,y.J)(re))})}output(re){return new Je({...this.#e,queryNode:_.L.cloneWithOutput(this.#e.queryNode,(0,y.G)(re))})}outputAll(re){return new Je({...this.#e,queryNode:_.L.cloneWithOutput(this.#e.queryNode,(0,y.J)(re))})}}class rt{#e;constructor(re){this.#e=(0,c.CN)(re)}modifyEnd(re){return new rt({...this.#e,queryNode:_.L.cloneWithEndModifier(this.#e.queryNode,re.toOperationNode())})}top(re,We){return new rt({...this.#e,queryNode:_.L.cloneWithTop(this.#e.queryNode,(0,Q.f)(re,We))})}whenMatched(){return this.#t([])}whenMatchedAnd(...re){return this.#t(re)}whenMatchedAndRef(re,We,ut){return this.#t([re,We,ut],!0)}#t(re,We){return new Ye({...this.#e,queryNode:ue.r.cloneWithWhen(this.#e.queryNode,Re({isMatched:!0},re,We))})}whenNotMatched(){return this.#r([])}whenNotMatchedAnd(...re){return this.#r(re)}whenNotMatchedAndRef(re,We,ut){return this.#r([re,We,ut],!0)}whenNotMatchedBySource(){return this.#r([],!1,!0)}whenNotMatchedBySourceAnd(...re){return this.#r(re,!1,!0)}whenNotMatchedBySourceAndRef(re,We,ut){return this.#r([re,We,ut],!0,!0)}returning(re){return new rt({...this.#e,queryNode:_.L.cloneWithReturning(this.#e.queryNode,(0,y.G)(re))})}returningAll(re){return new rt({...this.#e,queryNode:_.L.cloneWithReturning(this.#e.queryNode,(0,y.J)(re))})}output(re){return new rt({...this.#e,queryNode:_.L.cloneWithOutput(this.#e.queryNode,(0,y.G)(re))})}outputAll(re){return new rt({...this.#e,queryNode:_.L.cloneWithOutput(this.#e.queryNode,(0,y.J)(re))})}#r(re,We=!1,ut=!1){let kt={...this.#e,queryNode:ue.r.cloneWithWhen(this.#e.queryNode,Re({isMatched:!1,bySource:ut},re,We))};return new(ut?Ye:St)(kt)}$call(re){return re(this)}$if(re,We){return re?We(this):new rt({...this.#e})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let re=this.compile(),We=await this.#e.executor.executeQuery(re),{adapter:ut}=this.#e.executor,kt=re.query;return kt.returning&&ut.supportsReturning||kt.output&&ut.supportsOutput?We.rows:[new lt(We.numAffectedRows)]}async executeTakeFirst(){let[re]=await this.execute();return re}async executeTakeFirstOrThrow(re=C.F){let We=await this.executeTakeFirst();if(We===void 0)throw(0,C.x)(re)?new re(this.toOperationNode()):re(this.toOperationNode());return We}}class Ye{#e;constructor(re){this.#e=(0,c.CN)(re)}thenDelete(){return new rt({...this.#e,queryNode:ue.r.cloneWithThen(this.#e.queryNode,ae("delete"))})}thenDoNothing(){return new rt({...this.#e,queryNode:ue.r.cloneWithThen(this.#e.queryNode,ae("do nothing"))})}thenUpdate(re){return new rt({...this.#e,queryNode:ue.r.cloneWithThen(this.#e.queryNode,ae(re(new E({queryId:this.#e.queryId,executor:Ae.W,queryNode:R.U.createWithoutTable()}))))})}thenUpdateSet(...re){return this.thenUpdate(We=>We.set(...re))}}class St{#e;constructor(re){this.#e=(0,c.CN)(re)}thenDoNothing(){return new rt({...this.#e,queryNode:ue.r.cloneWithThen(this.#e.queryNode,ae("do nothing"))})}thenInsertValues(re){let[We,ut]=I(re);return new rt({...this.#e,queryNode:ue.r.cloneWithThen(this.#e.queryNode,ae(p.o.cloneWith(p.o.createWithoutInto(),{columns:We,values:ut})))})}}class bt{#e;constructor(re){this.#e=(0,c.CN)(re)}selectFrom(re){return(0,d.c)({queryId:(0,me.a)(),executor:this.#e.executor,queryNode:A.L.createFrom((0,ne.JB)(re),this.#e.withNode)})}selectNoFrom(re){return(0,d.c)({queryId:(0,me.a)(),executor:this.#e.executor,queryNode:A.L.cloneWithSelections(A.L.create(this.#e.withNode),(0,y.G)(re))})}insertInto(re){return new X({queryId:(0,me.a)(),executor:this.#e.executor,queryNode:p.o.create((0,ne.M$)(re),this.#e.withNode)})}replaceInto(re){return new X({queryId:(0,me.a)(),executor:this.#e.executor,queryNode:p.o.create((0,ne.M$)(re),this.#e.withNode,!0)})}deleteFrom(re){return new Z({queryId:(0,me.a)(),executor:this.#e.executor,queryNode:Ee.e.create((0,ne.JB)(re),this.#e.withNode)})}updateTable(re){return new E({queryId:(0,me.a)(),executor:this.#e.executor,queryNode:R.U.create((0,ne.JB)(re),this.#e.withNode)})}mergeInto(re){return new Je({queryId:(0,me.a)(),executor:this.#e.executor,queryNode:ue.r.create((0,ne.Xm)(re),this.#e.withNode)})}with(re,We){let ut=le(re,We);return new bt({...this.#e,withNode:this.#e.withNode?ce.cloneWithExpression(this.#e.withNode,ut):ce.create(ut)})}withRecursive(re,We){let ut=le(re,We);return new bt({...this.#e,withNode:this.#e.withNode?ce.cloneWithExpression(this.#e.withNode,ut):ce.create(ut,{recursive:!0})})}withPlugin(re){return new bt({...this.#e,executor:this.#e.executor.withPlugin(re)})}withoutPlugins(){return new bt({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(re){return new bt({...this.#e,executor:this.#e.executor.withPluginAtFront(new H.B(re))})}}},Le.__chunk_56899=(Ue,ie,o)=>{"use strict";o.d(ie,{u:()=>y});let d=new Set;function y(h){!d.has(h)&&(d.add(h),console.log(h))}},Le.__chunk_56715=(Ue,ie,o)=>{"use strict";o.d(ie,{L:()=>y});var d=o(13015);function y(h,i){let s=i.hooks;return{createWithHooks:async function(c,O,j){let $=await(0,d.xA)().catch(()=>null),W=c;for(let p of s||[]){let _=p[O]?.create?.before;if(_){let m=await _(W,$);if(m===!1)return null;typeof m=="object"&&"data"in m&&(W={...W,...m.data})}}let K=j?await j.fn(W):null,I=!j||j.executeMainFn?await(await(0,d.d3)(h)).create({model:O,data:W,forceAllowId:!0}):K;for(let p of s||[]){let _=p[O]?.create?.after;_&&await _(I,$)}return I},updateWithHooks:async function(c,O,j,$){let W=await(0,d.xA)().catch(()=>null),K=c;for(let _ of s||[]){let m=_[j]?.update?.before;if(m){let q=await m(c,W);if(q===!1)return null;typeof q=="object"&&"data"in q&&(K={...K,...q.data})}}let I=$?await $.fn(K):null,p=!$||$.executeMainFn?await(await(0,d.d3)(h)).update({model:j,update:K,where:O}):I;for(let _ of s||[]){let m=_[j]?.update?.after;m&&await m(p,W)}return p},updateManyWithHooks:async function(c,O,j,$){let W=await(0,d.xA)().catch(()=>null),K=c;for(let _ of s||[]){let m=_[j]?.update?.before;if(m){let q=await m(c,W);if(q===!1)return null;typeof q=="object"&&"data"in q&&(K={...K,...q.data})}}let I=$?await $.fn(K):null,p=!$||$.executeMainFn?await(await(0,d.d3)(h)).updateMany({model:j,update:K,where:O}):I;for(let _ of s||[]){let m=_[j]?.update?.after;m&&await m(p,W)}return p},deleteWithHooks:async function(c,O,j){let $=await(0,d.xA)().catch(()=>null),W=null;try{W=(await(await(0,d.d3)(h)).findMany({model:O,where:c,limit:1}))[0]||null}catch{}if(W)for(let p of s||[]){let _=p[O]?.delete?.before;if(_&&await _(W,$)===!1)return null}let K=j?await j.fn(c):null,I=!j||j.executeMainFn?await(await(0,d.d3)(h)).delete({model:O,where:c}):K;if(W)for(let p of s||[]){let _=p[O]?.delete?.after;_&&await _(W,$)}return I},deleteManyWithHooks:async function(c,O,j){let $=await(0,d.xA)().catch(()=>null),W=[];try{W=await(await(0,d.d3)(h)).findMany({model:O,where:c})}catch{}for(let p of W)for(let _ of s||[]){let m=_[O]?.delete?.before;if(m&&await m(p,$)===!1)return null}let K=j?await j.fn(c):null,I=!j||j.executeMainFn?await(await(0,d.d3)(h)).deleteMany({model:O,where:c}):K;for(let p of W)for(let _ of s||[]){let m=_[O]?.delete?.after;m&&await m(p,$)}return I}}}},Le.__chunk_56559=(Ue,ie,o)=>{"use strict";function d(s){if(!y(s))throw Error("CryptoKey instance expected")}o.d(ie,{D2:()=>h,P2:()=>i,R7:()=>y,Tz:()=>d});let y=s=>{if(s?.[Symbol.toStringTag]==="CryptoKey")return!0;try{return s instanceof CryptoKey}catch{return!1}},h=s=>s?.[Symbol.toStringTag]==="KeyObject",i=s=>y(s)||h(s)},Le.__chunk_55867=(Ue,ie,o)=>{"use strict";o.d(ie,{k:()=>y});var d=o(26772);let y=(0,d.CN)({is:h=>h.kind==="ParensNode",create:h=>(0,d.CN)({kind:"ParensNode",node:h})})},Le.__chunk_55735=(Ue,ie,o)=>{"use strict";o.d(ie,{l:()=>y});var d=o(26772);let y=(0,d.CN)({is:h=>h.kind==="BinaryOperationNode",create:(h,i,s)=>(0,d.CN)({kind:"BinaryOperationNode",leftOperand:h,operator:i,rightOperand:s})})},Le.__chunk_55337=(Ue,ie,o)=>{"use strict";o.d(ie,{x:()=>y});var d=o(38427);async function y(h){if(!h.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:i,keyUsages:s}=function(O){let j,$;switch(O.kty){case"AKP":switch(O.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":j={name:O.alg},$=O.priv?["sign"]:["verify"];break;default:throw new d.T0('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(O.alg){case"PS256":case"PS384":case"PS512":j={name:"RSA-PSS",hash:`SHA-${O.alg.slice(-3)}`},$=O.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":j={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${O.alg.slice(-3)}`},$=O.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":j={name:"RSA-OAEP",hash:`SHA-${parseInt(O.alg.slice(-3),10)||1}`},$=O.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new d.T0('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(O.alg){case"ES256":j={name:"ECDSA",namedCurve:"P-256"},$=O.d?["sign"]:["verify"];break;case"ES384":j={name:"ECDSA",namedCurve:"P-384"},$=O.d?["sign"]:["verify"];break;case"ES512":j={name:"ECDSA",namedCurve:"P-521"},$=O.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":j={name:"ECDH",namedCurve:O.crv},$=O.d?["deriveBits"]:[];break;default:throw new d.T0('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(O.alg){case"Ed25519":case"EdDSA":j={name:"Ed25519"},$=O.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":j={name:O.crv},$=O.d?["deriveBits"]:[];break;default:throw new d.T0('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new d.T0('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:j,keyUsages:$}}(h),c={...h};return c.kty!=="AKP"&&delete c.alg,delete c.use,crypto.subtle.importKey("jwk",c,i,h.ext??(!h.d&&!h.priv),h.key_ops??s)}},Le.__chunk_55096=(Ue,ie,o)=>{"use strict";o.d(ie,{O:()=>Ee,A:()=>$e});var d=o(48582),y=o(63440),h=o(7286),i=o(21430),s=o(30797),c=o(80594),O=o(66557),j=o(34395),$=o(55867),W=o(30145),K=o(47248),I=o(26772);let p=(0,I.CN)({is:v=>v.kind==="UnaryOperationNode",create:(v,Z)=>(0,I.CN)({kind:"UnaryOperationNode",operator:v,operand:Z})});var _=o(89709),m=o(8224),q=o(61477),J=o(37852),a=o(93692),V=o(9789),C=o(47959);let L=(0,I.CN)({is:v=>v.kind==="JSONPathLegNode",create:(v,Z)=>(0,I.CN)({kind:"JSONPathLegNode",type:v,value:Z})});var k=o(3122),N=o(5702),P=o(35889),b=o(72391);class z{#e;constructor(Z){this.#e=Z}at(Z){return this.#t("ArrayLocation",Z)}key(Z){return this.#t("Member",Z)}#t(Z,R){return new F(N.Q.is(this.#e)?N.Q.cloneWithTraversal(this.#e,k.c.is(this.#e.traversal)?k.c.cloneWithLeg(this.#e.traversal,L.create(Z,R)):C.k.cloneWithValue(this.#e.traversal,b.q.createImmediate(R))):k.c.cloneWithLeg(this.#e,L.create(Z,R)))}}class F extends z{#e;constructor(Z){super(Z),this.#e=Z}get expressionType(){}as(Z){return new Q(this,Z)}$castTo(){return new F(this.#e)}$notNull(){return new F(this.#e)}toOperationNode(){return this.#e}}class Q{#e;#t;constructor(Z,R){this.#e=Z,this.#t=R}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return a.N.create(this.#e.toOperationNode(),(0,P.N)(this.#t)?this.#t.toOperationNode():V.O.create(this.#t))}}var G=o(55735),X=o(74623);let oe=(0,I.CN)({is:v=>v.kind==="TupleNode",create:v=>(0,I.CN)({kind:"TupleNode",values:(0,I.CN)(v)})});var ne=o(34179);let we=(0,I.CN)({is:v=>v.kind==="CastNode",create:(v,Z)=>(0,I.CN)({kind:"CastNode",expression:v,dataType:Z})});function Ee(v=m.W){function Z(S,E){var A,U;return new W.Is((A=S,U=E,p.create(K.zX.create(A),(0,O.$O)(U))))}let R=Object.assign(function(S,E,A){return new W.Is((0,j.ds)(S,E,A))},{fn:void 0,eb:void 0,selectFrom:S=>(0,d.c)({queryId:(0,s.a)(),executor:v,queryNode:y.L.createFrom((0,h.JB)(S))}),case:S=>new q.OU({node:J.P.create((0,I.b0)(S)?void 0:(0,O.$O)(S))}),ref:(S,E)=>(0,I.b0)(E)?new W.Is((0,O.q5)(S)):new z((0,O.NF)(S,E)),jsonPath:()=>new z(k.c.create()),table:S=>new W.Is((0,h.M$)(S)),val:S=>new W.Is((0,_.$s)(S)),refTuple:(...S)=>new W.Is(oe.create(S.map(O.$O))),tuple:(...S)=>new W.Is(oe.create(S.map(_.$s))),lit:S=>new W.Is((0,_.dJ)(S)),unary:Z,not:S=>Z("not",S),exists:S=>Z("exists",S),neg:S=>Z("-",S),between:(S,E,A)=>new W.Is(G.l.create((0,O.$O)(S),K.zX.create("between"),X.s.create((0,_.$s)(E),(0,_.$s)(A)))),betweenSymmetric:(S,E,A)=>new W.Is(G.l.create((0,O.$O)(S),K.zX.create("between symmetric"),X.s.create((0,_.$s)(E),(0,_.$s)(A)))),and:S=>new W.Is((0,I.MH)(S)?(0,j.KN)(S,"and"):(0,j.Ve)(S,"and")),or:S=>new W.Is((0,I.MH)(S)?(0,j.KN)(S,"or"):(0,j.Ve)(S,"or")),parens(...S){let E=(0,j.GB)(S);return new W.Is($.k.is(E)?E:$.k.create(E))},cast:(S,E)=>new W.Is(we.create((0,O.$O)(S),(0,ne.Q)(E))),withSchema:S=>Ee(v.withPluginAtFront(new i.B(S)))});return R.fn=(0,c.t)(),R.eb=R,R}function $e(v){return Ee()}},Le.__chunk_54260=(Ue,ie,o)=>{"use strict";o.d(ie,{t:()=>s});var d=o(2543);let y={eterm:4,cons25:4,console:4,cygwin:4,dtterm:4,gnome:4,hurd:4,jfbterm:4,konsole:4,kterm:4,mlterm:4,mosh:24,putty:4,st:4,"rxvt-unicode-24bit":24,terminator:24,"xterm-kitty":24},h=new Map(Object.entries({APPVEYOR:8,BUILDKITE:8,CIRCLECI:24,DRONE:8,GITEA_ACTIONS:24,GITHUB_ACTIONS:24,GITLAB_CI:8,TRAVIS:8})),i=[/ansi/,/color/,/linux/,/direct/,/^con[0-9]*x[0-9]/,/^rxvt/,/^screen/,/^xterm/,/^vt100/,/^vt220/];function s(){if((0,d.lh)("FORCE_COLOR")!==void 0)switch((0,d.lh)("FORCE_COLOR")){case"":case"1":case"true":return 4;case"2":return 8;case"3":return 24;default:return 1}if((0,d.lh)("NODE_DISABLE_COLORS")!==void 0&&(0,d.lh)("NODE_DISABLE_COLORS")!==""||(0,d.lh)("NO_COLOR")!==void 0&&(0,d.lh)("NO_COLOR")!==""||(0,d.lh)("TERM")==="dumb")return 1;if((0,d.lh)("TMUX"))return 24;if("TF_BUILD"in d._K&&"AGENT_NAME"in d._K)return 4;if("CI"in d._K){for(let{0:c,1:O}of h)if(c in d._K)return O;return(0,d.lh)("CI_NAME")==="codeship"?8:1}if("TEAMCITY_VERSION"in d._K)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.exec((0,d.lh)("TEAMCITY_VERSION"))!==null?4:1;switch((0,d.lh)("TERM_PROGRAM")){case"iTerm.app":return!(0,d.lh)("TERM_PROGRAM_VERSION")||/^[0-2]\./.exec((0,d.lh)("TERM_PROGRAM_VERSION"))!==null?8:24;case"HyperTerm":case"MacTerm":return 24;case"Apple_Terminal":return 8}if((0,d.lh)("COLORTERM")==="truecolor"||(0,d.lh)("COLORTERM")==="24bit")return 24;if((0,d.lh)("TERM")){if(/truecolor/.exec((0,d.lh)("TERM"))!==null)return 24;if(/^xterm-256/.exec((0,d.lh)("TERM"))!==null)return 8;let c=(0,d.lh)("TERM").toLowerCase();if(y[c])return y[c];if(i.some(O=>O.exec(c)!==null))return 4}return(0,d.lh)("COLORTERM")?4:1}},Le.__chunk_54184=(Ue,ie,o)=>{"use strict";o.d(ie,{D:()=>y});let d=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function y(h){let i="";for(let s=0;s<h;++s)i+=d[~~(Math.random()*d.length)];return i}},Le.__chunk_54030=(Ue,ie,o)=>{"use strict";o.d(ie,{LG:()=>s,UD:()=>b,Ny:()=>z,aE:()=>S,Zr:()=>K});let d={OK:200,CREATED:201,ACCEPTED:202,NO_CONTENT:204,MULTIPLE_CHOICES:300,MOVED_PERMANENTLY:301,FOUND:302,SEE_OTHER:303,NOT_MODIFIED:304,TEMPORARY_REDIRECT:307,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,"I'M_A_TEAPOT":418,MISDIRECTED_REQUEST:421,UNPROCESSABLE_ENTITY:422,LOCKED:423,FAILED_DEPENDENCY:424,TOO_EARLY:425,UPGRADE_REQUIRED:426,PRECONDITION_REQUIRED:428,TOO_MANY_REQUESTS:429,REQUEST_HEADER_FIELDS_TOO_LARGE:431,UNAVAILABLE_FOR_LEGAL_REASONS:451,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,VARIANT_ALSO_NEGOTIATES:506,INSUFFICIENT_STORAGE:507,LOOP_DETECTED:508,NOT_EXTENDED:510,NETWORK_AUTHENTICATION_REQUIRED:511};var y=class extends Error{constructor(E="INTERNAL_SERVER_ERROR",A,U={},te=typeof E=="number"?E:d[E]){super(A?.message,A?.cause?{cause:A.cause}:void 0),this.status=E,this.body=A,this.headers=U,this.statusCode=te,this.name="APIError",this.status=E,this.headers=U,this.statusCode=te,this.body=A?{code:A?.message?.toUpperCase().replace(/ /g,"_").replace(/[^A-Z0-9_]/g,""),...A}:void 0}},h=class extends y{constructor(E,A){super(400,{message:E,code:"VALIDATION_ERROR"}),this.message=E,this.issues=A,this.issues=A}},i=class extends Error{constructor(E){super(E),this.name="BetterCallError"}};let s=function(E,A){class U extends E{#e;constructor(...Y){if(function(){let ee=Object.getOwnPropertyDescriptor(Error,"stackTraceLimit");return ee===void 0?Object.isExtensible(Error):Object.prototype.hasOwnProperty.call(ee,"writable")?ee.writable:ee.set!==void 0}()){let ee=Error.stackTraceLimit;Error.stackTraceLimit=0,super(...Y),Error.stackTraceLimit=ee}else super(...Y);let D=Error().stack;D&&(this.#e=function(ee){let le=ee.split(`
    at `);return le.length<=1?ee:(le.splice(1,1),le.join(`
    at `))}(D.replace(/^Error/,this.name)))}get errorStack(){return this.#e}}return Object.defineProperty(U.prototype,"constructor",{get:()=>A,enumerable:!1,configurable:!0}),U}(y,Error),c=/^application\/([a-z0-9.+-]*\+)?json/i;async function O(E,A){let U=E.headers.get("content-type")||"",te=U.toLowerCase();if(E.body){if(A&&A.length>0&&!A.some(Y=>{let D=te.split(";")[0].trim(),ee=Y.toLowerCase().trim();return D===ee||D.includes(ee)}))throw te?new s(415,{message:`Content-Type "${U}" is not allowed. Allowed types: ${A.join(", ")}`,code:"UNSUPPORTED_MEDIA_TYPE"}):new s(415,{message:`Content-Type is required. Allowed types: ${A.join(", ")}`,code:"UNSUPPORTED_MEDIA_TYPE"});if(c.test(te))return await E.json();if(te.includes("application/x-www-form-urlencoded")){let Y=await E.formData(),D={};return Y.forEach((ee,le)=>{D[le]=ee.toString()}),D}if(te.includes("multipart/form-data")){let Y=await E.formData(),D={};return Y.forEach((ee,le)=>{D[le]=ee}),D}return te.includes("text/plain")?await E.text():te.includes("application/octet-stream")?await E.arrayBuffer():te.includes("application/pdf")||te.includes("image/")||te.includes("video/")?await E.blob():te.includes("application/stream")||E.body instanceof ReadableStream?E.body:await E.text()}}function j(E){return E instanceof s||E?.name==="APIError"}async function $(E){try{return{data:await E,error:null}}catch(A){return{data:null,error:A}}}function W(E){return E instanceof Request||Object.prototype.toString.call(E)==="[object Request]"}function K(E,A){if(E instanceof Response)return A?.headers instanceof Headers&&A.headers.forEach((Y,D)=>{E.headers.set(D,Y)}),E;if(E&&typeof E=="object"&&"_flag"in E&&E._flag==="json"){let Y=E.body,D=E.routerResponse;if(D instanceof Response)return D;let ee=new Headers;if(D?.headers){let le=new Headers(D.headers);for(let[se,ce]of le.entries())le.set(se,ce)}if(E.headers)for(let[le,se]of new Headers(E.headers).entries())ee.set(le,se);if(A?.headers)for(let[le,se]of new Headers(A.headers).entries())ee.set(le,se);return ee.set("Content-Type","application/json"),new Response(JSON.stringify(Y),{...D,headers:ee,status:E.status??A?.status??D?.status,statusText:A?.statusText??D?.statusText})}if(j(E))return K(E.body,{status:A?.status??E.statusCode,statusText:E.status.toString(),headers:A?.headers||E.headers});let U=E,te=new Headers(A?.headers);return E?typeof E=="string"?(U=E,te.set("Content-Type","text/plain")):E instanceof ArrayBuffer||ArrayBuffer.isView(E)?(U=E,te.set("Content-Type","application/octet-stream")):E instanceof Blob?(U=E,te.set("Content-Type",E.type||"application/octet-stream")):E instanceof FormData?U=E:E instanceof URLSearchParams?(U=E,te.set("Content-Type","application/x-www-form-urlencoded")):E instanceof ReadableStream?(U=E,te.set("Content-Type","application/octet-stream")):function(Y){if(Y===void 0)return!1;let D=typeof Y;return D==="string"||D==="number"||D==="boolean"||D===null||D==="object"&&(!!Array.isArray(Y)||!Y.buffer&&(Y.constructor&&Y.constructor.name==="Object"||typeof Y.toJSON=="function"))}(E)&&(U=function(Y,D,ee){let le=0,se=new WeakMap;return JSON.stringify(Y,(ce,me)=>{if(typeof me=="bigint")return me.toString();if(typeof me=="object"&&me!==null){if(se.has(me))return`[Circular ref-${se.get(me)}]`;se.set(me,le++)}return me},void 0)}(E),te.set("Content-Type","application/json")):(E===null&&(U=JSON.stringify(null)),te.set("content-type","application/json")),new Response(U,{...A,headers:te})}var I=o(14627);let p={name:"HMAC",hash:"SHA-256"},_=async E=>{let A=typeof E=="string"?new TextEncoder().encode(E):E;return await(0,I.N)().importKey("raw",A,p,!1,["sign","verify"])},m=async(E,A,U)=>{try{let te=atob(E),Y=new Uint8Array(te.length);for(let D=0,ee=te.length;D<ee;D++)Y[D]=te.charCodeAt(D);return await(0,I.N)().verify(p,U,Y,new TextEncoder().encode(A))}catch{return!1}},q=async(E,A)=>{let U=await _(A);return btoa(String.fromCharCode(...new Uint8Array(await(0,I.N)().sign(p.name,U,new TextEncoder().encode(E)))))},J=async(E,A)=>{let U=await q(E,A);return E=encodeURIComponent(E=`${E}.${U}`)},a=(E,A)=>{let U=E;if(A)if(A==="secure")U="__Secure-"+E;else{if(A!=="host")return;U="__Host-"+E}return U},V=(E,A,U={})=>{let te;if(te=U?.prefix==="secure"?`__Secure-${E}=${A}`:U?.prefix==="host"?`__Host-${E}=${A}`:`${E}=${A}`,E.startsWith("__Secure-")&&!U.secure&&(U.secure=!0),E.startsWith("__Host-")&&(U.secure||(U.secure=!0),U.path!=="/"&&(U.path="/"),U.domain&&(U.domain=void 0)),U&&typeof U.maxAge=="number"&&U.maxAge>=0){if(U.maxAge>3456e4)throw Error("Cookies Max-Age SHOULD NOT be greater than 400 days (34560000 seconds) in duration.");te+=`; Max-Age=${Math.floor(U.maxAge)}`}if(U.domain&&U.prefix!=="host"&&(te+=`; Domain=${U.domain}`),U.path&&(te+=`; Path=${U.path}`),U.expires){if(U.expires.getTime()-Date.now()>3456e7)throw Error("Cookies Expires SHOULD NOT be greater than 400 days (34560000 seconds) in the future.");te+=`; Expires=${U.expires.toUTCString()}`}return U.httpOnly&&(te+="; HttpOnly"),U.secure&&(te+="; Secure"),U.sameSite&&(te+=`; SameSite=${U.sameSite.charAt(0).toUpperCase()+U.sameSite.slice(1)}`),U.partitioned&&(U.secure||(U.secure=!0),te+="; Partitioned"),te},C=(E,A,U)=>V(E,A=encodeURIComponent(A),U),L=async(E,A,U,te)=>V(E,A=await J(A,U),te);async function k(E,A={}){let U={body:A.body,query:A.query};if(E.body){let te=await E.body["~standard"].validate(A.body);if(te.issues)return{data:null,error:N(te.issues,"body")};U.body=te.value}if(E.query){let te=await E.query["~standard"].validate(A.query);if(te.issues)return{data:null,error:N(te.issues,"query")};U.query=te.value}return E.requireHeaders&&!A.headers?{data:null,error:{message:"Headers is required",issues:[]}}:E.requireRequest&&!A.request?{data:null,error:{message:"Request is required",issues:[]}}:{data:U,error:null}}function N(E,A){return{message:E.map(U=>`[${U.path?.length?`${A}.`+U.path.map(te=>typeof te=="object"?te.key:te).join("."):A}] ${U.message}`).join("; "),issues:E}}let P=async(E,{options:A,path:U})=>{let te,Y=new Headers,{data:D,error:ee}=await k(A,E);if(ee)throw new h(ee.message,ee.issues);let le="headers"in E?E.headers instanceof Headers?E.headers:new Headers(E.headers):"request"in E&&W(E.request)?E.request.headers:null,se=le?.get("cookie"),ce=se?function(H){if(typeof H!="string")throw TypeError("argument str must be a string");let ue=new Map,x=0;for(;x<H.length;){let fe=H.indexOf("=",x);if(fe===-1)break;let ge=H.indexOf(";",x);if(ge===-1)ge=H.length;else if(ge<fe){x=H.lastIndexOf(";",fe-1)+1;continue}let Se=H.slice(x,fe).trim();if(!ue.has(Se)){let Re=H.slice(fe+1,ge).trim();Re.codePointAt(0)===34&&(Re=Re.slice(1,-1)),ue.set(Se,function(ae){try{return ae.includes("%")?decodeURIComponent(ae):ae}catch{return ae}}(Re))}x=ge+1}return ue}(se):void 0,me={...E,body:D.body,query:D.query,path:E.path||U||"virtual:",context:"context"in E&&E.context?E.context:{},returned:void 0,headers:E?.headers,request:E?.request,params:"params"in E?E.params:void 0,method:E.method??(Array.isArray(A.method)?A.method[0]:A.method==="*"?"GET":A.method),setHeader:(H,ue)=>{Y.set(H,ue)},getHeader:H=>le?le.get(H):null,getCookie:(H,ue)=>{let x=a(H,ue);return x&&ce?.get(x)||null},getSignedCookie:async(H,ue,x)=>{let fe=a(H,x);if(!fe)return null;let ge=ce?.get(fe);if(!ge)return null;let Se=ge.lastIndexOf(".");if(Se<1)return null;let Re=ge.substring(0,Se),ae=ge.substring(Se+1);return ae.length===44&&ae.endsWith("=")?!!await m(ae,Re,await _(ue))&&Re:null},setCookie:(H,ue,x)=>{let fe=C(H,ue,x);return Y.append("set-cookie",fe),fe},setSignedCookie:async(H,ue,x,fe)=>{let ge=await L(H,ue,x,fe);return Y.append("set-cookie",ge),ge},redirect:H=>(Y.set("location",H),new s("FOUND",void 0,Y)),error:(H,ue,x)=>new s(H,ue,x),setStatus:H=>{te=H},json:(H,ue)=>E.asResponse?{body:ue?.body||H,routerResponse:ue,_flag:"json"}:H,responseHeaders:Y,get responseStatus(){return te}};for(let H of A.use||[]){let ue=await H({...me,returnHeaders:!0,asResponse:!1});ue.response&&Object.assign(me.context,ue.response),ue.headers&&ue.headers.forEach((x,fe)=>{me.responseHeaders.set(fe,x)})}return me};function b(E,A,U){let te=typeof E=="string"?E:void 0,Y=typeof A=="object"?A:E,D=typeof A=="function"?A:U;if((Y.method==="GET"||Y.method==="HEAD")&&Y.body)throw new i("Body is not allowed with GET or HEAD methods");if(te&&/\/{2,}/.test(te))throw new i("Path cannot contain consecutive slashes");let ee=async(...le)=>{let se=le[0]||{},{data:ce,error:me}=await $(P(se,{options:Y,path:te}));if(me)throw me instanceof h?(Y.onValidationError&&await Y.onValidationError({message:me.message,issues:me.issues}),new s(400,{message:me.message,code:"VALIDATION_ERROR"})):me;let H=await D(ce).catch(async fe=>{if(j(fe)){let ge=Y.onAPIError;if(ge&&await ge(fe),se.asResponse)return fe}throw fe}),ue=ce.responseHeaders,x=ce.responseStatus;return se.asResponse?K(H,{headers:ue,status:x}):se.returnHeaders?se.returnStatus?{headers:ue,response:H,status:x}:{headers:ue,response:H}:se.returnStatus?{response:H,status:x}:H};return ee.options=Y,ee.path=te,ee}function z(E,A){let U=async te=>{let Y=typeof E=="function"?E:A,D=await P(te,{options:typeof E=="function"?{}:E,path:"/"});if(!Y)throw Error("handler must be defined");let ee=await Y(D),le=D.responseHeaders;return te.returnHeaders?{headers:le,response:ee}:ee};return U.options=typeof E=="function"?{}:E,U}b.create=E=>(A,U,te)=>b(A,{...U,use:[...U?.use||[],...E?.use||[]]},te),z.create=E=>function(A,U){if(typeof A=="function")return z({use:E?.use},A);if(!U)throw Error("Middleware handler is required");return z({...A,method:"*",use:[...E?.use||[],...A.use||[]]},U)};var F=o(13348);let Q={};function G(E){switch(E.constructor.name){case"ZodString":default:return"string";case"ZodNumber":return"number";case"ZodBoolean":return"boolean";case"ZodObject":return"object";case"ZodArray":return"array"}}function X(E){let A=[];return E.metadata?.openapi?.parameters?A.push(...E.metadata.openapi.parameters):E.query instanceof F.ZodObject&&Object.entries(E.query.shape).forEach(([U,te])=>{te instanceof F.ZodObject&&A.push({name:U,in:"query",schema:{type:G(te),..."minLength"in te&&te.minLength?{minLength:te.minLength}:{},description:te.description}})}),A}function oe(E){return{400:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Bad Request. Usually due to missing parameters, or invalid parameters."},401:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Unauthorized. Due to missing or invalid authentication."},403:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Forbidden. You do not have permission to access this resource or to perform this action."},404:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Not Found. The requested resource was not found."},429:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Too Many Requests. You have exceeded the rate limit. Try again later."},500:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Internal Server Error. This is a problem with the server that you cannot fix."},...E}}async function ne(E,A){return Object.entries(E).forEach(([U,te])=>{let Y=te.options;if(!(!te.path||Y.metadata?.SERVER_ONLY)&&(Y.method==="GET"&&(Q[te.path]={get:{tags:["Default",...Y.metadata?.openapi?.tags||[]],description:Y.metadata?.openapi?.description,operationId:Y.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:X(Y),responses:oe(Y.metadata?.openapi?.responses)}}),Y.method==="POST")){let D=function(ee){if(ee.metadata?.openapi?.requestBody)return ee.metadata.openapi.requestBody;if(ee.body&&(ee.body instanceof F.ZodObject||ee.body instanceof F.ZodOptional)){let le=ee.body.shape;if(!le)return;let se={},ce=[];return Object.entries(le).forEach(([me,H])=>{H instanceof F.ZodObject&&(se[me]={type:G(H),description:H.description},H instanceof F.ZodOptional||ce.push(me))}),{required:!(ee.body instanceof F.ZodOptional)&&!!ee.body,content:{"application/json":{schema:{type:"object",properties:se,required:ce}}}}}}(Y);Q[te.path]={post:{tags:["Default",...Y.metadata?.openapi?.tags||[]],description:Y.metadata?.openapi?.description,operationId:Y.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:X(Y),...D?{requestBody:D}:{requestBody:{content:{"application/json":{schema:{type:"object",properties:{}}}}}},responses:oe(Y.metadata?.openapi?.responses)}}}}),{openapi:"3.1.1",info:{title:"Better Auth",description:"API Reference for your Better Auth Instance",version:"1.1.0"},components:{schemas:{}},security:[{apiKeyCookie:[]}],servers:[{url:A?.url}],tags:[{name:"Default",description:"Default endpoints that are included with Better Auth by default. These endpoints are not part of any plugin."}],paths:Q}}let we=(E,A)=>`<!doctype html>
<html>
  <head>
    <title>Scalar API Reference</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <script
      id="api-reference"
      type="application/json">
    ${JSON.stringify(E)}
    <\/script>
	 <script>
      var configuration = {
	  	favicon: ${A?.logo?`data:image/svg+xml;utf8,${encodeURIComponent(A.logo)}`:void 0} ,
	   	theme: ${A?.theme||"saturn"},
        metaData: {
			title: ${A?.title||"Open API Reference"},
			description: ${A?.description||"Better Call Open API"},
		}
      }
      document.getElementById('api-reference').dataset.configuration =
        JSON.stringify(configuration)
    <\/script>
	  <script src="https://cdn.jsdelivr.net/npm/@scalar/api-reference"><\/script>
  </body>
</html>`,Ee=(()=>{let E=function(){};return E.prototype=Object.create(null),Object.freeze(E.prototype),E})();function $e(){return{root:{key:""},static:new Ee}}function v(E){let[A,...U]=E.split("/");return U[U.length-1]===""?U.slice(0,-1):U}function Z(E,A){let U=new Ee;for(let[te,Y]of A){let D=te<0?E.slice(-(te+1)).join("/"):E[te];if(typeof Y=="string")U[Y]=D;else{let ee=D.match(Y);if(ee)for(let le in ee.groups)U[le]=ee.groups[le]}}return U}function R(E,A="",U,te){A=A.toUpperCase(),U.charCodeAt(0)!==47&&(U=`/${U}`);let Y=v(U=U.replace(/\\:/g,"%3A")),D=E.root,ee=0,le=[],se=[];for(let me=0;me<Y.length;me++){let H=Y[me];if(H.startsWith("**")){D.wildcard||(D.wildcard={key:"**"}),D=D.wildcard,le.push([-(me+1),H.split(":")[1]||"_",H.length===2]);break}if(H==="*"||H.includes(":")){if(D.param||(D.param={key:"*"}),D=D.param,H==="*")le.push([me,`_${ee++}`,!0]);else if(H.includes(":",1)){let x=function(fe){let ge=fe.replace(/:(\w+)/g,(Se,Re)=>`(?<${Re}>[^/]+)`).replace(/\./g,"\\.");return RegExp(`^${ge}$`)}(H);se[me]=x,D.hasRegexParam=!0,le.push([me,x,!1])}else le.push([me,H.slice(1),!1]);continue}H==="\\*"?H=Y[me]="*":H==="\\*\\*"&&(H=Y[me]="**");let ue=D.static?.[H];if(ue)D=ue;else{let x={key:H};D.static||(D.static=new Ee),D.static[H]=x,D=x}}let ce=le.length>0;D.methods||(D.methods=new Ee),D.methods[A]??=[],D.methods[A].push({data:te||null,paramsRegexp:se,paramsMap:ce?le:void 0}),ce||(E.static["/"+Y.join("/")]=D)}let S=(E,A)=>{if(!A?.openapi?.disabled){let D={path:"/api/reference",...A?.openapi};E.openapi=b(D.path,{method:"GET"},async ee=>new Response(we(await ne(E),D.scalar),{headers:{"Content-Type":"text/html"}}))}let U=$e(),te=$e();for(let D of Object.values(E))if(!(!D.options||!D.path||D.options?.metadata?.SERVER_ONLY))for(let ee of Array.isArray(D.options?.method)?D.options.method:[D.options?.method])R(U,ee,D.path,D);if(A?.routerMiddleware?.length)for(let{path:D,middleware:ee}of A.routerMiddleware)R(te,"*",D,ee);let Y=async D=>{let ee=new URL(D.url),le=ee.pathname,se=A?.basePath&&A.basePath!=="/"?le.split(A.basePath).reduce((ue,x,fe)=>(fe!==0&&(fe>1?ue.push(`${A.basePath}${x}`):ue.push(x)),ue),[]).join(""):ee.pathname;if(!se?.length||/\/{2,}/.test(se))return new Response(null,{status:404,statusText:"Not Found"});let ce=function(ue,x="",fe,ge){fe.charCodeAt(fe.length-1)===47&&(fe=fe.slice(0,-1));let Se=ue.static[fe];if(Se&&Se.methods){let Ae=Se.methods[x]||Se.methods[""];if(Ae!==void 0)return Ae[0]}let Re=v(fe),ae=function Ae(lt,Je,rt,Ye,St){if(St===Ye.length){if(Je.methods){let qe=Je.methods[rt]||Je.methods[""];if(qe)return qe}if(Je.param&&Je.param.methods){let qe=Je.param.methods[rt]||Je.param.methods[""];if(qe){let re=qe[0].paramsMap;if(re?.[re?.length-1]?.[2])return qe}}if(Je.wildcard&&Je.wildcard.methods){let qe=Je.wildcard.methods[rt]||Je.wildcard.methods[""];if(qe){let re=qe[0].paramsMap;if(re?.[re?.length-1]?.[2])return qe}}return}let bt=Ye[St];if(Je.static){let qe=Je.static[bt];if(qe){let re=Ae(lt,qe,rt,Ye,St+1);if(re)return re}}if(Je.param){let qe=Ae(lt,Je.param,rt,Ye,St+1);if(qe){if(Je.param.hasRegexParam){let re=qe.find(We=>We.paramsRegexp[St]?.test(bt))||qe.find(We=>!We.paramsRegexp[St]);return re?[re]:void 0}return qe}}if(Je.wildcard&&Je.wildcard.methods)return Je.wildcard.methods[rt]||Je.wildcard.methods[""]}(ue,ue.root,x,Re,0)?.[0];if(ae!==void 0)return{data:ae.data,params:ae.paramsMap?Z(Re,ae.paramsMap):void 0}}(U,D.method,se);if(se.endsWith("/")!==ce?.data?.path?.endsWith("/")&&!A?.skipTrailingSlashes||!ce?.data)return new Response(null,{status:404,statusText:"Not Found"});let me={};ee.searchParams.forEach((ue,x)=>{x in me?Array.isArray(me[x])?me[x].push(ue):me[x]=[me[x],ue]:me[x]=ue});let H=ce.data;try{let ue=H.options.metadata?.allowedMediaTypes||A?.allowedMediaTypes,x={path:se,method:D.method,headers:D.headers,params:ce.params?JSON.parse(JSON.stringify(ce.params)):{},request:D,body:H.options.disableBody?void 0:await O(H.options.cloneRequest?D.clone():D,ue),query:me,_flag:"router",asResponse:!0,context:A?.routerContext},fe=function(ge,Se="",Re,ae){Re.charCodeAt(Re.length-1)===47&&(Re=Re.slice(0,-1));let Ae=v(Re);return function Je(rt,Ye,St,bt,qe,re=[]){let We=bt[qe];if(Ye.wildcard&&Ye.wildcard.methods){let kt=Ye.wildcard.methods[St]||Ye.wildcard.methods[""];kt&&re.push(...kt)}if(Ye.param&&(Je(rt,Ye.param,St,bt,qe+1,re),qe===bt.length&&Ye.param.methods)){let kt=Ye.param.methods[St]||Ye.param.methods[""];if(kt){let Ct=kt[0].paramsMap;Ct?.[Ct?.length-1]?.[2]&&re.push(...kt)}}let ut=Ye.static?.[We];if(ut&&Je(rt,ut,St,bt,qe+1,re),qe===bt.length&&Ye.methods){let kt=Ye.methods[St]||Ye.methods[""];kt&&re.push(...kt)}return re}(ge,ge.root,Se,Ae,0).map(Je=>({data:Je.data,params:Je.paramsMap?Z(Ae,Je.paramsMap):void 0}))}(te,"*",se);if(fe?.length)for(let{data:ge,params:Se}of fe){let Re=await ge({...x,params:Se,asResponse:!1});if(Re instanceof Response)return Re}return await H(x)}catch(ue){if(A?.onError)try{let x=await A.onError(ue);if(x instanceof Response)return K(x)}catch(x){if(j(x))return K(x);throw x}if(A?.throwError)throw ue;return j(ue)?K(ue):(console.error("# SERVER_ERROR: ",ue),new Response(null,{status:500,statusText:"Internal Server Error"}))}};return{handler:async D=>{let ee=await A?.onRequest?.(D);if(ee instanceof Response)return ee;let le=await Y(W(ee)?ee:D),se=await A?.onResponse?.(le);return se instanceof Response?se:le},endpoints:E}}},Le.__chunk_53186=(Ue,ie,o)=>{"use strict";function d(i){if(i===null||typeof i!="object")return!1;let s=Object.getPrototypeOf(i);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.iterator in i)&&(!(Symbol.toStringTag in i)||Object.prototype.toString.call(i)==="[object Module]")}function y(i){return(...s)=>s.reduce((c,O)=>function j($,W,K=".",I){if(!d(W))return j($,{},K,I);let p=Object.assign({},W);for(let _ in $){if(_==="__proto__"||_==="constructor")continue;let m=$[_];!(m==null||I&&I(p,_,m,K))&&(Array.isArray(m)&&Array.isArray(p[_])?p[_]=[...m,...p[_]]:d(m)&&d(p[_])?p[_]=j(m,p[_],(K?`${K}.`:"")+_.toString(),I):p[_]=m)}return p}(c,O,"",i),{})}o.d(ie,{$Q:()=>h,Ay:()=>h,zG:()=>y});let h=y();y((i,s,c)=>{if(i[s]!==void 0&&typeof c=="function")return i[s]=c(i[s]),!0}),y((i,s,c)=>{if(Array.isArray(i[s])&&typeof c=="function")return i[s]=c(i[s]),!0})},Le.__chunk_52072=(Ue,ie,o)=>{"use strict";let d,y,h;o.d(ie,{LG:()=>c.LG,BT:()=>i.B,li:()=>Re}),o(86790),o(90468);var i=o(67869),s=o(80287),c=o(80338),O=o(43805),j=o(16875),$=o(58571),W=o(48981),K=o(30592),I=o(2795),p=o(80766),_=o(86193),m=o(98934),q=o(38550);let J="better-auth-secret-12345678901234567890";var a=o(68113),V=o(53186);async function C(ae){let Ae=ae.options,lt=Ae.plugins||[],Je=ae,rt=[];for(let Ye of lt)if(Ye.init){let St,bt=Ye.init(Je);if(typeof(St=(0,_.y)(bt)?await bt:bt)=="object"){if(St.options){let{databaseHooks:qe,...re}=St.options;qe&&rt.push(qe),Ae=(0,V.$Q)(Ae,re)}St.context&&(Je={...Je,...St.context})}}return rt.push(Ae.databaseHooks),Je.internalAdapter=(0,W.t)(Je.adapter,{options:Ae,logger:Je.logger,hooks:rt.filter(Ye=>Ye!==void 0),generateId:Je.generateId}),Je.options=Ae,{context:Je}}async function L(ae,Ae){let lt=(0,K.vo)(ae.baseURL,ae.basePath,Ae),Je=lt?[new URL(lt).origin]:[];if(ae.trustedOrigins&&(Array.isArray(ae.trustedOrigins)&&Je.push(...ae.trustedOrigins),typeof ae.trustedOrigins=="function")){let Ye=await ae.trustedOrigins(Ae);Je.push(...Ye)}let rt=a._K.BETTER_AUTH_TRUSTED_ORIGINS;return rt&&Je.push(...rt.split(",")),Je.filter(Ye=>!!Ye)}var k=o(13015),N=o(48157),P=o(30543),b=o(99597),z=o(75385),F=o(79895),Q=o(31448),G=o(3013),X=o(83504);async function oe(){if(d)return d;try{let ae=typeof process<"u"&&typeof process.cwd=="function"?process.cwd():"";if(!ae)return;let Ae=Ye=>Function("mm","return import(mm)")(Ye),[{default:lt},{default:Je}]=await Promise.all([Ae("fs/promises"),Ae("path")]),rt=await lt.readFile(Je.join(ae,"package.json"),"utf-8");return d=JSON.parse(rt)}catch{}}async function ne(ae){if(d)return d.dependencies?.[ae]||d.devDependencies?.[ae]||d.peerDependencies?.[ae];try{let Ae=typeof process<"u"&&typeof process.cwd=="function"?process.cwd():"";if(!Ae)throw Error("no-cwd");let lt=bt=>Function("mm","return import(mm)")(bt),[{default:Je},{default:rt}]=await Promise.all([lt("fs/promises"),lt("path")]),Ye=rt.join(Ae,"node_modules",ae,"package.json"),St=await Je.readFile(Ye,"utf-8");return JSON.parse(St).version||await we(ae)||void 0}catch{}return await we(ae)}async function we(ae){let Ae=await oe();if(Ae)return{...Ae.dependencies,...Ae.devDependencies,...Ae.peerDependencies}[ae]}async function Ee(){return(await oe())?.name}let $e={pg:"postgresql",mysql:"mysql",mariadb:"mariadb",sqlite3:"sqlite","better-sqlite3":"sqlite","@prisma/client":"prisma",mongoose:"mongodb",mongodb:"mongodb","drizzle-orm":"drizzle"};async function v(){for(let[ae,Ae]of Object.entries($e)){let lt=await ne(ae);if(lt)return{name:Ae,version:lt}}}let Z={next:"next",nuxt:"nuxt","@remix-run/server-runtime":"remix",astro:"astro","@sveltejs/kit":"sveltekit","solid-start":"solid-start","tanstack-start":"tanstack-start",hono:"hono",express:"express",elysia:"elysia",expo:"expo"};async function R(){for(let[ae,Ae]of Object.entries(Z)){let lt=await ne(ae);if(lt)return{name:Ae,version:lt}}}let S=ae=>Function("mm","return import(mm)")(ae);function E(){let ae=(...Ae)=>Ae.some(lt=>!!a._K[lt]);return ae("CF_PAGES","CF_PAGES_URL","CF_ACCOUNT_ID")||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"?"cloudflare":ae("VERCEL","VERCEL_URL","VERCEL_ENV")?"vercel":ae("NETLIFY","NETLIFY_URL")?"netlify":ae("RENDER","RENDER_URL","RENDER_INTERNAL_HOSTNAME","RENDER_SERVICE_ID")?"render":ae("AWS_LAMBDA_FUNCTION_NAME","AWS_EXECUTION_ENV","LAMBDA_TASK_ROOT")?"aws":ae("GOOGLE_CLOUD_FUNCTION_NAME","GOOGLE_CLOUD_PROJECT","GCP_PROJECT","K_SERVICE")?"gcp":ae("AZURE_FUNCTION_NAME","FUNCTIONS_WORKER_RUNTIME","WEBSITE_INSTANCE_ID","WEBSITE_SITE_NAME")?"azure":ae("DENO_DEPLOYMENT_ID","DENO_REGION")?"deno-deploy":ae("FLY_APP_NAME","FLY_REGION","FLY_ALLOC_ID")?"fly-io":ae("RAILWAY_STATIC_URL","RAILWAY_ENVIRONMENT_NAME")?"railway":ae("DYNO","HEROKU_APP_NAME")?"heroku":ae("DO_DEPLOYMENT_ID","DO_APP_NAME","DIGITALOCEAN")?"digitalocean":ae("KOYEB","KOYEB_DEPLOYMENT_ID","KOYEB_APP_NAME")?"koyeb":null}async function A(){try{if(E()==="cloudflare")return"cloudflare";let ae=await S("os"),Ae=ae.cpus();return{deploymentVendor:E(),systemPlatform:ae.platform(),systemRelease:ae.release(),systemArchitecture:ae.arch(),cpuCount:Ae.length,cpuModel:Ae.length?Ae[0].model:null,cpuSpeed:Ae.length?Ae[0].speed:null,memory:ae.totalmem(),isWSL:await D(),isDocker:await Y(),isTTY:typeof process<"u"&&process.stdout?process.stdout.isTTY:null}}catch{return{systemPlatform:null,systemRelease:null,systemArchitecture:null,cpuCount:null,cpuModel:null,cpuSpeed:null,memory:null,isWSL:null,isDocker:null,isTTY:null}}}async function U(){if(E()==="cloudflare")return!1;try{return(await S("fs")).statSync("/.dockerenv"),!0}catch{return!1}}async function te(){if(E()==="cloudflare")return!1;try{return(await S("fs")).readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}async function Y(){return E()!=="cloudflare"&&(y===void 0&&(y=await U()||await te()),y)}async function D(){try{if(E()==="cloudflare"||typeof process>"u"||process?.platform!=="linux")return!1;let ae=await S("fs");return(await S("os")).release().toLowerCase().includes("microsoft")?!await le():!!ae.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")&&!await le()}catch{return!1}}let ee=async()=>{if(E()==="cloudflare")return!1;try{return(await S("fs")).statSync("/run/.containerenv"),!0}catch{return!1}};async function le(){return h===void 0&&(h=await ee()||await Y()),h}async function se(ae){let Ae=await(0,G.n)("SHA-256").digest(ae);return Q.K.encode(Ae)}let ce=ae=>(0,X.q)("a-z","A-Z","0-9")(ae||32),me=null;async function H(ae){if(me)return me;let Ae=await Ee();return me=Ae?await se(ae?ae+Ae:Ae):ae?await se(ae):ce(32)}let ue=async function(){};async function x(ae,Ae){let lt,Je=ae.telemetry?.debug||(0,a.$F)("BETTER_AUTH_TELEMETRY_DEBUG",!1),rt=a.Km.BETTER_AUTH_TELEMETRY_ENDPOINT;if(!rt&&!Ae?.customTrack)return{publish:ue};let Ye=async qe=>{Ae?.customTrack?await Ae.customTrack(qe).catch(a.vF.error):rt&&(Je?a.vF.info("telemetry event",JSON.stringify(qe,null,2)):await(0,F.zZ)(rt,{method:"POST",body:qe}).catch(a.vF.error))},St=async()=>{let qe=ae.telemetry?.enabled!==void 0&&ae.telemetry.enabled;return((0,a.$F)("BETTER_AUTH_TELEMETRY",!1)||qe)&&(Ae?.skipTestCheck||!(0,a.Nu)())},bt=await St();return bt&&(lt=await H(ae.baseURL),Ye({type:"init",payload:{config:{database:Ae?.database,adapter:Ae?.adapter,emailVerification:{sendVerificationEmail:!!ae.emailVerification?.sendVerificationEmail,sendOnSignUp:!!ae.emailVerification?.sendOnSignUp,sendOnSignIn:!!ae.emailVerification?.sendOnSignIn,autoSignInAfterVerification:!!ae.emailVerification?.autoSignInAfterVerification,expiresIn:ae.emailVerification?.expiresIn,onEmailVerification:!!ae.emailVerification?.onEmailVerification,afterEmailVerification:!!ae.emailVerification?.afterEmailVerification},emailAndPassword:{enabled:!!ae.emailAndPassword?.enabled,disableSignUp:!!ae.emailAndPassword?.disableSignUp,requireEmailVerification:!!ae.emailAndPassword?.requireEmailVerification,maxPasswordLength:ae.emailAndPassword?.maxPasswordLength,minPasswordLength:ae.emailAndPassword?.minPasswordLength,sendResetPassword:!!ae.emailAndPassword?.sendResetPassword,resetPasswordTokenExpiresIn:ae.emailAndPassword?.resetPasswordTokenExpiresIn,onPasswordReset:!!ae.emailAndPassword?.onPasswordReset,password:{hash:!!ae.emailAndPassword?.password?.hash,verify:!!ae.emailAndPassword?.password?.verify},autoSignIn:!!ae.emailAndPassword?.autoSignIn,revokeSessionsOnPasswordReset:!!ae.emailAndPassword?.revokeSessionsOnPasswordReset},socialProviders:Object.keys(ae.socialProviders||{}).map(qe=>{let re=ae.socialProviders?.[qe];return re?{id:qe,mapProfileToUser:!!re.mapProfileToUser,disableDefaultScope:!!re.disableDefaultScope,disableIdTokenSignIn:!!re.disableIdTokenSignIn,disableImplicitSignUp:re.disableImplicitSignUp,disableSignUp:re.disableSignUp,getUserInfo:!!re.getUserInfo,overrideUserInfoOnSignIn:!!re.overrideUserInfoOnSignIn,prompt:re.prompt,verifyIdToken:!!re.verifyIdToken,scope:re.scope,refreshAccessToken:!!re.refreshAccessToken}:{}}),plugins:ae.plugins?.map(qe=>qe.id.toString()),user:{modelName:ae.user?.modelName,fields:ae.user?.fields,additionalFields:ae.user?.additionalFields,changeEmail:{enabled:ae.user?.changeEmail?.enabled,sendChangeEmailVerification:!!ae.user?.changeEmail?.sendChangeEmailVerification}},verification:{modelName:ae.verification?.modelName,disableCleanup:ae.verification?.disableCleanup,fields:ae.verification?.fields},session:{modelName:ae.session?.modelName,additionalFields:ae.session?.additionalFields,cookieCache:{enabled:ae.session?.cookieCache?.enabled,maxAge:ae.session?.cookieCache?.maxAge,strategy:ae.session?.cookieCache?.strategy},disableSessionRefresh:ae.session?.disableSessionRefresh,expiresIn:ae.session?.expiresIn,fields:ae.session?.fields,freshAge:ae.session?.freshAge,preserveSessionInDatabase:ae.session?.preserveSessionInDatabase,storeSessionInDatabase:ae.session?.storeSessionInDatabase,updateAge:ae.session?.updateAge},account:{modelName:ae.account?.modelName,fields:ae.account?.fields,encryptOAuthTokens:ae.account?.encryptOAuthTokens,updateAccountOnSignIn:ae.account?.updateAccountOnSignIn,accountLinking:{enabled:ae.account?.accountLinking?.enabled,trustedProviders:ae.account?.accountLinking?.trustedProviders,updateUserInfoOnLink:ae.account?.accountLinking?.updateUserInfoOnLink,allowUnlinkingAll:ae.account?.accountLinking?.allowUnlinkingAll}},hooks:{after:!!ae.hooks?.after,before:!!ae.hooks?.before},secondaryStorage:!!ae.secondaryStorage,advanced:{cookiePrefix:!!ae.advanced?.cookiePrefix,cookies:!!ae.advanced?.cookies,crossSubDomainCookies:{domain:!!ae.advanced?.crossSubDomainCookies?.domain,enabled:ae.advanced?.crossSubDomainCookies?.enabled,additionalCookies:ae.advanced?.crossSubDomainCookies?.additionalCookies},database:{useNumberId:!!ae.advanced?.database?.useNumberId||ae.advanced?.database?.generateId==="serial",generateId:ae.advanced?.database?.generateId,defaultFindManyLimit:ae.advanced?.database?.defaultFindManyLimit},useSecureCookies:ae.advanced?.useSecureCookies,ipAddress:{disableIpTracking:ae.advanced?.ipAddress?.disableIpTracking,ipAddressHeaders:ae.advanced?.ipAddress?.ipAddressHeaders},disableCSRFCheck:ae.advanced?.disableCSRFCheck,cookieAttributes:{expires:ae.advanced?.defaultCookieAttributes?.expires,secure:ae.advanced?.defaultCookieAttributes?.secure,sameSite:ae.advanced?.defaultCookieAttributes?.sameSite,domain:!!ae.advanced?.defaultCookieAttributes?.domain,path:ae.advanced?.defaultCookieAttributes?.path,httpOnly:ae.advanced?.defaultCookieAttributes?.httpOnly}},trustedOrigins:ae.trustedOrigins?.length,rateLimit:{storage:ae.rateLimit?.storage,modelName:ae.rateLimit?.modelName,window:ae.rateLimit?.window,customStorage:!!ae.rateLimit?.customStorage,enabled:ae.rateLimit?.enabled,max:ae.rateLimit?.max},onAPIError:{errorURL:ae.onAPIError?.errorURL,onError:!!ae.onAPIError?.onError,throw:ae.onAPIError?.throw},logger:{disabled:ae.logger?.disabled,level:ae.logger?.level,log:!!ae.logger?.log},databaseHooks:{user:{create:{after:!!ae.databaseHooks?.user?.create?.after,before:!!ae.databaseHooks?.user?.create?.before},update:{after:!!ae.databaseHooks?.user?.update?.after,before:!!ae.databaseHooks?.user?.update?.before}},session:{create:{after:!!ae.databaseHooks?.session?.create?.after,before:!!ae.databaseHooks?.session?.create?.before},update:{after:!!ae.databaseHooks?.session?.update?.after,before:!!ae.databaseHooks?.session?.update?.before}},account:{create:{after:!!ae.databaseHooks?.account?.create?.after,before:!!ae.databaseHooks?.account?.create?.before},update:{after:!!ae.databaseHooks?.account?.update?.after,before:!!ae.databaseHooks?.account?.update?.before}},verification:{create:{after:!!ae.databaseHooks?.verification?.create?.after,before:!!ae.databaseHooks?.verification?.create?.before},update:{after:!!ae.databaseHooks?.verification?.update?.after,before:!!ae.databaseHooks?.verification?.update?.before}}}},runtime:typeof Deno<"u"?{name:"deno",version:Deno?.version?.deno??null}:typeof Bun<"u"?{name:"bun",version:Bun?.version??null}:typeof process<"u"&&process?.versions?.node?{name:"node",version:process.versions.node??null}:{name:"edge",version:null},database:await v(),framework:await R(),environment:(0,a.lh)("NODE_ENV")==="production"?"production":a._K.CI!=="false"&&("BUILD_ID"in a._K||"BUILD_NUMBER"in a._K||"CI"in a._K||"CI_APP_ID"in a._K||"CI_BUILD_ID"in a._K||"CI_BUILD_NUMBER"in a._K||"CI_NAME"in a._K||"CONTINUOUS_INTEGRATION"in a._K||"RUN_ID"in a._K)?"ci":(0,a.Nu)()?"test":"development",systemInfo:await A(),packageManager:function(){let qe=a._K.npm_config_user_agent;if(!qe)return;let re=qe.split(" ")[0],We=re.lastIndexOf("/"),ut=re.substring(0,We);return{name:ut==="npminstall"?"cnpm":ut,version:re.substring(We+1)}}()},anonymousId:lt})),{publish:async qe=>{bt&&(lt||(lt=await H(ae.baseURL)),await Ye({type:qe.type,payload:qe.payload,anonymousId:lt}))}}}async function fe(ae,Ae,lt){var Je;let rt;Ae.database||(Ae=(0,V.Ay)(Ae,{session:{cookieCache:{enabled:!0,strategy:"jwe",refreshCache:!0}},account:{storeStateStrategy:"cookie",storeAccountCookie:!0}}));let Ye=Ae.plugins||[],St=(Je=Ae,Je.advanced?.crossSubDomainCookies?.enabled,[]),bt=(0,a.h)(Ae.logger),qe=(0,K.vo)(Ae.baseURL,Ae.basePath);qe||bt.warn("[better-auth] Base URL could not be determined. Please set a valid base URL using the baseURL config option or the BETTER_AUTH_BASE_URL environment variable. Without this, callbacks and redirects may not work correctly."),ae.id==="memory"&&Ae.advanced?.database?.generateId===!1&&bt.error(`[better-auth] Misconfiguration detected.
You are using the memory DB with generateId: false.
This will cause no id to be generated for any model.
Most of the features of Better Auth will not work correctly.`);let re=Ae.secret||a._K.BETTER_AUTH_SECRET||a._K.AUTH_SECRET||J;(function(yt,ct){let vt=yt===J;if(!(0,a.Nu)()){if(vt&&a.KV)throw new P.$("You are using the default secret. Please set `BETTER_AUTH_SECRET` in your environment variables or pass `secret` in your auth config.");if(!yt)throw new P.$("BETTER_AUTH_SECRET is missing. Set it in your environment or pass `secret` to betterAuth({ secret }).");yt.length<32&&ct.warn("[better-auth] Warning: your BETTER_AUTH_SECRET should be at least 32 characters long for adequate security. Generate one with `npx @better-auth/cli secret` or `openssl rand -base64 32`."),120>function(Ut){let nr=new Set(Ut).size;return nr===0?0:Math.log2(Math.pow(nr,Ut.length))}(yt)&&ct.warn("[better-auth] Warning: your BETTER_AUTH_SECRET appears low-entropy. Use a randomly generated secret for production.")}})(re,bt),Ae={...Ae,secret:re,baseURL:qe?new URL(qe).origin:"",basePath:Ae.basePath||"/api/auth",plugins:Ye.concat(St)},(0,c.fv)(Ae,bt);let We=(0,m.OR)(Ae),ut=(0,N.getAuthTables)(Ae),kt=Object.entries(Ae.socialProviders||{}).map(([yt,ct])=>{if(ct==null||ct.enabled===!1)return null;ct.clientId||bt.warn(`Social provider ${yt} is missing clientId or clientSecret`);let vt=z.GY[yt](ct);return vt.disableImplicitSignUp=ct.disableImplicitSignUp,vt}).filter(yt=>yt!==null),Ct=({model:yt,size:ct})=>{if(typeof Ae.advanced?.generateId=="function")return Ae.advanced.generateId({model:yt,size:ct});let vt=Ae?.advanced?.database?.generateId;return typeof vt=="function"?vt({model:yt,size:ct}):vt==="uuid"?crypto.randomUUID():vt!=="serial"&&vt!==!1&&(0,s.$)(ct)},{publish:tt}=await x(Ae,{adapter:ae.id,database:typeof Ae.database=="function"?"adapter":lt(Ae.database)}),Ot=await L(Ae),Wt=C({appName:Ae.appName||"Better Auth",baseURL:qe||"",version:(0,k.HX)(),socialProviders:kt,options:Ae,oauthConfig:{storeStateStrategy:Ae.account?.storeStateStrategy||(Ae.database?"database":"cookie"),skipStateCookieCheck:!!Ae.account?.skipStateCookieCheck},tables:ut,trustedOrigins:Ot,isTrustedOrigin(yt,ct){return this.trustedOrigins.some(vt=>(0,I.Q)(yt,vt,ct))},sessionConfig:{updateAge:Ae.session?.updateAge!==void 0?Ae.session.updateAge:86400,expiresIn:Ae.session?.expiresIn||604800,freshAge:Ae.session?.freshAge===void 0?86400:Ae.session.freshAge,cookieRefreshCache:(()=>{let yt=Ae.session?.cookieCache?.refreshCache,ct=Ae.session?.cookieCache?.maxAge||300;return(Ae.database||Ae.secondaryStorage)&&yt?(bt.warn("[better-auth] `session.cookieCache.refreshCache` is enabled while `database` or `secondaryStorage` is configured. `refreshCache` is meant for stateless (DB-less) setups. Disabling `refreshCache` \u2014 remove it from your config to silence this warning."),!1):yt!==!1&&yt!==void 0&&(yt===!0?{enabled:!0,updateAge:Math.floor(.2*ct)}:{enabled:!0,updateAge:yt.updateAge!==void 0?yt.updateAge:Math.floor(.2*ct)})})()},secret:re,rateLimit:{...Ae.rateLimit,enabled:Ae.rateLimit?.enabled??a.KV,window:Ae.rateLimit?.window||10,max:Ae.rateLimit?.max||100,storage:Ae.rateLimit?.storage||(Ae.secondaryStorage?"secondary-storage":"memory")},authCookies:We,logger:bt,generateId:Ct,session:null,secondaryStorage:Ae.secondaryStorage,password:{hash:Ae.emailAndPassword?.password?.hash||p.E,verify:Ae.emailAndPassword?.password?.verify||p.B,config:{minPasswordLength:Ae.emailAndPassword?.minPasswordLength||8,maxPasswordLength:Ae.emailAndPassword?.maxPasswordLength||128},checkPassword:q.O},setNewSession(yt){this.newSession=yt},newSession:null,adapter:ae,internalAdapter:(0,W.t)(ae,{options:Ae,logger:bt,hooks:Ae.databaseHooks?[Ae.databaseHooks]:[],generateId:Ct}),createAuthCookie:(0,m.a6)(Ae),async runMigrations(){throw new P.$("runMigrations will be set by the specific init implementation")},publishTelemetry:tt,skipCSRFCheck:!!Ae.advanced?.disableCSRFCheck,skipOriginCheck:Ae.advanced?.disableOriginCheck!==void 0?Ae.advanced.disableOriginCheck:!!(0,a.Nu)(),runInBackground:Ae.advanced?.backgroundTasks?.handler??(yt=>{yt.catch(()=>{})}),async runInBackgroundOrAwait(yt){try{Ae.advanced?.backgroundTasks?.handler?yt instanceof Promise&&Ae.advanced.backgroundTasks.handler(yt.catch(ct=>{bt.error("Failed to run background task:",ct)})):await yt}catch(ct){bt.error("Failed to run background task:",ct)}},getPlugin:yt=>Ae.plugins.find(ct=>ct.id===yt)??null});return(0,_.y)(Wt)?{context:rt}=await Wt:{context:rt}=Wt,typeof rt.options.emailVerification?.onEmailVerification=="function"&&(rt.options.emailVerification.onEmailVerification=(0,b.CI)(rt.options.emailVerification.onEmailVerification,"Use `afterEmailVerification` instead. This will be removed in 1.5",rt.logger)),rt}let ge=async ae=>{let Ae=await(0,j.c)(ae),lt=await fe(Ae,ae,Je=>(0,O.d)(Je)||"unknown");return lt.runMigrations=async function(){if(!ae.database||"updateMany"in ae.database)throw new P.$("Database is not provided or it's an adapter. Migrations are only supported with a database instance.");let{runMigrations:Je}=await(0,$.A)(ae);await Je()},lt},Se=(ae,Ae)=>{let lt=Ae(ae),{api:Je}=(0,c.z8)(lt,ae);return{handler:async rt=>{let Ye=await lt,St=Ye.options.basePath||"/api/auth";if(!Ye.options.baseURL){let qe=(0,K.vo)(void 0,St,rt,void 0,Ye.options.advanced?.trustedProxyHeaders);if(qe)Ye.baseURL=qe,Ye.options.baseURL=(0,K.$z)(Ye.baseURL)||void 0;else throw new P.$("Could not get base URL from request. Please provide a valid base URL.")}Ye.trustedOrigins=await L(Ye.options,rt);let{handler:bt}=(0,c.QB)(Ye,ae);return(0,k.vp)(Ye.adapter,()=>bt(rt))},api:Je,options:ae,$context:lt,$ERROR_CODES:{...ae.plugins?.reduce((rt,Ye)=>Ye.$ERROR_CODES?{...rt,...Ye.$ERROR_CODES}:rt,{}),...P.q}}},Re=ae=>Se(ae,ge);o(31878)},Le.__chunk_51016=(Ue,ie,o)=>{"use strict";o.d(ie,{u:()=>d});let d={encode:y=>{if(typeof y=="string"&&(y=new TextEncoder().encode(y)),y.byteLength===0)return"";let h=new Uint8Array(y),i="";for(let s of h)i+=s.toString(16).padStart(2,"0");return i},decode:y=>{if(!y)return"";if(typeof y=="string"){if(y.length%2!=0||!RegExp("^[0123456789abcdef]+$").test(y))throw Error("Invalid hexadecimal string");let h=new Uint8Array(y.length/2);for(let i=0;i<y.length;i+=2)h[i/2]=parseInt(y.slice(i,i+2),16);return new TextDecoder().decode(h)}return new TextDecoder().decode(y)}}},Le.__chunk_50426=(Ue,ie,o)=>{"use strict";o.d(ie,{k:()=>d});let d=(0,o(83504).q)("a-z","0-9","A-Z","-_")},Le.__chunk_48981=(Ue,ie,o)=>{"use strict";o.d(ie,{t:()=>O});var d=o(47121),y=o(26151),h=o(12821),i=o(56715),s=o(13015),c=o(99597);let O=(j,$)=>{let W=$.logger,K=$.options,I=K.secondaryStorage,p=K.session?.expiresIn||604800,{createWithHooks:_,updateWithHooks:m,updateManyWithHooks:q,deleteWithHooks:J,deleteManyWithHooks:a}=(0,i.L)(j,$);async function V(C){if(!I)return;let L=await I.get(`active-sessions-${C.id}`);if(!L)return;let k=Date.now(),N=((0,c.$l)(L)||[]).filter(P=>P.expiresAt>k);await Promise.all(N.map(async({token:P})=>{let b=await I.get(P);if(!b)return;let z=(0,c.$l)(b);if(!z)return;let F=Math.max(Math.floor(new Date(z.session.expiresAt).getTime()-k)/1e3,0);await I.set(P,JSON.stringify({session:z.session,user:C}),Math.floor(F))}))}return{createOAuthUser:async(C,L)=>(0,s.iD)(j,async()=>{let k=await _({createdAt:new Date,updatedAt:new Date,...C},"user",void 0);return{user:k,account:await _({...L,userId:k.id,createdAt:new Date,updatedAt:new Date},"account",void 0)}}),createUser:async C=>await _({createdAt:new Date,updatedAt:new Date,...C,email:C.email?.toLowerCase()},"user",void 0),createAccount:async C=>await _({createdAt:new Date,updatedAt:new Date,...C},"account",void 0),listSessions:async C=>{if(I){let L=await I.get(`active-sessions-${C}`);if(!L)return[];let k=(0,c.$l)(L)||[],N=Date.now(),P=new Set,b=[];for(let{token:z,expiresAt:F}of k){if(F<=N||P.has(z))continue;P.add(z);let Q=await I.get(z);if(Q)try{let G=typeof Q=="string"?JSON.parse(Q):Q;if(!G?.session)continue;b.push((0,h.dc)($.options,{...G.session,expiresAt:new Date(G.session.expiresAt)}))}catch{continue}}return b}return await(await(0,s.d3)(j)).findMany({model:"session",where:[{field:"userId",value:C}]})},listUsers:async(C,L,k,N)=>await(await(0,s.d3)(j)).findMany({model:"user",limit:C,offset:L,sortBy:k,where:N}),countTotalUsers:async C=>{let L=await(await(0,s.d3)(j)).count({model:"user",where:C});return typeof L=="string"?parseInt(L):L},deleteUser:async C=>{(!I||K.session?.storeSessionInDatabase)&&await a([{field:"userId",value:C}],"session",void 0),await a([{field:"userId",value:C}],"account",void 0),await J([{field:"id",value:C}],"user",void 0)},createSession:async(C,L,k,N)=>{let P=await(0,s.xA)().catch(()=>null),b=P?.headers||P?.request?.headers,{id:z,...F}=k||{},Q=(0,h.Mn)(P?.context.options??K,{}),G={ipAddress:(P?.request||P?.headers)&&(0,y.O)(P?.request||P?.headers,P?.context.options)||"",userAgent:b?.get("user-agent")||"",...F,expiresAt:L?(0,d.p)(86400,"sec"):(0,d.p)(p,"sec"),userId:C,token:(0,c.$C)(32),createdAt:new Date,updatedAt:new Date,...Q,...N?F:{}};return await _(G,"session",I?{fn:async X=>{let oe=await I.get(`active-sessions-${C}`),ne=[],we=Date.now();oe&&(ne=(ne=(0,c.$l)(oe)||[]).filter(R=>R.expiresAt>we&&R.token!==G.token));let Ee=[...ne,{token:G.token,expiresAt:G.expiresAt.getTime()}].sort((R,S)=>R.expiresAt-S.expiresAt),$e=Math.max(Math.floor(((Ee.at(-1)?.expiresAt??G.expiresAt.getTime())-we)/1e3),0);$e>0&&await I.set(`active-sessions-${C}`,JSON.stringify(Ee),$e);let v=await j.findOne({model:"user",where:[{field:"id",value:C}]}),Z=Math.max(Math.floor((G.expiresAt.getTime()-we)/1e3),0);return Z>0&&await I.set(G.token,JSON.stringify({session:X,user:v}),Z),X},executeMainFn:K.session?.storeSessionInDatabase}:void 0)},findSession:async C=>{if(I){let P=await I.get(C);if(!P&&!K.session?.storeSessionInDatabase)return null;if(P){let b=(0,c.$l)(P);return b?{session:(0,h.dc)($.options,{...b.session,expiresAt:new Date(b.session.expiresAt),createdAt:new Date(b.session.createdAt),updatedAt:new Date(b.session.updatedAt)}),user:(0,h.kc)($.options,{...b.user,createdAt:new Date(b.user.createdAt),updatedAt:new Date(b.user.updatedAt)})}:null}}let L=await(await(0,s.d3)(j)).findOne({model:"session",where:[{value:C,field:"token"}],join:{user:!0}});if(!L)return null;let{user:k,...N}=L;return k?{session:(0,h.dc)($.options,N),user:(0,h.kc)($.options,k)}:null},findSessions:async C=>{if(I){let k=[];for(let N of C){let P=await I.get(N);if(P)try{let b=typeof P=="string"?JSON.parse(P):P;if(!b?.session)continue;let z={session:{...b.session,expiresAt:new Date(b.session.expiresAt)},user:{...b.user,createdAt:new Date(b.user.createdAt),updatedAt:new Date(b.user.updatedAt)}};k.push(z)}catch{continue}}return k}let L=await(await(0,s.d3)(j)).findMany({model:"session",where:[{field:"token",value:C,operator:"in"}],join:{user:!0}});return!L.length||L.some(k=>!k.user)?[]:L.map(k=>{let{user:N,...P}=k;return{session:P,user:N}})},updateSession:async(C,L)=>await m(L,[{field:"token",value:C}],"session",I?{async fn(k){let N=await I.get(C);if(!N)return null;let P=(0,c.$l)(N);if(!P)return null;let b={...P.session,...k,expiresAt:new Date(k.expiresAt??P.session.expiresAt),createdAt:new Date(P.session.createdAt),updatedAt:new Date(k.updatedAt??P.session.updatedAt)},z=(0,h.dc)($.options,b),F=Date.now(),Q=new Date(z.expiresAt).getTime(),G=Math.max(Math.floor((Q-F)/1e3),0);if(G>0){await I.set(C,JSON.stringify({session:z,user:P.user}),G);let X=`active-sessions-${z.userId}`,oe=await I.get(X),ne=(oe&&(0,c.$l)(oe)||[]).filter(Ee=>Ee.token!==C&&Ee.expiresAt>F).concat([{token:C,expiresAt:Q}]).sort((Ee,$e)=>Ee.expiresAt-$e.expiresAt),we=ne.at(-1)?.expiresAt;we&&we>F?await I.set(X,JSON.stringify(ne),Math.floor((we-F)/1e3)):await I.delete(X)}return z},executeMainFn:K.session?.storeSessionInDatabase}:void 0),deleteSession:async C=>{if(I){let L=await I.get(C);if(L){let{session:k}=(0,c.$l)(L)??{};if(!k){W.error("Session not found in secondary storage");return}let N=k.userId,P=await I.get(`active-sessions-${N}`);if(P){let b=(0,c.$l)(P)||[],z=Date.now(),F=b.filter(G=>G.expiresAt>z&&G.token!==C),Q=F.sort((G,X)=>G.expiresAt-X.expiresAt).at(-1)?.expiresAt;F.length>0&&Q&&Q>Date.now()?await I.set(`active-sessions-${N}`,JSON.stringify(F),Math.floor((Q-z)/1e3)):await I.delete(`active-sessions-${N}`)}else W.error("Active sessions list not found in secondary storage")}if(await I.delete(C),!K.session?.storeSessionInDatabase||$.options.session?.preserveSessionInDatabase)return}await J([{field:"token",value:C}],"session",void 0)},deleteAccounts:async C=>{await a([{field:"userId",value:C}],"account",void 0)},deleteAccount:async C=>{await J([{field:"id",value:C}],"account",void 0)},deleteSessions:async C=>{if(I){if(typeof C=="string"){let L=await I.get(`active-sessions-${C}`),k=L?(0,c.$l)(L):[];if(!k)return;for(let N of k)await I.delete(N.token);await I.delete(`active-sessions-${C}`)}else for(let L of C)await I.get(L)&&await I.delete(L);if(!K.session?.storeSessionInDatabase||$.options.session?.preserveSessionInDatabase)return}await a([{field:Array.isArray(C)?"token":"userId",value:C,operator:Array.isArray(C)?"in":void 0}],"session",void 0)},findOAuthUser:async(C,L,k)=>{let N=await(await(0,s.d3)(j)).findOne({model:"account",where:[{value:L,field:"accountId"},{value:k,field:"providerId"}],join:{user:!0}});if(N){if(N.user)return{user:N.user,linkedAccount:N,accounts:[N]};{let P=await(await(0,s.d3)(j)).findOne({model:"user",where:[{value:C.toLowerCase(),field:"email"}]});return P?{user:P,linkedAccount:N,accounts:[N]}:null}}{let P=await(await(0,s.d3)(j)).findOne({model:"user",where:[{value:C.toLowerCase(),field:"email"}]});return P?{user:P,linkedAccount:null,accounts:await(await(0,s.d3)(j)).findMany({model:"account",where:[{value:P.id,field:"userId"}]})||[]}:null}},findUserByEmail:async(C,L)=>{let k=await(await(0,s.d3)(j)).findOne({model:"user",where:[{value:C.toLowerCase(),field:"email"}],join:{...L?.includeAccounts?{account:!0}:{}}});if(!k)return null;let{account:N,...P}=k;return{user:P,accounts:N??[]}},findUserById:async C=>C?await(await(0,s.d3)(j)).findOne({model:"user",where:[{field:"id",value:C}]}):null,linkAccount:async C=>await _({createdAt:new Date,updatedAt:new Date,...C},"account",void 0),updateUser:async(C,L)=>{let k=await m(L,[{field:"id",value:C}],"user",void 0);return await V(k),k},updateUserByEmail:async(C,L)=>{let k=await m(L,[{field:"email",value:C.toLowerCase()}],"user",void 0);return await V(k),k},updatePassword:async(C,L)=>{await q({password:L},[{field:"userId",value:C},{field:"providerId",value:"credential"}],"account",void 0)},findAccounts:async C=>await(await(0,s.d3)(j)).findMany({model:"account",where:[{field:"userId",value:C}]}),findAccount:async C=>await(await(0,s.d3)(j)).findOne({model:"account",where:[{field:"accountId",value:C}]}),findAccountByProviderId:async(C,L)=>await(await(0,s.d3)(j)).findOne({model:"account",where:[{field:"accountId",value:C},{field:"providerId",value:L}]}),findAccountByUserId:async C=>await(await(0,s.d3)(j)).findMany({model:"account",where:[{field:"userId",value:C}]}),updateAccount:async(C,L)=>await m(L,[{field:"id",value:C}],"account",void 0),createVerificationValue:async C=>await _({createdAt:new Date,updatedAt:new Date,...C},"verification",void 0),findVerificationValue:async C=>{let L=await(await(0,s.d3)(j)).findMany({model:"verification",where:[{field:"identifier",value:C}],sortBy:{field:"createdAt",direction:"desc"},limit:1});return K.verification?.disableCleanup||await a([{field:"expiresAt",value:new Date,operator:"lt"}],"verification",void 0),L[0]},deleteVerificationValue:async C=>{await J([{field:"id",value:C}],"verification",void 0)},deleteVerificationByIdentifier:async C=>{await J([{field:"identifier",value:C}],"verification",void 0)},updateVerificationValue:async(C,L)=>await m(L,[{field:"id",value:C}],"verification",void 0)}}},Le.__chunk_48582=(Ue,ie,o)=>{"use strict";o.d(ie,{c:()=>F});var d=o(93692),y=o(26772);let h=(0,y.CN)({is:G=>G.kind==="SelectModifierNode",create:(G,X)=>(0,y.CN)({kind:"SelectModifierNode",modifier:G,of:X}),createWithExpression:G=>(0,y.CN)({kind:"SelectModifierNode",rawModifier:G})});var i=o(93048),s=o(7286),c=o(82057),O=o(66557),j=o(63440),$=o(28227),W=o(19598),K=o(7757);let I=(0,y.CN)({is:G=>G.kind==="OffsetNode",create:G=>(0,y.CN)({kind:"OffsetNode",offset:G})}),p=(0,y.CN)({is:G=>G.kind==="GroupByItemNode",create:G=>(0,y.CN)({kind:"GroupByItemNode",groupBy:G})});var _=o(55096),m=o(64683),q=o(9789),J=o(12308),a=o(80282);function V(G,X,oe){return(0,y.Tn)(X)&&(X=X((0,_.O)())),(0,y.MH)(X)||(X=[X]),X.map(ne=>J.i.create(G,(0,a.YK)(ne),oe))}var C=o(34395),L=o(30145),k=o(89709),N=o(72391);let P=(0,y.CN)({is:G=>G.kind==="FetchNode",create:(G,X)=>({kind:"FetchNode",rowCount:N.q.create(G),modifier:X})});var b=o(98686);class z{#e;constructor(X){this.#e=(0,y.CN)(X)}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...X){return new z({...this.#e,queryNode:$.L.cloneWithWhere(this.#e.queryNode,(0,C.GB)(X))})}whereRef(X,oe,ne){return new z({...this.#e,queryNode:$.L.cloneWithWhere(this.#e.queryNode,(0,C.vC)(X,oe,ne))})}having(...X){return new z({...this.#e,queryNode:j.L.cloneWithHaving(this.#e.queryNode,(0,C.GB)(X))})}havingRef(X,oe,ne){return new z({...this.#e,queryNode:j.L.cloneWithHaving(this.#e.queryNode,(0,C.vC)(X,oe,ne))})}select(X){return new z({...this.#e,queryNode:j.L.cloneWithSelections(this.#e.queryNode,(0,c.G)(X))})}distinctOn(X){return new z({...this.#e,queryNode:j.L.cloneWithDistinctOn(this.#e.queryNode,(0,O.kU)(X))})}modifyFront(X){return new z({...this.#e,queryNode:j.L.cloneWithFrontModifier(this.#e.queryNode,h.createWithExpression(X.toOperationNode()))})}modifyEnd(X){return new z({...this.#e,queryNode:$.L.cloneWithEndModifier(this.#e.queryNode,h.createWithExpression(X.toOperationNode()))})}distinct(){return new z({...this.#e,queryNode:j.L.cloneWithFrontModifier(this.#e.queryNode,h.create("Distinct"))})}forUpdate(X){return new z({...this.#e,queryNode:$.L.cloneWithEndModifier(this.#e.queryNode,h.create("ForUpdate",X?(0,y._j)(X).map(s.M$):void 0))})}forShare(X){return new z({...this.#e,queryNode:$.L.cloneWithEndModifier(this.#e.queryNode,h.create("ForShare",X?(0,y._j)(X).map(s.M$):void 0))})}forKeyShare(X){return new z({...this.#e,queryNode:$.L.cloneWithEndModifier(this.#e.queryNode,h.create("ForKeyShare",X?(0,y._j)(X).map(s.M$):void 0))})}forNoKeyUpdate(X){return new z({...this.#e,queryNode:$.L.cloneWithEndModifier(this.#e.queryNode,h.create("ForNoKeyUpdate",X?(0,y._j)(X).map(s.M$):void 0))})}skipLocked(){return new z({...this.#e,queryNode:$.L.cloneWithEndModifier(this.#e.queryNode,h.create("SkipLocked"))})}noWait(){return new z({...this.#e,queryNode:$.L.cloneWithEndModifier(this.#e.queryNode,h.create("NoWait"))})}selectAll(X){return new z({...this.#e,queryNode:j.L.cloneWithSelections(this.#e.queryNode,(0,c.J)(X))})}innerJoin(...X){return this.#t("InnerJoin",X)}leftJoin(...X){return this.#t("LeftJoin",X)}rightJoin(...X){return this.#t("RightJoin",X)}fullJoin(...X){return this.#t("FullJoin",X)}crossJoin(...X){return this.#t("CrossJoin",X)}innerJoinLateral(...X){return this.#t("LateralInnerJoin",X)}leftJoinLateral(...X){return this.#t("LateralLeftJoin",X)}crossJoinLateral(...X){return this.#t("LateralCrossJoin",X)}crossApply(...X){return this.#t("CrossApply",X)}outerApply(...X){return this.#t("OuterApply",X)}#t(X,oe){return new z({...this.#e,queryNode:$.L.cloneWithJoin(this.#e.queryNode,(0,i.a)(X,oe))})}orderBy(...X){return new z({...this.#e,queryNode:$.L.cloneWithOrderByItems(this.#e.queryNode,(0,W.xk)(X))})}groupBy(X){var oe;return new z({...this.#e,queryNode:j.L.cloneWithGroupByItems(this.#e.queryNode,(oe=X,oe=(0,y.Tn)(oe)?oe((0,_.A)()):oe,(0,O.kU)(oe).map(p.create)))})}limit(X){return new z({...this.#e,queryNode:j.L.cloneWithLimit(this.#e.queryNode,K.a.create((0,k.$s)(X)))})}offset(X){return new z({...this.#e,queryNode:j.L.cloneWithOffset(this.#e.queryNode,I.create((0,k.$s)(X)))})}fetch(X,oe="only"){return new z({...this.#e,queryNode:j.L.cloneWithFetch(this.#e.queryNode,function(ne,we){var Ee;if(!(0,y.Et)(ne)&&!(0,y.sI)(ne))throw Error(`Invalid fetch row count: ${ne}`);if((Ee=we)!=="only"&&Ee!=="with ties")throw Error(`Invalid fetch modifier: ${we}`);return P.create(ne,we)}(X,oe))})}top(X,oe){return new z({...this.#e,queryNode:$.L.cloneWithTop(this.#e.queryNode,(0,b.f)(X,oe))})}union(X){return new z({...this.#e,queryNode:j.L.cloneWithSetOperations(this.#e.queryNode,V("union",X,!1))})}unionAll(X){return new z({...this.#e,queryNode:j.L.cloneWithSetOperations(this.#e.queryNode,V("union",X,!0))})}intersect(X){return new z({...this.#e,queryNode:j.L.cloneWithSetOperations(this.#e.queryNode,V("intersect",X,!1))})}intersectAll(X){return new z({...this.#e,queryNode:j.L.cloneWithSetOperations(this.#e.queryNode,V("intersect",X,!0))})}except(X){return new z({...this.#e,queryNode:j.L.cloneWithSetOperations(this.#e.queryNode,V("except",X,!1))})}exceptAll(X){return new z({...this.#e,queryNode:j.L.cloneWithSetOperations(this.#e.queryNode,V("except",X,!0))})}as(X){return new Q(this,X)}clearSelect(){return new z({...this.#e,queryNode:j.L.cloneWithoutSelections(this.#e.queryNode)})}clearWhere(){return new z({...this.#e,queryNode:$.L.cloneWithoutWhere(this.#e.queryNode)})}clearLimit(){return new z({...this.#e,queryNode:j.L.cloneWithoutLimit(this.#e.queryNode)})}clearOffset(){return new z({...this.#e,queryNode:j.L.cloneWithoutOffset(this.#e.queryNode)})}clearOrderBy(){return new z({...this.#e,queryNode:$.L.cloneWithoutOrderBy(this.#e.queryNode)})}clearGroupBy(){return new z({...this.#e,queryNode:j.L.cloneWithoutGroupBy(this.#e.queryNode)})}$call(X){return X(this)}$if(X,oe){return X?oe(this):new z({...this.#e})}$castTo(){return new z(this.#e)}$narrowType(){return new z(this.#e)}$assertType(){return new z(this.#e)}$asTuple(){return new L.Is(this.toOperationNode())}$asScalar(){return new L.Is(this.toOperationNode())}withPlugin(X){return new z({...this.#e,executor:this.#e.executor.withPlugin(X)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let X=this.compile();return(await this.#e.executor.executeQuery(X)).rows}async executeTakeFirst(){let[X]=await this.execute();return X}async executeTakeFirstOrThrow(X=m.F){let oe=await this.executeTakeFirst();if(oe===void 0)throw(0,m.x)(X)?new X(this.toOperationNode()):X(this.toOperationNode());return oe}async*stream(X=100){let oe=this.compile();for await(let ne of this.#e.executor.stream(oe,X))yield*ne.rows}async explain(X,oe){return await new z({...this.#e,queryNode:$.L.cloneWithExplain(this.#e.queryNode,X,oe)}).execute()}}function F(G){return new z(G)}class Q{#e;#t;constructor(X,oe){this.#e=X,this.#t=oe}get expression(){return this.#e}get alias(){return this.#t}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return d.N.create(this.#e.toOperationNode(),q.O.create(this.#t))}}},Le.__chunk_48300=(Ue,ie,o)=>{"use strict";o.d(ie,{s:()=>y});var d=o(26772);let y=(0,d.CN)({is:h=>h.kind==="ValueListNode",create:h=>(0,d.CN)({kind:"ValueListNode",values:(0,d.CN)(h)})})},Le.__chunk_48157=(Ue,ie,o)=>{"use strict";o.r(ie),o.d(ie,{accountSchema:()=>i,coreSchema:()=>h,getAuthTables:()=>d.y,rateLimitSchema:()=>s,sessionSchema:()=>c,userSchema:()=>O,verificationSchema:()=>j});var d=o(88138),y=o(13348);let h=y.object({id:y.string(),createdAt:y.date().default(()=>new Date),updatedAt:y.date().default(()=>new Date)}),i=h.extend({providerId:y.string(),accountId:y.string(),userId:y.coerce.string(),accessToken:y.string().nullish(),refreshToken:y.string().nullish(),idToken:y.string().nullish(),accessTokenExpiresAt:y.date().nullish(),refreshTokenExpiresAt:y.date().nullish(),scope:y.string().nullish(),password:y.string().nullish()}),s=y.object({key:y.string(),count:y.number(),lastRequest:y.number()}),c=h.extend({userId:y.coerce.string(),expiresAt:y.date(),token:y.string(),ipAddress:y.string().nullish(),userAgent:y.string().nullish()}),O=h.extend({email:y.string().transform($=>$.toLowerCase()),emailVerified:y.boolean().default(!1),name:y.string(),image:y.string().nullish()}),j=h.extend({value:y.string(),expiresAt:y.date(),identifier:y.string()})},Le.__chunk_47959=(Ue,ie,o)=>{"use strict";o.d(ie,{k:()=>y});var d=o(26772);let y=(0,d.CN)({is:h=>h.kind==="JSONOperatorChainNode",create:h=>(0,d.CN)({kind:"JSONOperatorChainNode",operator:h,values:(0,d.CN)([])}),cloneWithValue:(h,i)=>(0,d.CN)({...h,values:(0,d.CN)([...h.values,i])})})},Le.__chunk_47248=(Ue,ie,o)=>{"use strict";o.d(ie,{Xm:()=>s,we:()=>h,zX:()=>i});var d=o(26772);let y=["->","->>"],h=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","^@","&&","?","?&","?|","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from","+","-","*","/","%","^","&","|","#","<<",">>","&&","||",...y,"not","-","exists","not exists","between","between symmetric"],i=(0,d.CN)({is:c=>c.kind==="OperatorNode",create:c=>(0,d.CN)({kind:"OperatorNode",operator:c})});function s(c){return(0,d.Kg)(c)&&y.includes(c)}},Le.__chunk_47121=(Ue,ie,o)=>{"use strict";o.d(ie,{p:()=>d});let d=(y,h="ms")=>new Date(Date.now()+(h==="sec"?1e3*y:y))},Le.__chunk_46372=(Ue,ie,o)=>{"use strict";function d(y,h){if(h!==void 0&&(!Array.isArray(h)||h.some(i=>typeof i!="string")))throw TypeError(`"${y}" option must be an array of strings`);if(h)return new Set(h)}o.d(ie,{F:()=>d})},Le.__chunk_46227=(Ue,ie,o)=>{"use strict";function d(i){return i==="-"||i==="^"||i==="$"||i==="+"||i==="."||i==="("||i===")"||i==="|"||i==="["||i==="]"||i==="{"||i==="}"||i==="*"||i==="?"||i==="\\"?`\\${i}`:i}function y(i,s){if(typeof s!="string")throw TypeError(`Sample must be a string, but ${typeof s} given`);return i.test(s)}function h(i,s){if(typeof i!="string"&&!Array.isArray(i))throw TypeError(`The first argument must be a single pattern string or an array of patterns, but ${typeof i} given`);if((typeof s=="string"||typeof s=="boolean")&&(s={separator:s}),arguments.length==2&&!(s===void 0||typeof s=="object"&&s!==null&&!Array.isArray(s)))throw TypeError(`The second argument must be an options object or a string/boolean separator, but ${typeof s} given`);if((s=s||{}).separator==="\\")throw Error("\\ is not a valid separator because it is used for escaping. Try setting the separator to `true` instead");let c=function $(W,K=!0){if(Array.isArray(W))return`(?:${W.map(V=>`^${$(V,K)}$`).join("|")})`;let I="",p="",_=".";K===!0?(I="/",p="[/\\\\]",_="[^/\\\\]"):K&&((p=function(V){let C="";for(let L=0;L<V.length;L++)C+=d(V[L]);return C}(I=K)).length>1?(p=`(?:${p})`,_=`((?!${p}).)`):_=`[^${p}]`);let m=K?`${p}+?`:"",q=K?`${p}*?`:"",J=K?W.split(I):[W],a="";for(let V=0;V<J.length;V++){let C=J[V],L=J[V+1],k="";if(C||!(V>0)){if(K&&(k=V===J.length-1?q:L!=="**"?m:""),K&&C==="**"){k&&(a+=V===0?"":k,a+=`(?:${_}*?${k})*?`);continue}for(let N=0;N<C.length;N++){let P=C[N];P==="\\"?N<C.length-1&&(a+=d(C[N+1]),N++):P==="?"?a+=_:P==="*"?a+=`${_}*?`:a+=d(P)}a+=k}}return a}(i,s.separator),O=RegExp(`^${c}$`,s.flags),j=y.bind(null,O);return j.options=s,j.pattern=i,j.regexp=O,j}o.d(ie,{U:()=>h})},Le.__chunk_45041=(Ue,ie,o)=>{"use strict";o.d(ie,{N:()=>Z});var d=o(77438),y=o(20321),h=o(21979),i=o(38560),s=o(11999),c=o(90208);class O{static[d.i]="SelectionProxyHandler";config;constructor(S){this.config={...S}}get(S,E){if(E==="_")return{...S._,selectedFields:new Proxy(S._.selectedFields,this)};if(E===c.n)return{...S[c.n],selectedFields:new Proxy(S[c.n].selectedFields,this)};if(typeof E=="symbol")return S[E];let A=((0,d.is)(S,s.n)?S._.selectedFields:(0,d.is)(S,i.Ss)?S[c.n].selectedFields:S)[E];if((0,d.is)(A,i.Xs.Aliased)){if(this.config.sqlAliasedBehavior==="sql"&&!A.isSelectionField)return A.sql;let U=A.clone();return U.isSelectionField=!0,U}if((0,d.is)(A,i.Xs)){if(this.config.sqlBehavior==="sql")return A;throw Error(`You tried to reference "${E}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return(0,d.is)(A,h.V)?this.config.alias?new Proxy(A,new y.Ht(new Proxy(A.table,new y.h_(this.config.alias,this.config.replaceOriginalName??!1)))):A:typeof A!="object"||A===null?A:new Proxy(A,new O(this.config))}}var j=o(87698);class ${static[d.i]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}}var W=o(11793),K=o(95769),I=o(70356),p=o(1571);function _(R){return(0,d.is)(R,p.jo)?[`${R[K.XI.Symbol.BaseName]}`]:(0,d.is)(R,s.n)?R._.usedTables??[]:(0,d.is)(R,i.Xs)?R.usedTables??[]:[]}var m=o(40783);class q{static[d.i]="SQLiteSelectBuilder";fields;session;dialect;withList;distinct;constructor(S){this.fields=S.fields,this.session=S.session,this.dialect=S.dialect,this.withList=S.withList,this.distinct=S.distinct}from(S){let E,A=!!this.fields;return E=this.fields?this.fields:(0,d.is)(S,s.n)?Object.fromEntries(Object.keys(S._.selectedFields).map(U=>[U,S[U]])):(0,d.is)(S,m.V)?S[c.n].selectedFields:(0,d.is)(S,i.Xs)?{}:(0,I.YD)(S),new a({table:S,fields:E,isPartialSelect:A,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct})}}class J extends ${static[d.i]="SQLiteSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;cacheConfig=void 0;usedTables=new Set;constructor({table:S,fields:E,isPartialSelect:A,session:U,dialect:te,withList:Y,distinct:D}){for(let ee of(super(),this.config={withList:Y,table:S,fields:{...E},distinct:D,setOperators:[]},this.isPartialSelect=A,this.session=U,this.dialect=te,this._={selectedFields:E,config:this.config},this.tableName=(0,I.zN)(S),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{},_(S)))this.usedTables.add(ee)}getUsedTables(){return[...this.usedTables]}createJoin(S){return(E,A)=>{let U=this.tableName,te=(0,I.zN)(E);for(let Y of _(E))this.usedTables.add(Y);if(typeof te=="string"&&this.config.joins?.some(Y=>Y.alias===te))throw Error(`Alias "${te}" is already used in this query`);if(!this.isPartialSelect&&(Object.keys(this.joinsNotNullableMap).length===1&&typeof U=="string"&&(this.config.fields={[U]:this.config.fields}),typeof te=="string"&&!(0,d.is)(E,i.Xs))){let Y=(0,d.is)(E,s.n)?E._.selectedFields:(0,d.is)(E,i.Ss)?E[c.n].selectedFields:E[K.XI.Symbol.Columns];this.config.fields[te]=Y}if(typeof A=="function"&&(A=A(new Proxy(this.config.fields,new O({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:A,table:E,joinType:S,alias:te}),typeof te=="string")switch(S){case"left":this.joinsNotNullableMap[te]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([Y])=>[Y,!1])),this.joinsNotNullableMap[te]=!0;break;case"cross":case"inner":this.joinsNotNullableMap[te]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([Y])=>[Y,!1])),this.joinsNotNullableMap[te]=!1}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");crossJoin=this.createJoin("cross");createSetOperator(S,E){return A=>{let U=typeof A=="function"?A(C()):A;if(!(0,I.DV)(this.getSelectedFields(),U.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:S,isAll:E,rightSelect:U}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);except=this.createSetOperator("except",!1);addSetOperators(S){return this.config.setOperators.push(...S),this}where(S){return typeof S=="function"&&(S=S(new Proxy(this.config.fields,new O({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=S,this}having(S){return typeof S=="function"&&(S=S(new Proxy(this.config.fields,new O({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=S,this}groupBy(...S){if(typeof S[0]=="function"){let E=S[0](new Proxy(this.config.fields,new O({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(E)?E:[E]}else this.config.groupBy=S;return this}orderBy(...S){if(typeof S[0]=="function"){let E=S[0](new Proxy(this.config.fields,new O({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),A=Array.isArray(E)?E:[E];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=A:this.config.orderBy=A}else this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=S:this.config.orderBy=S;return this}limit(S){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=S:this.config.limit=S,this}offset(S){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=S:this.config.offset=S,this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:S,...E}=this.dialect.sqlToQuery(this.getSQL());return E}as(S){let E=[];if(E.push(..._(this.config.table)),this.config.joins)for(let A of this.config.joins)E.push(..._(A.table));return new Proxy(new s.n(this.getSQL(),this.config.fields,S,!1,[...new Set(E)]),new O({alias:S,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new O({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}}class a extends J{static[d.i]="SQLiteSelect";_prepare(S=!0){if(!this.session)throw Error("Cannot execute a query on a query builder. Please use a database instance instead.");let E=(0,I.He)(this.config.fields),A=this.session[S?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),E,"all",!0,void 0,{type:"select",tables:[...this.usedTables]},this.cacheConfig);return A.joinsNotNullableMap=this.joinsNotNullableMap,A}$withCache(S){return this.cacheConfig=S===void 0?{config:{},enable:!0,autoInvalidate:!0}:S===!1?{enable:!1}:{enable:!0,autoInvalidate:!0,...S},this}prepare(){return this._prepare(!1)}run=S=>this._prepare().run(S);all=S=>this._prepare().all(S);get=S=>this._prepare().get(S);values=S=>this._prepare().values(S);async execute(){return this.all()}}function V(R,S){return(E,A,...U)=>{let te=[A,...U].map(Y=>({type:R,isAll:S,rightSelect:Y}));for(let Y of te)if(!(0,I.DV)(E.getSelectedFields(),Y.rightSelect.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return E.addSetOperators(te)}}(0,I.XJ)(a,[W.k]);let C=()=>({union:L,unionAll:k,intersect:N,except:P}),L=V("union",!1),k=V("union",!0),N=V("intersect",!1),P=V("except",!1);class b{static[d.i]="SQLiteQueryBuilder";dialect;dialectConfig;constructor(S){this.dialect=(0,d.is)(S,j.vV)?S:void 0,this.dialectConfig=(0,d.is)(S,j.vV)?void 0:S}$with=(S,E)=>{let A=this;return{as:U=>(typeof U=="function"&&(U=U(A)),new Proxy(new s.J(U.getSQL(),E??("getSelectedFields"in U?U.getSelectedFields()??{}:{}),S,!0),new O({alias:S,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};with(...S){let E=this;return{select:function(A){return new q({fields:A??void 0,session:void 0,dialect:E.getDialect(),withList:S})},selectDistinct:function(A){return new q({fields:A??void 0,session:void 0,dialect:E.getDialect(),withList:S,distinct:!0})}}}select(S){return new q({fields:S??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(S){return new q({fields:S??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}getDialect(){return this.dialect||(this.dialect=new j._K(this.dialectConfig)),this.dialect}}class z{constructor(S,E,A,U){this.table=S,this.session=E,this.dialect=A,this.withList=U}static[d.i]="SQLiteUpdateBuilder";set(S){return new F(this.table,(0,I.q)(this.table,S),this.session,this.dialect,this.withList)}}class F extends W.k{constructor(S,E,A,U,te){super(),this.session=A,this.dialect=U,this.config={set:E,table:S,withList:te,joins:[]}}static[d.i]="SQLiteUpdate";config;from(S){return this.config.from=S,this}createJoin(S){return(E,A)=>{let U=(0,I.zN)(E);if(typeof U=="string"&&this.config.joins.some(te=>te.alias===U))throw Error(`Alias "${U}" is already used in this query`);if(typeof A=="function"){let te=this.config.from?(0,d.is)(E,p.jo)?E[K.XI.Symbol.Columns]:(0,d.is)(E,s.n)?E._.selectedFields:(0,d.is)(E,m.V)?E[c.n].selectedFields:void 0:void 0;A=A(new Proxy(this.config.table[K.XI.Symbol.Columns],new O({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),te&&new Proxy(te,new O({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}return this.config.joins.push({on:A,table:E,joinType:S,alias:U}),this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(S){return this.config.where=S,this}orderBy(...S){if(typeof S[0]=="function"){let E=S[0](new Proxy(this.config.table[K.XI.Symbol.Columns],new O({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),A=Array.isArray(E)?E:[E];this.config.orderBy=A}else this.config.orderBy=S;return this}limit(S){return this.config.limit=S,this}returning(S=this.config.table[p.jo.Symbol.Columns]){return this.config.returning=(0,I.He)(S),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:S,...E}=this.dialect.sqlToQuery(this.getSQL());return E}_prepare(S=!0){return this.session[S?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run",!0,void 0,{type:"insert",tables:_(this.config.table)})}prepare(){return this._prepare(!1)}run=S=>this._prepare().run(S);all=S=>this._prepare().all(S);get=S=>this._prepare().get(S);values=S=>this._prepare().values(S);async execute(){return this.config.returning?this.all():this.run()}$dynamic(){return this}}class Q{constructor(S,E,A,U){this.table=S,this.session=E,this.dialect=A,this.withList=U}static[d.i]="SQLiteInsertBuilder";values(S){if((S=Array.isArray(S)?S:[S]).length===0)throw Error("values() must be called with at least one value");let E=S.map(A=>{let U={},te=this.table[K.XI.Symbol.Columns];for(let Y of Object.keys(A)){let D=A[Y];U[Y]=(0,d.is)(D,i.Xs)?D:new i.Iw(D,te[Y])}return U});return new G(this.table,E,this.session,this.dialect,this.withList)}select(S){let E=typeof S=="function"?S(new b):S;if(!(0,d.is)(E,i.Xs)&&!(0,I.DV)(this.table[K.e],E._.selectedFields))throw Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new G(this.table,E,this.session,this.dialect,this.withList,!0)}}class G extends W.k{constructor(S,E,A,U,te,Y){super(),this.session=A,this.dialect=U,this.config={table:S,values:E,withList:te,select:Y}}static[d.i]="SQLiteInsert";config;returning(S=this.config.table[p.jo.Symbol.Columns]){return this.config.returning=(0,I.He)(S),this}onConflictDoNothing(S={}){if(this.config.onConflict||(this.config.onConflict=[]),S.target===void 0)this.config.onConflict.push((0,i.ll)` on conflict do nothing`);else{let E=Array.isArray(S.target)?(0,i.ll)`${S.target}`:(0,i.ll)`${[S.target]}`,A=S.where?(0,i.ll)` where ${S.where}`:(0,i.ll)``;this.config.onConflict.push((0,i.ll)` on conflict ${E} do nothing${A}`)}return this}onConflictDoUpdate(S){if(S.where&&(S.targetWhere||S.setWhere))throw Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');this.config.onConflict||(this.config.onConflict=[]);let E=S.where?(0,i.ll)` where ${S.where}`:void 0,A=S.targetWhere?(0,i.ll)` where ${S.targetWhere}`:void 0,U=S.setWhere?(0,i.ll)` where ${S.setWhere}`:void 0,te=Array.isArray(S.target)?(0,i.ll)`${S.target}`:(0,i.ll)`${[S.target]}`,Y=this.dialect.buildUpdateSet(this.config.table,(0,I.q)(this.config.table,S.set));return this.config.onConflict.push((0,i.ll)` on conflict ${te}${A} do update set ${Y}${E}${U}`),this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:S,...E}=this.dialect.sqlToQuery(this.getSQL());return E}_prepare(S=!0){return this.session[S?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run",!0,void 0,{type:"insert",tables:_(this.config.table)})}prepare(){return this._prepare(!1)}run=S=>this._prepare().run(S);all=S=>this._prepare().all(S);get=S=>this._prepare().get(S);values=S=>this._prepare().values(S);async execute(){return this.config.returning?this.all():this.run()}$dynamic(){return this}}class X extends W.k{constructor(S,E,A,U){super(),this.table=S,this.session=E,this.dialect=A,this.config={table:S,withList:U}}static[d.i]="SQLiteDelete";config;where(S){return this.config.where=S,this}orderBy(...S){if(typeof S[0]=="function"){let E=S[0](new Proxy(this.config.table[K.XI.Symbol.Columns],new O({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),A=Array.isArray(E)?E:[E];this.config.orderBy=A}else this.config.orderBy=S;return this}limit(S){return this.config.limit=S,this}returning(S=this.table[p.jo.Symbol.Columns]){return this.config.returning=(0,I.He)(S),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:S,...E}=this.dialect.sqlToQuery(this.getSQL());return E}_prepare(S=!0){return this.session[S?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run",!0,void 0,{type:"delete",tables:_(this.config.table)})}prepare(){return this._prepare(!1)}run=S=>this._prepare().run(S);all=S=>this._prepare().all(S);get=S=>this._prepare().get(S);values=S=>this._prepare().values(S);async execute(S){return this._prepare().execute(S)}$dynamic(){return this}}class oe extends i.Xs{constructor(S){super(oe.buildEmbeddedCount(S.source,S.filters).queryChunks),this.params=S,this.session=S.session,this.sql=oe.buildCount(S.source,S.filters)}sql;static[d.i]="SQLiteCountBuilderAsync";[Symbol.toStringTag]="SQLiteCountBuilderAsync";session;static buildEmbeddedCount(S,E){return(0,i.ll)`(select count(*) from ${S}${i.ll.raw(" where ").if(E)}${E})`}static buildCount(S,E){return(0,i.ll)`select count(*) from ${S}${i.ll.raw(" where ").if(E)}${E}`}then(S,E){return Promise.resolve(this.session.count(this.sql)).then(S,E)}catch(S){return this.then(void 0,S)}finally(S){return this.then(E=>(S?.(),E),E=>{throw S?.(),E})}}var ne=o(6525);class we{constructor(S,E,A,U,te,Y,D,ee){this.mode=S,this.fullSchema=E,this.schema=A,this.tableNamesMap=U,this.table=te,this.tableConfig=Y,this.dialect=D,this.session=ee}static[d.i]="SQLiteAsyncRelationalQueryBuilder";findMany(S){return this.mode==="sync"?new $e(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,S||{},"many"):new Ee(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,S||{},"many")}findFirst(S){return this.mode==="sync"?new $e(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,S?{...S,limit:1}:{limit:1},"first"):new Ee(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,S?{...S,limit:1}:{limit:1},"first")}}class Ee extends W.k{constructor(S,E,A,U,te,Y,D,ee,le){super(),this.fullSchema=S,this.schema=E,this.tableNamesMap=A,this.table=U,this.tableConfig=te,this.dialect=Y,this.session=D,this.config=ee,this.mode=le}static[d.i]="SQLiteAsyncRelationalQuery";mode;getSQL(){return this.dialect.buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}).sql}_prepare(S=!1){let{query:E,builtQuery:A}=this._toSQL();return this.session[S?"prepareOneTimeQuery":"prepareQuery"](A,void 0,this.mode==="first"?"get":"all",!0,(U,te)=>{let Y=U.map(D=>(0,ne.I$)(this.schema,this.tableConfig,D,E.selection,te));return this.mode==="first"?Y[0]:Y})}prepare(){return this._prepare(!1)}_toSQL(){let S=this.dialect.buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}),E=this.dialect.sqlToQuery(S.sql);return{query:S,builtQuery:E}}toSQL(){return this._toSQL().builtQuery}executeRaw(){return this.mode==="first"?this._prepare(!1).get():this._prepare(!1).all()}async execute(){return this.executeRaw()}}class $e extends Ee{static[d.i]="SQLiteSyncRelationalQuery";sync(){return this.executeRaw()}}class v extends W.k{constructor(S,E,A,U,te){super(),this.execute=S,this.getSQL=E,this.dialect=U,this.mapBatchResult=te,this.config={action:A}}static[d.i]="SQLiteRaw";config;getQuery(){return{...this.dialect.sqlToQuery(this.getSQL()),method:this.config.action}}mapResult(S,E){return E?this.mapBatchResult(S):S}_prepare(){return this}isResponseInArrayMode(){return!1}}class Z{constructor(S,E,A,U){this.resultKind=S,this.dialect=E,this.session=A,this._=U?{schema:U.schema,fullSchema:U.fullSchema,tableNamesMap:U.tableNamesMap}:{schema:void 0,fullSchema:{},tableNamesMap:{}},this.query={};let te=this.query;if(this._.schema)for(let[Y,D]of Object.entries(this._.schema))te[Y]=new we(S,U.fullSchema,this._.schema,this._.tableNamesMap,U.fullSchema[Y],D,E,A);this.$cache={invalidate:async Y=>{}}}static[d.i]="BaseSQLiteDatabase";query;$with=(S,E)=>{let A=this;return{as:U=>(typeof U=="function"&&(U=U(new b(A.dialect))),new Proxy(new s.J(U.getSQL(),E??("getSelectedFields"in U?U.getSelectedFields()??{}:{}),S,!0),new O({alias:S,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};$count(S,E){return new oe({source:S,filters:E,session:this.session})}with(...S){let E=this;return{select:function(A){return new q({fields:A??void 0,session:E.session,dialect:E.dialect,withList:S})},selectDistinct:function(A){return new q({fields:A??void 0,session:E.session,dialect:E.dialect,withList:S,distinct:!0})},update:function(A){return new z(A,E.session,E.dialect,S)},insert:function(A){return new Q(A,E.session,E.dialect,S)},delete:function(A){return new X(A,E.session,E.dialect,S)}}}select(S){return new q({fields:S??void 0,session:this.session,dialect:this.dialect})}selectDistinct(S){return new q({fields:S??void 0,session:this.session,dialect:this.dialect,distinct:!0})}update(S){return new z(S,this.session,this.dialect)}$cache;insert(S){return new Q(S,this.session,this.dialect)}delete(S){return new X(S,this.session,this.dialect)}run(S){let E=typeof S=="string"?i.ll.raw(S):S.getSQL();return this.resultKind==="async"?new v(async()=>this.session.run(E),()=>E,"run",this.dialect,this.session.extractRawRunValueFromBatchResult.bind(this.session)):this.session.run(E)}all(S){let E=typeof S=="string"?i.ll.raw(S):S.getSQL();return this.resultKind==="async"?new v(async()=>this.session.all(E),()=>E,"all",this.dialect,this.session.extractRawAllValueFromBatchResult.bind(this.session)):this.session.all(E)}get(S){let E=typeof S=="string"?i.ll.raw(S):S.getSQL();return this.resultKind==="async"?new v(async()=>this.session.get(E),()=>E,"get",this.dialect,this.session.extractRawGetValueFromBatchResult.bind(this.session)):this.session.get(E)}values(S){let E=typeof S=="string"?i.ll.raw(S):S.getSQL();return this.resultKind==="async"?new v(async()=>this.session.values(E),()=>E,"values",this.dialect,this.session.extractRawValuesValueFromBatchResult.bind(this.session)):this.session.values(E)}transaction(S,E){return this.session.transaction(S,E)}}},Le.__chunk_43998=(Ue,ie,o)=>{"use strict";o.d(ie,{O:()=>y});var d=o(26772);let y=(0,d.CN)({is:h=>h.kind==="OrderByNode",create:h=>(0,d.CN)({kind:"OrderByNode",items:(0,d.CN)([...h])}),cloneWithItems:(h,i)=>(0,d.CN)({...h,items:(0,d.CN)([...h.items,...i])})})},Le.__chunk_43948=(Ue,ie,o)=>{"use strict";o.d(ie,{f:()=>V});var d=o(584),y=o(70356),h=o(77438),i=o(67177),s=o(6525),c=o(45041),O=o(87698),j=o(58772),$=o(38560),W=o(75034),K=o(25356).Buffer;class I extends W.N9{constructor(L,k,N,P,b){super(k),this.client=L,this.schema=N,this.options=P,this.tx=b,this.logger=P.logger??new i.Pv,this.cache=P.cache??new j.Th}static[h.i]="LibSQLSession";logger;cache;prepareQuery(L,k,N,P,b,z,F){return new _(this.client,L,this.logger,this.cache,z,F,k,this.tx,N,P,b)}async batch(L){let k=[],N=[];for(let P of L){let b=P._prepare(),z=b.getQuery();k.push(b),N.push({sql:z.sql,args:z.params})}return(await this.client.batch(N)).map((P,b)=>k[b].mapResult(P,!0))}async migrate(L){let k=[],N=[];for(let P of L){let b=P._prepare(),z=b.getQuery();k.push(b),N.push({sql:z.sql,args:z.params})}return(await this.client.migrate(N)).map((P,b)=>k[b].mapResult(P,!0))}async transaction(L,k){let N=await this.client.transaction(),P=new I(this.client,this.dialect,this.schema,this.options,N),b=new p("async",this.dialect,P,this.schema);try{let z=await L(b);return await N.commit(),z}catch(z){throw await N.rollback(),z}}extractRawAllValueFromBatchResult(L){return L.rows}extractRawGetValueFromBatchResult(L){return L.rows[0]}extractRawValuesValueFromBatchResult(L){return L.rows}}class p extends W.X0{static[h.i]="LibSQLTransaction";async transaction(L){let k=`sp${this.nestedIndex}`,N=new p("async",this.dialect,this.session,this.schema,this.nestedIndex+1);await this.session.run($.ll.raw(`savepoint ${k}`));try{let P=await L(N);return await this.session.run($.ll.raw(`release savepoint ${k}`)),P}catch(P){throw await this.session.run($.ll.raw(`rollback to savepoint ${k}`)),P}}}class _ extends W.Eb{constructor(L,k,N,P,b,z,F,Q,G,X,oe){super("async",G,k,P,b,z),this.client=L,this.logger=N,this.fields=F,this.tx=Q,this._isResponseInArrayMode=X,this.customResultMapper=oe,this.customResultMapper=oe,this.fields=F}static[h.i]="LibSQLPreparedQuery";async run(L){let k=(0,$.Ct)(this.query.params,L??{});return this.logger.logQuery(this.query.sql,k),await this.queryWithCache(this.query.sql,k,async()=>{let N={sql:this.query.sql,args:k};return this.tx?this.tx.execute(N):this.client.execute(N)})}async all(L){let{fields:k,logger:N,query:P,tx:b,client:z,customResultMapper:F}=this;if(!k&&!F){let G=(0,$.Ct)(P.params,L??{});return N.logQuery(P.sql,G),await this.queryWithCache(P.sql,G,async()=>{let X={sql:P.sql,args:G};return(b?b.execute(X):z.execute(X)).then(({rows:oe})=>this.mapAllResult(oe))})}let Q=await this.values(L);return this.mapAllResult(Q)}mapAllResult(L,k){return k&&(L=L.rows),this.fields||this.customResultMapper?this.customResultMapper?this.customResultMapper(L,q):L.map(N=>(0,y.a6)(this.fields,Array.prototype.slice.call(N).map(P=>q(P)),this.joinsNotNullableMap)):L.map(N=>m(N))}async get(L){let{fields:k,logger:N,query:P,tx:b,client:z,customResultMapper:F}=this;if(!k&&!F){let G=(0,$.Ct)(P.params,L??{});return N.logQuery(P.sql,G),await this.queryWithCache(P.sql,G,async()=>{let X={sql:P.sql,args:G};return(b?b.execute(X):z.execute(X)).then(({rows:oe})=>this.mapGetResult(oe))})}let Q=await this.values(L);return this.mapGetResult(Q)}mapGetResult(L,k){k&&(L=L.rows);let N=L[0];return this.fields||this.customResultMapper?N?this.customResultMapper?this.customResultMapper(L,q):(0,y.a6)(this.fields,Array.prototype.slice.call(N).map(P=>q(P)),this.joinsNotNullableMap):void 0:m(N)}async values(L){let k=(0,$.Ct)(this.query.params,L??{});return this.logger.logQuery(this.query.sql,k),await this.queryWithCache(this.query.sql,k,async()=>{let N={sql:this.query.sql,args:k};return(this.tx?this.tx.execute(N):this.client.execute(N)).then(({rows:P})=>P)})}isResponseInArrayMode(){return this._isResponseInArrayMode}}function m(C){return Object.keys(C).reduce((L,k)=>(Object.prototype.propertyIsEnumerable.call(C,k)&&(L[k]=C[k]),L),{})}function q(C){if(typeof ArrayBuffer<"u"&&C instanceof ArrayBuffer){if(K!==void 0)return C instanceof K?C:K.from(C);if(typeof TextDecoder<"u")return new TextDecoder().decode(C);throw Error("TextDecoder is not available. Please provide either Buffer or TextDecoder polyfill.")}return C}class J extends c.N{static[h.i]="LibSQLDatabase";async batch(L){return this.session.batch(L)}}function a(C,L={}){let k,N,P=new O.ZR({casing:L.casing});if(L.logger===!0?k=new i.w:L.logger!==!1&&(k=L.logger),L.schema){let F=(0,s._k)(L.schema,s.DZ);N={fullSchema:L.schema,schema:F.tables,tableNamesMap:F.tableNamesMap}}let b=new I(C,P,N,{logger:k,cache:L.cache},void 0),z=new J("async",P,b,N);return z.$client=C,z.$cache=L.cache,z.$cache&&(z.$cache.invalidate=L.cache?.onMutate),z}function V(...C){if(typeof C[0]=="string")return a((0,d.Bx)({url:C[0]}),C[1]);if((0,y.Lq)(C[0])){let{connection:L,client:k,...N}=C[0];return a(k||(typeof L=="string"?(0,d.Bx)({url:L}):(0,d.Bx)(L)),N)}return a(C[0],C[1])}(V||(V={})).mock=function(C){return a({},C)}},Le.__chunk_43917=(Ue,ie,o)=>{"use strict";o.d(ie,{cE:()=>K,k6:()=>W});var d=o(38427),y=o(85725),h=o(88691);let i=I=>Math.floor(I.getTime()/1e3),s=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;function c(I){let p,_=s.exec(I);if(!_||_[4]&&_[1])throw TypeError("Invalid time period format");let m=parseFloat(_[2]);switch(_[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":p=Math.round(m);break;case"minute":case"minutes":case"min":case"mins":case"m":p=Math.round(60*m);break;case"hour":case"hours":case"hr":case"hrs":case"h":p=Math.round(3600*m);break;case"day":case"days":case"d":p=Math.round(86400*m);break;case"week":case"weeks":case"w":p=Math.round(604800*m);break;default:p=Math.round(31557600*m)}return _[1]==="-"||_[4]==="ago"?-p:p}function O(I,p){if(!Number.isFinite(p))throw TypeError(`Invalid ${I} input`);return p}let j=I=>I.includes("/")?I.toLowerCase():`application/${I.toLowerCase()}`,$=(I,p)=>typeof I=="string"?p.includes(I):!!Array.isArray(I)&&p.some(Set.prototype.has.bind(new Set(I)));function W(I,p,_={}){let m,q;try{m=JSON.parse(y.D0.decode(p))}catch{}if(!(0,h.G)(m))throw new d.Dp("JWT Claims Set must be a top-level JSON object");let{typ:J}=_;if(J&&(typeof I.typ!="string"||j(I.typ)!==j(J)))throw new d.ie('unexpected "typ" JWT header value',m,"typ","check_failed");let{requiredClaims:a=[],issuer:V,subject:C,audience:L,maxTokenAge:k}=_,N=[...a];for(let z of(k!==void 0&&N.push("iat"),L!==void 0&&N.push("aud"),C!==void 0&&N.push("sub"),V!==void 0&&N.push("iss"),new Set(N.reverse())))if(!(z in m))throw new d.ie(`missing required "${z}" claim`,m,z,"missing");if(V&&!(Array.isArray(V)?V:[V]).includes(m.iss))throw new d.ie('unexpected "iss" claim value',m,"iss","check_failed");if(C&&m.sub!==C)throw new d.ie('unexpected "sub" claim value',m,"sub","check_failed");if(L&&!$(m.aud,typeof L=="string"?[L]:L))throw new d.ie('unexpected "aud" claim value',m,"aud","check_failed");switch(typeof _.clockTolerance){case"string":q=c(_.clockTolerance);break;case"number":q=_.clockTolerance;break;case"undefined":q=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:P}=_,b=i(P||new Date);if((m.iat!==void 0||k)&&typeof m.iat!="number")throw new d.ie('"iat" claim must be a number',m,"iat","invalid");if(m.nbf!==void 0){if(typeof m.nbf!="number")throw new d.ie('"nbf" claim must be a number',m,"nbf","invalid");if(m.nbf>b+q)throw new d.ie('"nbf" claim timestamp check failed',m,"nbf","check_failed")}if(m.exp!==void 0){if(typeof m.exp!="number")throw new d.ie('"exp" claim must be a number',m,"exp","invalid");if(m.exp<=b-q)throw new d.n('"exp" claim timestamp check failed',m,"exp","check_failed")}if(k){let z=b-m.iat;if(z-q>(typeof k=="number"?k:c(k)))throw new d.n('"iat" claim timestamp check failed (too far in the past)',m,"iat","check_failed");if(z<0-q)throw new d.ie('"iat" claim timestamp check failed (it should be in the past)',m,"iat","check_failed")}return m}class K{#e;constructor(p){if(!(0,h.G)(p))throw TypeError("JWT Claims Set MUST be an object");this.#e=structuredClone(p)}data(){return y.Rd.encode(JSON.stringify(this.#e))}get iss(){return this.#e.iss}set iss(p){this.#e.iss=p}get sub(){return this.#e.sub}set sub(p){this.#e.sub=p}get aud(){return this.#e.aud}set aud(p){this.#e.aud=p}set jti(p){this.#e.jti=p}set nbf(p){typeof p=="number"?this.#e.nbf=O("setNotBefore",p):p instanceof Date?this.#e.nbf=O("setNotBefore",i(p)):this.#e.nbf=i(new Date)+c(p)}set exp(p){typeof p=="number"?this.#e.exp=O("setExpirationTime",p):p instanceof Date?this.#e.exp=O("setExpirationTime",i(p)):this.#e.exp=i(new Date)+c(p)}set iat(p){p===void 0?this.#e.iat=i(new Date):p instanceof Date?this.#e.iat=O("setIssuedAt",i(p)):typeof p=="string"?this.#e.iat=O("setIssuedAt",i(new Date)+c(p)):this.#e.iat=O("setIssuedAt",p)}}},Le.__chunk_43805=(Ue,ie,o)=>{"use strict";o.d(ie,{x:()=>Ki,d:()=>Bi});var d=o(63440),y=o(9789),h=o(2170);function i(ve,w){return h.z.createWithChildren([h.z.createWithSql(`${ve} `),y.O.create(w)])}var s=o(16755),c=o(26772),O=o(30797);class j{#e;#t=new W;#r;#i;constructor(w){this.#e=(0,c.CN)({...w})}async init(){this.#r=(0,c.Tn)(this.#e.database)?await this.#e.database():this.#e.database,this.#i=new $(this.#r),this.#e.onCreateConnection&&await this.#e.onCreateConnection(this.#i)}async acquireConnection(){return await this.#t.lock(),this.#i}async beginTransaction(w){await w.executeQuery(s.E.raw("begin"))}async commitTransaction(w){await w.executeQuery(s.E.raw("commit"))}async rollbackTransaction(w){await w.executeQuery(s.E.raw("rollback"))}async savepoint(w,pe,Oe){await w.executeQuery(Oe(i("savepoint",pe),(0,O.a)()))}async rollbackToSavepoint(w,pe,Oe){await w.executeQuery(Oe(i("rollback to",pe),(0,O.a)()))}async releaseSavepoint(w,pe,Oe){await w.executeQuery(Oe(i("release",pe),(0,O.a)()))}async releaseConnection(){this.#t.unlock()}async destroy(){this.#r?.close()}}class ${#e;constructor(w){this.#e=w}executeQuery(w){let{sql:pe,parameters:Oe}=w,Ve=this.#e.prepare(pe);if(Ve.reader)return Promise.resolve({rows:Ve.all(Oe)});let{changes:_t,lastInsertRowid:Yt}=Ve.run(Oe);return Promise.resolve({numAffectedRows:_t!=null?BigInt(_t):void 0,insertId:Yt!=null?BigInt(Yt):void 0,rows:[]})}async*streamQuery(w,pe){let{sql:Oe,parameters:Ve,query:_t}=w,Yt=this.#e.prepare(Oe);if(d.L.is(_t))for(let ar of Yt.iterate(Ve))yield{rows:[ar]};else throw Error("Sqlite driver only supports streaming of select queries")}}class W{#e;#t;async lock(){for(;this.#e;)await this.#e;this.#e=new Promise(w=>{this.#t=w})}unlock(){let w=this.#t;this.#e=void 0,this.#t=void 0,w?.()}}var K=o(72197);let I=/"/g;class p extends K.n{visitOrAction(w){this.append("or "),this.append(w.action)}getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(w){return w.replace(I,'""')}visitDefaultInsertValue(w){this.append("null")}}var _=o(20590),m=o(11305);class q{#e;constructor(w){this.#e=w}async getSchemas(){return[]}async getTables(w={withInternalKyselyTables:!1}){return await this.#r(w)}async getMetadata(w){return{tables:await this.getTables(w)}}#t(w,pe){let Oe=w.selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select(["name","sql","type"]).orderBy("name");return pe.withInternalKyselyTables||(Oe=Oe.where("name","!=",_.kQ).where("name","!=",_.sy)),Oe}async#r(w){let pe=await this.#t(this.#e,w).execute(),Oe=await this.#e.with("table_list",_t=>this.#t(_t,w)).selectFrom(["table_list as tl",(0,m.l)`pragma_table_info(tl.name)`.as("p")]).select(["tl.name as table","p.cid","p.name","p.type","p.notnull","p.dflt_value","p.pk"]).orderBy("tl.name").orderBy("p.cid").execute(),Ve={};for(let _t of Oe)Ve[_t.table]??=[],Ve[_t.table].push(_t);return pe.map(({name:_t,sql:Yt,type:ar})=>{let Tr=Yt?.split(/[\(\),]/)?.find(qr=>qr.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),Lr=Ve[_t]??[];if(!Tr){let qr=Lr.filter(Pi=>Pi.pk>0);qr.length===1&&qr[0].type.toLowerCase()==="integer"&&(Tr=qr[0].name)}return{name:_t,isView:ar==="view",columns:Lr.map(qr=>({name:qr.name,dataType:qr.type,isNullable:!qr.notnull,isAutoIncrementing:qr.name===Tr,hasDefaultValue:qr.dflt_value!=null,comment:void 0}))}})}}class J{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}get supportsOutput(){return!1}}class a extends J{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(w,pe){}async releaseMigrationLock(w,pe){}}class V{#e;constructor(w){this.#e=(0,c.CN)({...w})}createDriver(){return new j(this.#e)}createQueryCompiler(){return new p}createAdapter(){return new a}createIntrospector(w){return new q(w)}}function C(ve,w){var pe;if(pe=ve,(0,c.Gv)(pe)&&(0,c.Kg)(pe.stack)&&w.stack){let Oe=w.stack.split(`
`).slice(1).join(`
`);ve.stack+=`
${Oe}`}return ve}let L=Symbol();class k{#e;#t=new WeakMap;#r;constructor(w){this.#e=(0,c.CN)({...w})}async init(){this.#r=(0,c.Tn)(this.#e.pool)?await this.#e.pool():this.#e.pool}async acquireConnection(){let w=await this.#i(),pe=this.#t.get(w);return!pe&&(pe=new N(w),this.#t.set(w,pe),this.#e?.onCreateConnection&&await this.#e.onCreateConnection(pe)),this.#e?.onReserveConnection&&await this.#e.onReserveConnection(pe),pe}async#i(){return new Promise((w,pe)=>{this.#r.getConnection(async(Oe,Ve)=>{Oe?pe(Oe):w(Ve)})})}async beginTransaction(w,pe){if(pe.isolationLevel||pe.accessMode){let Oe=[];pe.isolationLevel&&Oe.push(`isolation level ${pe.isolationLevel}`),pe.accessMode&&Oe.push(pe.accessMode);let Ve=`set transaction ${Oe.join(", ")}`;await w.executeQuery(s.E.raw(Ve))}await w.executeQuery(s.E.raw("begin"))}async commitTransaction(w){await w.executeQuery(s.E.raw("commit"))}async rollbackTransaction(w){await w.executeQuery(s.E.raw("rollback"))}async savepoint(w,pe,Oe){await w.executeQuery(Oe(i("savepoint",pe),(0,O.a)()))}async rollbackToSavepoint(w,pe,Oe){await w.executeQuery(Oe(i("rollback to",pe),(0,O.a)()))}async releaseSavepoint(w,pe,Oe){await w.executeQuery(Oe(i("release savepoint",pe),(0,O.a)()))}async releaseConnection(w){w[L]()}async destroy(){return new Promise((w,pe)=>{this.#r.end(Oe=>{Oe?pe(Oe):w()})})}}class N{#e;constructor(w){this.#e=w}async executeQuery(w){try{let pe=await this.#t(w);if((0,c.Gv)(pe)&&"insertId"in pe&&"affectedRows"in pe){let{insertId:Oe,affectedRows:Ve,changedRows:_t}=pe;return{insertId:Oe!=null&&Oe.toString()!=="0"?BigInt(Oe):void 0,numAffectedRows:Ve!=null?BigInt(Ve):void 0,numChangedRows:_t!=null?BigInt(_t):void 0,rows:[]}}return Array.isArray(pe)?{rows:pe}:{rows:[]}}catch(pe){throw C(pe,Error())}}#t(w){return new Promise((pe,Oe)=>{this.#e.query(w.sql,w.parameters,(Ve,_t)=>{Ve?Oe(Ve):pe(_t)})})}async*streamQuery(w,pe){let Oe=this.#e.query(w.sql,w.parameters).stream({objectMode:!0});try{for await(let Ve of Oe)yield{rows:[Ve]}}catch(Ve){if(Ve&&typeof Ve=="object"&&"code"in Ve&&Ve.code==="ERR_STREAM_PREMATURE_CLOSE")return;throw Ve}}[L](){this.#e.release()}}let P=/`/g;class b extends K.n{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getExplainOptionAssignment(){return"="}getExplainOptionsDelimiter(){return" "}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return"`"}getRightIdentifierWrapper(){return"`"}sanitizeIdentifier(w){return w.replace(P,"``")}visitCreateIndex(w){this.append("create "),w.unique&&this.append("unique "),this.append("index "),w.ifNotExists&&this.append("if not exists "),this.visitNode(w.name),w.using&&(this.append(" using "),this.visitNode(w.using)),w.table&&(this.append(" on "),this.visitNode(w.table)),w.columns&&(this.append(" ("),this.compileList(w.columns),this.append(")")),w.where&&(this.append(" "),this.visitNode(w.where))}}class z{#e;constructor(w){this.#e=w}async getSchemas(){return(await this.#e.selectFrom("information_schema.schemata").select("schema_name").$castTo().execute()).map(w=>({name:w.SCHEMA_NAME}))}async getTables(w={withInternalKyselyTables:!1}){let pe=this.#e.selectFrom("information_schema.columns as columns").innerJoin("information_schema.tables as tables",Ve=>Ve.onRef("columns.TABLE_CATALOG","=","tables.TABLE_CATALOG").onRef("columns.TABLE_SCHEMA","=","tables.TABLE_SCHEMA").onRef("columns.TABLE_NAME","=","tables.TABLE_NAME")).select(["columns.COLUMN_NAME","columns.COLUMN_DEFAULT","columns.TABLE_NAME","columns.TABLE_SCHEMA","tables.TABLE_TYPE","columns.IS_NULLABLE","columns.DATA_TYPE","columns.EXTRA","columns.COLUMN_COMMENT"]).where("columns.TABLE_SCHEMA","=",(0,m.l)`database()`).orderBy("columns.TABLE_NAME").orderBy("columns.ORDINAL_POSITION").$castTo();w.withInternalKyselyTables||(pe=pe.where("columns.TABLE_NAME","!=",_.kQ).where("columns.TABLE_NAME","!=",_.sy));let Oe=await pe.execute();return this.#t(Oe)}async getMetadata(w){return{tables:await this.getTables(w)}}#t(w){return w.reduce((pe,Oe)=>{let Ve=pe.find(_t=>_t.name===Oe.TABLE_NAME);return Ve||(Ve=(0,c.CN)({name:Oe.TABLE_NAME,isView:Oe.TABLE_TYPE==="VIEW",schema:Oe.TABLE_SCHEMA,columns:[]}),pe.push(Ve)),Ve.columns.push((0,c.CN)({name:Oe.COLUMN_NAME,dataType:Oe.DATA_TYPE,isNullable:Oe.IS_NULLABLE==="YES",isAutoIncrementing:Oe.EXTRA.toLowerCase().includes("auto_increment"),hasDefaultValue:Oe.COLUMN_DEFAULT!==null,comment:Oe.COLUMN_COMMENT===""?void 0:Oe.COLUMN_COMMENT})),pe},[])}}let F="ea586330-2c93-47c8-908d-981d9d270f9d";class Q extends J{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}async acquireMigrationLock(w,pe){await(0,m.l)`select get_lock(${m.l.lit(F)}, ${m.l.lit(3600)})`.execute(w)}async releaseMigrationLock(w,pe){await(0,m.l)`select release_lock(${m.l.lit(F)})`.execute(w)}}class G{#e;constructor(w){this.#e=w}createDriver(){return new k(this.#e)}createQueryCompiler(){return new b}createAdapter(){return new Q}createIntrospector(w){return new z(w)}}let X=Symbol();class oe{#e;#t=new WeakMap;#r;constructor(w){this.#e=(0,c.CN)({...w})}async init(){this.#r=(0,c.Tn)(this.#e.pool)?await this.#e.pool():this.#e.pool}async acquireConnection(){let w=await this.#r.connect(),pe=this.#t.get(w);return!pe&&(pe=new ne(w,{cursor:this.#e.cursor??null}),this.#t.set(w,pe),this.#e.onCreateConnection&&await this.#e.onCreateConnection(pe)),this.#e.onReserveConnection&&await this.#e.onReserveConnection(pe),pe}async beginTransaction(w,pe){if(pe.isolationLevel||pe.accessMode){let Oe="start transaction";pe.isolationLevel&&(Oe+=` isolation level ${pe.isolationLevel}`),pe.accessMode&&(Oe+=` ${pe.accessMode}`),await w.executeQuery(s.E.raw(Oe))}else await w.executeQuery(s.E.raw("begin"))}async commitTransaction(w){await w.executeQuery(s.E.raw("commit"))}async rollbackTransaction(w){await w.executeQuery(s.E.raw("rollback"))}async savepoint(w,pe,Oe){await w.executeQuery(Oe(i("savepoint",pe),(0,O.a)()))}async rollbackToSavepoint(w,pe,Oe){await w.executeQuery(Oe(i("rollback to",pe),(0,O.a)()))}async releaseSavepoint(w,pe,Oe){await w.executeQuery(Oe(i("release",pe),(0,O.a)()))}async releaseConnection(w){w[X]()}async destroy(){if(this.#r){let w=this.#r;this.#r=void 0,await w.end()}}}class ne{#e;#t;constructor(w,pe){this.#e=w,this.#t=pe}async executeQuery(w){try{let{command:pe,rowCount:Oe,rows:Ve}=await this.#e.query(w.sql,[...w.parameters]);return{numAffectedRows:pe==="INSERT"||pe==="UPDATE"||pe==="DELETE"||pe==="MERGE"?BigInt(Oe):void 0,rows:Ve??[]}}catch(pe){throw C(pe,Error())}}async*streamQuery(w,pe){if(!this.#t.cursor)throw Error("'cursor' is not present in your postgres dialect config. It's required to make streaming work in postgres.");if(!Number.isInteger(pe)||pe<=0)throw Error("chunkSize must be a positive integer");let Oe=this.#e.query(new this.#t.cursor(w.sql,w.parameters.slice()));try{for(;;){let Ve=await Oe.read(pe);if(Ve.length===0)break;yield{rows:Ve}}}finally{await Oe.close()}}[X](){this.#e.release()}}class we{#e;constructor(w){this.#e=w}async getSchemas(){return(await this.#e.selectFrom("pg_catalog.pg_namespace").select("nspname").$castTo().execute()).map(w=>({name:w.nspname}))}async getTables(w={withInternalKyselyTables:!1}){let pe=this.#e.selectFrom("pg_catalog.pg_attribute as a").innerJoin("pg_catalog.pg_class as c","a.attrelid","c.oid").innerJoin("pg_catalog.pg_namespace as ns","c.relnamespace","ns.oid").innerJoin("pg_catalog.pg_type as typ","a.atttypid","typ.oid").innerJoin("pg_catalog.pg_namespace as dtns","typ.typnamespace","dtns.oid").select(["a.attname as column","a.attnotnull as not_null","a.atthasdef as has_default","c.relname as table","c.relkind as table_type","ns.nspname as schema","typ.typname as type","dtns.nspname as type_schema",(0,m.l)`col_description(a.attrelid, a.attnum)`.as("column_description"),(0,m.l)`pg_get_serial_sequence(quote_ident(ns.nspname) || '.' || quote_ident(c.relname), a.attname)`.as("auto_incrementing")]).where("c.relkind","in",["r","v","p"]).where("ns.nspname","!~","^pg_").where("ns.nspname","!=","information_schema").where("ns.nspname","!=","crdb_internal").where((0,m.l)`has_schema_privilege(ns.nspname, 'USAGE')`).where("a.attnum",">=",0).where("a.attisdropped","!=",!0).orderBy("ns.nspname").orderBy("c.relname").orderBy("a.attnum").$castTo();w.withInternalKyselyTables||(pe=pe.where("c.relname","!=",_.kQ).where("c.relname","!=",_.sy));let Oe=await pe.execute();return this.#t(Oe)}async getMetadata(w){return{tables:await this.getTables(w)}}#t(w){return w.reduce((pe,Oe)=>{let Ve=pe.find(_t=>_t.name===Oe.table&&_t.schema===Oe.schema);return Ve||(Ve=(0,c.CN)({name:Oe.table,isView:Oe.table_type==="v",schema:Oe.schema,columns:[]}),pe.push(Ve)),Ve.columns.push((0,c.CN)({name:Oe.column,dataType:Oe.type,dataTypeSchema:Oe.type_schema,isNullable:!Oe.not_null,isAutoIncrementing:Oe.auto_incrementing!==null,hasDefaultValue:Oe.has_default,comment:Oe.column_description??void 0})),pe},[])}}let Ee=/"/g;class $e extends K.n{sanitizeIdentifier(w){return w.replace(Ee,'""')}}let v=BigInt("3853314791062309107");class Z extends J{get supportsTransactionalDdl(){return!0}get supportsReturning(){return!0}async acquireMigrationLock(w,pe){await(0,m.l)`select pg_advisory_xact_lock(${m.l.lit(v)})`.execute(w)}async releaseMigrationLock(w,pe){}}class R{#e;constructor(w){this.#e=w}createDriver(){return new oe(this.#e)}createQueryCompiler(){return new $e}createAdapter(){return new Z}createIntrospector(w){return new we(w)}}class S extends J{get supportsCreateIfNotExists(){return!1}get supportsTransactionalDdl(){return!0}get supportsOutput(){return!0}async acquireMigrationLock(w){await(0,m.l)`exec sp_getapplock @DbPrincipal = ${m.l.lit("dbo")}, @Resource = ${m.l.lit(_.kQ)}, @LockMode = ${m.l.lit("Exclusive")}`.execute(w)}async releaseMigrationLock(){}}var E=o(54184),A=o(9300);let U=Symbol(),te=Symbol(),Y=Symbol();class D{#e;#t;constructor(w){this.#e=(0,c.CN)({...w});let{tarn:pe,tedious:Oe,validateConnections:Ve}=this.#e,{validateConnections:_t,...Yt}=pe.options;this.#t=new pe.Pool({...Yt,create:async()=>{let ar=await Oe.connectionFactory();return await new ee(ar,Oe).connect()},destroy:async ar=>{await ar[te]()},validate:Ve===!1||_t===!1?void 0:ar=>ar[Y]()})}async init(){}async acquireConnection(){return await this.#t.acquire().promise}async beginTransaction(w,pe){await w.beginTransaction(pe)}async commitTransaction(w){await w.commitTransaction()}async rollbackTransaction(w){await w.rollbackTransaction()}async savepoint(w,pe){await w.savepoint(pe)}async rollbackToSavepoint(w,pe){await w.rollbackTransaction(pe)}async releaseConnection(w){(this.#e.resetConnectionsOnRelease||this.#e.tedious.resetConnectionOnRelease)&&await w[U](),this.#t.release(w)}async destroy(){await this.#t.destroy()}}class ee{#e;#t;#r;constructor(w,pe){this.#e=w,this.#t=!1,this.#r=pe}async beginTransaction(w){let{isolationLevel:pe}=w;await new Promise((Oe,Ve)=>this.#e.beginTransaction(_t=>{_t?Ve(_t):Oe(void 0)},pe?(0,E.D)(8):void 0,pe?this.#i(pe):void 0))}async commitTransaction(){await new Promise((w,pe)=>this.#e.commitTransaction(Oe=>{Oe?pe(Oe):w(void 0)}))}async connect(){let{promise:w,reject:pe,resolve:Oe}=new A.c;function Ve(){pe(Error("The connection ended without ever completing the connection"))}return this.#e.connect(_t=>{if(_t)return pe(_t);Oe()}),this.#e.on("error",_t=>{_t instanceof Error&&"code"in _t&&_t.code==="ESOCKET"&&(this.#t=!0),console.error(_t),pe(_t)}),this.#e.once("end",Ve),await w,this.#e.off("end",Ve),this}async executeQuery(w){try{let pe=new A.c,Oe=new le({compiledQuery:w,tedious:this.#r,onDone:pe});this.#e.execSql(Oe.request);let{rowCount:Ve,rows:_t}=await pe.promise;return{numAffectedRows:Ve!==void 0?BigInt(Ve):void 0,rows:_t}}catch(pe){throw C(pe,Error())}}async rollbackTransaction(w){await new Promise((pe,Oe)=>this.#e.rollbackTransaction(Ve=>{Ve?Oe(Ve):pe(void 0)},w))}async savepoint(w){await new Promise((pe,Oe)=>this.#e.saveTransaction(Ve=>{Ve?Oe(Ve):pe(void 0)},w))}async*streamQuery(w,pe){if(!Number.isInteger(pe)||pe<=0)throw Error("chunkSize must be a positive integer");let Oe=new le({compiledQuery:w,streamChunkSize:pe,tedious:this.#r});this.#e.execSql(Oe.request);try{for(;;){let Ve=await Oe.readChunk();if(Ve.length===0||(yield{rows:Ve},Ve.length<pe))break}}finally{await this.#n(Oe)}}#i(w){let{ISOLATION_LEVEL:pe}=this.#r,Oe={"read committed":pe.READ_COMMITTED,"read uncommitted":pe.READ_UNCOMMITTED,"repeatable read":pe.REPEATABLE_READ,serializable:pe.SERIALIZABLE,snapshot:pe.SNAPSHOT}[w];if(Oe===void 0)throw Error(`Unknown isolation level: ${w}`);return Oe}#n(w){return new Promise(pe=>{w.request.once("requestCompleted",pe),this.#e.cancel()||(w.request.off("requestCompleted",pe),pe())})}[te](){return"closed"in this.#e&&this.#e.closed?Promise.resolve():new Promise(w=>{this.#e.once("end",w),this.#e.close()})}async[U](){await new Promise((w,pe)=>{this.#e.reset(Oe=>{if(Oe)return pe(Oe);w()})})}async[Y](){if(this.#t||this.#s())return!1;try{let w=new A.c,pe=new le({compiledQuery:s.E.raw("select 1"),onDone:w,tedious:this.#r});return this.#e.execSql(pe.request),await w.promise,!0}catch{return!1}}#s(){return"closed"in this.#e&&!!this.#e.closed}}class le{#e;#t;#r;#i;#n;#s;constructor(w){let{compiledQuery:pe,onDone:Oe,streamChunkSize:Ve,tedious:_t}=w;if(this.#t=[],this.#r=Ve,this.#i={},this.#n=_t,Oe){let Yt="onDone";this.#i[Yt]=(ar,Tr)=>{if(ar!=="chunkReady"){if(delete this.#i[Yt],ar==="error")return Oe.reject(Tr);Oe.resolve({rowCount:this.#s,rows:this.#t})}}}this.#e=new this.#n.Request(pe.sql,(Yt,ar)=>{if(Yt)return Object.values(this.#i).forEach(Tr=>Tr("error",Yt instanceof AggregateError?Yt.errors:Yt));this.#s=ar}),this.#a(pe.parameters),this.#o()}get request(){return this.#e}readChunk(){let w=this.readChunk.name;return new Promise((pe,Oe)=>{this.#i[w]=(Ve,_t)=>{if(delete this.#i[w],Ve==="error")return Oe(_t);pe(this.#t.splice(0,this.#r))},this.#e.resume()})}#a(w){for(let pe=0;pe<w.length;pe++){let Oe=w[pe];this.#e.addParameter(String(pe+1),this.#l(Oe),Oe)}}#o(){let w=this.#r?()=>{this.#r<=this.#t.length&&(this.#e.pause(),Object.values(this.#i).forEach(Oe=>Oe("chunkReady")))}:()=>{},pe=Oe=>{let Ve={};for(let _t of Oe)Ve[_t.metadata.colName]=_t.value;this.#t.push(Ve),w()};this.#e.on("row",pe),this.#e.once("requestCompleted",()=>{Object.values(this.#i).forEach(Oe=>Oe("completed")),this.#e.off("row",pe)})}#l(w){return(0,c.kZ)(w)||(0,c.b0)(w)||(0,c.Kg)(w)?this.#n.TYPES.NVarChar:(0,c.sI)(w)||(0,c.Et)(w)&&w%1==0?w<-2147483648||w>2147483647?this.#n.TYPES.BigInt:this.#n.TYPES.Int:(0,c.Et)(w)?this.#n.TYPES.Float:(0,c.Lm)(w)?this.#n.TYPES.Bit:(0,c.$P)(w)?this.#n.TYPES.DateTime:(0,c.Pe)(w)?this.#n.TYPES.VarBinary:this.#n.TYPES.NVarChar}}class se{#e;constructor(w){this.#e=w}async getSchemas(){return await this.#e.selectFrom("sys.schemas").select("name").execute()}async getTables(w={withInternalKyselyTables:!1}){let pe=await this.#e.selectFrom("sys.tables as tables").leftJoin("sys.schemas as table_schemas","table_schemas.schema_id","tables.schema_id").innerJoin("sys.columns as columns","columns.object_id","tables.object_id").innerJoin("sys.types as types","types.user_type_id","columns.user_type_id").leftJoin("sys.schemas as type_schemas","type_schemas.schema_id","types.schema_id").leftJoin("sys.extended_properties as comments",Ve=>Ve.onRef("comments.major_id","=","tables.object_id").onRef("comments.minor_id","=","columns.column_id").on("comments.name","=","MS_Description")).$if(!w.withInternalKyselyTables,Ve=>Ve.where("tables.name","!=",_.kQ).where("tables.name","!=",_.sy)).select(["tables.name as table_name",Ve=>Ve.ref("tables.type").$castTo().as("table_type"),"table_schemas.name as table_schema_name","columns.default_object_id as column_default_object_id","columns.generated_always_type_desc as column_generated_always_type","columns.is_computed as column_is_computed","columns.is_identity as column_is_identity","columns.is_nullable as column_is_nullable","columns.is_rowguidcol as column_is_rowguidcol","columns.name as column_name","types.is_nullable as type_is_nullable","types.name as type_name","type_schemas.name as type_schema_name","comments.value as column_comment"]).unionAll(this.#e.selectFrom("sys.views as views").leftJoin("sys.schemas as view_schemas","view_schemas.schema_id","views.schema_id").innerJoin("sys.columns as columns","columns.object_id","views.object_id").innerJoin("sys.types as types","types.user_type_id","columns.user_type_id").leftJoin("sys.schemas as type_schemas","type_schemas.schema_id","types.schema_id").leftJoin("sys.extended_properties as comments",Ve=>Ve.onRef("comments.major_id","=","views.object_id").onRef("comments.minor_id","=","columns.column_id").on("comments.name","=","MS_Description")).select(["views.name as table_name","views.type as table_type","view_schemas.name as table_schema_name","columns.default_object_id as column_default_object_id","columns.generated_always_type_desc as column_generated_always_type","columns.is_computed as column_is_computed","columns.is_identity as column_is_identity","columns.is_nullable as column_is_nullable","columns.is_rowguidcol as column_is_rowguidcol","columns.name as column_name","types.is_nullable as type_is_nullable","types.name as type_name","type_schemas.name as type_schema_name","comments.value as column_comment"])).orderBy("table_schema_name").orderBy("table_name").orderBy("column_name").execute(),Oe={};for(let Ve of pe){let _t=`${Ve.table_schema_name}.${Ve.table_name}`;(Oe[_t]=Oe[_t]||(0,c.CN)({columns:[],isView:Ve.table_type==="V ",name:Ve.table_name,schema:Ve.table_schema_name??void 0})).columns.push((0,c.CN)({dataType:Ve.type_name,dataTypeSchema:Ve.type_schema_name??void 0,hasDefaultValue:Ve.column_default_object_id>0||Ve.column_generated_always_type!=="NOT_APPLICABLE"||Ve.column_is_identity||Ve.column_is_computed||Ve.column_is_rowguidcol,isAutoIncrementing:Ve.column_is_identity,isNullable:Ve.column_is_nullable&&Ve.type_is_nullable,name:Ve.column_name,comment:Ve.column_comment??void 0}))}return Object.values(Oe)}async getMetadata(w){return{tables:await this.getTables(w)}}}let ce=/^[a-z0-9_]$/i;class me extends K.n{getCurrentParameterPlaceholder(){return`@${this.numParameters}`}visitOffset(w){super.visitOffset(w),this.append(" rows")}compileColumnAlterations(w){let pe={};for(let Ve of w)pe[Ve.kind]||(pe[Ve.kind]=[]),pe[Ve.kind].push(Ve);let Oe=!0;pe.AddColumnNode&&(this.append("add "),this.compileList(pe.AddColumnNode),Oe=!1),pe.AlterColumnNode&&(Oe||this.append(", "),this.compileList(pe.AlterColumnNode)),pe.DropColumnNode&&(Oe||this.append(", "),this.append("drop column "),this.compileList(pe.DropColumnNode)),pe.ModifyColumnNode&&(Oe||this.append(", "),this.compileList(pe.ModifyColumnNode)),pe.RenameColumnNode&&(Oe||this.append(", "),this.compileList(pe.RenameColumnNode))}visitAddColumn(w){this.visitNode(w.column)}visitDropColumn(w){this.visitNode(w.column)}visitMergeQuery(w){super.visitMergeQuery(w),this.append(";")}visitCollate(w){this.append("collate ");let{name:pe}=w.collation;for(let Oe of pe)if(!ce.test(Oe))throw Error(`Invalid collation: ${pe}`);this.append(pe)}announcesNewColumnDataType(){return!1}}class H{#e;constructor(w){this.#e=w}createDriver(){return new D(this.#e)}createQueryCompiler(){return new me}createAdapter(){return new S}createIntrospector(w){return new se(w)}}let ue=(0,c.CN)({is:ve=>ve.kind==="AlterTableNode",create:ve=>(0,c.CN)({kind:"AlterTableNode",table:ve}),cloneWithTableProps:(ve,w)=>(0,c.CN)({...ve,...w}),cloneWithColumnAlteration:(ve,w)=>(0,c.CN)({...ve,columnAlterations:ve.columnAlterations?[...ve.columnAlterations,w]:[w]})}),x=(0,c.CN)({is:ve=>ve.kind==="CreateIndexNode",create:ve=>(0,c.CN)({kind:"CreateIndexNode",name:y.O.create(ve)}),cloneWith:(ve,w)=>(0,c.CN)({...ve,...w}),cloneWithColumns:(ve,w)=>(0,c.CN)({...ve,columns:[...ve.columns||[],...w]})}),fe=(0,c.CN)({is:ve=>ve.kind==="CreateSchemaNode",create:(ve,w)=>(0,c.CN)({kind:"CreateSchemaNode",schema:y.O.create(ve),...w}),cloneWith:(ve,w)=>(0,c.CN)({...ve,...w})});var ge=o(70451),Se=o(3580);let Re=(0,c.CN)({is:ve=>ve.kind==="DropIndexNode",create:(ve,w)=>(0,c.CN)({kind:"DropIndexNode",name:Se.y.create(ve),...w}),cloneWith:(ve,w)=>(0,c.CN)({...ve,...w})}),ae=(0,c.CN)({is:ve=>ve.kind==="DropSchemaNode",create:(ve,w)=>(0,c.CN)({kind:"DropSchemaNode",schema:y.O.create(ve),...w}),cloneWith:(ve,w)=>(0,c.CN)({...ve,...w})}),Ae=(0,c.CN)({is:ve=>ve.kind==="DropTableNode",create:(ve,w)=>(0,c.CN)({kind:"DropTableNode",table:ve,...w}),cloneWith:(ve,w)=>(0,c.CN)({...ve,...w})});var lt=o(7286);let Je=(0,c.CN)({is:ve=>ve.kind==="AddColumnNode",create:ve=>(0,c.CN)({kind:"AddColumnNode",column:ve})});var rt=o(66142);let Ye=(0,c.CN)({is:ve=>ve.kind==="ColumnDefinitionNode",create:(ve,w)=>(0,c.CN)({kind:"ColumnDefinitionNode",column:rt.Z.create(ve),dataType:w}),cloneWithFrontModifier:(ve,w)=>(0,c.CN)({...ve,frontModifiers:ve.frontModifiers?(0,c.CN)([...ve.frontModifiers,w]):[w]}),cloneWithEndModifier:(ve,w)=>(0,c.CN)({...ve,endModifiers:ve.endModifiers?(0,c.CN)([...ve.endModifiers,w]):[w]}),cloneWith:(ve,w)=>(0,c.CN)({...ve,...w})}),St=(0,c.CN)({is:ve=>ve.kind==="DropColumnNode",create:ve=>(0,c.CN)({kind:"DropColumnNode",column:rt.Z.create(ve)})}),bt=(0,c.CN)({is:ve=>ve.kind==="RenameColumnNode",create:(ve,w)=>(0,c.CN)({kind:"RenameColumnNode",column:rt.Z.create(ve),renameTo:rt.Z.create(w)})}),qe=(0,c.CN)({is:ve=>ve.kind==="CheckConstraintNode",create:(ve,w)=>(0,c.CN)({kind:"CheckConstraintNode",expression:ve,name:w?y.O.create(w):void 0})}),re=["no action","restrict","cascade","set null","set default"],We=(0,c.CN)({is:ve=>ve.kind==="ReferencesNode",create:(ve,w)=>(0,c.CN)({kind:"ReferencesNode",table:ve,columns:(0,c.CN)([...w])}),cloneWithOnDelete:(ve,w)=>(0,c.CN)({...ve,onDelete:w}),cloneWithOnUpdate:(ve,w)=>(0,c.CN)({...ve,onUpdate:w})});var ut=o(9822),kt=o(66557),Ct=o(35889),tt=o(72391);function Ot(ve){return(0,Ct.N)(ve)?ve.toOperationNode():tt.q.createImmediate(ve)}let Wt=(0,c.CN)({is:ve=>ve.kind==="GeneratedNode",create:ve=>(0,c.CN)({kind:"GeneratedNode",...ve}),createWithExpression:ve=>(0,c.CN)({kind:"GeneratedNode",always:!0,expression:ve}),cloneWith:(ve,w)=>(0,c.CN)({...ve,...w})}),yt=(0,c.CN)({is:ve=>ve.kind==="DefaultValueNode",create:ve=>(0,c.CN)({kind:"DefaultValueNode",defaultValue:ve})});function ct(ve){if(re.includes(ve))return ve;throw Error(`invalid OnModifyForeignAction ${ve}`)}class vt{#e;constructor(w){this.#e=w}autoIncrement(){return new vt(Ye.cloneWith(this.#e,{autoIncrement:!0}))}identity(){return new vt(Ye.cloneWith(this.#e,{identity:!0}))}primaryKey(){return new vt(Ye.cloneWith(this.#e,{primaryKey:!0}))}references(w){let pe=(0,kt.q5)(w);if(!pe.table||ut.U.is(pe.column))throw Error(`invalid call references('${w}'). The reference must have format table.column or schema.table.column`);return new vt(Ye.cloneWith(this.#e,{references:We.create(pe.table,[pe.column])}))}onDelete(w){if(!this.#e.references)throw Error("on delete constraint can only be added for foreign keys");return new vt(Ye.cloneWith(this.#e,{references:We.cloneWithOnDelete(this.#e.references,ct(w))}))}onUpdate(w){if(!this.#e.references)throw Error("on update constraint can only be added for foreign keys");return new vt(Ye.cloneWith(this.#e,{references:We.cloneWithOnUpdate(this.#e.references,ct(w))}))}unique(){return new vt(Ye.cloneWith(this.#e,{unique:!0}))}notNull(){return new vt(Ye.cloneWith(this.#e,{notNull:!0}))}unsigned(){return new vt(Ye.cloneWith(this.#e,{unsigned:!0}))}defaultTo(w){return new vt(Ye.cloneWith(this.#e,{defaultTo:yt.create(Ot(w))}))}check(w){return new vt(Ye.cloneWith(this.#e,{check:qe.create(w.toOperationNode())}))}generatedAlwaysAs(w){return new vt(Ye.cloneWith(this.#e,{generated:Wt.createWithExpression(w.toOperationNode())}))}generatedAlwaysAsIdentity(){return new vt(Ye.cloneWith(this.#e,{generated:Wt.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new vt(Ye.cloneWith(this.#e,{generated:Wt.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#e.generated)throw Error("stored() can only be called after generatedAlwaysAs");return new vt(Ye.cloneWith(this.#e,{generated:Wt.cloneWith(this.#e.generated,{stored:!0})}))}modifyFront(w){return new vt(Ye.cloneWithFrontModifier(this.#e,w.toOperationNode()))}nullsNotDistinct(){return new vt(Ye.cloneWith(this.#e,{nullsNotDistinct:!0}))}ifNotExists(){return new vt(Ye.cloneWith(this.#e,{ifNotExists:!0}))}modifyEnd(w){return new vt(Ye.cloneWithEndModifier(this.#e,w.toOperationNode()))}$call(w){return w(this)}toOperationNode(){return this.#e}}let Ut=(0,c.CN)({is:ve=>ve.kind==="ModifyColumnNode",create:ve=>(0,c.CN)({kind:"ModifyColumnNode",column:ve})});var nr=o(34179);let br=(0,c.CN)({is:ve=>ve.kind==="ForeignKeyConstraintNode",create:(ve,w,pe,Oe)=>(0,c.CN)({kind:"ForeignKeyConstraintNode",columns:ve,references:We.create(w,pe),name:Oe?y.O.create(Oe):void 0}),cloneWith:(ve,w)=>(0,c.CN)({...ve,...w})});class ke{#e;constructor(w){this.#e=w}onDelete(w){return new ke(br.cloneWith(this.#e,{onDelete:ct(w)}))}onUpdate(w){return new ke(br.cloneWith(this.#e,{onUpdate:ct(w)}))}deferrable(){return new ke(br.cloneWith(this.#e,{deferrable:!0}))}notDeferrable(){return new ke(br.cloneWith(this.#e,{deferrable:!1}))}initiallyDeferred(){return new ke(br.cloneWith(this.#e,{initiallyDeferred:!0}))}initiallyImmediate(){return new ke(br.cloneWith(this.#e,{initiallyDeferred:!1}))}$call(w){return w(this)}toOperationNode(){return this.#e}}let xe=(0,c.CN)({is:ve=>ve.kind==="AddConstraintNode",create:ve=>(0,c.CN)({kind:"AddConstraintNode",constraint:ve})}),Fe=(0,c.CN)({is:ve=>ve.kind==="UniqueConstraintNode",create:(ve,w,pe)=>(0,c.CN)({kind:"UniqueConstraintNode",columns:(0,c.CN)(ve.map(rt.Z.create)),name:w?y.O.create(w):void 0,nullsNotDistinct:pe}),cloneWith:(ve,w)=>(0,c.CN)({...ve,...w})}),Ze=(0,c.CN)({is:ve=>ve.kind==="DropConstraintNode",create:ve=>(0,c.CN)({kind:"DropConstraintNode",constraintName:y.O.create(ve)}),cloneWith:(ve,w)=>(0,c.CN)({...ve,...w})}),ht=(0,c.CN)({is:ve=>ve.kind==="AlterColumnNode",create:(ve,w,pe)=>(0,c.CN)({kind:"AlterColumnNode",column:rt.Z.create(ve),[w]:pe})});class dt{#e;constructor(w){this.#e=w}setDataType(w){return new Et(ht.create(this.#e,"dataType",(0,nr.Q)(w)))}setDefault(w){return new Et(ht.create(this.#e,"setDefault",Ot(w)))}dropDefault(){return new Et(ht.create(this.#e,"dropDefault",!0))}setNotNull(){return new Et(ht.create(this.#e,"setNotNull",!0))}dropNotNull(){return new Et(ht.create(this.#e,"dropNotNull",!0))}$call(w){return w(this)}}class Et{#e;constructor(w){this.#e=w}toOperationNode(){return this.#e}}class It{#e;constructor(w){this.#e=(0,c.CN)(w)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}class jt{#e;constructor(w){this.#e=(0,c.CN)(w)}onDelete(w){return new jt({...this.#e,constraintBuilder:this.#e.constraintBuilder.onDelete(w)})}onUpdate(w){return new jt({...this.#e,constraintBuilder:this.#e.constraintBuilder.onUpdate(w)})}deferrable(){return new jt({...this.#e,constraintBuilder:this.#e.constraintBuilder.deferrable()})}notDeferrable(){return new jt({...this.#e,constraintBuilder:this.#e.constraintBuilder.notDeferrable()})}initiallyDeferred(){return new jt({...this.#e,constraintBuilder:this.#e.constraintBuilder.initiallyDeferred()})}initiallyImmediate(){return new jt({...this.#e,constraintBuilder:this.#e.constraintBuilder.initiallyImmediate()})}$call(w){return w(this)}toOperationNode(){return this.#e.executor.transformQuery(ue.cloneWithTableProps(this.#e.node,{addConstraint:xe.create(this.#e.constraintBuilder.toOperationNode())}),this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}class Ft{#e;constructor(w){this.#e=(0,c.CN)(w)}ifExists(){return new Ft({...this.#e,node:ue.cloneWithTableProps(this.#e.node,{dropConstraint:Ze.cloneWith(this.#e.node.dropConstraint,{ifExists:!0})})})}cascade(){return new Ft({...this.#e,node:ue.cloneWithTableProps(this.#e.node,{dropConstraint:Ze.cloneWith(this.#e.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new Ft({...this.#e,node:ue.cloneWithTableProps(this.#e.node,{dropConstraint:Ze.cloneWith(this.#e.node.dropConstraint,{modifier:"restrict"})})})}$call(w){return w(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}let f=(0,c.CN)({is:ve=>ve.kind==="PrimaryKeyConstraintNode",create:(ve,w)=>(0,c.CN)({kind:"PrimaryKeyConstraintNode",columns:(0,c.CN)(ve.map(rt.Z.create)),name:w?y.O.create(w):void 0}),cloneWith:(ve,w)=>(0,c.CN)({...ve,...w})}),ye=(0,c.CN)({is:ve=>ve.kind==="AddIndexNode",create:ve=>(0,c.CN)({kind:"AddIndexNode",name:y.O.create(ve)}),cloneWith:(ve,w)=>(0,c.CN)({...ve,...w}),cloneWithColumns:(ve,w)=>(0,c.CN)({...ve,columns:[...ve.columns||[],...w]})});class Ie{#e;constructor(w){this.#e=(0,c.CN)(w)}unique(){return new Ie({...this.#e,node:ue.cloneWithTableProps(this.#e.node,{addIndex:ye.cloneWith(this.#e.node.addIndex,{unique:!0})})})}column(w){return new Ie({...this.#e,node:ue.cloneWithTableProps(this.#e.node,{addIndex:ye.cloneWithColumns(this.#e.node.addIndex,[(0,kt.Ow)(w)])})})}columns(w){return new Ie({...this.#e,node:ue.cloneWithTableProps(this.#e.node,{addIndex:ye.cloneWithColumns(this.#e.node.addIndex,w.map(kt.Ow))})})}expression(w){return new Ie({...this.#e,node:ue.cloneWithTableProps(this.#e.node,{addIndex:ye.cloneWithColumns(this.#e.node.addIndex,[w.toOperationNode()])})})}using(w){return new Ie({...this.#e,node:ue.cloneWithTableProps(this.#e.node,{addIndex:ye.cloneWith(this.#e.node.addIndex,{using:h.z.createWithSql(w)})})})}$call(w){return w(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}class Te{#e;constructor(w){this.#e=w}nullsNotDistinct(){return new Te(Fe.cloneWith(this.#e,{nullsNotDistinct:!0}))}deferrable(){return new Te(Fe.cloneWith(this.#e,{deferrable:!0}))}notDeferrable(){return new Te(Fe.cloneWith(this.#e,{deferrable:!1}))}initiallyDeferred(){return new Te(Fe.cloneWith(this.#e,{initiallyDeferred:!0}))}initiallyImmediate(){return new Te(Fe.cloneWith(this.#e,{initiallyDeferred:!1}))}$call(w){return w(this)}toOperationNode(){return this.#e}}class ze{#e;constructor(w){this.#e=w}deferrable(){return new ze(f.cloneWith(this.#e,{deferrable:!0}))}notDeferrable(){return new ze(f.cloneWith(this.#e,{deferrable:!1}))}initiallyDeferred(){return new ze(f.cloneWith(this.#e,{initiallyDeferred:!0}))}initiallyImmediate(){return new ze(f.cloneWith(this.#e,{initiallyDeferred:!1}))}$call(w){return w(this)}toOperationNode(){return this.#e}}class Ce{#e;constructor(w){this.#e=w}$call(w){return w(this)}toOperationNode(){return this.#e}}let He=(0,c.CN)({is:ve=>ve.kind==="RenameConstraintNode",create:(ve,w)=>(0,c.CN)({kind:"RenameConstraintNode",oldName:y.O.create(ve),newName:y.O.create(w)})});class Ge{#e;constructor(w){this.#e=(0,c.CN)(w)}renameTo(w){return new It({...this.#e,node:ue.cloneWithTableProps(this.#e.node,{renameTo:(0,lt.M$)(w)})})}setSchema(w){return new It({...this.#e,node:ue.cloneWithTableProps(this.#e.node,{setSchema:y.O.create(w)})})}alterColumn(w,pe){let Oe=pe(new dt(w));return new it({...this.#e,node:ue.cloneWithColumnAlteration(this.#e.node,Oe.toOperationNode())})}dropColumn(w){return new it({...this.#e,node:ue.cloneWithColumnAlteration(this.#e.node,St.create(w))})}renameColumn(w,pe){return new it({...this.#e,node:ue.cloneWithColumnAlteration(this.#e.node,bt.create(w,pe))})}addColumn(w,pe,Oe=c.lQ){let Ve=Oe(new vt(Ye.create(w,(0,nr.Q)(pe))));return new it({...this.#e,node:ue.cloneWithColumnAlteration(this.#e.node,Je.create(Ve.toOperationNode()))})}modifyColumn(w,pe,Oe=c.lQ){let Ve=Oe(new vt(Ye.create(w,(0,nr.Q)(pe))));return new it({...this.#e,node:ue.cloneWithColumnAlteration(this.#e.node,Ut.create(Ve.toOperationNode()))})}addUniqueConstraint(w,pe,Oe=c.lQ){let Ve=Oe(new Te(Fe.create(pe,w)));return new It({...this.#e,node:ue.cloneWithTableProps(this.#e.node,{addConstraint:xe.create(Ve.toOperationNode())})})}addCheckConstraint(w,pe,Oe=c.lQ){let Ve=Oe(new Ce(qe.create(pe.toOperationNode(),w)));return new It({...this.#e,node:ue.cloneWithTableProps(this.#e.node,{addConstraint:xe.create(Ve.toOperationNode())})})}addForeignKeyConstraint(w,pe,Oe,Ve,_t=c.lQ){let Yt=_t(new ke(br.create(pe.map(rt.Z.create),(0,lt.M$)(Oe),Ve.map(rt.Z.create),w)));return new jt({...this.#e,constraintBuilder:Yt})}addPrimaryKeyConstraint(w,pe,Oe=c.lQ){let Ve=Oe(new ze(f.create(pe,w)));return new It({...this.#e,node:ue.cloneWithTableProps(this.#e.node,{addConstraint:xe.create(Ve.toOperationNode())})})}dropConstraint(w){return new Ft({...this.#e,node:ue.cloneWithTableProps(this.#e.node,{dropConstraint:Ze.create(w)})})}renameConstraint(w,pe){return new Ft({...this.#e,node:ue.cloneWithTableProps(this.#e.node,{renameConstraint:He.create(w,pe)})})}addIndex(w){return new Ie({...this.#e,node:ue.cloneWithTableProps(this.#e.node,{addIndex:ye.create(w)})})}dropIndex(w){return new It({...this.#e,node:ue.cloneWithTableProps(this.#e.node,{dropIndex:Re.create(w)})})}$call(w){return w(this)}}class it{#e;constructor(w){this.#e=(0,c.CN)(w)}alterColumn(w,pe){let Oe=pe(new dt(w));return new it({...this.#e,node:ue.cloneWithColumnAlteration(this.#e.node,Oe.toOperationNode())})}dropColumn(w){return new it({...this.#e,node:ue.cloneWithColumnAlteration(this.#e.node,St.create(w))})}renameColumn(w,pe){return new it({...this.#e,node:ue.cloneWithColumnAlteration(this.#e.node,bt.create(w,pe))})}addColumn(w,pe,Oe=c.lQ){let Ve=Oe(new vt(Ye.create(w,(0,nr.Q)(pe))));return new it({...this.#e,node:ue.cloneWithColumnAlteration(this.#e.node,Je.create(Ve.toOperationNode()))})}modifyColumn(w,pe,Oe=c.lQ){let Ve=Oe(new vt(Ye.create(w,(0,nr.Q)(pe))));return new it({...this.#e,node:ue.cloneWithColumnAlteration(this.#e.node,Ut.create(Ve.toOperationNode()))})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}var gt=o(34395),at=o(28227),wt=o(82891),Tt=o(48300);class Qt extends wt.V{transformPrimitiveValueList(w){return Tt.s.create(w.values.map(tt.q.createImmediate))}transformValue(w){return tt.q.createImmediate(w.value)}}class Jt{#e;constructor(w){this.#e=(0,c.CN)(w)}ifNotExists(){return new Jt({...this.#e,node:x.cloneWith(this.#e.node,{ifNotExists:!0})})}unique(){return new Jt({...this.#e,node:x.cloneWith(this.#e.node,{unique:!0})})}nullsNotDistinct(){return new Jt({...this.#e,node:x.cloneWith(this.#e.node,{nullsNotDistinct:!0})})}on(w){return new Jt({...this.#e,node:x.cloneWith(this.#e.node,{table:(0,lt.M$)(w)})})}column(w){return new Jt({...this.#e,node:x.cloneWithColumns(this.#e.node,[(0,kt.Ow)(w)])})}columns(w){return new Jt({...this.#e,node:x.cloneWithColumns(this.#e.node,w.map(kt.Ow))})}expression(w){return new Jt({...this.#e,node:x.cloneWithColumns(this.#e.node,[w.toOperationNode()])})}using(w){return new Jt({...this.#e,node:x.cloneWith(this.#e.node,{using:h.z.createWithSql(w)})})}where(...w){let pe=new Qt;return new Jt({...this.#e,node:at.L.cloneWithWhere(this.#e.node,pe.transformNode((0,gt.GB)(w),this.#e.queryId))})}$call(w){return w(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}class er{#e;constructor(w){this.#e=(0,c.CN)(w)}ifNotExists(){return new er({...this.#e,node:fe.cloneWith(this.#e.node,{ifNotExists:!0})})}$call(w){return w(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}var $t=o(80282);class Pt{#e;constructor(w){this.#e=(0,c.CN)(w)}temporary(){return new Pt({...this.#e,node:ge.B.cloneWith(this.#e.node,{temporary:!0})})}onCommit(w){return new Pt({...this.#e,node:ge.B.cloneWith(this.#e.node,{onCommit:function(pe){if(ge.o.includes(pe))return pe;throw Error(`invalid OnCommitAction ${pe}`)}(w)})})}ifNotExists(){return new Pt({...this.#e,node:ge.B.cloneWith(this.#e.node,{ifNotExists:!0})})}addColumn(w,pe,Oe=c.lQ){let Ve=Oe(new vt(Ye.create(w,(0,nr.Q)(pe))));return new Pt({...this.#e,node:ge.B.cloneWithColumn(this.#e.node,Ve.toOperationNode())})}addPrimaryKeyConstraint(w,pe,Oe=c.lQ){let Ve=Oe(new ze(f.create(pe,w)));return new Pt({...this.#e,node:ge.B.cloneWithConstraint(this.#e.node,Ve.toOperationNode())})}addUniqueConstraint(w,pe,Oe=c.lQ){let Ve=Oe(new Te(Fe.create(pe,w)));return new Pt({...this.#e,node:ge.B.cloneWithConstraint(this.#e.node,Ve.toOperationNode())})}addCheckConstraint(w,pe,Oe=c.lQ){let Ve=Oe(new Ce(qe.create(pe.toOperationNode(),w)));return new Pt({...this.#e,node:ge.B.cloneWithConstraint(this.#e.node,Ve.toOperationNode())})}addForeignKeyConstraint(w,pe,Oe,Ve,_t=c.lQ){let Yt=_t(new ke(br.create(pe.map(rt.Z.create),(0,lt.M$)(Oe),Ve.map(rt.Z.create),w)));return new Pt({...this.#e,node:ge.B.cloneWithConstraint(this.#e.node,Yt.toOperationNode())})}modifyFront(w){return new Pt({...this.#e,node:ge.B.cloneWithFrontModifier(this.#e.node,w.toOperationNode())})}modifyEnd(w){return new Pt({...this.#e,node:ge.B.cloneWithEndModifier(this.#e.node,w.toOperationNode())})}as(w){return new Pt({...this.#e,node:ge.B.cloneWith(this.#e.node,{selectQuery:(0,$t.YK)(w)})})}$call(w){return w(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}class qt{#e;constructor(w){this.#e=(0,c.CN)(w)}on(w){return new qt({...this.#e,node:Re.cloneWith(this.#e.node,{table:(0,lt.M$)(w)})})}ifExists(){return new qt({...this.#e,node:Re.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new qt({...this.#e,node:Re.cloneWith(this.#e.node,{cascade:!0})})}$call(w){return w(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}class or{#e;constructor(w){this.#e=(0,c.CN)(w)}ifExists(){return new or({...this.#e,node:ae.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new or({...this.#e,node:ae.cloneWith(this.#e.node,{cascade:!0})})}$call(w){return w(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}class Vt{#e;constructor(w){this.#e=(0,c.CN)(w)}ifExists(){return new Vt({...this.#e,node:Ae.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new Vt({...this.#e,node:Ae.cloneWith(this.#e.node,{cascade:!0})})}$call(w){return w(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}var lr=o(21430),ur=o(9378);class gr{#e=new Qt;transformQuery(w){return this.#e.transformNode(w.node,w.queryId)}transformResult(w){return Promise.resolve(w.result)}}class Or{#e;constructor(w){this.#e=(0,c.CN)(w)}temporary(){return new Or({...this.#e,node:ur.Y.cloneWith(this.#e.node,{temporary:!0})})}materialized(){return new Or({...this.#e,node:ur.Y.cloneWith(this.#e.node,{materialized:!0})})}ifNotExists(){return new Or({...this.#e,node:ur.Y.cloneWith(this.#e.node,{ifNotExists:!0})})}orReplace(){return new Or({...this.#e,node:ur.Y.cloneWith(this.#e.node,{orReplace:!0})})}columns(w){return new Or({...this.#e,node:ur.Y.cloneWith(this.#e.node,{columns:w.map(kt.RY)})})}as(w){let pe=w.withPlugin(new gr).toOperationNode();return new Or({...this.#e,node:ur.Y.cloneWith(this.#e.node,{as:pe})})}$call(w){return w(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}let ir=(0,c.CN)({is:ve=>ve.kind==="DropViewNode",create:ve=>(0,c.CN)({kind:"DropViewNode",name:Se.y.create(ve)}),cloneWith:(ve,w)=>(0,c.CN)({...ve,...w})});class vr{#e;constructor(w){this.#e=(0,c.CN)(w)}materialized(){return new vr({...this.#e,node:ir.cloneWith(this.#e.node,{materialized:!0})})}ifExists(){return new vr({...this.#e,node:ir.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new vr({...this.#e,node:ir.cloneWith(this.#e.node,{cascade:!0})})}$call(w){return w(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}let Cr=(0,c.CN)({is:ve=>ve.kind==="CreateTypeNode",create:ve=>(0,c.CN)({kind:"CreateTypeNode",name:ve}),cloneWithEnum:(ve,w)=>(0,c.CN)({...ve,enum:Tt.s.create(w.map(tt.q.createImmediate))})});class Mr{#e;constructor(w){this.#e=(0,c.CN)(w)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}asEnum(w){return new Mr({...this.#e,node:Cr.cloneWithEnum(this.#e.node,w)})}$call(w){return w(this)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}let Wr=(0,c.CN)({is:ve=>ve.kind==="DropTypeNode",create:ve=>(0,c.CN)({kind:"DropTypeNode",name:ve}),cloneWith:(ve,w)=>(0,c.CN)({...ve,...w})});class Ti{#e;constructor(w){this.#e=(0,c.CN)(w)}ifExists(){return new Ti({...this.#e,node:Wr.cloneWith(this.#e.node,{ifExists:!0})})}$call(w){return w(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}function Kr(ve){if(!ve.includes("."))return Se.y.create(ve);{let w=ve.split(".").map(yi);if(w.length===2)return Se.y.createWithSchema(w[0],w[1]);throw Error(`invalid schemable identifier ${ve}`)}}function yi(ve){return ve.trim()}let ii=(0,c.CN)({is:ve=>ve.kind==="RefreshMaterializedViewNode",create:ve=>(0,c.CN)({kind:"RefreshMaterializedViewNode",name:Se.y.create(ve)}),cloneWith:(ve,w)=>(0,c.CN)({...ve,...w})});class Ii{#e;constructor(w){this.#e=(0,c.CN)(w)}concurrently(){return new Ii({...this.#e,node:ii.cloneWith(this.#e.node,{concurrently:!0,withNoData:!1})})}withData(){return new Ii({...this.#e,node:ii.cloneWith(this.#e.node,{withNoData:!1})})}withNoData(){return new Ii({...this.#e,node:ii.cloneWith(this.#e.node,{withNoData:!0,concurrently:!1})})}$call(w){return w(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}class Ei{#e;constructor(w){this.#e=w}createTable(w){return new Pt({queryId:(0,O.a)(),executor:this.#e,node:ge.B.create((0,lt.M$)(w))})}dropTable(w){return new Vt({queryId:(0,O.a)(),executor:this.#e,node:Ae.create((0,lt.M$)(w))})}createIndex(w){return new Jt({queryId:(0,O.a)(),executor:this.#e,node:x.create(w)})}dropIndex(w){return new qt({queryId:(0,O.a)(),executor:this.#e,node:Re.create(w)})}createSchema(w){return new er({queryId:(0,O.a)(),executor:this.#e,node:fe.create(w)})}dropSchema(w){return new or({queryId:(0,O.a)(),executor:this.#e,node:ae.create(w)})}alterTable(w){return new Ge({queryId:(0,O.a)(),executor:this.#e,node:ue.create((0,lt.M$)(w))})}createView(w){return new Or({queryId:(0,O.a)(),executor:this.#e,node:ur.Y.create(w)})}refreshMaterializedView(w){return new Ii({queryId:(0,O.a)(),executor:this.#e,node:ii.create(w)})}dropView(w){return new vr({queryId:(0,O.a)(),executor:this.#e,node:ir.create(w)})}createType(w){return new Mr({queryId:(0,O.a)(),executor:this.#e,node:Cr.create(Kr(w))})}dropType(w){return new Ti({queryId:(0,O.a)(),executor:this.#e,node:Wr.create(Kr(w))})}withPlugin(w){return new Ei(this.#e.withPlugin(w))}withoutPlugins(){return new Ei(this.#e.withoutPlugins())}withSchema(w){return new Ei(this.#e.withPluginAtFront(new lr.B(w)))}}var un=o(96499),Cn=o(75454);class Pn{ref(w){return new un.g(w)}table(w){return new Cn.bj(w)}}class ui{#e;constructor(w){this.#e=w}async provideConnection(w){let pe=await this.#e.acquireConnection();try{return await w(pe)}finally{await this.#e.releaseConnection(pe)}}}var Zi=o(58090),cn=o(62049);class Jr extends cn.R{#e;#t;#r;constructor(w,pe,Oe,Ve=[]){super(Ve),this.#e=w,this.#t=pe,this.#r=Oe}get adapter(){return this.#t}compileQuery(w,pe){return this.#e.compileQuery(w,pe)}provideConnection(w){return this.#r.provideConnection(w)}withPlugins(w){return new Jr(this.#e,this.#t,this.#r,[...this.plugins,...w])}withPlugin(w){return new Jr(this.#e,this.#t,this.#r,[...this.plugins,w])}withPluginAtFront(w){return new Jr(this.#e,this.#t,this.#r,[w,...this.plugins])}withConnectionProvider(w){return new Jr(this.#e,this.#t,w,[...this.plugins])}withoutPlugins(){return new Jr(this.#e,this.#t,this.#r,[])}}function Ai(){return typeof performance<"u"&&(0,c.Tn)(performance.now)?performance.now():Date.now()}class Vi{#e;#t;#r;#i;#n;#s=new WeakSet;constructor(w,pe){this.#i=!1,this.#e=w,this.#t=pe}async init(){if(this.#n)throw Error("driver has already been destroyed");this.#r||(this.#r=this.#e.init().then(()=>{this.#i=!0}).catch(w=>(this.#r=void 0,Promise.reject(w)))),await this.#r}async acquireConnection(){if(this.#n)throw Error("driver has already been destroyed");this.#i||await this.init();let w=await this.#e.acquireConnection();return this.#s.has(w)||(this.#a()&&this.#o(w),this.#s.add(w)),w}async releaseConnection(w){await this.#e.releaseConnection(w)}beginTransaction(w,pe){return this.#e.beginTransaction(w,pe)}commitTransaction(w){return this.#e.commitTransaction(w)}rollbackTransaction(w){return this.#e.rollbackTransaction(w)}savepoint(w,pe,Oe){if(this.#e.savepoint)return this.#e.savepoint(w,pe,Oe);throw Error("The `savepoint` method is not supported by this driver")}rollbackToSavepoint(w,pe,Oe){if(this.#e.rollbackToSavepoint)return this.#e.rollbackToSavepoint(w,pe,Oe);throw Error("The `rollbackToSavepoint` method is not supported by this driver")}releaseSavepoint(w,pe,Oe){if(this.#e.releaseSavepoint)return this.#e.releaseSavepoint(w,pe,Oe);throw Error("The `releaseSavepoint` method is not supported by this driver")}async destroy(){this.#r&&(await this.#r,this.#n||(this.#n=this.#e.destroy().catch(w=>(this.#n=void 0,Promise.reject(w)))),await this.#n)}#a(){return this.#t.isLevelEnabled("query")||this.#t.isLevelEnabled("error")}#o(w){let pe=w.executeQuery,Oe=w.streamQuery,Ve=this;w.executeQuery=async _t=>{let Yt,ar=Ai();try{return await pe.call(w,_t)}catch(Tr){throw Yt=Tr,await Ve.#l(Tr,_t,ar),Tr}finally{Yt||await Ve.#u(_t,ar)}},w.streamQuery=async function*(_t,Yt){let ar,Tr=Ai();try{for await(let Lr of Oe.call(w,_t,Yt))yield Lr}catch(Lr){throw ar=Lr,await Ve.#l(Lr,_t,Tr),Lr}finally{ar||await Ve.#u(_t,Tr,!0)}}}async#l(w,pe,Oe){await this.#t.error(()=>({level:"error",error:w,query:pe,queryDurationMillis:this.#d(Oe)}))}async#u(w,pe,Oe=!1){await this.#t.query(()=>({level:"query",isStream:Oe,query:w,queryDurationMillis:this.#d(pe)}))}#d(w){return Ai()-w}}let dn=()=>{};class zi{#e;#t;constructor(w){this.#e=w}async provideConnection(w){for(;this.#t;)await this.#t.catch(dn);return this.#t=this.#r(w).finally(()=>{this.#t=void 0}),this.#t}async#r(w){return await w(this.#e)}}let Hr=["read only","read write"],Fr=["read uncommitted","read committed","repeatable read","serializable","snapshot"];function Qr(ve){if(ve.accessMode&&!Hr.includes(ve.accessMode))throw Error(`invalid transaction access mode ${ve.accessMode}`);if(ve.isolationLevel&&!Fr.includes(ve.isolationLevel))throw Error(`invalid transaction isolation level ${ve.isolationLevel}`)}var Gi=o(80594);(0,c.CN)(["query","error"]);class ci{#e;#t;constructor(w){(0,c.Tn)(w)?(this.#t=w,this.#e=(0,c.CN)({query:!0,error:!0})):(this.#t=$i,this.#e=(0,c.CN)({query:w.includes("query"),error:w.includes("error")}))}isLevelEnabled(w){return this.#e[w]}async query(w){this.#e.query&&await this.#t(w())}async error(w){this.#e.error&&await this.#t(w())}}function $i(ve){if(ve.level==="query"){let w=`kysely:query:${ve.isStream?"stream:":""}`;console.log(`${w} ${ve.query.sql}`),console.log(`${w} duration: ${ve.queryDurationMillis.toFixed(1)}ms`)}else ve.level==="error"&&(ve.error instanceof Error?console.error(`kysely:error: ${ve.error.stack??ve.error.message}`):console.error(`kysely:error: ${JSON.stringify({error:ve.error,query:ve.query.sql,queryDurationMillis:ve.queryDurationMillis})}`))}var Oi=o(61477),hn=o(37852),gi=o(83754),pn=o(56899);Symbol.asyncDispose??=Symbol("Symbol.asyncDispose");class zr extends Zi.n{#e;constructor(w){let pe,Oe;if(function(Ve){return(0,c.Gv)(Ve)&&(0,c.Gv)(Ve.config)&&(0,c.Gv)(Ve.driver)&&(0,c.Gv)(Ve.executor)&&(0,c.Gv)(Ve.dialect)}(w))pe={executor:w.executor},Oe={...w};else{let Ve=w.dialect,_t=Ve.createDriver(),Yt=Ve.createQueryCompiler(),ar=Ve.createAdapter(),Tr=new Vi(_t,new ci(w.log??[])),Lr=new Jr(Yt,ar,new ui(Tr),w.plugins??[]);pe={executor:Lr},Oe={config:w,executor:Lr,dialect:Ve,driver:Tr}}super(pe),this.#e=(0,c.CN)(Oe)}get schema(){return new Ei(this.#e.executor)}get dynamic(){return new Pn}get introspection(){return this.#e.dialect.createIntrospector(this.withoutPlugins())}case(w){return new Oi.OU({node:hn.P.create((0,c.b0)(w)?void 0:(0,$t.YK)(w))})}get fn(){return(0,Gi.t)()}transaction(){return new Ci({...this.#e})}startTransaction(){return new vi({...this.#e})}connection(){return new si({...this.#e})}withPlugin(w){return new zr({...this.#e,executor:this.#e.executor.withPlugin(w)})}withoutPlugins(){return new zr({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(w){return new zr({...this.#e,executor:this.#e.executor.withPluginAtFront(new lr.B(w))})}withTables(){return new zr({...this.#e})}async destroy(){await this.#e.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#e.executor}executeQuery(w,pe){pe!==void 0&&(0,pn.u)("Passing `queryId` in `db.executeQuery` is deprecated and will result in a compile-time error in the future.");let Oe=(0,c.Gv)(w)&&(0,c.Tn)(w.compile)?w.compile():w;return this.getExecutor().executeQuery(Oe)}async[Symbol.asyncDispose](){await this.destroy()}}class ni extends zr{#e;constructor(w){super(w),this.#e=w}get isTransaction(){return!0}transaction(){throw Error("calling the transaction method for a Transaction is not supported")}connection(){throw Error("calling the connection method for a Transaction is not supported")}async destroy(){throw Error("calling the destroy method for a Transaction is not supported")}withPlugin(w){return new ni({...this.#e,executor:this.#e.executor.withPlugin(w)})}withoutPlugins(){return new ni({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(w){return new ni({...this.#e,executor:this.#e.executor.withPluginAtFront(new lr.B(w))})}withTables(){return new ni({...this.#e})}}class si{#e;constructor(w){this.#e=(0,c.CN)(w)}async execute(w){return this.#e.executor.provideConnection(async pe=>{let Oe=this.#e.executor.withConnectionProvider(new zi(pe)),Ve=new zr({...this.#e,executor:Oe});return await w(Ve)})}}class Ci{#e;constructor(w){this.#e=(0,c.CN)(w)}setAccessMode(w){return new Ci({...this.#e,accessMode:w})}setIsolationLevel(w){return new Ci({...this.#e,isolationLevel:w})}async execute(w){let{isolationLevel:pe,accessMode:Oe,...Ve}=this.#e,_t={isolationLevel:pe,accessMode:Oe};return Qr(_t),this.#e.executor.provideConnection(async Yt=>{let ar={isCommitted:!1,isRolledBack:!1},Tr=new Br(this.#e.executor.withConnectionProvider(new zi(Yt)),ar),Lr=new ni({...Ve,executor:Tr}),qr=!1;try{await this.#e.driver.beginTransaction(Yt,_t),qr=!0;let Pi=await w(Lr);return await this.#e.driver.commitTransaction(Yt),ar.isCommitted=!0,Pi}catch(Pi){throw qr&&(await this.#e.driver.rollbackTransaction(Yt),ar.isRolledBack=!0),Pi}})}}class vi{#e;constructor(w){this.#e=(0,c.CN)(w)}setAccessMode(w){return new vi({...this.#e,accessMode:w})}setIsolationLevel(w){return new vi({...this.#e,isolationLevel:w})}async execute(){let{isolationLevel:w,accessMode:pe,...Oe}=this.#e,Ve={isolationLevel:w,accessMode:pe};Qr(Ve);let _t=await(0,gi.G)(this.#e.executor);return await this.#e.driver.beginTransaction(_t.connection,Ve),new Vr({...Oe,connection:_t,executor:this.#e.executor.withConnectionProvider(new zi(_t.connection))})}}class Vr extends ni{#e;#t;#r;constructor(w){let pe={isCommitted:!1,isRolledBack:!1},{connection:Oe,...Ve}=w={...w,executor:new Br(w.executor,pe)};super(Ve),this.#e=(0,c.CN)(w),this.#r=pe;let _t=(0,O.a)();this.#t=Yt=>w.executor.compileQuery(Yt,_t)}get isCommitted(){return this.#r.isCommitted}get isRolledBack(){return this.#r.isRolledBack}commit(){return oi(this.#r),new Xr(async()=>{await this.#e.driver.commitTransaction(this.#e.connection.connection),this.#r.isCommitted=!0,this.#e.connection.release()})}rollback(){return oi(this.#r),new Xr(async()=>{await this.#e.driver.rollbackTransaction(this.#e.connection.connection),this.#r.isRolledBack=!0,this.#e.connection.release()})}savepoint(w){return oi(this.#r),new Xr(async()=>(await this.#e.driver.savepoint?.(this.#e.connection.connection,w,this.#t),new Vr({...this.#e})))}rollbackToSavepoint(w){return oi(this.#r),new Xr(async()=>(await this.#e.driver.rollbackToSavepoint?.(this.#e.connection.connection,w,this.#t),new Vr({...this.#e})))}releaseSavepoint(w){return oi(this.#r),new Xr(async()=>(await this.#e.driver.releaseSavepoint?.(this.#e.connection.connection,w,this.#t),new Vr({...this.#e})))}withPlugin(w){return new Vr({...this.#e,executor:this.#e.executor.withPlugin(w)})}withoutPlugins(){return new Vr({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(w){return new Vr({...this.#e,executor:this.#e.executor.withPluginAtFront(new lr.B(w))})}withTables(){return new Vr({...this.#e})}}class Xr{#e;constructor(w){this.#e=w}async execute(){return await this.#e()}}function oi(ve){if(ve.isCommitted)throw Error("Transaction is already committed");if(ve.isRolledBack)throw Error("Transaction is already rolled back")}class Br{#e;#t;constructor(w,pe){w instanceof Br?this.#e=w.#e:this.#e=w,this.#t=pe}get adapter(){return this.#e.adapter}get plugins(){return this.#e.plugins}transformQuery(w,pe){return this.#e.transformQuery(w,pe)}compileQuery(w,pe){return this.#e.compileQuery(w,pe)}provideConnection(w){return this.#e.provideConnection(w)}executeQuery(w){return oi(this.#t),this.#e.executeQuery(w)}stream(w,pe){return oi(this.#t),this.#e.stream(w,pe)}withConnectionProvider(w){return new Br(this.#e.withConnectionProvider(w),this.#t)}withPlugin(w){return new Br(this.#e.withPlugin(w),this.#t)}withPlugins(w){return new Br(this.#e.withPlugins(w),this.#t)}withPluginAtFront(w){return new Br(this.#e.withPluginAtFront(w),this.#t)}withoutPlugins(){return new Br(this.#e.withoutPlugins(),this.#t)}}function Bi(ve){if(!ve)return null;if("dialect"in ve)return Bi(ve.dialect);if("createDriver"in ve){if(ve instanceof V)return"sqlite";if(ve instanceof G)return"mysql";if(ve instanceof R)return"postgres";if(ve instanceof H)return"mssql"}return"aggregate"in ve?"sqlite":"getConnection"in ve?"mysql":"connect"in ve?"postgres":"fileControl"in ve||"open"in ve&&"close"in ve&&"prepare"in ve?"sqlite":null}let Ki=async ve=>{let w,pe=ve.database;if(!pe)return{kysely:null,databaseType:null,transaction:void 0};if("db"in pe)return{kysely:pe.db,databaseType:pe.type,transaction:pe.transaction};if("dialect"in pe)return{kysely:new zr({dialect:pe.dialect}),databaseType:pe.type,transaction:pe.transaction};let Oe=Bi(pe);if("createDriver"in pe&&(w=pe),"aggregate"in pe&&!("createSession"in pe)&&(w=new V({database:pe})),"getConnection"in pe&&(w=new G(pe)),"connect"in pe&&(w=new R({pool:pe})),"fileControl"in pe){let{BunSqliteDialect:Ve}=await Promise.resolve().then(o.bind(o,42813));w=new Ve({database:pe})}if("createSession"in pe){let Ve;try{({DatabaseSync:Ve}=await import("node:sqlite"))}catch(_t){if(_t!==null&&typeof _t=="object"&&"code"in _t&&_t.code!=="ERR_UNKNOWN_BUILTIN_MODULE")throw _t}if(Ve&&pe instanceof Ve){let{NodeSqliteDialect:_t}=await Promise.resolve().then(o.bind(o,91864));w=new _t({database:pe})}}return{kysely:w?new zr({dialect:w}):null,databaseType:Oe,transaction:void 0}}},Le.__chunk_42813=(Ue,ie,o)=>{"use strict";o.d(ie,{BunSqliteDialect:()=>K});var d=o(16755),y=o(20590),h=o(11305),i=o(72197),s=class{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(){}async releaseMigrationLock(){}get supportsOutput(){return!0}},c=class{#e;#t=new j;#r;#i;constructor(I){this.#e={...I}}async init(){this.#r=this.#e.database,this.#i=new O(this.#r),this.#e.onCreateConnection&&await this.#e.onCreateConnection(this.#i)}async acquireConnection(){return await this.#t.lock(),this.#i}async beginTransaction(I){await I.executeQuery(d.E.raw("begin"))}async commitTransaction(I){await I.executeQuery(d.E.raw("commit"))}async rollbackTransaction(I){await I.executeQuery(d.E.raw("rollback"))}async releaseConnection(){this.#t.unlock()}async destroy(){this.#r?.close()}},O=class{#e;constructor(I){this.#e=I}executeQuery(I){let{sql:p,parameters:_}=I;return Promise.resolve({rows:this.#e.prepare(p).all(_)})}async*streamQuery(){throw Error("Streaming query is not supported by SQLite driver.")}},j=class{#e;#t;async lock(){for(;await this.#e;)await this.#e;this.#e=new Promise(I=>{this.#t=I})}unlock(){let I=this.#t;this.#e=void 0,this.#t=void 0,I?.()}},$=class{#e;constructor(I){this.#e=I}async getSchemas(){return[]}async getTables(I={withInternalKyselyTables:!1}){let p=this.#e.selectFrom("sqlite_schema").where("type","=","table").where("name","not like","sqlite_%").select("name").$castTo();return I.withInternalKyselyTables||(p=p.where("name","!=",y.kQ).where("name","!=",y.sy)),Promise.all((await p.execute()).map(({name:_})=>this.#t(_)))}async getMetadata(I){return{tables:await this.getTables(I)}}async#t(I){let p=this.#e,_=(await p.selectFrom("sqlite_master").where("name","=",I).select("sql").$castTo().execute())[0]?.sql?.split(/[\(\),]/)?.find(m=>m.toLowerCase().includes("autoincrement"))?.split(/\s+/)?.[0]?.replace(/["`]/g,"");return{name:I,columns:(await p.selectFrom((0,h.l)`pragma_table_info(${I})`.as("table_info")).select(["name","type","notnull","dflt_value"]).execute()).map(m=>({name:m.name,dataType:m.type,isNullable:!m.notnull,isAutoIncrementing:m.name===_,hasDefaultValue:m.dflt_value!=null})),isView:!0}}},W=class extends i.n{getCurrentParameterPlaceholder(){return"?"}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}},K=class{#e;constructor(I){this.#e={...I}}createDriver(){return new c(this.#e)}createQueryCompiler(){return new W}createAdapter(){return new s}createIntrospector(I){return new $(I)}}},Le.__chunk_40783=(Ue,ie,o)=>{"use strict";o.d(ie,{V:()=>h});var d=o(77438),y=o(38560);class h extends y.Ss{static[d.i]="SQLiteViewBase"}},Le.__chunk_40640=(Ue,ie,o)=>{"use strict";o.d(ie,{U:()=>i});var d=o(26772),y=o(4816),h=o(75416);let i=(0,d.CN)({is:s=>s.kind==="UpdateQueryNode",create:(s,c)=>(0,d.CN)({kind:"UpdateQueryNode",table:s.length===1?s[0]:h.v.create(s),...c&&{with:c}}),createWithoutTable:()=>(0,d.CN)({kind:"UpdateQueryNode"}),cloneWithFromItems:(s,c)=>(0,d.CN)({...s,from:s.from?y.N.cloneWithFroms(s.from,c):y.N.create(c)}),cloneWithUpdates:(s,c)=>(0,d.CN)({...s,updates:s.updates?(0,d.CN)([...s.updates,...c]):c}),cloneWithLimit:(s,c)=>(0,d.CN)({...s,limit:c})})},Le.__chunk_40168=(Ue,ie,o)=>{"use strict";o.d(ie,{t:()=>y});var d=o(26772);let y=(0,d.CN)({is:h=>h.kind==="WhenNode",create:h=>(0,d.CN)({kind:"WhenNode",condition:h}),cloneWithResult:(h,i)=>(0,d.CN)({...h,result:i})})},Le.__chunk_39523=(Ue,ie,o)=>{"use strict";o.d(ie,{GQ:()=>a,EQ:()=>V,bl:()=>J});var d=o(28709),y=o(26772),h=o(43998);let i=(0,y.CN)({is:C=>C.kind==="PartitionByNode",create:C=>(0,y.CN)({kind:"PartitionByNode",items:(0,y.CN)(C)}),cloneWithItems:(C,L)=>(0,y.CN)({...C,items:(0,y.CN)([...C.items,...L])})}),s=(0,y.CN)({is:C=>C.kind==="OverNode",create:()=>(0,y.CN)({kind:"OverNode"}),cloneWithOrderByItems:(C,L)=>(0,y.CN)({...C,orderBy:C.orderBy?h.O.cloneWithItems(C.orderBy,L):h.O.create(L)}),cloneWithPartitionByItems:(C,L)=>(0,y.CN)({...C,partitionBy:C.partitionBy?i.cloneWithItems(C.partitionBy,L):i.create(L)})});var c=o(2170),O=o(34395);class j{#e;constructor(L){this.#e=(0,y.CN)(L)}on(...L){return new j({...this.#e,joinNode:d.b.cloneWithOn(this.#e.joinNode,(0,O.GB)(L))})}onRef(L,k,N){return new j({...this.#e,joinNode:d.b.cloneWithOn(this.#e.joinNode,(0,O.vC)(L,k,N))})}onTrue(){return new j({...this.#e,joinNode:d.b.cloneWithOn(this.#e.joinNode,c.z.createWithSql("true"))})}$call(L){return L(this)}toOperationNode(){return this.#e.joinNode}}var $=o(28227),W=o(19598);let K=(0,y.CN)({is:C=>C.kind==="PartitionByItemNode",create:C=>(0,y.CN)({kind:"PartitionByItemNode",partitionBy:C})});var I=o(66557);class p{#e;constructor(L){this.#e=(0,y.CN)(L)}orderBy(...L){return new p({overNode:s.cloneWithOrderByItems(this.#e.overNode,(0,W.xk)(L))})}clearOrderBy(){return new p({overNode:$.L.cloneWithoutOrderBy(this.#e.overNode)})}partitionBy(L){return new p({overNode:s.cloneWithPartitionByItems(this.#e.overNode,(0,I.kU)(L).map(K.create))})}$call(L){return L(this)}toOperationNode(){return this.#e.overNode}}var _=o(58090),m=o(8224),q=o(7286);function J(){return new _.n({executor:m.W})}function a(C,L){return new j({joinNode:d.b.create(C,(0,q.uJ)(L))})}function V(){return new p({overNode:s.create()})}},Le.__chunk_39311=(Ue,ie,o)=>{"use strict";o.d(ie,{h:()=>O,p4:()=>y,p8:()=>i,vF:()=>j});var d=o(54260);let y={reset:"\x1B[0m",bright:"\x1B[1m",dim:"\x1B[2m",undim:"\x1B[22m",underscore:"\x1B[4m",blink:"\x1B[5m",reverse:"\x1B[7m",hidden:"\x1B[8m",fg:{black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m"},bg:{black:"\x1B[40m",red:"\x1B[41m",green:"\x1B[42m",yellow:"\x1B[43m",blue:"\x1B[44m",magenta:"\x1B[45m",cyan:"\x1B[46m",white:"\x1B[47m"}},h=["debug","info","success","warn","error"];function i($,W){return h.indexOf(W)>=h.indexOf($)}let s={info:y.fg.blue,success:y.fg.green,warn:y.fg.yellow,error:y.fg.red,debug:y.fg.magenta},c=($,W,K)=>{let I=new Date().toISOString();return K?`${y.dim}${I}${y.reset} ${s[$]}${$.toUpperCase()}${y.reset} ${y.bright}[Better Auth]:${y.reset} ${W}`:`${I} ${$.toUpperCase()} [Better Auth]: ${W}`},O=$=>{let W=$?.disabled!==!0,K=$?.level??"warn",I=$?.disableColors!==void 0?!$.disableColors:(0,d.t)()!==1,p=(_,m,q=[])=>{if(!W||!i(K,_))return;let J=c(_,m,I);if(!$||typeof $.log!="function"){_==="error"?console.error(J,...q):_==="warn"?console.warn(J,...q):console.log(J,...q);return}$.log(_==="success"?"info":_,m,...q)};return{...Object.fromEntries(h.map(_=>[_,(...[m,...q])=>p(_,m,q)])),get level(){return K}}},j=O()},Le.__chunk_38560=(Ue,ie,o)=>{"use strict";let d,y;o.d(ie,{Iw:()=>R,Or:()=>E,Xs:()=>we,DJ:()=>ne,Ss:()=>te,Ct:()=>A,eG:()=>$e,qt:()=>oe,ll:()=>S});var h=o(77438),i=o(28289),s=o(21979),c=o(86962);class O{static[h.i]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(D,ee){this.reference=()=>{let{name:le,columns:se,foreignColumns:ce}=D();return{name:le,columns:se,foreignTable:ce[0].table,foreignColumns:ce}},ee&&(this._onUpdate=ee.onUpdate,this._onDelete=ee.onDelete)}onUpdate(D){return this._onUpdate=D===void 0?"no action":D,this}onDelete(D){return this._onDelete=D===void 0?"no action":D,this}build(D){return new j(D,this)}}class j{constructor(D,ee){this.table=D,this.reference=ee.reference,this.onUpdate=ee._onUpdate,this.onDelete=ee._onDelete}static[h.i]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:D,columns:ee,foreignColumns:le}=this.reference(),se=ee.map(H=>H.name),ce=le.map(H=>H.name),me=[this.table[c.E],...se,le[0].table[c.E],...ce];return D??`${me.join("_")}_fk`}}function $(Y,...D){return Y(...D)}function W(Y,D){return`${Y[c.E]}_${D.join("_")}_unique`}class K{constructor(D,ee){this.name=ee,this.columns=D}static[h.i]=null;columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(D){return new p(D,this.columns,this.nullsNotDistinctConfig,this.name)}}class I{static[h.i]=null;name;constructor(D){this.name=D}on(...D){return new K(D,this.name)}}class p{constructor(D,ee,le,se){this.table=D,this.columns=ee,this.name=se??W(this.table,this.columns.map(ce=>ce.name)),this.nullsNotDistinct=le}static[h.i]=null;columns;name;nullsNotDistinct=!1;getName(){return this.name}}function _(Y,D,ee){for(let le=D;le<Y.length;le++){let se=Y[le];if(se==="\\"){le++;continue}if(se==='"')return[Y.slice(D,le).replace(/\\/g,""),le+1];if(!ee&&(se===","||se==="}"))return[Y.slice(D,le).replace(/\\/g,""),le]}return[Y.slice(D).replace(/\\/g,""),Y.length]}class m extends i.Q{foreignKeyConfigs=[];static[h.i]="PgColumnBuilder";array(D){return new V(this.config.name,this,D)}references(D,ee={}){return this.foreignKeyConfigs.push({ref:D,actions:ee}),this}unique(D,ee){return this.config.isUnique=!0,this.config.uniqueName=D,this.config.uniqueType=ee?.nulls,this}generatedAlwaysAs(D){return this.config.generated={as:D,type:"always",mode:"stored"},this}buildForeignKeys(D,ee){return this.foreignKeyConfigs.map(({ref:le,actions:se})=>$((ce,me)=>{let H=new O(()=>({columns:[D],foreignColumns:[ce()]}));return me.onUpdate&&H.onUpdate(me.onUpdate),me.onDelete&&H.onDelete(me.onDelete),H.build(ee)},le,se))}buildExtraConfigColumn(D){return new J(D,this.config)}}class q extends s.V{constructor(D,ee){ee.uniqueName||(ee.uniqueName=W(D,[ee.name])),super(D,ee),this.table=D}static[h.i]="PgColumn"}class J extends q{static[h.i]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(D){return this.indexConfig.opClass=D,this}}class a{static[h.i]=null;constructor(D,ee,le,se){this.name=D,this.keyAsName=ee,this.type=le,this.indexConfig=se}name;keyAsName;type;indexConfig}class V extends m{static[h.i]="PgArrayBuilder";constructor(D,ee,le){super(D,"array","PgArray"),this.config.baseBuilder=ee,this.config.size=le}build(D){let ee=this.config.baseBuilder.build(D);return new C(D,this.config,ee)}}class C extends q{constructor(D,ee,le,se){super(D,ee),this.baseColumn=le,this.range=se,this.size=ee.size}size;static[h.i]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(D){return typeof D=="string"&&(D=function(ee){let[le]=function se(ce,me=0){let H=[],ue=me,x=!1;for(;ue<ce.length;){let fe=ce[ue];if(fe===","){(x||ue===me)&&H.push(""),x=!0,ue++;continue}if(x=!1,fe==="\\"){ue+=2;continue}if(fe==='"'){let[Re,ae]=_(ce,ue+1,!0);H.push(Re),ue=ae;continue}if(fe==="}")return[H,ue+1];if(fe==="{"){let[Re,ae]=se(ce,ue+1);H.push(Re),ue=ae;continue}let[ge,Se]=_(ce,ue,!1);H.push(ge),ue=Se}return[H,ue]}(ee,1);return le}(D)),D.map(ee=>this.baseColumn.mapFromDriverValue(ee))}mapToDriverValue(D,ee=!1){let le=D.map(se=>se===null?null:(0,h.is)(this.baseColumn,C)?this.baseColumn.mapToDriverValue(se,!0):this.baseColumn.mapToDriverValue(se));return ee?le:function se(ce){return`{${ce.map(me=>Array.isArray(me)?se(me):typeof me=="string"?`"${me.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${me}`).join(",")}}`}(le)}}class L extends m{static[h.i]="PgEnumObjectColumnBuilder";constructor(D,ee){super(D,"string","PgEnumObjectColumn"),this.config.enum=ee}build(D){return new k(D,this.config)}}class k extends q{static[h.i]="PgEnumObjectColumn";enum;enumValues=this.config.enum.enumValues;constructor(D,ee){super(D,ee),this.enum=ee.enum}getSQLType(){return this.enum.enumName}}let N=Symbol.for("drizzle:isPgEnum");class P extends m{static[h.i]="PgEnumColumnBuilder";constructor(D,ee){super(D,"string","PgEnumColumn"),this.config.enum=ee}build(D){return new b(D,this.config)}}class b extends q{static[h.i]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(D,ee){super(D,ee),this.enum=ee.enum}getSQLType(){return this.enum.enumName}}var z=o(11999);let F={startActiveSpan:(Y,D)=>d?(y||(y=d.trace.getTracer("drizzle-orm","0.45.1")),$((ee,le)=>le.startActiveSpan(Y,se=>{try{return D(se)}catch(ce){throw se.setStatus({code:ee.SpanStatusCode.ERROR,message:ce instanceof Error?ce.message:"Unknown error"}),ce}finally{se.end()}}),d,y)):D()};var Q=o(90208),G=o(95769);class X{static[h.i]=null}function oe(Y){return Y!=null&&typeof Y.getSQL=="function"}class ne{static[h.i]="StringChunk";value;constructor(D){this.value=Array.isArray(D)?D:[D]}getSQL(){return new we([this])}}class we{constructor(D){for(let ee of(this.queryChunks=D,D))if((0,h.is)(ee,G.XI)){let le=ee[G.XI.Symbol.Schema];this.usedTables.push(le===void 0?ee[G.XI.Symbol.Name]:le+"."+ee[G.XI.Symbol.Name])}}static[h.i]="SQL";decoder=v;shouldInlineParams=!1;usedTables=[];append(D){return this.queryChunks.push(...D.queryChunks),this}toQuery(D){return F.startActiveSpan("drizzle.buildSQL",ee=>{let le=this.buildQueryFromSourceParams(this.queryChunks,D);return ee?.setAttributes({"drizzle.query.text":le.sql,"drizzle.query.params":JSON.stringify(le.params)}),le})}buildQueryFromSourceParams(D,ee){let le=Object.assign({},ee,{inlineParams:ee.inlineParams||this.shouldInlineParams,paramStartIndex:ee.paramStartIndex||{value:0}}),{casing:se,escapeName:ce,escapeParam:me,prepareTyping:H,inlineParams:ue,paramStartIndex:x}=le;return function(fe){let ge={sql:"",params:[]};for(let Se of fe)ge.sql+=Se.sql,ge.params.push(...Se.params),Se.typings?.length&&(ge.typings||(ge.typings=[]),ge.typings.push(...Se.typings));return ge}(D.map(fe=>{if((0,h.is)(fe,ne))return{sql:fe.value.join(""),params:[]};if((0,h.is)(fe,Ee))return{sql:ce(fe.value),params:[]};if(fe===void 0)return{sql:"",params:[]};if(Array.isArray(fe)){let ge=[new ne("(")];for(let[Se,Re]of fe.entries())ge.push(Re),Se<fe.length-1&&ge.push(new ne(", "));return ge.push(new ne(")")),this.buildQueryFromSourceParams(ge,le)}if((0,h.is)(fe,we))return this.buildQueryFromSourceParams(fe.queryChunks,{...le,inlineParams:ue||fe.shouldInlineParams});if((0,h.is)(fe,G.XI)){let ge=fe[G.XI.Symbol.Schema],Se=fe[G.XI.Symbol.Name];return{sql:ge===void 0||fe[G.HE]?ce(Se):ce(ge)+"."+ce(Se),params:[]}}if((0,h.is)(fe,s.V)){let ge=se.getColumnCasing(fe);if(ee.invokeSource==="indexes")return{sql:ce(ge),params:[]};let Se=fe.table[G.XI.Symbol.Schema];return{sql:fe.table[G.HE]||Se===void 0?ce(fe.table[G.XI.Symbol.Name])+"."+ce(ge):ce(Se)+"."+ce(fe.table[G.XI.Symbol.Name])+"."+ce(ge),params:[]}}if((0,h.is)(fe,te)){let ge=fe[Q.n].schema,Se=fe[Q.n].name;return{sql:ge===void 0||fe[Q.n].isAlias?ce(Se):ce(ge)+"."+ce(Se),params:[]}}if((0,h.is)(fe,R)){if((0,h.is)(fe.value,E))return{sql:me(x.value++,fe),params:[fe],typings:["none"]};let ge=fe.value===null?null:fe.encoder.mapToDriverValue(fe.value);if((0,h.is)(ge,we))return this.buildQueryFromSourceParams([ge],le);if(ue)return{sql:this.mapInlineParam(ge,le),params:[]};let Se=["none"];return H&&(Se=[H(fe.encoder)]),{sql:me(x.value++,ge),params:[ge],typings:Se}}return(0,h.is)(fe,E)?{sql:me(x.value++,fe),params:[fe],typings:["none"]}:(0,h.is)(fe,we.Aliased)&&fe.fieldAlias!==void 0?{sql:ce(fe.fieldAlias),params:[]}:(0,h.is)(fe,z.n)?fe._.isWith?{sql:ce(fe._.alias),params:[]}:this.buildQueryFromSourceParams([new ne("("),fe._.sql,new ne(") "),new Ee(fe._.alias)],le):fe&&typeof fe=="function"&&N in fe&&fe[N]===!0?fe.schema?{sql:ce(fe.schema)+"."+ce(fe.enumName),params:[]}:{sql:ce(fe.enumName),params:[]}:oe(fe)?fe.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([fe.getSQL()],le):this.buildQueryFromSourceParams([new ne("("),fe.getSQL(),new ne(")")],le):ue?{sql:this.mapInlineParam(fe,le),params:[]}:{sql:me(x.value++,fe),params:[fe],typings:["none"]}}))}mapInlineParam(D,{escapeString:ee}){if(D===null)return"null";if(typeof D=="number"||typeof D=="boolean")return D.toString();if(typeof D=="string")return ee(D);if(typeof D=="object"){let le=D.toString();return ee(le==="[object Object]"?JSON.stringify(D):le)}throw Error("Unexpected param value: "+D)}getSQL(){return this}as(D){return D===void 0?this:new we.Aliased(this,D)}mapWith(D){return this.decoder=typeof D=="function"?{mapFromDriverValue:D}:D,this}inlineParams(){return this.shouldInlineParams=!0,this}if(D){return D?this:void 0}}class Ee{constructor(D){this.value=D}static[h.i]="Name";brand;getSQL(){return new we([this])}}function $e(Y){return typeof Y=="object"&&Y!==null&&"mapToDriverValue"in Y&&typeof Y.mapToDriverValue=="function"}let v={mapFromDriverValue:Y=>Y},Z={mapToDriverValue:Y=>Y};({...v,...Z});class R{constructor(D,ee=Z){this.value=D,this.encoder=ee}static[h.i]="Param";brand;getSQL(){return new we([this])}}function S(Y,...D){let ee=[];for(let[le,se]of((D.length>0||Y.length>0&&Y[0]!=="")&&ee.push(new ne(Y[0])),D.entries()))ee.push(se,new ne(Y[le+1]));return new we(ee)}(Y=>{Y.empty=function(){return new we([])},Y.fromList=function(D){return new we(D)},Y.raw=function(D){return new we([new ne(D)])},Y.join=function(D,ee){let le=[];for(let[se,ce]of D.entries())se>0&&ee!==void 0&&le.push(ee),le.push(ce);return new we(le)},Y.identifier=function(D){return new Ee(D)},Y.placeholder=function(D){return new E(D)},Y.param=function(D,ee){return new R(D,ee)}})(S||(S={})),(Y=>{class D{constructor(le,se){this.sql=le,this.fieldAlias=se}static[h.i]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new D(this.sql,this.fieldAlias)}}Y.Aliased=D})(we||(we={}));class E{constructor(D){this.name=D}static[h.i]="Placeholder";getSQL(){return new we([this])}}function A(Y,D){return Y.map(ee=>{if((0,h.is)(ee,E)){if(!(ee.name in D))throw Error(`No value for placeholder "${ee.name}" was provided`);return D[ee.name]}if((0,h.is)(ee,R)&&(0,h.is)(ee.value,E)){if(!(ee.value.name in D))throw Error(`No value for placeholder "${ee.value.name}" was provided`);return ee.encoder.mapToDriverValue(D[ee.value.name])}return ee})}let U=Symbol.for("drizzle:IsDrizzleView");class te{static[h.i]="View";[Q.n];[U]=!0;constructor({name:D,schema:ee,selectedFields:le,query:se}){this[Q.n]={name:D,originalName:D,schema:ee,selectedFields:le,query:se,isExisting:!se,isAlias:!1}}getSQL(){return new we([this])}}s.V.prototype.getSQL=function(){return new we([this])},G.XI.prototype.getSQL=function(){return new we([this])},z.n.prototype.getSQL=function(){return new we([this])}},Le.__chunk_38550=(Ue,ie,o)=>{"use strict";o.d(ie,{L:()=>y,O:()=>h});var d=o(54030);async function y(i,s){let c=(await i.context.internalAdapter.findAccounts(s.userId))?.find(j=>j.providerId==="credential"),O=c?.password;return!!c&&!!O&&await i.context.password.verify({hash:O,password:s.password})}async function h(i,s){let c=(await s.context.internalAdapter.findAccounts(i))?.find(j=>j.providerId==="credential"),O=c?.password;if(!c||!O||!s.body.password)throw new d.LG("BAD_REQUEST",{message:"No password credential found"});if(!await s.context.password.verify({hash:O,password:s.body.password}))throw new d.LG("BAD_REQUEST",{message:"Invalid password"});return!0}},Le.__chunk_38447=(Ue,ie,o)=>{"use strict";o.d(ie,{Qq:()=>j});var d=o(77438),y=o(70356),h=o(67365);class i extends h.o{static[d.i]="SQLiteTextBuilder";constructor(W,K){super(W,"string","SQLiteText"),this.config.enumValues=K.enum,this.config.length=K.length}build(W){return new s(W,this.config)}}class s extends h.v{static[d.i]="SQLiteText";enumValues=this.config.enumValues;length=this.config.length;constructor(W,K){super(W,K)}getSQLType(){return`text${this.config.length?`(${this.config.length})`:""}`}}class c extends h.o{static[d.i]="SQLiteTextJsonBuilder";constructor(W){super(W,"json","SQLiteTextJson")}build(W){return new O(W,this.config)}}class O extends h.v{static[d.i]="SQLiteTextJson";getSQLType(){return"text"}mapFromDriverValue(W){return JSON.parse(W)}mapToDriverValue(W){return JSON.stringify(W)}}function j($,W={}){let{name:K,config:I}=(0,y.Ll)($,W);return I.mode==="json"?new c(K):new i(K,I)}},Le.__chunk_38427=(Ue,ie,o)=>{"use strict";o.d(ie,{$4:()=>p,BT:()=>I,Dm:()=>K,Dp:()=>$,Rb:()=>i,T0:()=>s,Ye:()=>j,_L:()=>W,aA:()=>O,h2:()=>m,i4:()=>d,ie:()=>y,n:()=>h,xO:()=>c,xb:()=>_});class d extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(J,a){super(J,a),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class y extends d{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(J,a,V="unspecified",C="unspecified"){super(J,{cause:{claim:V,reason:C,payload:a}}),this.claim=V,this.reason=C,this.payload=a}}class h extends d{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(J,a,V="unspecified",C="unspecified"){super(J,{cause:{claim:V,reason:C,payload:a}}),this.claim=V,this.reason=C,this.payload=a}}class i extends d{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class s extends d{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class c extends d{static code="ERR_JWE_DECRYPTION_FAILED";code="ERR_JWE_DECRYPTION_FAILED";constructor(J="decryption operation failed",a){super(J,a)}}class O extends d{static code="ERR_JWE_INVALID";code="ERR_JWE_INVALID"}class j extends d{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class $ extends d{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class W extends d{static code="ERR_JWK_INVALID";code="ERR_JWK_INVALID"}class K extends d{static code="ERR_JWKS_INVALID";code="ERR_JWKS_INVALID"}class I extends d{static code="ERR_JWKS_NO_MATCHING_KEY";code="ERR_JWKS_NO_MATCHING_KEY";constructor(J="no applicable key found in the JSON Web Key Set",a){super(J,a)}}class p extends d{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(J="multiple matching keys found in the JSON Web Key Set",a){super(J,a)}}class _ extends d{static code="ERR_JWKS_TIMEOUT";code="ERR_JWKS_TIMEOUT";constructor(J="request timed out",a){super(J,a)}}class m extends d{static code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";constructor(J="signature verification failed",a){super(J,a)}}},Le.__chunk_37852=(Ue,ie,o)=>{"use strict";o.d(ie,{P:()=>h});var d=o(26772),y=o(40168);let h=(0,d.CN)({is:i=>i.kind==="CaseNode",create:i=>(0,d.CN)({kind:"CaseNode",value:i}),cloneWithWhen:(i,s)=>(0,d.CN)({...i,when:(0,d.CN)(i.when?[...i.when,s]:[s])}),cloneWithThen:(i,s)=>(0,d.CN)({...i,when:i.when?(0,d.CN)([...i.when.slice(0,-1),y.t.cloneWithResult(i.when[i.when.length-1],s)]):void 0}),cloneWith:(i,s)=>(0,d.CN)({...i,...s})})},Le.__chunk_35889=(Ue,ie,o)=>{"use strict";o.d(ie,{N:()=>y});var d=o(26772);function y(h){return(0,d.Gv)(h)&&(0,d.Tn)(h.toOperationNode)}},Le.__chunk_34395=(Ue,ie,o)=>{"use strict";o.d(ie,{GB:()=>K,KN:()=>m,Ve:()=>_,ds:()=>I,vC:()=>p});var d=o(55735),y=o(26772),h=o(35889),i=o(47248),s=o(66557),c=o(89709),O=o(72391),j=o(74623),$=o(55867),W=o(95971);function K(V){if(V.length===3)return I(V[0],V[1],V[2]);if(V.length===1)return(0,c.$s)(V[0]);throw Error(`invalid arguments: ${JSON.stringify(V)}`)}function I(V,C,L){var k;return((k=C)==="is"||k==="is not")&&q(L)?d.l.create((0,s.$O)(V),J(C),O.q.createImmediate(L)):d.l.create((0,s.$O)(V),J(C),(0,c.U2)(L))}function p(V,C,L){return d.l.create((0,s.$O)(V),J(C),(0,s.$O)(L))}function _(V,C){return m(Object.entries(V).filter(([,L])=>!(0,y.b0)(L)).map(([L,k])=>I(L,q(k)?"is":"=",k)),C)}function m(V,C,L=!0){let k=C==="and"?j.s.create:W.K.create;if(V.length===0)return d.l.create(O.q.createImmediate(1),i.zX.create("="),O.q.createImmediate(+(C==="and")));let N=a(V[0]);for(let P=1;P<V.length;++P)N=k(N,a(V[P]));return V.length>1&&L?$.k.create(N):N}function q(V){return(0,y.kZ)(V)||(0,y.Lm)(V)}function J(V){if((0,y.Kg)(V)&&i.we.includes(V))return i.zX.create(V);if((0,h.N)(V))return V.toOperationNode();throw Error(`invalid operator ${JSON.stringify(V)}`)}function a(V){return(0,h.N)(V)?V.toOperationNode():V}},Le.__chunk_34179=(Ue,ie,o)=>{"use strict";o.d(ie,{Q:()=>c});var d=o(26772);let y=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob","varbinary","int4range","int4multirange","int8range","int8multirange","numrange","nummultirange","tsrange","tsmultirange","tstzrange","tstzmultirange","daterange","datemultirange"],h=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timetz\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/,/^varbinary\(\d+\)$/],i=(0,d.CN)({is:O=>O.kind==="DataTypeNode",create:O=>(0,d.CN)({kind:"DataTypeNode",dataType:O})});var s=o(35889);function c(O){if((0,s.N)(O))return O.toOperationNode();if(y.includes(O)||h.some(j=>j.test(O)))return i.create(O);throw Error(`invalid column data type ${JSON.stringify(O)}`)}},Le.__chunk_32634=(Ue,ie,o)=>{"use strict";o.d(ie,{$:()=>y});var d=o(83504);let y=h=>(0,d.q)("a-z","A-Z","0-9")(h||32)},Le.__chunk_31878=(Ue,ie,o)=>{"use strict";let d;o(31448),o(79895);async function y(h,i){let s;try{s=decodeProtectedHeader(h)}catch(c){throw c instanceof Error?c:Error(c)}if(!s.kid)throw Error("Missing jwt kid");if((!d||!d.keys.find(c=>c.kid===s.kid))&&!(d=typeof i.jwksFetch=="string"?await betterFetch(i.jwksFetch,{headers:{Accept:"application/json"}}).then(async c=>{if(c.error)throw Error(`Jwks failed: ${c.error.message??c.error.statusText}`);return c.data}):await i.jwksFetch()))throw Error("No jwks found");return d}o(76984),o(95965),o(12897),o(5307),o(39311),o(68113),o(54030)},Le.__chunk_31448=(Ue,ie,o)=>{"use strict";function d(c){return c?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"}function y(c,O,j){let $="",W=0,K=0;for(let I of c)for(W=W<<8|I,K+=8;K>=6;)K-=6,$+=O[W>>K&63];if(K>0&&($+=O[W<<6-K&63]),j){let I=(4-$.length%4)%4;$+="=".repeat(I)}return $}function h(c,O){let j=new Map;for(let I=0;I<O.length;I++)j.set(O[I],I);let $=[],W=0,K=0;for(let I of c){if(I==="=")break;let p=j.get(I);if(p===void 0)throw Error(`Invalid Base64 character: ${I}`);W=W<<6|p,(K+=6)>=8&&(K-=8,$.push(W>>K&255))}return Uint8Array.from($)}o.d(ie,{K:()=>i,z:()=>s});let i={encode(c,O={}){let j=d(!1);return y(typeof c=="string"?new TextEncoder().encode(c):new Uint8Array(c),j,O.padding??!0)},decode(c){typeof c!="string"&&(c=new TextDecoder().decode(c));let O=d(c.includes("-")||c.includes("_"));return h(c,O)}},s={encode(c,O={}){let j=d(!0);return y(typeof c=="string"?new TextEncoder().encode(c):new Uint8Array(c),j,O.padding??!0)},decode(c){let O=d(c.includes("-")||c.includes("_"));return h(c,O)}}},Le.__chunk_30797=(Ue,ie,o)=>{"use strict";o.d(ie,{a:()=>y});var d=o(54184);function y(){return new h}class h{#e;get queryId(){return this.#e===void 0&&(this.#e=(0,d.D)(8)),this.#e}}},Le.__chunk_30756=(Ue,ie,o)=>{"use strict";o.d(ie,{f:()=>y});var d=o(26772);let y=(0,d.CN)({is:h=>h.kind==="UsingNode",create:h=>(0,d.CN)({kind:"UsingNode",tables:(0,d.CN)(h)}),cloneWithTables:(h,i)=>(0,d.CN)({...h,tables:(0,d.CN)([...h.tables,...i])})})},Le.__chunk_30592=(Ue,ie,o)=>{"use strict";o.d(ie,{$z:()=>c,Jr:()=>O,Ln:()=>j,vo:()=>s});var d=o(68113),y=o(30543);function h($,W="/api/auth"){if(function(I){try{let p=new URL(I);if(p.protocol!=="http:"&&p.protocol!=="https:")throw new y.$(`Invalid base URL: ${I}. URL must include 'http://' or 'https://'`)}catch(p){throw p instanceof y.$?p:new y.$(`Invalid base URL: ${I}. Please provide a valid base URL.`,{cause:p})}}($),function(I){try{return(new URL(I).pathname.replace(/\/+$/,"")||"/")!=="/"}catch{throw new y.$(`Invalid base URL: ${I}. Please provide a valid base URL.`)}}($))return $;let K=$.replace(/\/+$/,"");return W&&W!=="/"?(W=W.startsWith("/")?W:`/${W}`,`${K}${W}`):K}function i($,W){return!!$&&$.trim()!==""&&(W==="proto"?$==="http"||$==="https":W==="host"&&![/\.\./,/\0/,/[\s]/,/^[.]/,/[<>'"]/,/javascript:/i,/file:/i,/data:/i].some(K=>K.test($))&&(/^[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*(:[0-9]{1,5})?$/.test($)||/^(\d{1,3}\.){3}\d{1,3}(:[0-9]{1,5})?$/.test($)||/^\[[0-9a-fA-F:]+\](:[0-9]{1,5})?$/.test($)||/^localhost(:[0-9]{1,5})?$/i.test($)))}function s($,W,K,I,p){if($)return h($,W);if(I!==!1){let q=d._K.BETTER_AUTH_URL||d._K.NEXT_PUBLIC_BETTER_AUTH_URL||d._K.PUBLIC_BETTER_AUTH_URL||d._K.NUXT_PUBLIC_BETTER_AUTH_URL||d._K.NUXT_PUBLIC_AUTH_URL||(d._K.BASE_URL!=="/"?d._K.BASE_URL:void 0);if(q)return h(q,W)}let _=K?.headers.get("x-forwarded-host"),m=K?.headers.get("x-forwarded-proto");if(_&&m&&p&&i(m,"proto")&&i(_,"host"))try{return h(`${m}://${_}`,W)}catch{}if(K){let q=c(K.url);if(!q)throw new y.$("Could not get origin from request. Please provide a valid base URL.");return h(q,W)}if(typeof window<"u"&&window.location)return h(window.location.origin,W)}function c($){try{let W=new URL($);return W.origin==="null"?null:W.origin}catch{return null}}function O($){try{return new URL($).protocol}catch{return null}}function j($){try{return new URL($).host}catch{return null}}},Le.__chunk_30543=(Ue,ie,o)=>{"use strict";o.d(ie,{q:()=>y,$:()=>h});var d=o(74500);o(99597);let y=(0,d.E)({USER_NOT_FOUND:"User not found",FAILED_TO_CREATE_USER:"Failed to create user",FAILED_TO_CREATE_SESSION:"Failed to create session",FAILED_TO_UPDATE_USER:"Failed to update user",FAILED_TO_GET_SESSION:"Failed to get session",INVALID_PASSWORD:"Invalid password",INVALID_EMAIL:"Invalid email",INVALID_EMAIL_OR_PASSWORD:"Invalid email or password",SOCIAL_ACCOUNT_ALREADY_LINKED:"Social account already linked",PROVIDER_NOT_FOUND:"Provider not found",INVALID_TOKEN:"Invalid token",ID_TOKEN_NOT_SUPPORTED:"id_token not supported",FAILED_TO_GET_USER_INFO:"Failed to get user info",USER_EMAIL_NOT_FOUND:"User email not found",EMAIL_NOT_VERIFIED:"Email not verified",PASSWORD_TOO_SHORT:"Password too short",PASSWORD_TOO_LONG:"Password too long",USER_ALREADY_EXISTS:"User already exists.",USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL:"User already exists. Use another email.",EMAIL_CAN_NOT_BE_UPDATED:"Email can not be updated",CREDENTIAL_ACCOUNT_NOT_FOUND:"Credential account not found",SESSION_EXPIRED:"Session expired. Re-authenticate to perform this action.",FAILED_TO_UNLINK_LAST_ACCOUNT:"You can't unlink your last account",ACCOUNT_NOT_FOUND:"Account not found",USER_ALREADY_HAS_PASSWORD:"User already has a password. Provide that to delete the account.",CROSS_SITE_NAVIGATION_LOGIN_BLOCKED:"Cross-site navigation login blocked. This request appears to be a CSRF attack.",VERIFICATION_EMAIL_NOT_ENABLED:"Verification email isn't enabled",EMAIL_ALREADY_VERIFIED:"Email is already verified",EMAIL_MISMATCH:"Email mismatch",SESSION_NOT_FRESH:"Session is not fresh",LINKED_ACCOUNT_ALREADY_EXISTS:"Linked account already exists",INVALID_ORIGIN:"Invalid origin",INVALID_CALLBACK_URL:"Invalid callbackURL",INVALID_REDIRECT_URL:"Invalid redirectURL",INVALID_ERROR_CALLBACK_URL:"Invalid errorCallbackURL",INVALID_NEW_USER_CALLBACK_URL:"Invalid newUserCallbackURL",MISSING_OR_NULL_ORIGIN:"Missing or null Origin",CALLBACK_URL_REQUIRED:"callbackURL is required",FAILED_TO_CREATE_VERIFICATION:"Unable to create verification",FIELD_NOT_ALLOWED:"Field not allowed to be set",ASYNC_VALIDATION_NOT_SUPPORTED:"Async validation is not supported",VALIDATION_ERROR:"Validation Error",MISSING_FIELD:"Field is required"});var h=class extends Error{constructor(i,s){super(i,s),this.name="BetterAuthError",this.message=i,this.stack=""}}},Le.__chunk_30145=(Ue,ie,o)=>{"use strict";o.d(ie,{Is:()=>j});var d=o(93692),y=o(74623),h=o(9789),i=o(35889),s=o(95971),c=o(55867),O=o(34395);class j{#e;constructor(p){this.#e=p}get expressionType(){}as(p){return new $(this,p)}or(...p){return new W(s.K.create(this.#e,(0,O.GB)(p)))}and(...p){return new K(y.s.create(this.#e,(0,O.GB)(p)))}$castTo(){return new j(this.#e)}$notNull(){return new j(this.#e)}toOperationNode(){return this.#e}}class ${#e;#t;constructor(p,_){this.#e=p,this.#t=_}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return d.N.create(this.#e.toOperationNode(),(0,i.N)(this.#t)?this.#t.toOperationNode():h.O.create(this.#t))}}class W{#e;constructor(p){this.#e=p}get expressionType(){}as(p){return new $(this,p)}or(...p){return new W(s.K.create(this.#e,(0,O.GB)(p)))}$castTo(){return new W(this.#e)}toOperationNode(){return c.k.create(this.#e)}}class K{#e;constructor(p){this.#e=p}get expressionType(){}as(p){return new $(this,p)}and(...p){return new K(y.s.create(this.#e,(0,O.GB)(p)))}$castTo(){return new K(this.#e)}toOperationNode(){return c.k.create(this.#e)}}},Le.__chunk_28709=(Ue,ie,o)=>{"use strict";o.d(ie,{b:()=>s});var d=o(26772),y=o(74623),h=o(95971);let i=(0,d.CN)({is:c=>c.kind==="OnNode",create:c=>(0,d.CN)({kind:"OnNode",on:c}),cloneWithOperation:(c,O,j)=>(0,d.CN)({...c,on:O==="And"?y.s.create(c.on,j):h.K.create(c.on,j)})}),s=(0,d.CN)({is:c=>c.kind==="JoinNode",create:(c,O)=>(0,d.CN)({kind:"JoinNode",joinType:c,table:O,on:void 0}),createWithOn:(c,O,j)=>(0,d.CN)({kind:"JoinNode",joinType:c,table:O,on:i.create(j)}),cloneWithOn:(c,O)=>(0,d.CN)({...c,on:c.on?i.cloneWithOperation(c.on,"And",O):i.create(O)})})},Le.__chunk_28289=(Ue,ie,o)=>{"use strict";o.d(ie,{Q:()=>y});var d=o(77438);class y{static[d.i]="ColumnBuilder";config;constructor(i,s,c){this.config={name:i,keyAsName:i==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:s,columnType:c,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(i){return this.config.default=i,this.config.hasDefault=!0,this}$defaultFn(i){return this.config.defaultFn=i,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(i){return this.config.onUpdateFn=i,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(i){this.config.name===""&&(this.config.name=i)}}},Le.__chunk_28227=(Ue,ie,o)=>{"use strict";o.d(ie,{L:()=>I});var d=o(88780),y=o(63440),h=o(40640),i=o(60626),s=o(19989),c=o(26772);let O=(0,c.CN)({is:p=>p.kind==="ReturningNode",create:p=>(0,c.CN)({kind:"ReturningNode",selections:(0,c.CN)(p)}),cloneWithSelections:(p,_)=>(0,c.CN)({...p,selections:p.selections?(0,c.CN)([...p.selections,..._]):(0,c.CN)(_)})}),j=(0,c.CN)({is:p=>p.kind==="ExplainNode",create:(p,_)=>(0,c.CN)({kind:"ExplainNode",format:p,options:_})});var $=o(86439);let W=(0,c.CN)({is:p=>p.kind==="OutputNode",create:p=>(0,c.CN)({kind:"OutputNode",selections:(0,c.CN)(p)}),cloneWithSelections:(p,_)=>(0,c.CN)({...p,selections:p.selections?(0,c.CN)([...p.selections,..._]):(0,c.CN)(_)})});var K=o(43998);let I=(0,c.CN)({is:p=>y.L.is(p)||d.o.is(p)||h.U.is(p)||i.e.is(p)||$.r.is(p),cloneWithEndModifier:(p,_)=>(0,c.CN)({...p,endModifiers:p.endModifiers?(0,c.CN)([...p.endModifiers,_]):(0,c.CN)([_])}),cloneWithWhere:(p,_)=>(0,c.CN)({...p,where:p.where?s.o.cloneWithOperation(p.where,"And",_):s.o.create(_)}),cloneWithJoin:(p,_)=>(0,c.CN)({...p,joins:p.joins?(0,c.CN)([...p.joins,_]):(0,c.CN)([_])}),cloneWithReturning:(p,_)=>(0,c.CN)({...p,returning:p.returning?O.cloneWithSelections(p.returning,_):O.create(_)}),cloneWithoutReturning:p=>(0,c.CN)({...p,returning:void 0}),cloneWithoutWhere:p=>(0,c.CN)({...p,where:void 0}),cloneWithExplain:(p,_,m)=>(0,c.CN)({...p,explain:j.create(_,m?.toOperationNode())}),cloneWithTop:(p,_)=>(0,c.CN)({...p,top:_}),cloneWithOutput:(p,_)=>(0,c.CN)({...p,output:p.output?W.cloneWithSelections(p.output,_):W.create(_)}),cloneWithOrderByItems:(p,_)=>(0,c.CN)({...p,orderBy:p.orderBy?K.O.cloneWithItems(p.orderBy,_):K.O.create(_)}),cloneWithoutOrderBy:p=>(0,c.CN)({...p,orderBy:void 0})})},Le.__chunk_28195=(Ue,ie,o)=>{"use strict";o.d(ie,{X:()=>y});let{get:d,set:y}=(0,o(13015).sL)(()=>null)},Le.__chunk_28104=(Ue,ie,o)=>{"use strict";o.d(ie,{nd:()=>p});var d=o(77438),y=o(38560),h=o(70356),i=o(67365);class s extends i.o{static[d.i]="SQLiteBaseIntegerBuilder";constructor(m,q,J){super(m,q,J),this.config.autoIncrement=!1}primaryKey(m){return m?.autoIncrement&&(this.config.autoIncrement=!0),this.config.hasDefault=!0,super.primaryKey()}}class c extends i.v{static[d.i]="SQLiteBaseInteger";autoIncrement=this.config.autoIncrement;getSQLType(){return"integer"}}class O extends s{static[d.i]="SQLiteIntegerBuilder";constructor(m){super(m,"number","SQLiteInteger")}build(m){return new j(m,this.config)}}class j extends c{static[d.i]="SQLiteInteger"}class $ extends s{static[d.i]="SQLiteTimestampBuilder";constructor(m,q){super(m,"date","SQLiteTimestamp"),this.config.mode=q}defaultNow(){return this.default((0,y.ll)`(cast((julianday('now') - 2440587.5)*86400000 as integer))`)}build(m){return new W(m,this.config)}}class W extends c{static[d.i]="SQLiteTimestamp";mode=this.config.mode;mapFromDriverValue(m){return new Date(this.config.mode==="timestamp"?1e3*m:m)}mapToDriverValue(m){let q=m.getTime();return this.config.mode==="timestamp"?Math.floor(q/1e3):q}}class K extends s{static[d.i]="SQLiteBooleanBuilder";constructor(m,q){super(m,"boolean","SQLiteBoolean"),this.config.mode=q}build(m){return new I(m,this.config)}}class I extends c{static[d.i]="SQLiteBoolean";mode=this.config.mode;mapFromDriverValue(m){return Number(m)===1}mapToDriverValue(m){return+!!m}}function p(_,m){let{name:q,config:J}=(0,h.Ll)(_,m);return J?.mode==="timestamp"||J?.mode==="timestamp_ms"?new $(q,J.mode):J?.mode==="boolean"?new K(q,J.mode):new O(q)}},Le.__chunk_26772=(Ue,ie,o)=>{"use strict";o.d(ie,{$P:()=>O,CN:()=>I,Et:()=>i,Gv:()=>K,Kg:()=>h,Lm:()=>s,MH:()=>_,Pe:()=>$,Tn:()=>W,_j:()=>p,b0:()=>y,kZ:()=>c,lQ:()=>m,sI:()=>j});var d=o(25356).Buffer;function y(q){return q===void 0||q===void 0}function h(q){return typeof q=="string"}function i(q){return typeof q=="number"}function s(q){return typeof q=="boolean"}function c(q){return q===null}function O(q){return q instanceof Date}function j(q){return typeof q=="bigint"}function $(q){return d!==void 0&&d.isBuffer(q)}function W(q){return typeof q=="function"}function K(q){return typeof q=="object"&&q!==null}function I(q){return Object.freeze(q)}function p(q){return _(q)?q:[q]}function _(q){return Array.isArray(q)}function m(q){return q}},Le.__chunk_26151=(Ue,ie,o)=>{"use strict";o.d(ie,{O:()=>h});var d=o(68113),y=o(99597);function h(i,s){if(s.advanced?.ipAddress?.disableIpTracking)return null;let c="headers"in i?i.headers:i;for(let O of s.advanced?.ipAddress?.ipAddressHeaders||["x-forwarded-for"]){let j="get"in c?c.get(O):c[O];if(typeof j=="string"){let $=j.split(",")[0].trim();if((0,y.mY)($))return(0,y.Ll)($,{ipv6Subnet:s.advanced?.ipAddress?.ipv6Subnet})}}return(0,d.Nu)()||(0,d.yz)()?"127.0.0.1":null}},Le.__chunk_25527=(Ue,ie,o)=>{"use strict";o.d(ie,{D:()=>y,l:()=>h});var d=o(85725);function y(i){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof i=="string"?i:d.D0.decode(i),{alphabet:"base64url"});let s=i;s instanceof Uint8Array&&(s=d.D0.decode(s)),s=s.replace(/-/g,"+").replace(/_/g,"/");try{return function(c){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(c);let O=atob(c),j=new Uint8Array(O.length);for(let $=0;$<O.length;$++)j[$]=O.charCodeAt($);return j}(s)}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}function h(i){let s=i;return typeof s=="string"&&(s=d.Rd.encode(s)),Uint8Array.prototype.toBase64?s.toBase64({alphabet:"base64url",omitPadding:!0}):function(c){if(Uint8Array.prototype.toBase64)return c.toBase64();let O=[];for(let j=0;j<c.length;j+=32768)O.push(String.fromCharCode.apply(null,c.subarray(j,j+32768)));return btoa(O.join(""))}(s).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}},Le.__chunk_25162=(Ue,ie,o)=>{"use strict";o.d(ie,{Qs:()=>s,xA:()=>i});var d=o(68506),y=o(9203);let h=async()=>{let c=(0,d.Q)();if(!c.context.endpointContextAsyncStorage){let O=await(0,y.V)();c.context.endpointContextAsyncStorage=new O}return c.context.endpointContextAsyncStorage};async function i(){let c=(await h()).getStore();if(!c)throw Error("No auth context found. Please make sure you are calling this function within a `runWithEndpointContext` callback.");return c}async function s(c,O){return(await h()).run(c,O)}},Le.__chunk_22352=(Ue,ie,o)=>{"use strict";function d(y,h){if(y.startsWith("RS")||y.startsWith("PS")){let{modulusLength:i}=h.algorithm;if(typeof i!="number"||i<2048)throw TypeError(`${y} requires key modulusLength to be 2048 bits or larger`)}}o.d(ie,{O:()=>d})},Le.__chunk_21979=(Ue,ie,o)=>{"use strict";o.d(ie,{V:()=>y});var d=o(77438);class y{constructor(i,s){this.table=i,this.config=s,this.name=s.name,this.keyAsName=s.keyAsName,this.notNull=s.notNull,this.default=s.default,this.defaultFn=s.defaultFn,this.onUpdateFn=s.onUpdateFn,this.hasDefault=s.hasDefault,this.primary=s.primaryKey,this.isUnique=s.isUnique,this.uniqueName=s.uniqueName,this.uniqueType=s.uniqueType,this.dataType=s.dataType,this.columnType=s.columnType,this.generated=s.generated,this.generatedIdentity=s.generatedIdentity}static[d.i]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(i){return i}mapToDriverValue(i){return i}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}},Le.__chunk_21880=(Ue,ie,o)=>{"use strict";o.d(ie,{s:()=>i});var d=o(51016),y=o(31448),h=o(14627);let i=(s="SHA-256",c="none")=>{let O={importKey:async(j,$)=>(0,h.N)().importKey("raw",typeof j=="string"?new TextEncoder().encode(j):j,{name:"HMAC",hash:{name:s}},!1,[$]),sign:async(j,$)=>{typeof j=="string"&&(j=await O.importKey(j,"sign"));let W=await(0,h.N)().sign("HMAC",j,typeof $=="string"?new TextEncoder().encode($):$);return c==="hex"?d.u.encode(W):c==="base64"||c==="base64url"||c==="base64urlnopad"?y.z.encode(W,{padding:c!=="base64urlnopad"}):W},verify:async(j,$,W)=>(typeof j=="string"&&(j=await O.importKey(j,"verify")),c==="hex"&&(W=d.u.decode(W)),(c==="base64"||c==="base64url"||c==="base64urlnopad")&&(W=await y.K.decode(W)),(0,h.N)().verify("HMAC",j,typeof W=="string"?new TextEncoder().encode(W):W,typeof $=="string"?new TextEncoder().encode($):$))};return O}},Le.__chunk_21430=(Ue,ie,o)=>{"use strict";o.d(ie,{B:()=>I});var d=o(93692),y=o(9789),h=o(28709),i=o(75416),s=o(82891),c=o(3580),O=o(59204),j=o(30756);let $=(0,o(26772).CN)({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,RefreshMaterializedViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0}),W={json_agg:!0,to_json:!0};class K extends s.V{#e;#t=new Set;#r=new Set;constructor(_){super(),this.#e=_}transformNodeImpl(_,m){if(!this.#n(_))return super.transformNodeImpl(_,m);let q=this.#a(_);for(let V of q)this.#r.add(V);let J=this.#s(_);for(let V of J)this.#t.add(V);let a=super.transformNodeImpl(_,m);for(let V of J)this.#t.delete(V);for(let V of q)this.#r.delete(V);return a}transformSchemableIdentifier(_,m){let q=super.transformSchemableIdentifier(_,m);return q.schema||!this.#t.has(_.identifier.name)?q:{...q,schema:y.O.create(this.#e)}}transformReferences(_,m){let q=super.transformReferences(_,m);return q.table.table.schema?q:{...q,table:O.H.createWithSchema(this.#e,q.table.table.identifier.name)}}transformAggregateFunction(_,m){return{...super.transformAggregateFunction({..._,aggregated:[]},m),aggregated:this.#i(_,m,"aggregated")}}transformFunction(_,m){return{...super.transformFunction({..._,arguments:[]},m),arguments:this.#i(_,m,"arguments")}}transformSelectModifier(_,m){return{...super.transformSelectModifier({..._,of:void 0},m),of:_.of?.map(q=>O.H.is(q)&&!q.table.schema?{...q,table:this.transformIdentifier(q.table.identifier,m)}:this.transformNode(q,m))}}#i(_,m,q){return W[_.func]?_[q].map(J=>!O.H.is(J)||J.table.schema?this.transformNode(J,m):{...J,table:this.transformIdentifier(J.table.identifier,m)}):this.transformNodeList(_[q],m)}#n(_){return _.kind in $}#s(_){let m=new Set;if("name"in _&&_.name&&c.y.is(_.name)&&this.#l(_.name,m),"from"in _&&_.from)for(let q of _.from.froms)this.#o(q,m);if("into"in _&&_.into&&this.#o(_.into,m),"table"in _&&_.table&&this.#o(_.table,m),"joins"in _&&_.joins)for(let q of _.joins)this.#o(q.table,m);return"using"in _&&_.using&&(h.b.is(_.using)?this.#o(_.using.table,m):this.#o(_.using,m)),m}#a(_){let m=new Set;return"with"in _&&_.with&&this.#u(_.with,m),m}#o(_,m){if(O.H.is(_))return this.#l(_.table,m);if(d.N.is(_)&&O.H.is(_.node))return this.#l(_.node.table,m);if(i.v.is(_)){for(let q of _.items)this.#o(q,m);return}if(j.f.is(_)){for(let q of _.tables)this.#o(q,m);return}}#l(_,m){let q=_.identifier.name;this.#t.has(q)||this.#r.has(q)||m.add(q)}#u(_,m){for(let q of _.expressions){let J=q.name.table.table.identifier.name;this.#r.has(J)||m.add(J)}}}class I{#e;constructor(_){this.#e=new K(_)}transformQuery(_){return this.#e.transformNode(_.node,_.queryId)}async transformResult(_){return _.result}}},Le.__chunk_21105=(Ue,ie,o)=>{"use strict";o.d(ie,{r:()=>h});var d=o(48157),y=o(68113);async function h(i,s){let c;if(i.database)c=typeof i.database=="function"?i.database(i):await s(i);else{let O=Object.keys((0,d.getAuthTables)(i)).reduce(($,W)=>($[W]=[],$),{}),{memoryAdapter:j}=await Promise.resolve().then(o.bind(o,21044));c=j(O)(i)}return c.transaction||(y.vF.warn("Adapter does not correctly implement transaction function, patching it automatically. Please update your adapter implementation."),c.transaction=async O=>O(c)),c}},Le.__chunk_21044=(Ue,ie,o)=>{"use strict";o.d(ie,{memoryAdapter:()=>h});var d=o(68113),y=o(1261);let h=(i,s)=>{let c=null,O=(0,y.II)({config:{adapterId:"memory",adapterName:"Memory Adapter",usePlural:!1,debugLogs:s?.debugLogs||!1,supportsArrays:!0,customTransformInput:j=>(j.options.advanced?.database?.useNumberId||j.options.advanced?.database?.generateId==="serial")&&j.field==="id"&&j.action==="create"?i[j.model].length+1:j.data,transaction:async j=>{let $=structuredClone(i);try{return await j(O(c))}catch(W){throw Object.keys(i).forEach(K=>{i[K]=$[K]}),W}}},adapter:({getFieldName:j,options:$,getModelName:W})=>{let K=(p,_,m)=>_?p.sort((q,J)=>{let a=j({model:m,field:_.field}),V=q[a],C=J[a],L=0;return L=V==null&&C==null?0:V==null?-1:C==null?1:typeof V=="string"&&typeof C=="string"?V.localeCompare(C):V instanceof Date&&C instanceof Date?V.getTime()-C.getTime():typeof V=="number"&&typeof C=="number"?V-C:typeof V=="boolean"&&typeof C=="boolean"?V===C?0:V?1:-1:String(V).localeCompare(String(C)),_.direction==="asc"?L:-L}):p;function I(p,_,m){let q=(C,L)=>{let k=i[L];if(!k)throw d.vF.error(`[MemoryAdapter] Model ${L} not found in the DB`,Object.keys(i)),Error(`Model ${L} not found`);let N=(P,b)=>{let{field:z,value:F,operator:Q}=b;switch(Q){case"in":if(!Array.isArray(F))throw Error("Value must be an array");return F.includes(P[z]);case"not_in":if(!Array.isArray(F))throw Error("Value must be an array");return!F.includes(P[z]);case"contains":return P[z].includes(F);case"starts_with":return P[z].startsWith(F);case"ends_with":return P[z].endsWith(F);case"ne":return P[z]!==F;case"gt":return F!=null&&P[z]>F;case"gte":return F!=null&&P[z]>=F;case"lt":return F!=null&&P[z]<F;case"lte":return F!=null&&P[z]<=F;default:return P[z]===F}};return k.filter(P=>{if(!C.length||C.length===0)return!0;let b=N(P,C[0]);for(let z of C){let F=N(P,z);b=z.connector==="OR"?b||F:b&&F}return b})};if(!m)return q(p,_);let J=q(p,_),a=new Map,V=new Map;for(let C of J){let L=String(C.id);if(!a.has(L)){let N={...C};for(let[P,b]of Object.entries(m)){let z=W(P);b.relation==="one-to-one"?N[z]=null:(N[z]=[],V.set(`${L}-${P}`,new Set))}a.set(L,N)}let k=a.get(L);for(let[N,P]of Object.entries(m)){let b=W(N),z=i[b];if(!z)throw d.vF.error(`[MemoryAdapter] JoinOption model ${b} not found in the DB`,Object.keys(i)),Error(`JoinOption model ${b} not found`);let F=z.filter(Q=>Q[P.on.to]===C[P.on.from]);if(P.relation==="one-to-one")k[b]=F[0]||null;else{let Q=V.get(`${L}-${N}`),G=P.limit??100,X=0;for(let oe of F){if(X>=G)break;!Q.has(oe.id)&&(k[b].push(oe),Q.add(oe.id),X++)}}}}return Array.from(a.values())}return{create:async({model:p,data:_})=>(($.advanced?.database?.useNumberId||$.advanced?.database?.generateId==="serial")&&(_.id=i[W(p)].length+1),i[p]||(i[p]=[]),i[p].push(_),_),findOne:async({model:p,where:_,join:m})=>{let q=I(_,p,m);return m?q.length?q[0]:null:q[0]||null},findMany:async({model:p,where:_,sortBy:m,limit:q,offset:J,join:a})=>{let V=I(_||[],p,a);if(a){if(!V.length)return[];K(V,m,p);let L=V;return J!==void 0&&(L=L.slice(J)),q!==void 0&&(L=L.slice(0,q)),L}let C=K(V,m,p);return J!==void 0&&(C=C.slice(J)),q!==void 0&&(C=C.slice(0,q)),C||[]},count:async({model:p,where:_})=>_?I(_,p).length:i[p].length,update:async({model:p,where:_,update:m})=>{let q=I(_,p);return q.forEach(J=>{Object.assign(J,m)}),q[0]||null},delete:async({model:p,where:_})=>{let m=i[p],q=I(_,p);i[p]=m.filter(J=>!q.includes(J))},deleteMany:async({model:p,where:_})=>{let m=i[p],q=I(_,p),J=0;return i[p]=m.filter(a=>q.includes(a)?(J++,!1):!q.includes(a)),J},updateMany({model:p,where:_,update:m}){let q=I(_,p);return q.forEach(J=>{Object.assign(J,m)}),q[0]||null}}}});return j=>(c=j,O(j))}},Le.__chunk_20590=(Ue,ie,o)=>{"use strict";o.d(ie,{kQ:()=>y,sy:()=>h});var d=o(26772);let y="kysely_migration",h="kysely_migration_lock";(0,d.CN)({__noMigrations__:!0})},Le.__chunk_20321=(Ue,ie,o)=>{"use strict";o.d(ie,{Hs:()=>K,Ht:()=>c,h_:()=>O,oG:()=>$,ug:()=>W,yY:()=>I});var d=o(21979),y=o(77438),h=o(38560),i=o(95769),s=o(90208);class c{constructor(_){this.table=_}static[y.i]="ColumnAliasProxyHandler";get(_,m){return m==="table"?this.table:_[m]}}class O{constructor(_,m){this.alias=_,this.replaceOriginalName=m}static[y.i]="TableAliasProxyHandler";get(_,m){if(m===i.XI.Symbol.IsAlias)return!0;if(m===i.XI.Symbol.Name||this.replaceOriginalName&&m===i.XI.Symbol.OriginalName)return this.alias;if(m===s.n)return{..._[s.n],name:this.alias,isAlias:!0};if(m===i.XI.Symbol.Columns){let J=_[i.XI.Symbol.Columns];if(!J)return J;let a={};return Object.keys(J).map(V=>{a[V]=new Proxy(J[V],new c(new Proxy(_,this)))}),a}let q=_[m];return(0,y.is)(q,d.V)?new Proxy(q,new c(new Proxy(_,this))):q}}class j{constructor(_){this.alias=_}static[y.i]=null;get(_,m){return m==="sourceTable"?$(_.sourceTable,this.alias):_[m]}}function $(p,_){return new Proxy(p,new O(_,!1))}function W(p,_){return new Proxy(p,new c(new Proxy(p.table,new O(_,!1))))}function K(p,_){return new h.Xs.Aliased(I(p.sql,_),p.fieldAlias)}function I(p,_){return h.ll.join(p.queryChunks.map(m=>(0,y.is)(m,d.V)?W(m,_):(0,y.is)(m,h.Xs)?I(m,_):(0,y.is)(m,h.Xs.Aliased)?K(m,_):m))}},Le.__chunk_20138=(Ue,ie,o)=>{"use strict";o.d(ie,{M3:()=>i,W2:()=>h,ll:()=>y,t9:()=>s});var d=o(88691);let y=c=>(0,d.G)(c)&&typeof c.kty=="string",h=c=>c.kty!=="oct"&&(c.kty==="AKP"&&typeof c.priv=="string"||typeof c.d=="string"),i=c=>c.kty!=="oct"&&c.d===void 0&&c.priv===void 0,s=c=>c.kty==="oct"&&typeof c.k=="string"},Le.__chunk_19989=(Ue,ie,o)=>{"use strict";o.d(ie,{o:()=>i});var d=o(26772),y=o(74623),h=o(95971);let i=(0,d.CN)({is:s=>s.kind==="WhereNode",create:s=>(0,d.CN)({kind:"WhereNode",where:s}),cloneWithOperation:(s,c,O)=>(0,d.CN)({...s,where:c==="And"?y.s.create(s.where,O):h.K.create(s.where,O)})})},Le.__chunk_19598=(Ue,ie,o)=>{"use strict";o.d(ie,{bE:()=>I,xk:()=>p});var d=o(96499),y=o(8587),h=o(26772);let i=(0,h.CN)({is:q=>q.kind==="OrderByItemNode",create:(q,J)=>(0,h.CN)({kind:"OrderByItemNode",orderBy:q,direction:J}),cloneWith:(q,J)=>(0,h.CN)({...q,...J})});var s=o(2170),c=o(9789);let O=(0,h.CN)({is:q=>q.kind==="CollateNode",create:q=>(0,h.CN)({kind:"CollateNode",collation:c.O.create(q)})});class j{#e;constructor(J){this.#e=(0,h.CN)(J)}desc(){return new j({node:i.cloneWith(this.#e.node,{direction:s.z.createWithSql("desc")})})}asc(){return new j({node:i.cloneWith(this.#e.node,{direction:s.z.createWithSql("asc")})})}nullsLast(){return new j({node:i.cloneWith(this.#e.node,{nulls:"last"})})}nullsFirst(){return new j({node:i.cloneWith(this.#e.node,{nulls:"first"})})}collate(J){return new j({node:i.cloneWith(this.#e.node,{collation:O.create(J)})})}toOperationNode(){return this.#e.node}}var $=o(56899),W=o(80282),K=o(66557);function I(q){return q==="asc"||q==="desc"}function p(q){if(q.length===2)return[_(q[0],q[1])];if(q.length===1){let[J]=q;return Array.isArray(J)?((0,$.u)("orderBy(array) is deprecated, use multiple orderBy calls instead."),J.map(a=>_(a))):[_(J)]}throw Error(`Invalid number of arguments at order by! expected 1-2, received ${q.length}`)}function _(q,J){let a=function(V){if((0,W.SS)(V))return(0,W.YK)(V);if((0,d.C)(V))return V.toOperationNode();let[C,L]=V.split(" ");return L?((0,$.u)("`orderBy('column asc')` is deprecated. Use `orderBy('column', 'asc')` instead."),m((0,K.q5)(C),L)):(0,K.q5)(V)}(q);if(i.is(a)){if(J)throw Error("Cannot specify direction twice!");return a}return m(a,J)}function m(q,J){if(typeof J=="string"){if(!I(J))throw Error(`Invalid order by direction: ${J}`);return i.create(q,s.z.createWithSql(J))}if((0,y.B)(J))return(0,$.u)("`orderBy(..., expr)` is deprecated. Use `orderBy(..., 'asc')` or `orderBy(..., (ob) => ...)` instead."),i.create(q,J.toOperationNode());let a=i.create(q);return J?J(new j({node:a})).toOperationNode():a}},Le.__chunk_16875=(Ue,ie,o)=>{"use strict";o.d(ie,{c:()=>h});var d=o(21105),y=o(30543);async function h(i){return(0,d.r)(i,async s=>{let{createKyselyAdapter:c}=await Promise.resolve().then(o.bind(o,63328)),{kysely:O,databaseType:j,transaction:$}=await c(s);if(!O)throw new y.$("Failed to initialize database adapter");let{kyselyAdapter:W}=await Promise.resolve().then(o.bind(o,63328));return W(O,{type:j||"sqlite",debugLogs:!!s.database&&"debugLogs"in s.database&&s.database.debugLogs,transaction:$})(s)})}},Le.__chunk_16755=(Ue,ie,o)=>{"use strict";o.d(ie,{E:()=>i});var d=o(2170),y=o(26772),h=o(30797);let i=(0,y.CN)({raw:(s,c=[])=>(0,y.CN)({sql:s,query:d.z.createWithSql(s),parameters:(0,y.CN)(c),queryId:(0,h.a)()})})},Le.__chunk_15294=(Ue,ie,o)=>{"use strict";o.d(ie,{AU:()=>W,B3:()=>b,KJ:()=>C,KL:()=>q,Pe:()=>a,RK:()=>P,RO:()=>I,RV:()=>m,Tq:()=>L,Uo:()=>j,eq:()=>c,gt:()=>K,kZ:()=>J,lt:()=>p,mj:()=>N,ne:()=>O,o8:()=>k,or:()=>$,q1:()=>z,t2:()=>V,wJ:()=>_});var d=o(21979),y=o(77438),h=o(95769),i=o(38560);function s(F,Q){return!(0,i.eG)(Q)||(0,i.qt)(F)||(0,y.is)(F,i.Iw)||(0,y.is)(F,i.Or)||(0,y.is)(F,d.V)||(0,y.is)(F,h.XI)||(0,y.is)(F,i.Ss)?F:new i.Iw(F,Q)}let c=(F,Q)=>(0,i.ll)`${F} = ${s(Q,F)}`,O=(F,Q)=>(0,i.ll)`${F} <> ${s(Q,F)}`;function j(...F){let Q=F.filter(G=>G!==void 0);return Q.length===0?void 0:new i.Xs(Q.length===1?Q:[new i.DJ("("),i.ll.join(Q,new i.DJ(" and ")),new i.DJ(")")])}function $(...F){let Q=F.filter(G=>G!==void 0);return Q.length===0?void 0:new i.Xs(Q.length===1?Q:[new i.DJ("("),i.ll.join(Q,new i.DJ(" or ")),new i.DJ(")")])}function W(F){return(0,i.ll)`not ${F}`}let K=(F,Q)=>(0,i.ll)`${F} > ${s(Q,F)}`,I=(F,Q)=>(0,i.ll)`${F} >= ${s(Q,F)}`,p=(F,Q)=>(0,i.ll)`${F} < ${s(Q,F)}`,_=(F,Q)=>(0,i.ll)`${F} <= ${s(Q,F)}`;function m(F,Q){return Array.isArray(Q)?Q.length===0?(0,i.ll)`false`:(0,i.ll)`${F} in ${Q.map(G=>s(G,F))}`:(0,i.ll)`${F} in ${s(Q,F)}`}function q(F,Q){return Array.isArray(Q)?Q.length===0?(0,i.ll)`true`:(0,i.ll)`${F} not in ${Q.map(G=>s(G,F))}`:(0,i.ll)`${F} not in ${s(Q,F)}`}function J(F){return(0,i.ll)`${F} is null`}function a(F){return(0,i.ll)`${F} is not null`}function V(F){return(0,i.ll)`exists ${F}`}function C(F){return(0,i.ll)`not exists ${F}`}function L(F,Q,G){return(0,i.ll)`${F} between ${s(Q,F)} and ${s(G,F)}`}function k(F,Q,G){return(0,i.ll)`${F} not between ${s(Q,F)} and ${s(G,F)}`}function N(F,Q){return(0,i.ll)`${F} like ${Q}`}function P(F,Q){return(0,i.ll)`${F} not like ${Q}`}function b(F,Q){return(0,i.ll)`${F} ilike ${Q}`}function z(F,Q){return(0,i.ll)`${F} not ilike ${Q}`}},Le.__chunk_14627=(Ue,ie,o)=>{"use strict";function d(){let y=typeof Sr<"u"&&Sr.crypto;if(y&&typeof y.subtle=="object"&&y.subtle!=null)return y.subtle;throw Error("crypto.subtle must be defined")}o.d(ie,{N:()=>d})},Le.__chunk_14588=(Ue,ie,o)=>{"use strict";function d(...y){let h,i=y.filter(Boolean);if(i.length===0||i.length===1)return!0;for(let s of i){let c=Object.keys(s);if(!h||h.size===0){h=new Set(c);continue}for(let O of c){if(h.has(O))return!1;h.add(O)}}return!0}o.d(ie,{f:()=>d})},Le.__chunk_13839=(Ue,ie,o)=>{"use strict";o.d(ie,{sc:()=>Q});var d=o(81187);class y{blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor(X,oe,ne,we){this.blockLen=X,this.outputLen=oe,this.padOffset=ne,this.isLE=we,this.buffer=new Uint8Array(X),this.view=(0,d.O8)(this.buffer)}update(X){(0,d.CC)(this),(0,d.DO)(X);let{view:oe,buffer:ne,blockLen:we}=this,Ee=X.length;for(let $e=0;$e<Ee;){let v=Math.min(we-this.pos,Ee-$e);if(v===we){let Z=(0,d.O8)(X);for(;we<=Ee-$e;$e+=we)this.process(Z,$e);continue}ne.set(X.subarray($e,$e+v),this.pos),this.pos+=v,$e+=v,this.pos===we&&(this.process(oe,0),this.pos=0)}return this.length+=X.length,this.roundClean(),this}digestInto(X){(0,d.CC)(this),(0,d.Ht)(X,this),this.finished=!0;let{buffer:oe,view:ne,blockLen:we,isLE:Ee}=this,{pos:$e}=this;oe[$e++]=128,(0,d.uH)(this.buffer.subarray($e)),this.padOffset>we-$e&&(this.process(ne,0),$e=0);for(let E=$e;E<we;E++)oe[E]=0;ne.setBigUint64(we-8,BigInt(8*this.length),Ee),this.process(ne,0);let v=(0,d.O8)(X),Z=this.outputLen;if(Z%4)throw Error("_sha2: outputLen must be aligned to 32bit");let R=Z/4,S=this.get();if(R>S.length)throw Error("_sha2: outputLen bigger than state");for(let E=0;E<R;E++)v.setUint32(4*E,S[E],Ee)}digest(){let{buffer:X,outputLen:oe}=this;this.digestInto(X);let ne=X.slice(0,oe);return this.destroy(),ne}_cloneInto(X){(X||=new this.constructor).set(...this.get());let{blockLen:oe,buffer:ne,length:we,finished:Ee,destroyed:$e,pos:v}=this;return X.destroyed=$e,X.finished=Ee,X.length=we,X.pos=v,we%oe&&X.buffer.set(ne),X}clone(){return this._cloneInto()}}let h=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),i=BigInt(4294967296-1),s=BigInt(32),c=(G,X,oe)=>G>>>oe,O=(G,X,oe)=>G<<32-oe|X>>>oe,j=(G,X,oe)=>G>>>oe|X<<32-oe,$=(G,X,oe)=>G<<32-oe|X>>>oe,W=(G,X,oe)=>G<<64-oe|X>>>oe-32,K=(G,X,oe)=>G>>>oe-32|X<<64-oe;function I(G,X,oe,ne){let we=(X>>>0)+(ne>>>0);return{h:G+oe+(we/4294967296|0)|0,l:0|we}}let p=(G,X,oe)=>(G>>>0)+(X>>>0)+(oe>>>0),_=(G,X,oe,ne)=>X+oe+ne+(G/4294967296|0)|0,m=(G,X,oe,ne)=>(G>>>0)+(X>>>0)+(oe>>>0)+(ne>>>0),q=(G,X,oe,ne,we)=>X+oe+ne+we+(G/4294967296|0)|0,J=(G,X,oe,ne,we)=>(G>>>0)+(X>>>0)+(oe>>>0)+(ne>>>0)+(we>>>0),a=(G,X,oe,ne,we,Ee)=>X+oe+ne+we+Ee+(G/4294967296|0)|0,V=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),C=new Uint32Array(64);class L extends y{constructor(X){super(64,X,8,!1)}get(){let{A:X,B:oe,C:ne,D:we,E:Ee,F:$e,G:v,H:Z}=this;return[X,oe,ne,we,Ee,$e,v,Z]}set(X,oe,ne,we,Ee,$e,v,Z){this.A=0|X,this.B=0|oe,this.C=0|ne,this.D=0|we,this.E=0|Ee,this.F=0|$e,this.G=0|v,this.H=0|Z}process(X,oe){for(let Y=0;Y<16;Y++,oe+=4)C[Y]=X.getUint32(oe,!1);for(let Y=16;Y<64;Y++){let D=C[Y-15],ee=C[Y-2],le=(0,d.Ow)(D,7)^(0,d.Ow)(D,18)^D>>>3,se=(0,d.Ow)(ee,17)^(0,d.Ow)(ee,19)^ee>>>10;C[Y]=se+C[Y-7]+le+C[Y-16]|0}let{A:ne,B:we,C:Ee,D:$e,E:v,F:Z,G:R,H:S}=this;for(let Y=0;Y<64;Y++){var E,A,U,te;let D=S+((0,d.Ow)(v,6)^(0,d.Ow)(v,11)^(0,d.Ow)(v,25))+((E=v)&Z^~E&R)+V[Y]+C[Y]|0,ee=((0,d.Ow)(ne,2)^(0,d.Ow)(ne,13)^(0,d.Ow)(ne,22))+((A=ne)&(U=we)^A&(te=Ee)^U&te)|0;S=R,R=Z,Z=v,v=$e+D|0,$e=Ee,Ee=we,we=ne,ne=D+ee|0}ne=ne+this.A|0,we=we+this.B|0,Ee=Ee+this.C|0,$e=$e+this.D|0,v=v+this.E|0,Z=Z+this.F|0,R=R+this.G|0,S=S+this.H|0,this.set(ne,we,Ee,$e,v,Z,R,S)}roundClean(){(0,d.uH)(C)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,d.uH)(this.buffer)}}class k extends L{A=0|h[0];B=0|h[1];C=0|h[2];D=0|h[3];E=0|h[4];F=0|h[5];G=0|h[6];H=0|h[7];constructor(){super(32)}}let N=function(G,X=!1){let oe=G.length,ne=new Uint32Array(oe),we=new Uint32Array(oe);for(let Ee=0;Ee<oe;Ee++){let{h:$e,l:v}=function(Z,R=!1){return R?{h:Number(Z&i),l:Number(Z>>s&i)}:{h:0|Number(Z>>s&i),l:0|Number(Z&i)}}(G[Ee],X);[ne[Ee],we[Ee]]=[$e,v]}return[ne,we]}(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(G=>BigInt(G))),P=N[0],b=N[1],z=new Uint32Array(80),F=new Uint32Array(80),Q=(0,d.qj)(()=>new k,(0,d.nx)(1))},Le.__chunk_13348=(Ue,ie,o)=>{"use strict";o.r(ie),o.d(ie,{$brand:()=>_,$input:()=>Zu,$output:()=>Fu,NEVER:()=>I,TimePrecision:()=>Hu,ZodAny:()=>ou,ZodArray:()=>cu,ZodBase64:()=>wa,ZodBase64URL:()=>ba,ZodBigInt:()=>ro,ZodBigIntFormat:()=>Na,ZodBoolean:()=>to,ZodCIDRv4:()=>ga,ZodCIDRv6:()=>va,ZodCUID:()=>ca,ZodCUID2:()=>da,ZodCatch:()=>Cu,ZodCodec:()=>Pa,ZodCustom:()=>co,ZodCustomStringFormat:()=>$s,ZodDate:()=>Ta,ZodDefault:()=>Tu,ZodDiscriminatedUnion:()=>hu,ZodE164:()=>_a,ZodEmail:()=>aa,ZodEmoji:()=>la,ZodEnum:()=>Os,ZodError:()=>$p,ZodExactOptional:()=>ku,ZodFile:()=>_u,ZodFirstPartyTypeKind:()=>y,ZodFunction:()=>Bu,ZodGUID:()=>Xs,ZodIPv4:()=>ma,ZodIPv6:()=>ya,ZodISODate:()=>Hl,ZodISODateTime:()=>Jl,ZodISODuration:()=>Xl,ZodISOTime:()=>Ql,ZodIntersection:()=>pu,ZodIssueCode:()=>Op,ZodJWT:()=>xa,ZodKSUID:()=>fa,ZodLazy:()=>qu,ZodLiteral:()=>bu,ZodMAC:()=>Yl,ZodMap:()=>vu,ZodNaN:()=>Ru,ZodNanoID:()=>ua,ZodNever:()=>lu,ZodNonOptional:()=>Oa,ZodNull:()=>nu,ZodNullable:()=>Su,ZodNumber:()=>eo,ZodNumberFormat:()=>ts,ZodObject:()=>no,ZodOptional:()=>$a,ZodPipe:()=>Ca,ZodPrefault:()=>Eu,ZodPromise:()=>zu,ZodReadonly:()=>Uu,ZodRealError:()=>pi,ZodRecord:()=>oo,ZodSet:()=>wu,ZodString:()=>Qs,ZodStringFormat:()=>Nr,ZodSuccess:()=>Ou,ZodSymbol:()=>ru,ZodTemplateLiteral:()=>Lu,ZodTransform:()=>xu,ZodTuple:()=>mu,ZodType:()=>Xt,ZodULID:()=>ha,ZodURL:()=>Ys,ZodUUID:()=>Fi,ZodUndefined:()=>iu,ZodUnion:()=>so,ZodUnknown:()=>au,ZodVoid:()=>uu,ZodXID:()=>pa,ZodXor:()=>du,_ZodString:()=>sa,_default:()=>Iu,_function:()=>Ra,any:()=>gh,array:()=>io,base64:()=>eh,base64url:()=>th,bigint:()=>hh,boolean:()=>tu,catch:()=>Pu,check:()=>jh,cidrv4:()=>Xd,cidrv6:()=>Yd,clone:()=>ue,codec:()=>Dh,coerce:()=>K,config:()=>a,core:()=>O,cuid:()=>Fd,cuid2:()=>Zd,custom:()=>zh,date:()=>wh,decode:()=>Id,decodeAsync:()=>Ad,describe:()=>Mh,discriminatedUnion:()=>Sh,e164:()=>rh,email:()=>Rd,emoji:()=>Md,encode:()=>Td,encodeAsync:()=>Ed,endsWith:()=>Xo,enum:()=>Ea,exactOptional:()=>Nu,file:()=>Ch,flattenError:()=>ht,float32:()=>lh,float64:()=>uh,formatError:()=>dt,fromJSONSchema:()=>Up,function:()=>Ra,getErrorMap:()=>Pp,globalRegistry:()=>Ni,gt:()=>$n,gte:()=>li,guid:()=>Ud,hash:()=>ah,hex:()=>oh,hostname:()=>sh,httpUrl:()=>Bd,includes:()=>Ho,instanceof:()=>Fh,int:()=>ka,int32:()=>ch,int64:()=>ph,intersection:()=>fu,ipv4:()=>Jd,ipv6:()=>Qd,iso:()=>$,json:()=>Vh,jwt:()=>ih,keyof:()=>bh,ksuid:()=>Kd,lazy:()=>ju,length:()=>Ks,literal:()=>Oh,locales:()=>s,looseObject:()=>kh,looseRecord:()=>Ih,lowercase:()=>Ko,lt:()=>An,lte:()=>Si,mac:()=>Hd,map:()=>Eh,maxLength:()=>Gs,maxSize:()=>Ts,meta:()=>Wh,mime:()=>Yo,minLength:()=>es,minSize:()=>On,multipleOf:()=>Ss,nan:()=>Uh,nanoid:()=>Wd,nativeEnum:()=>$h,negative:()=>Bl,never:()=>Sa,nonnegative:()=>Wl,nonoptional:()=>$u,nonpositive:()=>Ml,normalize:()=>ea,null:()=>su,nullable:()=>lo,nullish:()=>Ph,number:()=>eu,object:()=>_h,optional:()=>ao,overwrite:()=>ln,parse:()=>xd,parseAsync:()=>kd,partialRecord:()=>Th,pipe:()=>uo,positive:()=>zl,prefault:()=>Au,preprocess:()=>Gh,prettifyError:()=>jt,promise:()=>qh,property:()=>Fl,readonly:()=>Du,record:()=>gu,refine:()=>Mu,regex:()=>Go,regexes:()=>i,registry:()=>wl,safeDecode:()=>Od,safeDecodeAsync:()=>Pd,safeEncode:()=>$d,safeEncodeAsync:()=>Cd,safeParse:()=>Nd,safeParseAsync:()=>Sd,set:()=>Ah,setErrorMap:()=>Cp,size:()=>Vs,slugify:()=>na,startsWith:()=>Qo,strictObject:()=>xh,string:()=>oa,stringFormat:()=>nh,stringbool:()=>Zh,success:()=>Rh,superRefine:()=>Bh,symbol:()=>mh,templateLiteral:()=>Lh,toJSONSchema:()=>yd,toLowerCase:()=>ra,toUpperCase:()=>ia,transform:()=>Aa,treeifyError:()=>Et,trim:()=>ta,tuple:()=>yu,uint32:()=>dh,uint64:()=>fh,ulid:()=>Vd,undefined:()=>yh,union:()=>Ia,unknown:()=>rs,uppercase:()=>Jo,url:()=>zd,util:()=>h,uuid:()=>Dd,uuidv4:()=>Ld,uuidv6:()=>qd,uuidv7:()=>jd,void:()=>vh,xid:()=>Gd,xor:()=>Nh});var d,y,h={};o.r(h),o.d(h,{BIGINT_FORMAT_RANGES:()=>ae,Class:()=>ke,NUMBER_FORMAT_RANGES:()=>Re,aborted:()=>qe,allowsEval:()=>Y,assert:()=>N,assertEqual:()=>V,assertIs:()=>L,assertNever:()=>k,assertNotEqual:()=>C,assignProp:()=>Ee,base64ToUint8Array:()=>yt,base64urlToUint8Array:()=>vt,cached:()=>F,captureStackTrace:()=>U,cleanEnum:()=>Wt,cleanRegex:()=>G,clone:()=>ue,cloneDef:()=>v,createTransparentProxy:()=>fe,defineLazy:()=>ne,esc:()=>E,escapeRegex:()=>H,extend:()=>Je,finalizeIssue:()=>ut,floatSafeRemainder:()=>X,getElementAtPath:()=>Z,getEnumValues:()=>P,getLengthableOrigin:()=>Ct,getParsedType:()=>se,getSizableOrigin:()=>kt,hexToUint8Array:()=>nr,isObject:()=>te,isPlainObject:()=>D,issue:()=>Ot,joinValues:()=>b,jsonStringifyReplacer:()=>z,merge:()=>Ye,mergeDefs:()=>$e,normalizeParams:()=>x,nullish:()=>Q,numKeys:()=>le,objectClone:()=>we,omit:()=>lt,optionalKeys:()=>Se,parsedType:()=>tt,partial:()=>St,pick:()=>Ae,prefixIssues:()=>re,primitiveTypes:()=>me,promiseAllObject:()=>R,propertyKeyTypes:()=>ce,randomString:()=>S,required:()=>bt,safeExtend:()=>rt,shallowClone:()=>ee,slugify:()=>A,stringifyPrimitive:()=>ge,uint8ArrayToBase64:()=>ct,uint8ArrayToBase64url:()=>Ut,uint8ArrayToHex:()=>br,unwrapMessage:()=>We});var i={};o.r(i),o.d(i,{base64:()=>Fr,base64url:()=>Qr,bigint:()=>si,boolean:()=>Vr,browserEmail:()=>cn,cidrv4:()=>zi,cidrv6:()=>Hr,cuid:()=>gr,cuid2:()=>Or,date:()=>hn,datetime:()=>zr,domain:()=>ci,duration:()=>Wr,e164:()=>$i,email:()=>un,emoji:()=>Jr,extendedDuration:()=>Ti,guid:()=>Kr,hex:()=>Ki,hostname:()=>Gi,html5Email:()=>Cn,idnEmail:()=>Zi,integer:()=>Ci,ipv4:()=>Ai,ipv6:()=>Vi,ksuid:()=>Cr,lowercase:()=>Br,mac:()=>dn,md5_base64:()=>Oe,md5_base64url:()=>Ve,md5_hex:()=>pe,nanoid:()=>Mr,null:()=>Xr,number:()=>vi,rfc5322Email:()=>Pn,sha1_base64:()=>Yt,sha1_base64url:()=>ar,sha1_hex:()=>_t,sha256_base64:()=>Lr,sha256_base64url:()=>qr,sha256_hex:()=>Tr,sha384_base64:()=>Ps,sha384_base64url:()=>ns,sha384_hex:()=>Pi,sha512_base64:()=>Us,sha512_base64url:()=>Ds,sha512_hex:()=>Rs,string:()=>ni,time:()=>pn,ulid:()=>ir,undefined:()=>oi,unicodeEmail:()=>ui,uppercase:()=>Bi,uuid:()=>yi,uuid4:()=>ii,uuid6:()=>Ii,uuid7:()=>Ei,xid:()=>vr});var s={};o.r(s),o.d(s,{ar:()=>Ua,az:()=>Da,be:()=>xi,bg:()=>Jn,ca:()=>Fs,cs:()=>Ba,da:()=>an,de:()=>xs,en:()=>In,eo:()=>Hn,es:()=>En,fa:()=>ji,fi:()=>Do,fr:()=>ks,frCA:()=>Ns,he:()=>Lo,hu:()=>Qn,hy:()=>Xn,id:()=>tl,is:()=>il,it:()=>sl,ja:()=>al,ka:()=>ul,kh:()=>dl,km:()=>jo,ko:()=>pl,lt:()=>ml,mk:()=>Mo,ms:()=>Wo,nl:()=>vl,no:()=>he,ota:()=>Pe,pl:()=>Rt,ps:()=>ot,pt:()=>Kt,ru:()=>xt,sl:()=>Ht,sv:()=>Gt,ta:()=>_r,th:()=>sr,tr:()=>Dr,ua:()=>Fo,uk:()=>hi,ur:()=>Zs,uz:()=>Hh,vi:()=>Xh,yo:()=>np,zhCN:()=>ep,zhTW:()=>rp});var c={};o.r(c);var O={};o.r(O),o.d(O,{$ZodAny:()=>bn,$ZodArray:()=>fo,$ZodAsyncError:()=>m,$ZodBase64:()=>kr,$ZodBase64URL:()=>$r,$ZodBigInt:()=>vn,$ZodBigIntFormat:()=>wn,$ZodBoolean:()=>Wn,$ZodCIDRv4:()=>mt,$ZodCIDRv6:()=>rr,$ZodCUID:()=>ms,$ZodCUID2:()=>Mn,$ZodCatch:()=>$o,$ZodCheck:()=>hr,$ZodCheckBigIntFormat:()=>fn,$ZodCheckEndsWith:()=>ps,$ZodCheckGreaterThan:()=>Rn,$ZodCheckIncludes:()=>hs,$ZodCheckLengthEquals:()=>cs,$ZodCheckLessThan:()=>Ji,$ZodCheckLowerCase:()=>ds,$ZodCheckMaxLength:()=>Hi,$ZodCheckMaxSize:()=>as,$ZodCheckMimeType:()=>Mi,$ZodCheckMinLength:()=>us,$ZodCheckMinSize:()=>Dn,$ZodCheckMultipleOf:()=>Un,$ZodCheckNumberFormat:()=>os,$ZodCheckOverwrite:()=>fs,$ZodCheckProperty:()=>mn,$ZodCheckRegex:()=>Ri,$ZodCheckSizeEquals:()=>ls,$ZodCheckStartsWith:()=>qn,$ZodCheckStringFormat:()=>Qi,$ZodCheckUpperCase:()=>Ln,$ZodCodec:()=>Ws,$ZodCustom:()=>Tn,$ZodCustomStringFormat:()=>Ui,$ZodDate:()=>po,$ZodDefault:()=>Bs,$ZodDiscriminatedUnion:()=>wo,$ZodE164:()=>Zr,$ZodEmail:()=>yn,$ZodEmoji:()=>Bn,$ZodEncodeError:()=>q,$ZodEnum:()=>js,$ZodError:()=>Fe,$ZodExactOptional:()=>To,$ZodFile:()=>Vn,$ZodFunction:()=>Po,$ZodGUID:()=>Yi,$ZodIPv4:()=>Xe,$ZodIPv6:()=>pt,$ZodISODate:()=>B,$ZodISODateTime:()=>u,$ZodISODuration:()=>je,$ZodISOTime:()=>de,$ZodIntersection:()=>qs,$ZodJWT:()=>di,$ZodKSUID:()=>T,$ZodLazy:()=>Ro,$ZodLiteral:()=>No,$ZodMAC:()=>Qe,$ZodMap:()=>ws,$ZodNaN:()=>Sn,$ZodNanoID:()=>gn,$ZodNever:()=>_n,$ZodNonOptional:()=>Ms,$ZodNull:()=>Di,$ZodNullable:()=>Io,$ZodNumber:()=>Er,$ZodNumberFormat:()=>Yr,$ZodObject:()=>yo,$ZodObjectJIT:()=>Fn,$ZodOptional:()=>zs,$ZodPipe:()=>Oo,$ZodPrefault:()=>Eo,$ZodPromise:()=>on,$ZodReadonly:()=>sn,$ZodRealError:()=>Ze,$ZodRecord:()=>_o,$ZodRegistry:()=>Vu,$ZodSet:()=>Nn,$ZodString:()=>wi,$ZodStringFormat:()=>tr,$ZodSuccess:()=>ei,$ZodSymbol:()=>ai,$ZodTemplateLiteral:()=>qi,$ZodTransform:()=>So,$ZodTuple:()=>kn,$ZodType:()=>Zt,$ZodULID:()=>ys,$ZodURL:()=>en,$ZodUUID:()=>wr,$ZodUndefined:()=>Gr,$ZodUnion:()=>Zn,$ZodUnknown:()=>rn,$ZodVoid:()=>xn,$ZodXID:()=>tn,$ZodXor:()=>Ls,$brand:()=>_,$constructor:()=>p,$input:()=>Zu,$output:()=>Fu,Doc:()=>Xi,JSONSchema:()=>c,JSONSchemaGenerator:()=>Ap,NEVER:()=>I,TimePrecision:()=>Hu,_any:()=>gc,_array:()=>Nc,_base64:()=>Dl,_base64url:()=>Ll,_bigint:()=>cc,_boolean:()=>lc,_catch:()=>xp,_check:()=>Ec,_cidrv4:()=>Rl,_cidrv6:()=>Ul,_coercedBigint:()=>dc,_coercedBoolean:()=>uc,_coercedDate:()=>xc,_coercedNumber:()=>rc,_coercedString:()=>Ku,_cuid:()=>Il,_cuid2:()=>El,_custom:()=>Tc,_date:()=>_c,_decode:()=>gt,_decodeAsync:()=>Qt,_default:()=>wp,_discriminatedUnion:()=>ap,_e164:()=>ql,_email:()=>bl,_emoji:()=>Sl,_encode:()=>Ge,_encodeAsync:()=>wt,_endsWith:()=>Xo,_enum:()=>pp,_file:()=>Sc,_float32:()=>nc,_float64:()=>sc,_gt:()=>$n,_gte:()=>li,_guid:()=>Zo,_includes:()=>Ho,_int:()=>ic,_int32:()=>oc,_int64:()=>hc,_intersection:()=>lp,_ipv4:()=>Cl,_ipv6:()=>Pl,_isoDate:()=>Xu,_isoDateTime:()=>Qu,_isoDuration:()=>ec,_isoTime:()=>Yu,_jwt:()=>jl,_ksuid:()=>Ol,_lazy:()=>Tp,_length:()=>Ks,_literal:()=>mp,_lowercase:()=>Ko,_lt:()=>An,_lte:()=>Si,_mac:()=>Ju,_map:()=>dp,_max:()=>Si,_maxLength:()=>Gs,_maxSize:()=>Ts,_mime:()=>Yo,_min:()=>li,_minLength:()=>es,_minSize:()=>On,_multipleOf:()=>Ss,_nan:()=>kc,_nanoid:()=>Tl,_nativeEnum:()=>fp,_negative:()=>Bl,_never:()=>wc,_nonnegative:()=>Wl,_nonoptional:()=>bp,_nonpositive:()=>Ml,_normalize:()=>ea,_null:()=>yc,_nullable:()=>vp,_number:()=>tc,_optional:()=>gp,_overwrite:()=>ln,_parse:()=>Ft,_parseAsync:()=>ye,_pipe:()=>kp,_positive:()=>zl,_promise:()=>Ip,_property:()=>Fl,_readonly:()=>Np,_record:()=>cp,_refine:()=>Ic,_regex:()=>Go,_safeDecode:()=>Pt,_safeDecodeAsync:()=>lr,_safeEncode:()=>er,_safeEncodeAsync:()=>or,_safeParse:()=>Te,_safeParseAsync:()=>Ce,_set:()=>hp,_size:()=>Vs,_slugify:()=>na,_startsWith:()=>Qo,_string:()=>Gu,_stringFormat:()=>Js,_stringbool:()=>Oc,_success:()=>_p,_superRefine:()=>Zl,_symbol:()=>fc,_templateLiteral:()=>Sp,_toLowerCase:()=>ra,_toUpperCase:()=>ia,_transform:()=>yp,_trim:()=>ta,_tuple:()=>up,_uint32:()=>ac,_uint64:()=>pc,_ulid:()=>Al,_undefined:()=>mc,_union:()=>sp,_unknown:()=>vc,_uppercase:()=>Jo,_url:()=>Vo,_uuid:()=>_l,_uuidv4:()=>xl,_uuidv6:()=>kl,_uuidv7:()=>Nl,_void:()=>bc,_xid:()=>$l,_xor:()=>op,clone:()=>ue,config:()=>a,createStandardJSONSchemaMethod:()=>Hs,createToJSONSchemaMethod:()=>Cc,decode:()=>at,decodeAsync:()=>Jt,describe:()=>Ac,encode:()=>it,encodeAsync:()=>Tt,extractDefs:()=>Es,finalize:()=>As,flattenError:()=>ht,formatError:()=>dt,globalConfig:()=>J,globalRegistry:()=>Ni,initializeContext:()=>Is,isValidBase64:()=>Ir,isValidBase64URL:()=>Pr,isValidJWT:()=>bi,locales:()=>s,meta:()=>$c,parse:()=>f,parseAsync:()=>Ie,prettifyError:()=>jt,process:()=>xr,regexes:()=>i,registry:()=>wl,safeDecode:()=>qt,safeDecodeAsync:()=>ur,safeEncode:()=>$t,safeEncodeAsync:()=>Vt,safeParse:()=>ze,safeParseAsync:()=>He,toDotPath:()=>It,toJSONSchema:()=>yd,treeifyError:()=>Et,util:()=>h,version:()=>zn});var j={};o.r(j),o.d(j,{endsWith:()=>Xo,gt:()=>$n,gte:()=>li,includes:()=>Ho,length:()=>Ks,lowercase:()=>Ko,lt:()=>An,lte:()=>Si,maxLength:()=>Gs,maxSize:()=>Ts,mime:()=>Yo,minLength:()=>es,minSize:()=>On,multipleOf:()=>Ss,negative:()=>Bl,nonnegative:()=>Wl,nonpositive:()=>Ml,normalize:()=>ea,overwrite:()=>ln,positive:()=>zl,property:()=>Fl,regex:()=>Go,size:()=>Vs,slugify:()=>na,startsWith:()=>Qo,toLowerCase:()=>ra,toUpperCase:()=>ia,trim:()=>ta,uppercase:()=>Jo});var $={};o.r($),o.d($,{ZodISODate:()=>Hl,ZodISODateTime:()=>Jl,ZodISODuration:()=>Xl,ZodISOTime:()=>Ql,date:()=>vd,datetime:()=>gd,duration:()=>bd,time:()=>wd});var W={};o.r(W),o.d(W,{ZodAny:()=>ou,ZodArray:()=>cu,ZodBase64:()=>wa,ZodBase64URL:()=>ba,ZodBigInt:()=>ro,ZodBigIntFormat:()=>Na,ZodBoolean:()=>to,ZodCIDRv4:()=>ga,ZodCIDRv6:()=>va,ZodCUID:()=>ca,ZodCUID2:()=>da,ZodCatch:()=>Cu,ZodCodec:()=>Pa,ZodCustom:()=>co,ZodCustomStringFormat:()=>$s,ZodDate:()=>Ta,ZodDefault:()=>Tu,ZodDiscriminatedUnion:()=>hu,ZodE164:()=>_a,ZodEmail:()=>aa,ZodEmoji:()=>la,ZodEnum:()=>Os,ZodExactOptional:()=>ku,ZodFile:()=>_u,ZodFunction:()=>Bu,ZodGUID:()=>Xs,ZodIPv4:()=>ma,ZodIPv6:()=>ya,ZodIntersection:()=>pu,ZodJWT:()=>xa,ZodKSUID:()=>fa,ZodLazy:()=>qu,ZodLiteral:()=>bu,ZodMAC:()=>Yl,ZodMap:()=>vu,ZodNaN:()=>Ru,ZodNanoID:()=>ua,ZodNever:()=>lu,ZodNonOptional:()=>Oa,ZodNull:()=>nu,ZodNullable:()=>Su,ZodNumber:()=>eo,ZodNumberFormat:()=>ts,ZodObject:()=>no,ZodOptional:()=>$a,ZodPipe:()=>Ca,ZodPrefault:()=>Eu,ZodPromise:()=>zu,ZodReadonly:()=>Uu,ZodRecord:()=>oo,ZodSet:()=>wu,ZodString:()=>Qs,ZodStringFormat:()=>Nr,ZodSuccess:()=>Ou,ZodSymbol:()=>ru,ZodTemplateLiteral:()=>Lu,ZodTransform:()=>xu,ZodTuple:()=>mu,ZodType:()=>Xt,ZodULID:()=>ha,ZodURL:()=>Ys,ZodUUID:()=>Fi,ZodUndefined:()=>iu,ZodUnion:()=>so,ZodUnknown:()=>au,ZodVoid:()=>uu,ZodXID:()=>pa,ZodXor:()=>du,_ZodString:()=>sa,_default:()=>Iu,_function:()=>Ra,any:()=>gh,array:()=>io,base64:()=>eh,base64url:()=>th,bigint:()=>hh,boolean:()=>tu,catch:()=>Pu,check:()=>jh,cidrv4:()=>Xd,cidrv6:()=>Yd,codec:()=>Dh,cuid:()=>Fd,cuid2:()=>Zd,custom:()=>zh,date:()=>wh,describe:()=>Mh,discriminatedUnion:()=>Sh,e164:()=>rh,email:()=>Rd,emoji:()=>Md,enum:()=>Ea,exactOptional:()=>Nu,file:()=>Ch,float32:()=>lh,float64:()=>uh,function:()=>Ra,guid:()=>Ud,hash:()=>ah,hex:()=>oh,hostname:()=>sh,httpUrl:()=>Bd,instanceof:()=>Fh,int:()=>ka,int32:()=>ch,int64:()=>ph,intersection:()=>fu,ipv4:()=>Jd,ipv6:()=>Qd,json:()=>Vh,jwt:()=>ih,keyof:()=>bh,ksuid:()=>Kd,lazy:()=>ju,literal:()=>Oh,looseObject:()=>kh,looseRecord:()=>Ih,mac:()=>Hd,map:()=>Eh,meta:()=>Wh,nan:()=>Uh,nanoid:()=>Wd,nativeEnum:()=>$h,never:()=>Sa,nonoptional:()=>$u,null:()=>su,nullable:()=>lo,nullish:()=>Ph,number:()=>eu,object:()=>_h,optional:()=>ao,partialRecord:()=>Th,pipe:()=>uo,prefault:()=>Au,preprocess:()=>Gh,promise:()=>qh,readonly:()=>Du,record:()=>gu,refine:()=>Mu,set:()=>Ah,strictObject:()=>xh,string:()=>oa,stringFormat:()=>nh,stringbool:()=>Zh,success:()=>Rh,superRefine:()=>Bh,symbol:()=>mh,templateLiteral:()=>Lh,transform:()=>Aa,tuple:()=>yu,uint32:()=>dh,uint64:()=>fh,ulid:()=>Vd,undefined:()=>yh,union:()=>Ia,unknown:()=>rs,url:()=>zd,uuid:()=>Dd,uuidv4:()=>Ld,uuidv6:()=>qd,uuidv7:()=>jd,void:()=>vh,xid:()=>Gd,xor:()=>Nh});var K={};o.r(K),o.d(K,{bigint:()=>jp,boolean:()=>qp,date:()=>zp,number:()=>Lp,string:()=>Dp});let I=Object.freeze({status:"aborted"});function p(t,r,n){function e(be,De){if(be._zod||Object.defineProperty(be,"_zod",{value:{def:De,constr:M,traits:new Set},enumerable:!1}),be._zod.traits.has(t))return;be._zod.traits.add(t),r(be,De);let _e=M.prototype,Ne=Object.keys(_e);for(let et=0;et<Ne.length;et++){let st=Ne[et];st in be||(be[st]=_e[st].bind(be))}}let l=n?.Parent??Object;class g extends l{}function M(be){var De;let _e=n?.Parent?new g:this;for(let Ne of(e(_e,be),(De=_e._zod).deferred??(De.deferred=[]),_e._zod.deferred))Ne();return _e}return Object.defineProperty(g,"name",{value:t}),Object.defineProperty(M,"init",{value:e}),Object.defineProperty(M,Symbol.hasInstance,{value:be=>!!n?.Parent&&be instanceof n.Parent||be?._zod?.traits?.has(t)}),Object.defineProperty(M,"name",{value:t}),M}let _=Symbol("zod_brand");class m extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class q extends Error{constructor(r){super(`Encountered unidirectional transform during encode: ${r}`),this.name="ZodEncodeError"}}let J={};function a(t){return t&&Object.assign(J,t),J}function V(t){return t}function C(t){return t}function L(t){}function k(t){throw Error("Unexpected value in exhaustive check")}function N(t){}function P(t){let r=Object.values(t).filter(n=>typeof n=="number");return Object.entries(t).filter(([n,e])=>r.indexOf(+n)===-1).map(([n,e])=>e)}function b(t,r="|"){return t.map(n=>ge(n)).join(r)}function z(t,r){return typeof r=="bigint"?r.toString():r}function F(t){return{get value(){{let r=t();return Object.defineProperty(this,"value",{value:r}),r}}}}function Q(t){return t==null}function G(t){let r=+!!t.startsWith("^"),n=t.endsWith("$")?t.length-1:t.length;return t.slice(r,n)}function X(t,r){let n=(t.toString().split(".")[1]||"").length,e=r.toString(),l=(e.split(".")[1]||"").length;if(l===0&&/\d?e-\d?/.test(e)){let M=e.match(/\d?e-(\d?)/);M?.[1]&&(l=Number.parseInt(M[1]))}let g=n>l?n:l;return Number.parseInt(t.toFixed(g).replace(".",""))%Number.parseInt(r.toFixed(g).replace(".",""))/10**g}let oe=Symbol("evaluating");function ne(t,r,n){let e;Object.defineProperty(t,r,{get(){if(e!==oe)return e===void 0&&(e=oe,e=n()),e},set(l){Object.defineProperty(t,r,{value:l})},configurable:!0})}function we(t){return Object.create(Object.getPrototypeOf(t),Object.getOwnPropertyDescriptors(t))}function Ee(t,r,n){Object.defineProperty(t,r,{value:n,writable:!0,enumerable:!0,configurable:!0})}function $e(...t){let r={};for(let n of t)Object.assign(r,Object.getOwnPropertyDescriptors(n));return Object.defineProperties({},r)}function v(t){return $e(t._zod.def)}function Z(t,r){return r?r.reduce((n,e)=>n?.[e],t):t}function R(t){let r=Object.keys(t);return Promise.all(r.map(n=>t[n])).then(n=>{let e={};for(let l=0;l<r.length;l++)e[r[l]]=n[l];return e})}function S(t=10){let r="abcdefghijklmnopqrstuvwxyz",n="";for(let e=0;e<t;e++)n+=r[Math.floor(Math.random()*r.length)];return n}function E(t){return JSON.stringify(t)}function A(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}let U="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function te(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}let Y=F(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch{return!1}});function D(t){if(te(t)===!1)return!1;let r=t.constructor;if(r===void 0||typeof r!="function")return!0;let n=r.prototype;return te(n)!==!1&&Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")!==!1}function ee(t){return D(t)?{...t}:Array.isArray(t)?[...t]:t}function le(t){let r=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&r++;return r}let se=t=>{let r=typeof t;switch(r){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(t)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(t)?"array":t===null?"null":t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?"promise":typeof Map<"u"&&t instanceof Map?"map":typeof Set<"u"&&t instanceof Set?"set":typeof Date<"u"&&t instanceof Date?"date":typeof File<"u"&&t instanceof File?"file":"object";default:throw Error(`Unknown data type: ${r}`)}},ce=new Set(["string","number","symbol"]),me=new Set(["string","number","bigint","boolean","symbol","undefined"]);function H(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ue(t,r,n){let e=new t._zod.constr(r??t._zod.def);return(!r||n?.parent)&&(e._zod.parent=t),e}function x(t){if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function fe(t){let r;return new Proxy({},{get:(n,e,l)=>(r??(r=t()),Reflect.get(r,e,l)),set:(n,e,l,g)=>(r??(r=t()),Reflect.set(r,e,l,g)),has:(n,e)=>(r??(r=t()),Reflect.has(r,e)),deleteProperty:(n,e)=>(r??(r=t()),Reflect.deleteProperty(r,e)),ownKeys:n=>(r??(r=t()),Reflect.ownKeys(r)),getOwnPropertyDescriptor:(n,e)=>(r??(r=t()),Reflect.getOwnPropertyDescriptor(r,e)),defineProperty:(n,e,l)=>(r??(r=t()),Reflect.defineProperty(r,e,l))})}function ge(t){return typeof t=="bigint"?t.toString()+"n":typeof t=="string"?`"${t}"`:`${t}`}function Se(t){return Object.keys(t).filter(r=>t[r]._zod.optin==="optional"&&t[r]._zod.optout==="optional")}let Re={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},ae={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function Ae(t,r){let n=t._zod.def,e=n.checks;if(e&&e.length>0)throw Error(".pick() cannot be used on object schemas containing refinements");let l=$e(t._zod.def,{get shape(){let g={};for(let M in r){if(!(M in n.shape))throw Error(`Unrecognized key: "${M}"`);r[M]&&(g[M]=n.shape[M])}return Ee(this,"shape",g),g},checks:[]});return ue(t,l)}function lt(t,r){let n=t._zod.def,e=n.checks;if(e&&e.length>0)throw Error(".omit() cannot be used on object schemas containing refinements");let l=$e(t._zod.def,{get shape(){let g={...t._zod.def.shape};for(let M in r){if(!(M in n.shape))throw Error(`Unrecognized key: "${M}"`);r[M]&&delete g[M]}return Ee(this,"shape",g),g},checks:[]});return ue(t,l)}function Je(t,r){if(!D(r))throw Error("Invalid input to extend: expected a plain object");let n=t._zod.def.checks;if(n&&n.length>0){let l=t._zod.def.shape;for(let g in r)if(Object.getOwnPropertyDescriptor(l,g)!==void 0)throw Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}let e=$e(t._zod.def,{get shape(){let l={...t._zod.def.shape,...r};return Ee(this,"shape",l),l}});return ue(t,e)}function rt(t,r){if(!D(r))throw Error("Invalid input to safeExtend: expected a plain object");let n=$e(t._zod.def,{get shape(){let e={...t._zod.def.shape,...r};return Ee(this,"shape",e),e}});return ue(t,n)}function Ye(t,r){let n=$e(t._zod.def,{get shape(){let e={...t._zod.def.shape,...r._zod.def.shape};return Ee(this,"shape",e),e},get catchall(){return r._zod.def.catchall},checks:[]});return ue(t,n)}function St(t,r,n){let e=r._zod.def.checks;if(e&&e.length>0)throw Error(".partial() cannot be used on object schemas containing refinements");let l=$e(r._zod.def,{get shape(){let g=r._zod.def.shape,M={...g};if(n)for(let be in n){if(!(be in g))throw Error(`Unrecognized key: "${be}"`);n[be]&&(M[be]=t?new t({type:"optional",innerType:g[be]}):g[be])}else for(let be in g)M[be]=t?new t({type:"optional",innerType:g[be]}):g[be];return Ee(this,"shape",M),M},checks:[]});return ue(r,l)}function bt(t,r,n){let e=$e(r._zod.def,{get shape(){let l=r._zod.def.shape,g={...l};if(n)for(let M in n){if(!(M in g))throw Error(`Unrecognized key: "${M}"`);n[M]&&(g[M]=new t({type:"nonoptional",innerType:l[M]}))}else for(let M in l)g[M]=new t({type:"nonoptional",innerType:l[M]});return Ee(this,"shape",g),g}});return ue(r,e)}function qe(t,r=0){if(t.aborted===!0)return!0;for(let n=r;n<t.issues.length;n++)if(t.issues[n]?.continue!==!0)return!0;return!1}function re(t,r){return r.map(n=>(n.path??(n.path=[]),n.path.unshift(t),n))}function We(t){return typeof t=="string"?t:t?.message}function ut(t,r,n){let e={...t,path:t.path??[]};return t.message||(e.message=We(t.inst?._zod.def?.error?.(t))??We(r?.error?.(t))??We(n.customError?.(t))??We(n.localeError?.(t))??"Invalid input"),delete e.inst,delete e.continue,r?.reportInput||delete e.input,e}function kt(t){return t instanceof Set?"set":t instanceof Map?"map":t instanceof File?"file":"unknown"}function Ct(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function tt(t){let r=typeof t;switch(r){case"number":return Number.isNaN(t)?"nan":"number";case"object":if(t===null)return"null";if(Array.isArray(t))return"array";if(t&&Object.getPrototypeOf(t)!==Object.prototype&&"constructor"in t&&t.constructor)return t.constructor.name}return r}function Ot(...t){let[r,n,e]=t;return typeof r=="string"?{message:r,code:"custom",input:n,inst:e}:{...r}}function Wt(t){return Object.entries(t).filter(([r,n])=>Number.isNaN(Number.parseInt(r,10))).map(r=>r[1])}function yt(t){let r=atob(t),n=new Uint8Array(r.length);for(let e=0;e<r.length;e++)n[e]=r.charCodeAt(e);return n}function ct(t){let r="";for(let n=0;n<t.length;n++)r+=String.fromCharCode(t[n]);return btoa(r)}function vt(t){let r=t.replace(/-/g,"+").replace(/_/g,"/"),n="=".repeat((4-r.length%4)%4);return yt(r+n)}function Ut(t){return ct(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function nr(t){let r=t.replace(/^0x/,"");if(r.length%2!=0)throw Error("Invalid hex string length");let n=new Uint8Array(r.length/2);for(let e=0;e<r.length;e+=2)n[e/2]=Number.parseInt(r.slice(e,e+2),16);return n}function br(t){return Array.from(t).map(r=>r.toString(16).padStart(2,"0")).join("")}class ke{constructor(...r){}}let xe=(t,r)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:r,enumerable:!1}),t.message=JSON.stringify(r,z,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},Fe=p("$ZodError",xe),Ze=p("$ZodError",xe,{Parent:Error});function ht(t,r=n=>n.message){let n={},e=[];for(let l of t.issues)l.path.length>0?(n[l.path[0]]=n[l.path[0]]||[],n[l.path[0]].push(r(l))):e.push(r(l));return{formErrors:e,fieldErrors:n}}function dt(t,r=n=>n.message){let n={_errors:[]},e=l=>{for(let g of l.issues)if(g.code==="invalid_union"&&g.errors.length)g.errors.map(M=>e({issues:M}));else if(g.code==="invalid_key")e({issues:g.issues});else if(g.code==="invalid_element")e({issues:g.issues});else if(g.path.length===0)n._errors.push(r(g));else{let M=n,be=0;for(;be<g.path.length;){let De=g.path[be];be===g.path.length-1?(M[De]=M[De]||{_errors:[]},M[De]._errors.push(r(g))):M[De]=M[De]||{_errors:[]},M=M[De],be++}}};return e(t),n}function Et(t,r=n=>n.message){let n={errors:[]},e=(l,g=[])=>{var M,be;for(let De of l.issues)if(De.code==="invalid_union"&&De.errors.length)De.errors.map(_e=>e({issues:_e},De.path));else if(De.code==="invalid_key")e({issues:De.issues},De.path);else if(De.code==="invalid_element")e({issues:De.issues},De.path);else{let _e=[...g,...De.path];if(_e.length===0){n.errors.push(r(De));continue}let Ne=n,et=0;for(;et<_e.length;){let st=_e[et],Nt=et===_e.length-1;typeof st=="string"?(Ne.properties??(Ne.properties={}),(M=Ne.properties)[st]??(M[st]={errors:[]}),Ne=Ne.properties[st]):(Ne.items??(Ne.items=[]),(be=Ne.items)[st]??(be[st]={errors:[]}),Ne=Ne.items[st]),Nt&&Ne.errors.push(r(De)),et++}}};return e(t),n}function It(t){let r=[];for(let n of t.map(e=>typeof e=="object"?e.key:e))typeof n=="number"?r.push(`[${n}]`):typeof n=="symbol"?r.push(`[${JSON.stringify(String(n))}]`):/[^\w$]/.test(n)?r.push(`[${JSON.stringify(n)}]`):(r.length&&r.push("."),r.push(n));return r.join("")}function jt(t){let r=[];for(let n of[...t.issues].sort((e,l)=>(e.path??[]).length-(l.path??[]).length))r.push(`\u2716 ${n.message}`),n.path?.length&&r.push(`  \u2192 at ${It(n.path)}`);return r.join(`
`)}let Ft=t=>(r,n,e,l)=>{let g=e?Object.assign(e,{async:!1}):{async:!1},M=r._zod.run({value:n,issues:[]},g);if(M instanceof Promise)throw new m;if(M.issues.length){let be=new(l?.Err??t)(M.issues.map(De=>ut(De,g,a())));throw U(be,l?.callee),be}return M.value},f=Ft(Ze),ye=t=>async(r,n,e,l)=>{let g=e?Object.assign(e,{async:!0}):{async:!0},M=r._zod.run({value:n,issues:[]},g);if(M instanceof Promise&&(M=await M),M.issues.length){let be=new(l?.Err??t)(M.issues.map(De=>ut(De,g,a())));throw U(be,l?.callee),be}return M.value},Ie=ye(Ze),Te=t=>(r,n,e)=>{let l=e?{...e,async:!1}:{async:!1},g=r._zod.run({value:n,issues:[]},l);if(g instanceof Promise)throw new m;return g.issues.length?{success:!1,error:new(t??Fe)(g.issues.map(M=>ut(M,l,a())))}:{success:!0,data:g.value}},ze=Te(Ze),Ce=t=>async(r,n,e)=>{let l=e?Object.assign(e,{async:!0}):{async:!0},g=r._zod.run({value:n,issues:[]},l);return g instanceof Promise&&(g=await g),g.issues.length?{success:!1,error:new t(g.issues.map(M=>ut(M,l,a())))}:{success:!0,data:g.value}},He=Ce(Ze),Ge=t=>(r,n,e)=>{let l=e?Object.assign(e,{direction:"backward"}):{direction:"backward"};return Ft(t)(r,n,l)},it=Ge(Ze),gt=t=>(r,n,e)=>Ft(t)(r,n,e),at=gt(Ze),wt=t=>async(r,n,e)=>{let l=e?Object.assign(e,{direction:"backward"}):{direction:"backward"};return ye(t)(r,n,l)},Tt=wt(Ze),Qt=t=>async(r,n,e)=>ye(t)(r,n,e),Jt=Qt(Ze),er=t=>(r,n,e)=>{let l=e?Object.assign(e,{direction:"backward"}):{direction:"backward"};return Te(t)(r,n,l)},$t=er(Ze),Pt=t=>(r,n,e)=>Te(t)(r,n,e),qt=Pt(Ze),or=t=>async(r,n,e)=>{let l=e?Object.assign(e,{direction:"backward"}):{direction:"backward"};return Ce(t)(r,n,l)},Vt=or(Ze),lr=t=>async(r,n,e)=>Ce(t)(r,n,e),ur=lr(Ze),gr=/^[cC][^\s-]{8,}$/,Or=/^[0-9a-z]+$/,ir=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,vr=/^[0-9a-vA-V]{20}$/,Cr=/^[A-Za-z0-9]{27}$/,Mr=/^[a-zA-Z0-9_-]{21}$/,Wr=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Ti=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Kr=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,yi=t=>t?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,ii=yi(4),Ii=yi(6),Ei=yi(7),un=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Cn=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Pn=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,ui=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,Zi=ui,cn=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function Jr(){return RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")}let Ai=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Vi=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,dn=t=>{let r=H(t??":");return RegExp(`^(?:[0-9A-F]{2}${r}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${r}){5}[0-9a-f]{2}$`)},zi=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Hr=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Fr=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Qr=/^[A-Za-z0-9_-]*$/,Gi=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,ci=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,$i=/^\+[1-9]\d{6,14}$/,Oi="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",hn=RegExp(`^${Oi}$`);function gi(t){let r="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${r}`:t.precision===0?`${r}:[0-5]\\d`:`${r}:[0-5]\\d\\.\\d{${t.precision}}`:`${r}(?::[0-5]\\d(?:\\.\\d+)?)?`}function pn(t){return RegExp(`^${gi(t)}$`)}function zr(t){let r=gi({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let e=`${r}(?:${n.join("|")})`;return RegExp(`^${Oi}T(?:${e})$`)}let ni=t=>{let r=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return RegExp(`^${r}$`)},si=/^-?\d+n?$/,Ci=/^-?\d+$/,vi=/^-?\d+(?:\.\d+)?$/,Vr=/^(?:true|false)$/i,Xr=/^null$/i,oi=/^undefined$/i,Br=/^[^A-Z]*$/,Bi=/^[^a-z]*$/,Ki=/^[0-9a-fA-F]*$/;function ve(t,r){return RegExp(`^[A-Za-z0-9+/]{${t}}${r}$`)}function w(t){return RegExp(`^[A-Za-z0-9_-]{${t}}$`)}let pe=/^[0-9a-fA-F]{32}$/,Oe=ve(22,"=="),Ve=w(22),_t=/^[0-9a-fA-F]{40}$/,Yt=ve(27,"="),ar=w(27),Tr=/^[0-9a-fA-F]{64}$/,Lr=ve(43,"="),qr=w(43),Pi=/^[0-9a-fA-F]{96}$/,Ps=ve(64,""),ns=w(64),Rs=/^[0-9a-fA-F]{128}$/,Us=ve(86,"=="),Ds=w(86),hr=p("$ZodCheck",(t,r)=>{var n;t._zod??(t._zod={}),t._zod.def=r,(n=t._zod).onattach??(n.onattach=[])}),ss={number:"number",bigint:"bigint",object:"date"},Ji=p("$ZodCheckLessThan",(t,r)=>{hr.init(t,r);let n=ss[typeof r.value];t._zod.onattach.push(e=>{let l=e._zod.bag,g=(r.inclusive?l.maximum:l.exclusiveMaximum)??Number.POSITIVE_INFINITY;r.value<g&&(r.inclusive?l.maximum=r.value:l.exclusiveMaximum=r.value)}),t._zod.check=e=>{(r.inclusive?!(e.value<=r.value):!(e.value<r.value))&&e.issues.push({origin:n,code:"too_big",maximum:typeof r.value=="object"?r.value.getTime():r.value,input:e.value,inclusive:r.inclusive,inst:t,continue:!r.abort})}}),Rn=p("$ZodCheckGreaterThan",(t,r)=>{hr.init(t,r);let n=ss[typeof r.value];t._zod.onattach.push(e=>{let l=e._zod.bag,g=(r.inclusive?l.minimum:l.exclusiveMinimum)??Number.NEGATIVE_INFINITY;r.value>g&&(r.inclusive?l.minimum=r.value:l.exclusiveMinimum=r.value)}),t._zod.check=e=>{(r.inclusive?!(e.value>=r.value):!(e.value>r.value))&&e.issues.push({origin:n,code:"too_small",minimum:typeof r.value=="object"?r.value.getTime():r.value,input:e.value,inclusive:r.inclusive,inst:t,continue:!r.abort})}}),Un=p("$ZodCheckMultipleOf",(t,r)=>{hr.init(t,r),t._zod.onattach.push(n=>{var e;(e=n._zod.bag).multipleOf??(e.multipleOf=r.value)}),t._zod.check=n=>{if(typeof n.value!=typeof r.value)throw Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%r.value===BigInt(0):X(n.value,r.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:r.value,input:n.value,inst:t,continue:!r.abort})}}),os=p("$ZodCheckNumberFormat",(t,r)=>{hr.init(t,r),r.format=r.format||"float64";let n=r.format?.includes("int"),e=n?"int":"number",[l,g]=Re[r.format];t._zod.onattach.push(M=>{let be=M._zod.bag;be.format=r.format,be.minimum=l,be.maximum=g,n&&(be.pattern=Ci)}),t._zod.check=M=>{let be=M.value;if(n){if(!Number.isInteger(be)){M.issues.push({expected:e,format:r.format,code:"invalid_type",continue:!1,input:be,inst:t});return}if(!Number.isSafeInteger(be)){be>0?M.issues.push({input:be,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:e,inclusive:!0,continue:!r.abort}):M.issues.push({input:be,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:e,inclusive:!0,continue:!r.abort});return}}be<l&&M.issues.push({origin:"number",input:be,code:"too_small",minimum:l,inclusive:!0,inst:t,continue:!r.abort}),be>g&&M.issues.push({origin:"number",input:be,code:"too_big",maximum:g,inclusive:!0,inst:t,continue:!r.abort})}}),fn=p("$ZodCheckBigIntFormat",(t,r)=>{hr.init(t,r);let[n,e]=ae[r.format];t._zod.onattach.push(l=>{let g=l._zod.bag;g.format=r.format,g.minimum=n,g.maximum=e}),t._zod.check=l=>{let g=l.value;g<n&&l.issues.push({origin:"bigint",input:g,code:"too_small",minimum:n,inclusive:!0,inst:t,continue:!r.abort}),g>e&&l.issues.push({origin:"bigint",input:g,code:"too_big",maximum:e,inclusive:!0,inst:t,continue:!r.abort})}}),as=p("$ZodCheckMaxSize",(t,r)=>{var n;hr.init(t,r),(n=t._zod.def).when??(n.when=e=>{let l=e.value;return!Q(l)&&l.size!==void 0}),t._zod.onattach.push(e=>{let l=e._zod.bag.maximum??Number.POSITIVE_INFINITY;r.maximum<l&&(e._zod.bag.maximum=r.maximum)}),t._zod.check=e=>{let l=e.value;l.size<=r.maximum||e.issues.push({origin:kt(l),code:"too_big",maximum:r.maximum,inclusive:!0,input:l,inst:t,continue:!r.abort})}}),Dn=p("$ZodCheckMinSize",(t,r)=>{var n;hr.init(t,r),(n=t._zod.def).when??(n.when=e=>{let l=e.value;return!Q(l)&&l.size!==void 0}),t._zod.onattach.push(e=>{let l=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;r.minimum>l&&(e._zod.bag.minimum=r.minimum)}),t._zod.check=e=>{let l=e.value;l.size>=r.minimum||e.issues.push({origin:kt(l),code:"too_small",minimum:r.minimum,inclusive:!0,input:l,inst:t,continue:!r.abort})}}),ls=p("$ZodCheckSizeEquals",(t,r)=>{var n;hr.init(t,r),(n=t._zod.def).when??(n.when=e=>{let l=e.value;return!Q(l)&&l.size!==void 0}),t._zod.onattach.push(e=>{let l=e._zod.bag;l.minimum=r.size,l.maximum=r.size,l.size=r.size}),t._zod.check=e=>{let l=e.value,g=l.size;if(g===r.size)return;let M=g>r.size;e.issues.push({origin:kt(l),...M?{code:"too_big",maximum:r.size}:{code:"too_small",minimum:r.size},inclusive:!0,exact:!0,input:e.value,inst:t,continue:!r.abort})}}),Hi=p("$ZodCheckMaxLength",(t,r)=>{var n;hr.init(t,r),(n=t._zod.def).when??(n.when=e=>{let l=e.value;return!Q(l)&&l.length!==void 0}),t._zod.onattach.push(e=>{let l=e._zod.bag.maximum??Number.POSITIVE_INFINITY;r.maximum<l&&(e._zod.bag.maximum=r.maximum)}),t._zod.check=e=>{let l=e.value;if(l.length<=r.maximum)return;let g=Ct(l);e.issues.push({origin:g,code:"too_big",maximum:r.maximum,inclusive:!0,input:l,inst:t,continue:!r.abort})}}),us=p("$ZodCheckMinLength",(t,r)=>{var n;hr.init(t,r),(n=t._zod.def).when??(n.when=e=>{let l=e.value;return!Q(l)&&l.length!==void 0}),t._zod.onattach.push(e=>{let l=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;r.minimum>l&&(e._zod.bag.minimum=r.minimum)}),t._zod.check=e=>{let l=e.value;if(l.length>=r.minimum)return;let g=Ct(l);e.issues.push({origin:g,code:"too_small",minimum:r.minimum,inclusive:!0,input:l,inst:t,continue:!r.abort})}}),cs=p("$ZodCheckLengthEquals",(t,r)=>{var n;hr.init(t,r),(n=t._zod.def).when??(n.when=e=>{let l=e.value;return!Q(l)&&l.length!==void 0}),t._zod.onattach.push(e=>{let l=e._zod.bag;l.minimum=r.length,l.maximum=r.length,l.length=r.length}),t._zod.check=e=>{let l=e.value,g=l.length;if(g===r.length)return;let M=Ct(l),be=g>r.length;e.issues.push({origin:M,...be?{code:"too_big",maximum:r.length}:{code:"too_small",minimum:r.length},inclusive:!0,exact:!0,input:e.value,inst:t,continue:!r.abort})}}),Qi=p("$ZodCheckStringFormat",(t,r)=>{var n,e;hr.init(t,r),t._zod.onattach.push(l=>{let g=l._zod.bag;g.format=r.format,r.pattern&&(g.patterns??(g.patterns=new Set),g.patterns.add(r.pattern))}),r.pattern?(n=t._zod).check??(n.check=l=>{r.pattern.lastIndex=0,r.pattern.test(l.value)||l.issues.push({origin:"string",code:"invalid_format",format:r.format,input:l.value,...r.pattern?{pattern:r.pattern.toString()}:{},inst:t,continue:!r.abort})}):(e=t._zod).check??(e.check=()=>{})}),Ri=p("$ZodCheckRegex",(t,r)=>{Qi.init(t,r),t._zod.check=n=>{r.pattern.lastIndex=0,r.pattern.test(n.value)||n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:r.pattern.toString(),inst:t,continue:!r.abort})}}),ds=p("$ZodCheckLowerCase",(t,r)=>{r.pattern??(r.pattern=Br),Qi.init(t,r)}),Ln=p("$ZodCheckUpperCase",(t,r)=>{r.pattern??(r.pattern=Bi),Qi.init(t,r)}),hs=p("$ZodCheckIncludes",(t,r)=>{hr.init(t,r);let n=H(r.includes),e=new RegExp(typeof r.position=="number"?`^.{${r.position}}${n}`:n);r.pattern=e,t._zod.onattach.push(l=>{let g=l._zod.bag;g.patterns??(g.patterns=new Set),g.patterns.add(e)}),t._zod.check=l=>{l.value.includes(r.includes,r.position)||l.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:r.includes,input:l.value,inst:t,continue:!r.abort})}}),qn=p("$ZodCheckStartsWith",(t,r)=>{hr.init(t,r);let n=RegExp(`^${H(r.prefix)}.*`);r.pattern??(r.pattern=n),t._zod.onattach.push(e=>{let l=e._zod.bag;l.patterns??(l.patterns=new Set),l.patterns.add(n)}),t._zod.check=e=>{e.value.startsWith(r.prefix)||e.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:r.prefix,input:e.value,inst:t,continue:!r.abort})}}),ps=p("$ZodCheckEndsWith",(t,r)=>{hr.init(t,r);let n=RegExp(`.*${H(r.suffix)}$`);r.pattern??(r.pattern=n),t._zod.onattach.push(e=>{let l=e._zod.bag;l.patterns??(l.patterns=new Set),l.patterns.add(n)}),t._zod.check=e=>{e.value.endsWith(r.suffix)||e.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:r.suffix,input:e.value,inst:t,continue:!r.abort})}});function jn(t,r,n){t.issues.length&&r.issues.push(...re(n,t.issues))}let mn=p("$ZodCheckProperty",(t,r)=>{hr.init(t,r),t._zod.check=n=>{let e=r.schema._zod.run({value:n.value[r.property],issues:[]},{});if(e instanceof Promise)return e.then(l=>jn(l,n,r.property));jn(e,n,r.property)}}),Mi=p("$ZodCheckMimeType",(t,r)=>{hr.init(t,r);let n=new Set(r.mime);t._zod.onattach.push(e=>{e._zod.bag.mime=r.mime}),t._zod.check=e=>{n.has(e.value.type)||e.issues.push({code:"invalid_value",values:r.mime,input:e.value.type,inst:t,continue:!r.abort})}}),fs=p("$ZodCheckOverwrite",(t,r)=>{hr.init(t,r),t._zod.check=n=>{n.value=r.tx(n.value)}});class Xi{constructor(r=[]){this.content=[],this.indent=0,this&&(this.args=r)}indented(r){this.indent+=1,r(this),this.indent-=1}write(r){if(typeof r=="function"){r(this,{execution:"sync"}),r(this,{execution:"async"});return}let n=r.split(`
`).filter(l=>l),e=Math.min(...n.map(l=>l.length-l.trimStart().length));for(let l of n.map(g=>g.slice(e)).map(g=>" ".repeat(2*this.indent)+g))this.content.push(l)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(r=>`  ${r}`)].join(`
`))}}let zn={major:4,minor:3,patch:6},Zt=p("$ZodType",(t,r)=>{var n;t??(t={}),t._zod.def=r,t._zod.bag=t._zod.bag||{},t._zod.version=zn;let e=[...t._zod.def.checks??[]];for(let l of(t._zod.traits.has("$ZodCheck")&&e.unshift(t),e))for(let g of l._zod.onattach)g(t);if(e.length===0)(n=t._zod).deferred??(n.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{let l=(M,be,De)=>{let _e,Ne=qe(M);for(let et of be){if(et._zod.def.when){if(!et._zod.def.when(M))continue}else if(Ne)continue;let st=M.issues.length,Nt=et._zod.check(M);if(Nt instanceof Promise&&De?.async===!1)throw new m;if(_e||Nt instanceof Promise)_e=(_e??Promise.resolve()).then(async()=>{await Nt,M.issues.length===st||Ne||(Ne=qe(M,st))});else{if(M.issues.length===st)continue;Ne||(Ne=qe(M,st))}}return _e?_e.then(()=>M):M},g=(M,be,De)=>{if(qe(M))return M.aborted=!0,M;let _e=l(be,e,De);if(_e instanceof Promise){if(De.async===!1)throw new m;return _e.then(Ne=>t._zod.parse(Ne,De))}return t._zod.parse(_e,De)};t._zod.run=(M,be)=>{if(be.skipChecks)return t._zod.parse(M,be);if(be.direction==="backward"){let _e=t._zod.parse({value:M.value,issues:[]},{...be,skipChecks:!0});return _e instanceof Promise?_e.then(Ne=>g(Ne,M,be)):g(_e,M,be)}let De=t._zod.parse(M,be);if(De instanceof Promise){if(be.async===!1)throw new m;return De.then(_e=>l(_e,e,be))}return l(De,e,be)}}ne(t,"~standard",()=>({validate:l=>{try{let g=ze(t,l);return g.success?{value:g.data}:{issues:g.error?.issues}}catch{return He(t,l).then(M=>M.success?{value:M.data}:{issues:M.error?.issues})}},vendor:"zod",version:1}))}),wi=p("$ZodString",(t,r)=>{Zt.init(t,r),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??ni(t._zod.bag),t._zod.parse=(n,e)=>{if(r.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:t}),n}}),tr=p("$ZodStringFormat",(t,r)=>{Qi.init(t,r),wi.init(t,r)}),Yi=p("$ZodGUID",(t,r)=>{r.pattern??(r.pattern=Kr),tr.init(t,r)}),wr=p("$ZodUUID",(t,r)=>{if(r.version){let n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[r.version];if(n===void 0)throw Error(`Invalid UUID version: "${r.version}"`);r.pattern??(r.pattern=yi(n))}else r.pattern??(r.pattern=yi());tr.init(t,r)}),yn=p("$ZodEmail",(t,r)=>{r.pattern??(r.pattern=un),tr.init(t,r)}),en=p("$ZodURL",(t,r)=>{tr.init(t,r),t._zod.check=n=>{try{let e=n.value.trim(),l=new URL(e);r.hostname&&(r.hostname.lastIndex=0,r.hostname.test(l.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:r.hostname.source,input:n.value,inst:t,continue:!r.abort})),r.protocol&&(r.protocol.lastIndex=0,r.protocol.test(l.protocol.endsWith(":")?l.protocol.slice(0,-1):l.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:r.protocol.source,input:n.value,inst:t,continue:!r.abort})),r.normalize?n.value=l.href:n.value=e;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!r.abort})}}}),Bn=p("$ZodEmoji",(t,r)=>{r.pattern??(r.pattern=Jr()),tr.init(t,r)}),gn=p("$ZodNanoID",(t,r)=>{r.pattern??(r.pattern=Mr),tr.init(t,r)}),ms=p("$ZodCUID",(t,r)=>{r.pattern??(r.pattern=gr),tr.init(t,r)}),Mn=p("$ZodCUID2",(t,r)=>{r.pattern??(r.pattern=Or),tr.init(t,r)}),ys=p("$ZodULID",(t,r)=>{r.pattern??(r.pattern=ir),tr.init(t,r)}),tn=p("$ZodXID",(t,r)=>{r.pattern??(r.pattern=vr),tr.init(t,r)}),T=p("$ZodKSUID",(t,r)=>{r.pattern??(r.pattern=Cr),tr.init(t,r)}),u=p("$ZodISODateTime",(t,r)=>{r.pattern??(r.pattern=zr(r)),tr.init(t,r)}),B=p("$ZodISODate",(t,r)=>{r.pattern??(r.pattern=hn),tr.init(t,r)}),de=p("$ZodISOTime",(t,r)=>{r.pattern??(r.pattern=pn(r)),tr.init(t,r)}),je=p("$ZodISODuration",(t,r)=>{r.pattern??(r.pattern=Wr),tr.init(t,r)}),Xe=p("$ZodIPv4",(t,r)=>{r.pattern??(r.pattern=Ai),tr.init(t,r),t._zod.bag.format="ipv4"}),pt=p("$ZodIPv6",(t,r)=>{r.pattern??(r.pattern=Vi),tr.init(t,r),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!r.abort})}}}),Qe=p("$ZodMAC",(t,r)=>{r.pattern??(r.pattern=dn(r.delimiter)),tr.init(t,r),t._zod.bag.format="mac"}),mt=p("$ZodCIDRv4",(t,r)=>{r.pattern??(r.pattern=zi),tr.init(t,r)}),rr=p("$ZodCIDRv6",(t,r)=>{r.pattern??(r.pattern=Hr),tr.init(t,r),t._zod.check=n=>{let e=n.value.split("/");try{if(e.length!==2)throw Error();let[l,g]=e;if(!g)throw Error();let M=Number(g);if(`${M}`!==g||M<0||M>128)throw Error();new URL(`http://[${l}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!r.abort})}}});function Ir(t){if(t==="")return!0;if(t.length%4!=0)return!1;try{return atob(t),!0}catch{return!1}}let kr=p("$ZodBase64",(t,r)=>{r.pattern??(r.pattern=Fr),tr.init(t,r),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{Ir(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!r.abort})}});function Pr(t){if(!Qr.test(t))return!1;let r=t.replace(/[-_]/g,n=>n==="-"?"+":"/");return Ir(r.padEnd(4*Math.ceil(r.length/4),"="))}let $r=p("$ZodBase64URL",(t,r)=>{r.pattern??(r.pattern=Qr),tr.init(t,r),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{Pr(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!r.abort})}}),Zr=p("$ZodE164",(t,r)=>{r.pattern??(r.pattern=$i),tr.init(t,r)});function bi(t,r=null){try{let n=t.split(".");if(n.length!==3)return!1;let[e]=n;if(!e)return!1;let l=JSON.parse(atob(e));return!("typ"in l&&l?.typ!=="JWT"||!l.alg||r&&(!("alg"in l)||l.alg!==r))}catch{return!1}}let di=p("$ZodJWT",(t,r)=>{tr.init(t,r),t._zod.check=n=>{bi(n.value,r.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!r.abort})}}),Ui=p("$ZodCustomStringFormat",(t,r)=>{tr.init(t,r),t._zod.check=n=>{r.fn(n.value)||n.issues.push({code:"invalid_format",format:r.format,input:n.value,inst:t,continue:!r.abort})}}),Er=p("$ZodNumber",(t,r)=>{Zt.init(t,r),t._zod.pattern=t._zod.bag.pattern??vi,t._zod.parse=(n,e)=>{if(r.coerce)try{n.value=Number(n.value)}catch{}let l=n.value;if(typeof l=="number"&&!Number.isNaN(l)&&Number.isFinite(l))return n;let g=typeof l=="number"?Number.isNaN(l)?"NaN":Number.isFinite(l)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:l,inst:t,...g?{received:g}:{}}),n}}),Yr=p("$ZodNumberFormat",(t,r)=>{os.init(t,r),Er.init(t,r)}),Wn=p("$ZodBoolean",(t,r)=>{Zt.init(t,r),t._zod.pattern=Vr,t._zod.parse=(n,e)=>{if(r.coerce)try{n.value=!!n.value}catch{}let l=n.value;return typeof l=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:l,inst:t}),n}}),vn=p("$ZodBigInt",(t,r)=>{Zt.init(t,r),t._zod.pattern=si,t._zod.parse=(n,e)=>{if(r.coerce)try{n.value=BigInt(n.value)}catch{}return typeof n.value=="bigint"||n.issues.push({expected:"bigint",code:"invalid_type",input:n.value,inst:t}),n}}),wn=p("$ZodBigIntFormat",(t,r)=>{fn.init(t,r),vn.init(t,r)}),ai=p("$ZodSymbol",(t,r)=>{Zt.init(t,r),t._zod.parse=(n,e)=>{let l=n.value;return typeof l=="symbol"||n.issues.push({expected:"symbol",code:"invalid_type",input:l,inst:t}),n}}),Gr=p("$ZodUndefined",(t,r)=>{Zt.init(t,r),t._zod.pattern=oi,t._zod.values=new Set([void 0]),t._zod.optin="optional",t._zod.optout="optional",t._zod.parse=(n,e)=>{let l=n.value;return l===void 0||n.issues.push({expected:"undefined",code:"invalid_type",input:l,inst:t}),n}}),Di=p("$ZodNull",(t,r)=>{Zt.init(t,r),t._zod.pattern=Xr,t._zod.values=new Set([null]),t._zod.parse=(n,e)=>{let l=n.value;return l===null||n.issues.push({expected:"null",code:"invalid_type",input:l,inst:t}),n}}),bn=p("$ZodAny",(t,r)=>{Zt.init(t,r),t._zod.parse=n=>n}),rn=p("$ZodUnknown",(t,r)=>{Zt.init(t,r),t._zod.parse=n=>n}),_n=p("$ZodNever",(t,r)=>{Zt.init(t,r),t._zod.parse=(n,e)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)}),xn=p("$ZodVoid",(t,r)=>{Zt.init(t,r),t._zod.parse=(n,e)=>{let l=n.value;return l===void 0||n.issues.push({expected:"void",code:"invalid_type",input:l,inst:t}),n}}),po=p("$ZodDate",(t,r)=>{Zt.init(t,r),t._zod.parse=(n,e)=>{if(r.coerce)try{n.value=new Date(n.value)}catch{}let l=n.value,g=l instanceof Date;return g&&!Number.isNaN(l.getTime())||n.issues.push({expected:"date",code:"invalid_type",input:l,...g?{received:"Invalid Date"}:{},inst:t}),n}});function Li(t,r,n){t.issues.length&&r.issues.push(...re(n,t.issues)),r.value[n]=t.value}let fo=p("$ZodArray",(t,r)=>{Zt.init(t,r),t._zod.parse=(n,e)=>{let l=n.value;if(!Array.isArray(l))return n.issues.push({expected:"array",code:"invalid_type",input:l,inst:t}),n;n.value=Array(l.length);let g=[];for(let M=0;M<l.length;M++){let be=l[M],De=r.element._zod.run({value:be,issues:[]},e);De instanceof Promise?g.push(De.then(_e=>Li(_e,n,M))):Li(De,n,M)}return g.length?Promise.all(g).then(()=>n):n}});function gs(t,r,n,e,l){if(t.issues.length){if(l&&!(n in e))return;r.issues.push(...re(n,t.issues))}t.value===void 0?n in e&&(r.value[n]=void 0):r.value[n]=t.value}function mo(t){let r=Object.keys(t.shape);for(let e of r)if(!t.shape?.[e]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${e}": expected a Zod schema`);let n=Se(t.shape);return{...t,keys:r,keySet:new Set(r),numKeys:r.length,optionalKeys:new Set(n)}}function pr(t,r,n,e,l,g){let M=[],be=l.keySet,De=l.catchall._zod,_e=De.def.type,Ne=De.optout==="optional";for(let et in r){if(be.has(et))continue;if(_e==="never"){M.push(et);continue}let st=De.run({value:r[et],issues:[]},e);st instanceof Promise?t.push(st.then(Nt=>gs(Nt,n,et,r,Ne))):gs(st,n,et,r,Ne)}return M.length&&n.issues.push({code:"unrecognized_keys",keys:M,input:r,inst:g}),t.length?Promise.all(t).then(()=>n):n}let yo=p("$ZodObject",(t,r)=>{let n;if(Zt.init(t,r),!Object.getOwnPropertyDescriptor(r,"shape")?.get){let M=r.shape;Object.defineProperty(r,"shape",{get:()=>{let be={...M};return Object.defineProperty(r,"shape",{value:be}),be}})}let l=F(()=>mo(r));ne(t._zod,"propValues",()=>{let M=r.shape,be={};for(let De in M){let _e=M[De]._zod;if(_e.values)for(let Ne of(be[De]??(be[De]=new Set),_e.values))be[De].add(Ne)}return be});let g=r.catchall;t._zod.parse=(M,be)=>{n??(n=l.value);let De=M.value;if(!te(De))return M.issues.push({expected:"object",code:"invalid_type",input:De,inst:t}),M;M.value={};let _e=[],Ne=n.shape;for(let et of n.keys){let st=Ne[et],Nt=st._zod.optout==="optional",Ke=st._zod.run({value:De[et],issues:[]},be);Ke instanceof Promise?_e.push(Ke.then(Mt=>gs(Mt,M,et,De,Nt))):gs(Ke,M,et,De,Nt)}return g?pr(_e,De,M,be,l.value,t):_e.length?Promise.all(_e).then(()=>M):M}}),Fn=p("$ZodObjectJIT",(t,r)=>{let n,e;yo.init(t,r);let l=t._zod.parse,g=F(()=>mo(r)),M=Ne=>{let et=new Xi(["shape","payload","ctx"]),st=g.value,Nt=fr=>{let mr=E(fr);return`shape[${mr}]._zod.run({ value: input[${mr}], issues: [] }, ctx)`};et.write("const input = payload.value;");let Ke=Object.create(null),Mt=0;for(let fr of st.keys)Ke[fr]=`key_${Mt++}`;for(let fr of(et.write("const newResult = {};"),st.keys)){let mr=Ke[fr],jr=E(fr),fi=Ne[fr],mi=fi?._zod?.optout==="optional";et.write(`const ${mr} = ${Nt(fr)};`),mi?et.write(`
        if (${mr}.issues.length) {
          if (${jr} in input) {
            payload.issues = payload.issues.concat(${mr}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${jr}, ...iss.path] : [${jr}]
            })));
          }
        }
        
        if (${mr}.value === undefined) {
          if (${jr} in input) {
            newResult[${jr}] = undefined;
          }
        } else {
          newResult[${jr}] = ${mr}.value;
        }
        
      `):et.write(`
        if (${mr}.issues.length) {
          payload.issues = payload.issues.concat(${mr}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${jr}, ...iss.path] : [${jr}]
          })));
        }
        
        if (${mr}.value === undefined) {
          if (${jr} in input) {
            newResult[${jr}] = undefined;
          }
        } else {
          newResult[${jr}] = ${mr}.value;
        }
        
      `)}et.write("payload.value = newResult;"),et.write("return payload;");let Rr=et.compile();return(fr,mr)=>Rr(Ne,fr,mr)},be=!J.jitless,De=be&&Y.value,_e=r.catchall;t._zod.parse=(Ne,et)=>{e??(e=g.value);let st=Ne.value;return te(st)?be&&De&&et?.async===!1&&et.jitless!==!0?(n||(n=M(r.shape)),Ne=n(Ne,et),_e?pr([],st,Ne,et,e,t):Ne):l(Ne,et):(Ne.issues.push({expected:"object",code:"invalid_type",input:st,inst:t}),Ne)}});function go(t,r,n,e){for(let g of t)if(g.issues.length===0)return r.value=g.value,r;let l=t.filter(g=>!qe(g));return l.length===1?(r.value=l[0].value,l[0]):(r.issues.push({code:"invalid_union",input:r.value,inst:n,errors:t.map(g=>g.issues.map(M=>ut(M,e,a())))}),r)}let Zn=p("$ZodUnion",(t,r)=>{Zt.init(t,r),ne(t._zod,"optin",()=>r.options.some(l=>l._zod.optin==="optional")?"optional":void 0),ne(t._zod,"optout",()=>r.options.some(l=>l._zod.optout==="optional")?"optional":void 0),ne(t._zod,"values",()=>{if(r.options.every(l=>l._zod.values))return new Set(r.options.flatMap(l=>Array.from(l._zod.values)))}),ne(t._zod,"pattern",()=>{if(r.options.every(l=>l._zod.pattern)){let l=r.options.map(g=>g._zod.pattern);return RegExp(`^(${l.map(g=>G(g.source)).join("|")})$`)}});let n=r.options.length===1,e=r.options[0]._zod.run;t._zod.parse=(l,g)=>{if(n)return e(l,g);let M=!1,be=[];for(let De of r.options){let _e=De._zod.run({value:l.value,issues:[]},g);if(_e instanceof Promise)be.push(_e),M=!0;else{if(_e.issues.length===0)return _e;be.push(_e)}}return M?Promise.all(be).then(De=>go(De,l,t,g)):go(be,l,t,g)}});function vo(t,r,n,e){let l=t.filter(g=>g.issues.length===0);return l.length===1?r.value=l[0].value:l.length===0?r.issues.push({code:"invalid_union",input:r.value,inst:n,errors:t.map(g=>g.issues.map(M=>ut(M,e,a())))}):r.issues.push({code:"invalid_union",input:r.value,inst:n,errors:[],inclusive:!1}),r}let Ls=p("$ZodXor",(t,r)=>{Zn.init(t,r),r.inclusive=!1;let n=r.options.length===1,e=r.options[0]._zod.run;t._zod.parse=(l,g)=>{if(n)return e(l,g);let M=!1,be=[];for(let De of r.options){let _e=De._zod.run({value:l.value,issues:[]},g);_e instanceof Promise?(be.push(_e),M=!0):be.push(_e)}return M?Promise.all(be).then(De=>vo(De,l,t,g)):vo(be,l,t,g)}}),wo=p("$ZodDiscriminatedUnion",(t,r)=>{r.inclusive=!1,Zn.init(t,r);let n=t._zod.parse;ne(t._zod,"propValues",()=>{let l={};for(let g of r.options){let M=g._zod.propValues;if(!M||Object.keys(M).length===0)throw Error(`Invalid discriminated union option at index "${r.options.indexOf(g)}"`);for(let[be,De]of Object.entries(M))for(let _e of(l[be]||(l[be]=new Set),De))l[be].add(_e)}return l});let e=F(()=>{let l=r.options,g=new Map;for(let M of l){let be=M._zod.propValues?.[r.discriminator];if(!be||be.size===0)throw Error(`Invalid discriminated union option at index "${r.options.indexOf(M)}"`);for(let De of be){if(g.has(De))throw Error(`Duplicate discriminator value "${String(De)}"`);g.set(De,M)}}return g});t._zod.parse=(l,g)=>{let M=l.value;if(!te(M))return l.issues.push({code:"invalid_type",expected:"object",input:M,inst:t}),l;let be=e.value.get(M?.[r.discriminator]);return be?be._zod.run(l,g):r.unionFallback?n(l,g):(l.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:r.discriminator,input:M,path:[r.discriminator],inst:t}),l)}}),qs=p("$ZodIntersection",(t,r)=>{Zt.init(t,r),t._zod.parse=(n,e)=>{let l=n.value,g=r.left._zod.run({value:l,issues:[]},e),M=r.right._zod.run({value:l,issues:[]},e);return g instanceof Promise||M instanceof Promise?Promise.all([g,M]).then(([be,De])=>bo(n,be,De)):bo(n,g,M)}});function bo(t,r,n){let e,l=new Map;for(let be of r.issues)if(be.code==="unrecognized_keys")for(let De of(e??(e=be),be.keys))l.has(De)||l.set(De,{}),l.get(De).l=!0;else t.issues.push(be);for(let be of n.issues)if(be.code==="unrecognized_keys")for(let De of be.keys)l.has(De)||l.set(De,{}),l.get(De).r=!0;else t.issues.push(be);let g=[...l].filter(([,be])=>be.l&&be.r).map(([be])=>be);if(g.length&&e&&t.issues.push({...e,keys:g}),qe(t))return t;let M=function be(De,_e){if(De===_e||De instanceof Date&&_e instanceof Date&&+De==+_e)return{valid:!0,data:De};if(D(De)&&D(_e)){let Ne=Object.keys(_e),et=Object.keys(De).filter(Nt=>Ne.indexOf(Nt)!==-1),st={...De,..._e};for(let Nt of et){let Ke=be(De[Nt],_e[Nt]);if(!Ke.valid)return{valid:!1,mergeErrorPath:[Nt,...Ke.mergeErrorPath]};st[Nt]=Ke.data}return{valid:!0,data:st}}if(Array.isArray(De)&&Array.isArray(_e)){if(De.length!==_e.length)return{valid:!1,mergeErrorPath:[]};let Ne=[];for(let et=0;et<De.length;et++){let st=be(De[et],_e[et]);if(!st.valid)return{valid:!1,mergeErrorPath:[et,...st.mergeErrorPath]};Ne.push(st.data)}return{valid:!0,data:Ne}}return{valid:!1,mergeErrorPath:[]}}(r.value,n.value);if(!M.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(M.mergeErrorPath)}`);return t.value=M.data,t}let kn=p("$ZodTuple",(t,r)=>{Zt.init(t,r);let n=r.items;t._zod.parse=(e,l)=>{let g=e.value;if(!Array.isArray(g))return e.issues.push({input:g,inst:t,expected:"tuple",code:"invalid_type"}),e;e.value=[];let M=[],be=[...n].reverse().findIndex(Ne=>Ne._zod.optin!=="optional"),De=be===-1?0:n.length-be;if(!r.rest){let Ne=g.length>n.length,et=g.length<De-1;if(Ne||et)return e.issues.push({...Ne?{code:"too_big",maximum:n.length,inclusive:!0}:{code:"too_small",minimum:n.length},input:g,inst:t,origin:"array"}),e}let _e=-1;for(let Ne of n){if(++_e>=g.length&&_e>=De)continue;let et=Ne._zod.run({value:g[_e],issues:[]},l);et instanceof Promise?M.push(et.then(st=>vs(st,e,_e))):vs(et,e,_e)}if(r.rest)for(let Ne of g.slice(n.length)){_e++;let et=r.rest._zod.run({value:Ne,issues:[]},l);et instanceof Promise?M.push(et.then(st=>vs(st,e,_e))):vs(et,e,_e)}return M.length?Promise.all(M).then(()=>e):e}});function vs(t,r,n){t.issues.length&&r.issues.push(...re(n,t.issues)),r.value[n]=t.value}let _o=p("$ZodRecord",(t,r)=>{Zt.init(t,r),t._zod.parse=(n,e)=>{let l=n.value;if(!D(l))return n.issues.push({expected:"record",code:"invalid_type",input:l,inst:t}),n;let g=[],M=r.keyType._zod.values;if(M){let be;n.value={};let De=new Set;for(let _e of M)if(typeof _e=="string"||typeof _e=="number"||typeof _e=="symbol"){De.add(typeof _e=="number"?_e.toString():_e);let Ne=r.valueType._zod.run({value:l[_e],issues:[]},e);Ne instanceof Promise?g.push(Ne.then(et=>{et.issues.length&&n.issues.push(...re(_e,et.issues)),n.value[_e]=et.value})):(Ne.issues.length&&n.issues.push(...re(_e,Ne.issues)),n.value[_e]=Ne.value)}for(let _e in l)De.has(_e)||(be=be??[]).push(_e);be&&be.length>0&&n.issues.push({code:"unrecognized_keys",input:l,inst:t,keys:be})}else for(let be of(n.value={},Reflect.ownKeys(l))){if(be==="__proto__")continue;let De=r.keyType._zod.run({value:be,issues:[]},e);if(De instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(typeof be=="string"&&vi.test(be)&&De.issues.length){let Ne=r.keyType._zod.run({value:Number(be),issues:[]},e);if(Ne instanceof Promise)throw Error("Async schemas not supported in object keys currently");Ne.issues.length===0&&(De=Ne)}if(De.issues.length){r.mode==="loose"?n.value[be]=l[be]:n.issues.push({code:"invalid_key",origin:"record",issues:De.issues.map(Ne=>ut(Ne,e,a())),input:be,path:[be],inst:t});continue}let _e=r.valueType._zod.run({value:l[be],issues:[]},e);_e instanceof Promise?g.push(_e.then(Ne=>{Ne.issues.length&&n.issues.push(...re(be,Ne.issues)),n.value[De.value]=Ne.value})):(_e.issues.length&&n.issues.push(...re(be,_e.issues)),n.value[De.value]=_e.value)}return g.length?Promise.all(g).then(()=>n):n}}),ws=p("$ZodMap",(t,r)=>{Zt.init(t,r),t._zod.parse=(n,e)=>{let l=n.value;if(!(l instanceof Map))return n.issues.push({expected:"map",code:"invalid_type",input:l,inst:t}),n;let g=[];for(let[M,be]of(n.value=new Map,l)){let De=r.keyType._zod.run({value:M,issues:[]},e),_e=r.valueType._zod.run({value:be,issues:[]},e);De instanceof Promise||_e instanceof Promise?g.push(Promise.all([De,_e]).then(([Ne,et])=>{xo(Ne,et,n,M,l,t,e)})):xo(De,_e,n,M,l,t,e)}return g.length?Promise.all(g).then(()=>n):n}});function xo(t,r,n,e,l,g,M){t.issues.length&&(ce.has(typeof e)?n.issues.push(...re(e,t.issues)):n.issues.push({code:"invalid_key",origin:"map",input:l,inst:g,issues:t.issues.map(be=>ut(be,M,a()))})),r.issues.length&&(ce.has(typeof e)?n.issues.push(...re(e,r.issues)):n.issues.push({origin:"map",code:"invalid_element",input:l,inst:g,key:e,issues:r.issues.map(be=>ut(be,M,a()))})),n.value.set(t.value,r.value)}let Nn=p("$ZodSet",(t,r)=>{Zt.init(t,r),t._zod.parse=(n,e)=>{let l=n.value;if(!(l instanceof Set))return n.issues.push({input:l,inst:t,expected:"set",code:"invalid_type"}),n;let g=[];for(let M of(n.value=new Set,l)){let be=r.valueType._zod.run({value:M,issues:[]},e);be instanceof Promise?g.push(be.then(De=>ko(De,n))):ko(be,n)}return g.length?Promise.all(g).then(()=>n):n}});function ko(t,r){t.issues.length&&r.issues.push(...t.issues),r.value.add(t.value)}let js=p("$ZodEnum",(t,r)=>{Zt.init(t,r);let n=P(r.entries),e=new Set(n);t._zod.values=e,t._zod.pattern=RegExp(`^(${n.filter(l=>ce.has(typeof l)).map(l=>typeof l=="string"?H(l):l.toString()).join("|")})$`),t._zod.parse=(l,g)=>{let M=l.value;return e.has(M)||l.issues.push({code:"invalid_value",values:n,input:M,inst:t}),l}}),No=p("$ZodLiteral",(t,r)=>{if(Zt.init(t,r),r.values.length===0)throw Error("Cannot create literal schema with no valid values");let n=new Set(r.values);t._zod.values=n,t._zod.pattern=RegExp(`^(${r.values.map(e=>typeof e=="string"?H(e):e?H(e.toString()):String(e)).join("|")})$`),t._zod.parse=(e,l)=>{let g=e.value;return n.has(g)||e.issues.push({code:"invalid_value",values:r.values,input:g,inst:t}),e}}),Vn=p("$ZodFile",(t,r)=>{Zt.init(t,r),t._zod.parse=(n,e)=>{let l=n.value;return l instanceof File||n.issues.push({expected:"file",code:"invalid_type",input:l,inst:t}),n}}),So=p("$ZodTransform",(t,r)=>{Zt.init(t,r),t._zod.parse=(n,e)=>{if(e.direction==="backward")throw new q(t.constructor.name);let l=r.transform(n.value,n);if(e.async)return(l instanceof Promise?l:Promise.resolve(l)).then(g=>(n.value=g,n));if(l instanceof Promise)throw new m;return n.value=l,n}});function Ur(t,r){return t.issues.length&&r===void 0?{issues:[],value:void 0}:t}let zs=p("$ZodOptional",(t,r)=>{Zt.init(t,r),t._zod.optin="optional",t._zod.optout="optional",ne(t._zod,"values",()=>r.innerType._zod.values?new Set([...r.innerType._zod.values,void 0]):void 0),ne(t._zod,"pattern",()=>{let n=r.innerType._zod.pattern;return n?RegExp(`^(${G(n.source)})?$`):void 0}),t._zod.parse=(n,e)=>{if(r.innerType._zod.optin==="optional"){let l=r.innerType._zod.run(n,e);return l instanceof Promise?l.then(g=>Ur(g,n.value)):Ur(l,n.value)}return n.value===void 0?n:r.innerType._zod.run(n,e)}}),To=p("$ZodExactOptional",(t,r)=>{zs.init(t,r),ne(t._zod,"values",()=>r.innerType._zod.values),ne(t._zod,"pattern",()=>r.innerType._zod.pattern),t._zod.parse=(n,e)=>r.innerType._zod.run(n,e)}),Io=p("$ZodNullable",(t,r)=>{Zt.init(t,r),ne(t._zod,"optin",()=>r.innerType._zod.optin),ne(t._zod,"optout",()=>r.innerType._zod.optout),ne(t._zod,"pattern",()=>{let n=r.innerType._zod.pattern;return n?RegExp(`^(${G(n.source)}|null)$`):void 0}),ne(t._zod,"values",()=>r.innerType._zod.values?new Set([...r.innerType._zod.values,null]):void 0),t._zod.parse=(n,e)=>n.value===null?n:r.innerType._zod.run(n,e)}),Bs=p("$ZodDefault",(t,r)=>{Zt.init(t,r),t._zod.optin="optional",ne(t._zod,"values",()=>r.innerType._zod.values),t._zod.parse=(n,e)=>{if(e.direction==="backward")return r.innerType._zod.run(n,e);if(n.value===void 0)return n.value=r.defaultValue,n;let l=r.innerType._zod.run(n,e);return l instanceof Promise?l.then(g=>bs(g,r)):bs(l,r)}});function bs(t,r){return t.value===void 0&&(t.value=r.defaultValue),t}let Eo=p("$ZodPrefault",(t,r)=>{Zt.init(t,r),t._zod.optin="optional",ne(t._zod,"values",()=>r.innerType._zod.values),t._zod.parse=(n,e)=>(e.direction==="backward"||n.value===void 0&&(n.value=r.defaultValue),r.innerType._zod.run(n,e))}),Ms=p("$ZodNonOptional",(t,r)=>{Zt.init(t,r),ne(t._zod,"values",()=>{let n=r.innerType._zod.values;return n?new Set([...n].filter(e=>e!==void 0)):void 0}),t._zod.parse=(n,e)=>{let l=r.innerType._zod.run(n,e);return l instanceof Promise?l.then(g=>Ao(g,t)):Ao(l,t)}});function Ao(t,r){return t.issues.length||t.value!==void 0||t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:r}),t}let ei=p("$ZodSuccess",(t,r)=>{Zt.init(t,r),t._zod.parse=(n,e)=>{if(e.direction==="backward")throw new q("ZodSuccess");let l=r.innerType._zod.run(n,e);return l instanceof Promise?l.then(g=>(n.value=g.issues.length===0,n)):(n.value=l.issues.length===0,n)}}),$o=p("$ZodCatch",(t,r)=>{Zt.init(t,r),ne(t._zod,"optin",()=>r.innerType._zod.optin),ne(t._zod,"optout",()=>r.innerType._zod.optout),ne(t._zod,"values",()=>r.innerType._zod.values),t._zod.parse=(n,e)=>{if(e.direction==="backward")return r.innerType._zod.run(n,e);let l=r.innerType._zod.run(n,e);return l instanceof Promise?l.then(g=>(n.value=g.value,g.issues.length&&(n.value=r.catchValue({...n,error:{issues:g.issues.map(M=>ut(M,e,a()))},input:n.value}),n.issues=[]),n)):(n.value=l.value,l.issues.length&&(n.value=r.catchValue({...n,error:{issues:l.issues.map(g=>ut(g,e,a()))},input:n.value}),n.issues=[]),n)}}),Sn=p("$ZodNaN",(t,r)=>{Zt.init(t,r),t._zod.parse=(n,e)=>(typeof n.value=="number"&&Number.isNaN(n.value)||n.issues.push({input:n.value,inst:t,expected:"nan",code:"invalid_type"}),n)}),Oo=p("$ZodPipe",(t,r)=>{Zt.init(t,r),ne(t._zod,"values",()=>r.in._zod.values),ne(t._zod,"optin",()=>r.in._zod.optin),ne(t._zod,"optout",()=>r.out._zod.optout),ne(t._zod,"propValues",()=>r.in._zod.propValues),t._zod.parse=(n,e)=>{if(e.direction==="backward"){let g=r.out._zod.run(n,e);return g instanceof Promise?g.then(M=>nn(M,r.in,e)):nn(g,r.in,e)}let l=r.in._zod.run(n,e);return l instanceof Promise?l.then(g=>nn(g,r.out,e)):nn(l,r.out,e)}});function nn(t,r,n){return t.issues.length?(t.aborted=!0,t):r._zod.run({value:t.value,issues:t.issues},n)}let Ws=p("$ZodCodec",(t,r)=>{Zt.init(t,r),ne(t._zod,"values",()=>r.in._zod.values),ne(t._zod,"optin",()=>r.in._zod.optin),ne(t._zod,"optout",()=>r.out._zod.optout),ne(t._zod,"propValues",()=>r.in._zod.propValues),t._zod.parse=(n,e)=>{if((e.direction||"forward")==="forward"){let l=r.in._zod.run(n,e);return l instanceof Promise?l.then(g=>Wi(g,r,e)):Wi(l,r,e)}{let l=r.out._zod.run(n,e);return l instanceof Promise?l.then(g=>Wi(g,r,e)):Wi(l,r,e)}}});function Wi(t,r,n){if(t.issues.length)return t.aborted=!0,t;if((n.direction||"forward")==="forward"){let e=r.transform(t.value,t);return e instanceof Promise?e.then(l=>_s(t,l,r.out,n)):_s(t,e,r.out,n)}{let e=r.reverseTransform(t.value,t);return e instanceof Promise?e.then(l=>_s(t,l,r.in,n)):_s(t,e,r.in,n)}}function _s(t,r,n,e){return t.issues.length?(t.aborted=!0,t):n._zod.run({value:r,issues:t.issues},e)}let sn=p("$ZodReadonly",(t,r)=>{Zt.init(t,r),ne(t._zod,"propValues",()=>r.innerType._zod.propValues),ne(t._zod,"values",()=>r.innerType._zod.values),ne(t._zod,"optin",()=>r.innerType?._zod?.optin),ne(t._zod,"optout",()=>r.innerType?._zod?.optout),t._zod.parse=(n,e)=>{if(e.direction==="backward")return r.innerType._zod.run(n,e);let l=r.innerType._zod.run(n,e);return l instanceof Promise?l.then(Co):Co(l)}});function Co(t){return t.value=Object.freeze(t.value),t}let qi=p("$ZodTemplateLiteral",(t,r)=>{Zt.init(t,r);let n=[];for(let e of r.parts)if(typeof e=="object"&&e!==null){if(!e._zod.pattern)throw Error(`Invalid template literal part, no pattern found: ${[...e._zod.traits].shift()}`);let l=e._zod.pattern instanceof RegExp?e._zod.pattern.source:e._zod.pattern;if(!l)throw Error(`Invalid template literal part: ${e._zod.traits}`);let g=+!!l.startsWith("^"),M=l.endsWith("$")?l.length-1:l.length;n.push(l.slice(g,M))}else if(e===null||me.has(typeof e))n.push(H(`${e}`));else throw Error(`Invalid template literal part: ${e}`);t._zod.pattern=RegExp(`^${n.join("")}$`),t._zod.parse=(e,l)=>(typeof e.value!="string"?e.issues.push({input:e.value,inst:t,expected:"string",code:"invalid_type"}):(t._zod.pattern.lastIndex=0,t._zod.pattern.test(e.value)||e.issues.push({input:e.value,inst:t,code:"invalid_format",format:r.format??"template_literal",pattern:t._zod.pattern.source})),e)}),Po=p("$ZodFunction",(t,r)=>(Zt.init(t,r),t._def=r,t._zod.def=r,t.implement=n=>{if(typeof n!="function")throw Error("implement() must be called with a function");return function(...e){let l=Reflect.apply(n,this,t._def.input?f(t._def.input,e):e);return t._def.output?f(t._def.output,l):l}},t.implementAsync=n=>{if(typeof n!="function")throw Error("implementAsync() must be called with a function");return async function(...e){let l=t._def.input?await Ie(t._def.input,e):e,g=await Reflect.apply(n,this,l);return t._def.output?await Ie(t._def.output,g):g}},t._zod.parse=(n,e)=>(typeof n.value!="function"?n.issues.push({code:"invalid_type",expected:"function",input:n.value,inst:t}):t._def.output&&t._def.output._zod.def.type==="promise"?n.value=t.implementAsync(n.value):n.value=t.implement(n.value),n),t.input=(...n)=>{let e=t.constructor;return new e(Array.isArray(n[0])?{type:"function",input:new kn({type:"tuple",items:n[0],rest:n[1]}),output:t._def.output}:{type:"function",input:n[0],output:t._def.output})},t.output=n=>new t.constructor({type:"function",input:t._def.input,output:n}),t)),on=p("$ZodPromise",(t,r)=>{Zt.init(t,r),t._zod.parse=(n,e)=>Promise.resolve(n.value).then(l=>r.innerType._zod.run({value:l,issues:[]},e))}),Ro=p("$ZodLazy",(t,r)=>{Zt.init(t,r),ne(t._zod,"innerType",()=>r.getter()),ne(t._zod,"pattern",()=>t._zod.innerType?._zod?.pattern),ne(t._zod,"propValues",()=>t._zod.innerType?._zod?.propValues),ne(t._zod,"optin",()=>t._zod.innerType?._zod?.optin??void 0),ne(t._zod,"optout",()=>t._zod.innerType?._zod?.optout??void 0),t._zod.parse=(n,e)=>t._zod.innerType._zod.run(n,e)}),Tn=p("$ZodCustom",(t,r)=>{hr.init(t,r),Zt.init(t,r),t._zod.parse=(n,e)=>n,t._zod.check=n=>{let e=n.value,l=r.fn(e);if(l instanceof Promise)return l.then(g=>Uo(g,n,e,t));Uo(l,n,e,t)}});function Uo(t,r,n,e){if(!t){let l={code:"custom",input:n,inst:e,path:[...e._zod.def.path??[]],continue:!e._zod.def.abort};e._zod.def.params&&(l.params=e._zod.def.params),r.issues.push(Ot(l))}}let Gn=()=>{let t={string:{unit:"\u062D\u0631\u0641",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},file:{unit:"\u0628\u0627\u064A\u062A",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},array:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},set:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"}},r={regex:"\u0645\u062F\u062E\u0644",email:"\u0628\u0631\u064A\u062F \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",url:"\u0631\u0627\u0628\u0637",emoji:"\u0625\u064A\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u064A\u062E \u0648\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",date:"\u062A\u0627\u0631\u064A\u062E \u0628\u0645\u0639\u064A\u0627\u0631 ISO",time:"\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",duration:"\u0645\u062F\u0629 \u0628\u0645\u0639\u064A\u0627\u0631 ISO",ipv4:"\u0639\u0646\u0648\u0627\u0646 IPv4",ipv6:"\u0639\u0646\u0648\u0627\u0646 IPv6",cidrv4:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv4",cidrv6:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv6",base64:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64-encoded",base64url:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64url-encoded",json_string:"\u0646\u064E\u0635 \u0639\u0644\u0649 \u0647\u064A\u0626\u0629 JSON",e164:"\u0631\u0642\u0645 \u0647\u0627\u062A\u0641 \u0628\u0645\u0639\u064A\u0627\u0631 E.164",jwt:"JWT",template_literal:"\u0645\u062F\u062E\u0644"},n={nan:"NaN"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 instanceof ${e.expected}\u060C \u0648\u0644\u0643\u0646 \u062A\u0645 \u0625\u062F\u062E\u0627\u0644 ${M}`:`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${l}\u060C \u0648\u0644\u0643\u0646 \u062A\u0645 \u0625\u062F\u062E\u0627\u0644 ${M}`}case"invalid_value":return e.values.length===1?`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${ge(e.values[0])}`:`\u0627\u062E\u062A\u064A\u0627\u0631 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062A\u0648\u0642\u0639 \u0627\u0646\u062A\u0642\u0627\u0621 \u0623\u062D\u062F \u0647\u0630\u0647 \u0627\u0644\u062E\u064A\u0627\u0631\u0627\u062A: ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?` \u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${e.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${l} ${e.maximum.toString()} ${g.unit??"\u0639\u0646\u0635\u0631"}`:`\u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${e.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${l} ${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${e.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${l} ${e.minimum.toString()} ${g.unit}`:`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${e.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${l} ${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0628\u062F\u0623 \u0628\u0640 "${e.prefix}"`:e.format==="ends_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0646\u062A\u0647\u064A \u0628\u0640 "${e.suffix}"`:e.format==="includes"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u062A\u0636\u0645\u0651\u064E\u0646 "${e.includes}"`:e.format==="regex"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0637\u0627\u0628\u0642 \u0627\u0644\u0646\u0645\u0637 ${e.pattern}`:`${r[e.format]??e.format} \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644`;case"not_multiple_of":return`\u0631\u0642\u0645 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0645\u0646 \u0645\u0636\u0627\u0639\u0641\u0627\u062A ${e.divisor}`;case"unrecognized_keys":return`\u0645\u0639\u0631\u0641${e.keys.length>1?"\u0627\u062A":""} \u063A\u0631\u064A\u0628${e.keys.length>1?"\u0629":""}: ${b(e.keys,"\u060C ")}`;case"invalid_key":return`\u0645\u0639\u0631\u0641 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${e.origin}`;case"invalid_union":default:return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644";case"invalid_element":return`\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${e.origin}`}}};function Ua(){return{localeError:Gn()}}let _i=()=>{let t={string:{unit:"simvol",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"element",verb:"olmal\u0131d\u0131r"},set:{unit:"element",verb:"olmal\u0131d\u0131r"}},r={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},n={nan:"NaN"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n instanceof ${e.expected}, daxil olan ${M}`:`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${l}, daxil olan ${M}`}case"invalid_value":return e.values.length===1?`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${ge(e.values[0])}`:`Yanl\u0131\u015F se\xE7im: a\u015Fa\u011F\u0131dak\u0131lardan biri olmal\u0131d\u0131r: ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${e.origin??"d\u0259y\u0259r"} ${l}${e.maximum.toString()} ${g.unit??"element"}`:`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${e.origin??"d\u0259y\u0259r"} ${l}${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${e.origin} ${l}${e.minimum.toString()} ${g.unit}`:`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${e.origin} ${l}${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`Yanl\u0131\u015F m\u0259tn: "${e.prefix}" il\u0259 ba\u015Flamal\u0131d\u0131r`:e.format==="ends_with"?`Yanl\u0131\u015F m\u0259tn: "${e.suffix}" il\u0259 bitm\u0259lidir`:e.format==="includes"?`Yanl\u0131\u015F m\u0259tn: "${e.includes}" daxil olmal\u0131d\u0131r`:e.format==="regex"?`Yanl\u0131\u015F m\u0259tn: ${e.pattern} \u015Fablonuna uy\u011Fun olmal\u0131d\u0131r`:`Yanl\u0131\u015F ${r[e.format]??e.format}`;case"not_multiple_of":return`Yanl\u0131\u015F \u0259d\u0259d: ${e.divisor} il\u0259 b\xF6l\xFCn\u0259 bil\u0259n olmal\u0131d\u0131r`;case"unrecognized_keys":return`Tan\u0131nmayan a\xE7ar${e.keys.length>1?"lar":""}: ${b(e.keys,", ")}`;case"invalid_key":return`${e.origin} daxilind\u0259 yanl\u0131\u015F a\xE7ar`;case"invalid_union":return"Yanl\u0131\u015F d\u0259y\u0259r";case"invalid_element":return`${e.origin} daxilind\u0259 yanl\u0131\u015F d\u0259y\u0259r`;default:return"Yanl\u0131\u015F d\u0259y\u0259r"}}};function Da(){return{localeError:_i()}}function Kn(t,r,n,e){let l=Math.abs(t),g=l%10,M=l%100;return M>=11&&M<=19?e:g===1?r:g>=2&&g<=4?n:e}let La=()=>{let t={string:{unit:{one:"\u0441\u0456\u043C\u0432\u0430\u043B",few:"\u0441\u0456\u043C\u0432\u0430\u043B\u044B",many:"\u0441\u0456\u043C\u0432\u0430\u043B\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u044B",many:"\u0431\u0430\u0439\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"}},r={regex:"\u0443\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0430\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0456 \u0447\u0430\u0441",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0447\u0430\u0441",duration:"ISO \u043F\u0440\u0430\u0446\u044F\u0433\u043B\u0430\u0441\u0446\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0430\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0430\u0441",cidrv4:"IPv4 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",base64:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64",base64url:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64url",json_string:"JSON \u0440\u0430\u0434\u043E\u043A",e164:"\u043D\u0443\u043C\u0430\u0440 E.164",jwt:"JWT",template_literal:"\u0443\u0432\u043E\u0434"},n={nan:"NaN",number:"\u043B\u0456\u043A",array:"\u043C\u0430\u0441\u0456\u045E"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u045E\u0441\u044F instanceof ${e.expected}, \u0430\u0442\u0440\u044B\u043C\u0430\u043D\u0430 ${M}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u045E\u0441\u044F ${l}, \u0430\u0442\u0440\u044B\u043C\u0430\u043D\u0430 ${M}`}case"invalid_value":return e.values.length===1?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F ${ge(e.values[0])}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0432\u0430\u0440\u044B\u044F\u043D\u0442: \u0447\u0430\u043A\u0430\u045E\u0441\u044F \u0430\u0434\u0437\u0456\u043D \u0437 ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;if(g){let M=Kn(Number(e.maximum),g.unit.one,g.unit.few,g.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${e.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${g.verb} ${l}${e.maximum.toString()} ${M}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${e.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${l}${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;if(g){let M=Kn(Number(e.minimum),g.unit.one,g.unit.few,g.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${e.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${g.verb} ${l}${e.minimum.toString()} ${M}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${e.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${l}${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u043F\u0430\u0447\u044B\u043D\u0430\u0446\u0446\u0430 \u0437 "${e.prefix}"`:e.format==="ends_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u0430\u043A\u0430\u043D\u0447\u0432\u0430\u0446\u0446\u0430 \u043D\u0430 "${e.suffix}"`:e.format==="includes"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u043C\u044F\u0448\u0447\u0430\u0446\u044C "${e.includes}"`:e.format==="regex"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0430\u0434\u043F\u0430\u0432\u044F\u0434\u0430\u0446\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${e.pattern}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B ${r[e.format]??e.format}`;case"not_multiple_of":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043B\u0456\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0431\u044B\u0446\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${e.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u0430\u0437\u043D\u0430\u043D\u044B ${e.keys.length>1?"\u043A\u043B\u044E\u0447\u044B":"\u043A\u043B\u044E\u0447"}: ${b(e.keys,", ")}`;case"invalid_key":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043A\u043B\u044E\u0447 \u0443 ${e.origin}`;case"invalid_union":return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434";case"invalid_element":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u0430\u0435 \u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435 \u045E ${e.origin}`;default:return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434"}}};function xi(){return{localeError:La()}}let qa=()=>{let t={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},file:{unit:"\u0431\u0430\u0439\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"}},r={regex:"\u0432\u0445\u043E\u0434",email:"\u0438\u043C\u0435\u0439\u043B \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0436\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u043F\u0440\u043E\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u043E\u0441\u0442",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"base64-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",base64url:"base64url-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",json_string:"JSON \u043D\u0438\u0437",e164:"E.164 \u043D\u043E\u043C\u0435\u0440",jwt:"JWT",template_literal:"\u0432\u0445\u043E\u0434"},n={nan:"NaN",number:"\u0447\u0438\u0441\u043B\u043E",array:"\u043C\u0430\u0441\u0438\u0432"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D instanceof ${e.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D ${M}`:`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${l}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D ${M}`}case"invalid_value":return e.values.length===1?`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${ge(e.values[0])}`:`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u043E\u043F\u0446\u0438\u044F: \u043E\u0447\u0430\u043A\u0432\u0430\u043D\u043E \u0435\u0434\u043D\u043E \u043E\u0442 ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${e.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${l}${e.maximum.toString()} ${g.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430"}`:`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${e.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0431\u044A\u0434\u0435 ${l}${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${e.origin} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${l}${e.minimum.toString()} ${g.unit}`:`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${e.origin} \u0434\u0430 \u0431\u044A\u0434\u0435 ${l}${e.minimum.toString()}`}case"invalid_format":{if(e.format==="starts_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u0432\u0430 \u0441 "${e.prefix}"`;if(e.format==="ends_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u0432\u044A\u0440\u0448\u0432\u0430 \u0441 "${e.suffix}"`;if(e.format==="includes")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0432\u043A\u043B\u044E\u0447\u0432\u0430 "${e.includes}"`;if(e.format==="regex")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0441\u044A\u0432\u043F\u0430\u0434\u0430 \u0441 ${e.pattern}`;let l="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D";return e.format==="emoji"&&(l="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),e.format==="datetime"&&(l="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),e.format==="date"&&(l="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430"),e.format==="time"&&(l="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),e.format==="duration"&&(l="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430"),`${l} ${r[e.format]??e.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E \u0447\u0438\u0441\u043B\u043E: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0431\u044A\u0434\u0435 \u043A\u0440\u0430\u0442\u043D\u043E \u043D\u0430 ${e.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0437\u043F\u043E\u0437\u043D\u0430\u0442${e.keys.length>1?"\u0438":""} \u043A\u043B\u044E\u0447${e.keys.length>1?"\u043E\u0432\u0435":""}: ${b(e.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043A\u043B\u044E\u0447 \u0432 ${e.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434";case"invalid_element":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442 \u0432 ${e.origin}`;default:return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434"}}};function Jn(){return{localeError:qa()}}let ja=()=>{let t={string:{unit:"car\xE0cters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}},r={regex:"entrada",email:"adre\xE7a electr\xF2nica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adre\xE7a IPv4",ipv6:"adre\xE7a IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"},n={nan:"NaN"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`Tipus inv\xE0lid: s'esperava instanceof ${e.expected}, s'ha rebut ${M}`:`Tipus inv\xE0lid: s'esperava ${l}, s'ha rebut ${M}`}case"invalid_value":return e.values.length===1?`Valor inv\xE0lid: s'esperava ${ge(e.values[0])}`:`Opci\xF3 inv\xE0lida: s'esperava una de ${b(e.values," o ")}`;case"too_big":{let l=e.inclusive?"com a m\xE0xim":"menys de",g=t[e.origin]??null;return g?`Massa gran: s'esperava que ${e.origin??"el valor"} contingu\xE9s ${l} ${e.maximum.toString()} ${g.unit??"elements"}`:`Massa gran: s'esperava que ${e.origin??"el valor"} fos ${l} ${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?"com a m\xEDnim":"m\xE9s de",g=t[e.origin]??null;return g?`Massa petit: s'esperava que ${e.origin} contingu\xE9s ${l} ${e.minimum.toString()} ${g.unit}`:`Massa petit: s'esperava que ${e.origin} fos ${l} ${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`Format inv\xE0lid: ha de comen\xE7ar amb "${e.prefix}"`:e.format==="ends_with"?`Format inv\xE0lid: ha d'acabar amb "${e.suffix}"`:e.format==="includes"?`Format inv\xE0lid: ha d'incloure "${e.includes}"`:e.format==="regex"?`Format inv\xE0lid: ha de coincidir amb el patr\xF3 ${e.pattern}`:`Format inv\xE0lid per a ${r[e.format]??e.format}`;case"not_multiple_of":return`N\xFAmero inv\xE0lid: ha de ser m\xFAltiple de ${e.divisor}`;case"unrecognized_keys":return`Clau${e.keys.length>1?"s":""} no reconeguda${e.keys.length>1?"s":""}: ${b(e.keys,", ")}`;case"invalid_key":return`Clau inv\xE0lida a ${e.origin}`;case"invalid_union":return"Entrada inv\xE0lida";case"invalid_element":return`Element inv\xE0lid a ${e.origin}`;default:return"Entrada inv\xE0lida"}}};function Fs(){return{localeError:ja()}}let za=()=>{let t={string:{unit:"znak\u016F",verb:"m\xEDt"},file:{unit:"bajt\u016F",verb:"m\xEDt"},array:{unit:"prvk\u016F",verb:"m\xEDt"},set:{unit:"prvk\u016F",verb:"m\xEDt"}},r={regex:"regul\xE1rn\xED v\xFDraz",email:"e-mailov\xE1 adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a \u010Das ve form\xE1tu ISO",date:"datum ve form\xE1tu ISO",time:"\u010Das ve form\xE1tu ISO",duration:"doba trv\xE1n\xED ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64",base64url:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64url",json_string:"\u0159et\u011Bzec ve form\xE1tu JSON",e164:"\u010D\xEDslo E.164",jwt:"JWT",template_literal:"vstup"},n={nan:"NaN",number:"\u010D\xEDslo",string:"\u0159et\u011Bzec",function:"funkce",array:"pole"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no instanceof ${e.expected}, obdr\u017Eeno ${M}`:`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${l}, obdr\u017Eeno ${M}`}case"invalid_value":return e.values.length===1?`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${ge(e.values[0])}`:`Neplatn\xE1 mo\u017Enost: o\u010Dek\xE1v\xE1na jedna z hodnot ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${e.origin??"hodnota"} mus\xED m\xEDt ${l}${e.maximum.toString()} ${g.unit??"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${e.origin??"hodnota"} mus\xED b\xFDt ${l}${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${e.origin??"hodnota"} mus\xED m\xEDt ${l}${e.minimum.toString()} ${g.unit??"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${e.origin??"hodnota"} mus\xED b\xFDt ${l}${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED za\u010D\xEDnat na "${e.prefix}"`:e.format==="ends_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED kon\u010Dit na "${e.suffix}"`:e.format==="includes"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED obsahovat "${e.includes}"`:e.format==="regex"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED odpov\xEDdat vzoru ${e.pattern}`:`Neplatn\xFD form\xE1t ${r[e.format]??e.format}`;case"not_multiple_of":return`Neplatn\xE9 \u010D\xEDslo: mus\xED b\xFDt n\xE1sobkem ${e.divisor}`;case"unrecognized_keys":return`Nezn\xE1m\xE9 kl\xED\u010De: ${b(e.keys,", ")}`;case"invalid_key":return`Neplatn\xFD kl\xED\u010D v ${e.origin}`;case"invalid_union":return"Neplatn\xFD vstup";case"invalid_element":return`Neplatn\xE1 hodnota v ${e.origin}`;default:return"Neplatn\xFD vstup"}}};function Ba(){return{localeError:za()}}let Ma=()=>{let t={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}},r={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkesl\xE6t",date:"ISO-dato",time:"ISO-klokkesl\xE6t",duration:"ISO-varighed",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"},n={nan:"NaN",string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"s\xE6t",file:"fil"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`Ugyldigt input: forventede instanceof ${e.expected}, fik ${M}`:`Ugyldigt input: forventede ${l}, fik ${M}`}case"invalid_value":return e.values.length===1?`Ugyldig v\xE6rdi: forventede ${ge(e.values[0])}`:`Ugyldigt valg: forventede en af f\xF8lgende ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null,M=n[e.origin]??e.origin;return g?`For stor: forventede ${M??"value"} ${g.verb} ${l} ${e.maximum.toString()} ${g.unit??"elementer"}`:`For stor: forventede ${M??"value"} havde ${l} ${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null,M=n[e.origin]??e.origin;return g?`For lille: forventede ${M} ${g.verb} ${l} ${e.minimum.toString()} ${g.unit}`:`For lille: forventede ${M} havde ${l} ${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`Ugyldig streng: skal starte med "${e.prefix}"`:e.format==="ends_with"?`Ugyldig streng: skal ende med "${e.suffix}"`:e.format==="includes"?`Ugyldig streng: skal indeholde "${e.includes}"`:e.format==="regex"?`Ugyldig streng: skal matche m\xF8nsteret ${e.pattern}`:`Ugyldig ${r[e.format]??e.format}`;case"not_multiple_of":return`Ugyldigt tal: skal v\xE6re deleligt med ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"Ukendte n\xF8gler":"Ukendt n\xF8gle"}: ${b(e.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8gle i ${e.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig v\xE6rdi i ${e.origin}`;default:return"Ugyldigt input"}}};function an(){return{localeError:Ma()}}let Wa=()=>{let t={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}},r={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"},n={nan:"NaN",number:"Zahl",array:"Array"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`Ung\xFCltige Eingabe: erwartet instanceof ${e.expected}, erhalten ${M}`:`Ung\xFCltige Eingabe: erwartet ${l}, erhalten ${M}`}case"invalid_value":return e.values.length===1?`Ung\xFCltige Eingabe: erwartet ${ge(e.values[0])}`:`Ung\xFCltige Option: erwartet eine von ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`Zu gro\xDF: erwartet, dass ${e.origin??"Wert"} ${l}${e.maximum.toString()} ${g.unit??"Elemente"} hat`:`Zu gro\xDF: erwartet, dass ${e.origin??"Wert"} ${l}${e.maximum.toString()} ist`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`Zu klein: erwartet, dass ${e.origin} ${l}${e.minimum.toString()} ${g.unit} hat`:`Zu klein: erwartet, dass ${e.origin} ${l}${e.minimum.toString()} ist`}case"invalid_format":return e.format==="starts_with"?`Ung\xFCltiger String: muss mit "${e.prefix}" beginnen`:e.format==="ends_with"?`Ung\xFCltiger String: muss mit "${e.suffix}" enden`:e.format==="includes"?`Ung\xFCltiger String: muss "${e.includes}" enthalten`:e.format==="regex"?`Ung\xFCltiger String: muss dem Muster ${e.pattern} entsprechen`:`Ung\xFCltig: ${r[e.format]??e.format}`;case"not_multiple_of":return`Ung\xFCltige Zahl: muss ein Vielfaches von ${e.divisor} sein`;case"unrecognized_keys":return`${e.keys.length>1?"Unbekannte Schl\xFCssel":"Unbekannter Schl\xFCssel"}: ${b(e.keys,", ")}`;case"invalid_key":return`Ung\xFCltiger Schl\xFCssel in ${e.origin}`;case"invalid_union":return"Ung\xFCltige Eingabe";case"invalid_element":return`Ung\xFCltiger Wert in ${e.origin}`;default:return"Ung\xFCltige Eingabe"}}};function xs(){return{localeError:Wa()}}let Fa=()=>{let t={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"},map:{unit:"entries",verb:"to have"}},r={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},n={nan:"NaN"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return`Invalid input: expected ${l}, received ${M}`}case"invalid_value":return e.values.length===1?`Invalid input: expected ${ge(e.values[0])}`:`Invalid option: expected one of ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`Too big: expected ${e.origin??"value"} to have ${l}${e.maximum.toString()} ${g.unit??"elements"}`:`Too big: expected ${e.origin??"value"} to be ${l}${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`Too small: expected ${e.origin} to have ${l}${e.minimum.toString()} ${g.unit}`:`Too small: expected ${e.origin} to be ${l}${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`Invalid string: must start with "${e.prefix}"`:e.format==="ends_with"?`Invalid string: must end with "${e.suffix}"`:e.format==="includes"?`Invalid string: must include "${e.includes}"`:e.format==="regex"?`Invalid string: must match pattern ${e.pattern}`:`Invalid ${r[e.format]??e.format}`;case"not_multiple_of":return`Invalid number: must be a multiple of ${e.divisor}`;case"unrecognized_keys":return`Unrecognized key${e.keys.length>1?"s":""}: ${b(e.keys,", ")}`;case"invalid_key":return`Invalid key in ${e.origin}`;case"invalid_union":default:return"Invalid input";case"invalid_element":return`Invalid value in ${e.origin}`}}};function In(){return{localeError:Fa()}}let Za=()=>{let t={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}},r={regex:"enigo",email:"retadreso",url:"URL",emoji:"emo\u011Dio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-da\u016Dro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"},n={nan:"NaN",number:"nombro",array:"tabelo",null:"senvalora"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`Nevalida enigo: atendi\u011Dis instanceof ${e.expected}, ricevi\u011Dis ${M}`:`Nevalida enigo: atendi\u011Dis ${l}, ricevi\u011Dis ${M}`}case"invalid_value":return e.values.length===1?`Nevalida enigo: atendi\u011Dis ${ge(e.values[0])}`:`Nevalida opcio: atendi\u011Dis unu el ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`Tro granda: atendi\u011Dis ke ${e.origin??"valoro"} havu ${l}${e.maximum.toString()} ${g.unit??"elementojn"}`:`Tro granda: atendi\u011Dis ke ${e.origin??"valoro"} havu ${l}${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`Tro malgranda: atendi\u011Dis ke ${e.origin} havu ${l}${e.minimum.toString()} ${g.unit}`:`Tro malgranda: atendi\u011Dis ke ${e.origin} estu ${l}${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`Nevalida karaktraro: devas komenci\u011Di per "${e.prefix}"`:e.format==="ends_with"?`Nevalida karaktraro: devas fini\u011Di per "${e.suffix}"`:e.format==="includes"?`Nevalida karaktraro: devas inkluzivi "${e.includes}"`:e.format==="regex"?`Nevalida karaktraro: devas kongrui kun la modelo ${e.pattern}`:`Nevalida ${r[e.format]??e.format}`;case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${e.divisor}`;case"unrecognized_keys":return`Nekonata${e.keys.length>1?"j":""} \u015Dlosilo${e.keys.length>1?"j":""}: ${b(e.keys,", ")}`;case"invalid_key":return`Nevalida \u015Dlosilo en ${e.origin}`;case"invalid_union":default:return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${e.origin}`}}};function Hn(){return{localeError:Za()}}let Va=()=>{let t={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}},r={regex:"entrada",email:"direcci\xF3n de correo electr\xF3nico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duraci\xF3n ISO",ipv4:"direcci\xF3n IPv4",ipv6:"direcci\xF3n IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"},n={nan:"NaN",string:"texto",number:"n\xFAmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"n\xFAmero grande",symbol:"s\xEDmbolo",undefined:"indefinido",null:"nulo",function:"funci\xF3n",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeraci\xF3n",union:"uni\xF3n",literal:"literal",promise:"promesa",void:"vac\xEDo",never:"nunca",unknown:"desconocido",any:"cualquiera"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`Entrada inv\xE1lida: se esperaba instanceof ${e.expected}, recibido ${M}`:`Entrada inv\xE1lida: se esperaba ${l}, recibido ${M}`}case"invalid_value":return e.values.length===1?`Entrada inv\xE1lida: se esperaba ${ge(e.values[0])}`:`Opci\xF3n inv\xE1lida: se esperaba una de ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null,M=n[e.origin]??e.origin;return g?`Demasiado grande: se esperaba que ${M??"valor"} tuviera ${l}${e.maximum.toString()} ${g.unit??"elementos"}`:`Demasiado grande: se esperaba que ${M??"valor"} fuera ${l}${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null,M=n[e.origin]??e.origin;return g?`Demasiado peque\xF1o: se esperaba que ${M} tuviera ${l}${e.minimum.toString()} ${g.unit}`:`Demasiado peque\xF1o: se esperaba que ${M} fuera ${l}${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`Cadena inv\xE1lida: debe comenzar con "${e.prefix}"`:e.format==="ends_with"?`Cadena inv\xE1lida: debe terminar en "${e.suffix}"`:e.format==="includes"?`Cadena inv\xE1lida: debe incluir "${e.includes}"`:e.format==="regex"?`Cadena inv\xE1lida: debe coincidir con el patr\xF3n ${e.pattern}`:`Inv\xE1lido ${r[e.format]??e.format}`;case"not_multiple_of":return`N\xFAmero inv\xE1lido: debe ser m\xFAltiplo de ${e.divisor}`;case"unrecognized_keys":return`Llave${e.keys.length>1?"s":""} desconocida${e.keys.length>1?"s":""}: ${b(e.keys,", ")}`;case"invalid_key":return`Llave inv\xE1lida en ${n[e.origin]??e.origin}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido en ${n[e.origin]??e.origin}`;default:return"Entrada inv\xE1lida"}}};function En(){return{localeError:Va()}}let Ga=()=>{let t={string:{unit:"\u06A9\u0627\u0631\u0627\u06A9\u062A\u0631",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},file:{unit:"\u0628\u0627\u06CC\u062A",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},array:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},set:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"}},r={regex:"\u0648\u0631\u0648\u062F\u06CC",email:"\u0622\u062F\u0631\u0633 \u0627\u06CC\u0645\u06CC\u0644",url:"URL",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u06CC\u062E \u0648 \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",date:"\u062A\u0627\u0631\u06CC\u062E \u0627\u06CC\u0632\u0648",time:"\u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",duration:"\u0645\u062F\u062A \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",ipv4:"IPv4 \u0622\u062F\u0631\u0633",ipv6:"IPv6 \u0622\u062F\u0631\u0633",cidrv4:"IPv4 \u062F\u0627\u0645\u0646\u0647",cidrv6:"IPv6 \u062F\u0627\u0645\u0646\u0647",base64:"base64-encoded \u0631\u0634\u062A\u0647",base64url:"base64url-encoded \u0631\u0634\u062A\u0647",json_string:"JSON \u0631\u0634\u062A\u0647",e164:"E.164 \u0639\u062F\u062F",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u06CC"},n={nan:"NaN",number:"\u0639\u062F\u062F",array:"\u0622\u0631\u0627\u06CC\u0647"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A instanceof ${e.expected} \u0645\u06CC\u200C\u0628\u0648\u062F\u060C ${M} \u062F\u0631\u06CC\u0627\u0641\u062A \u0634\u062F`:`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${l} \u0645\u06CC\u200C\u0628\u0648\u062F\u060C ${M} \u062F\u0631\u06CC\u0627\u0641\u062A \u0634\u062F`}case"invalid_value":return e.values.length===1?`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${ge(e.values[0])} \u0645\u06CC\u200C\u0628\u0648\u062F`:`\u06AF\u0632\u06CC\u0646\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A \u06CC\u06A9\u06CC \u0627\u0632 ${b(e.values,"|")} \u0645\u06CC\u200C\u0628\u0648\u062F`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${e.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${l}${e.maximum.toString()} ${g.unit??"\u0639\u0646\u0635\u0631"} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${e.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${l}${e.maximum.toString()} \u0628\u0627\u0634\u062F`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${e.origin} \u0628\u0627\u06CC\u062F ${l}${e.minimum.toString()} ${g.unit} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${e.origin} \u0628\u0627\u06CC\u062F ${l}${e.minimum.toString()} \u0628\u0627\u0634\u062F`}case"invalid_format":return e.format==="starts_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${e.prefix}" \u0634\u0631\u0648\u0639 \u0634\u0648\u062F`:e.format==="ends_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${e.suffix}" \u062A\u0645\u0627\u0645 \u0634\u0648\u062F`:e.format==="includes"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0634\u0627\u0645\u0644 "${e.includes}" \u0628\u0627\u0634\u062F`:e.format==="regex"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 \u0627\u0644\u06AF\u0648\u06CC ${e.pattern} \u0645\u0637\u0627\u0628\u0642\u062A \u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F`:`${r[e.format]??e.format} \u0646\u0627\u0645\u0639\u062A\u0628\u0631`;case"not_multiple_of":return`\u0639\u062F\u062F \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0645\u0636\u0631\u0628 ${e.divisor} \u0628\u0627\u0634\u062F`;case"unrecognized_keys":return`\u06A9\u0644\u06CC\u062F${e.keys.length>1?"\u0647\u0627\u06CC":""} \u0646\u0627\u0634\u0646\u0627\u0633: ${b(e.keys,", ")}`;case"invalid_key":return`\u06A9\u0644\u06CC\u062F \u0646\u0627\u0634\u0646\u0627\u0633 \u062F\u0631 ${e.origin}`;case"invalid_union":default:return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631";case"invalid_element":return`\u0645\u0642\u062F\u0627\u0631 \u0646\u0627\u0645\u0639\u062A\u0628\u0631 \u062F\u0631 ${e.origin}`}}};function ji(){return{localeError:Ga()}}let Ka=()=>{let t={string:{unit:"merkki\xE4",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"p\xE4iv\xE4m\xE4\xE4r\xE4n"}},r={regex:"s\xE4\xE4nn\xF6llinen lauseke",email:"s\xE4hk\xF6postiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-p\xE4iv\xE4m\xE4\xE4r\xE4",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"},n={nan:"NaN"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`Virheellinen tyyppi: odotettiin instanceof ${e.expected}, oli ${M}`:`Virheellinen tyyppi: odotettiin ${l}, oli ${M}`}case"invalid_value":return e.values.length===1?`Virheellinen sy\xF6te: t\xE4ytyy olla ${ge(e.values[0])}`:`Virheellinen valinta: t\xE4ytyy olla yksi seuraavista: ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`Liian suuri: ${g.subject} t\xE4ytyy olla ${l}${e.maximum.toString()} ${g.unit}`.trim():`Liian suuri: arvon t\xE4ytyy olla ${l}${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`Liian pieni: ${g.subject} t\xE4ytyy olla ${l}${e.minimum.toString()} ${g.unit}`.trim():`Liian pieni: arvon t\xE4ytyy olla ${l}${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`Virheellinen sy\xF6te: t\xE4ytyy alkaa "${e.prefix}"`:e.format==="ends_with"?`Virheellinen sy\xF6te: t\xE4ytyy loppua "${e.suffix}"`:e.format==="includes"?`Virheellinen sy\xF6te: t\xE4ytyy sis\xE4lt\xE4\xE4 "${e.includes}"`:e.format==="regex"?`Virheellinen sy\xF6te: t\xE4ytyy vastata s\xE4\xE4nn\xF6llist\xE4 lauseketta ${e.pattern}`:`Virheellinen ${r[e.format]??e.format}`;case"not_multiple_of":return`Virheellinen luku: t\xE4ytyy olla luvun ${e.divisor} monikerta`;case"unrecognized_keys":return`${e.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${b(e.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen sy\xF6te"}}};function Do(){return{localeError:Ka()}}let Ja=()=>{let t={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}},r={regex:"entr\xE9e",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"},n={nan:"NaN",number:"nombre",array:"tableau"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`Entr\xE9e invalide : instanceof ${e.expected} attendu, ${M} re\xE7u`:`Entr\xE9e invalide : ${l} attendu, ${M} re\xE7u`}case"invalid_value":return e.values.length===1?`Entr\xE9e invalide : ${ge(e.values[0])} attendu`:`Option invalide : une valeur parmi ${b(e.values,"|")} attendue`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`Trop grand : ${e.origin??"valeur"} doit ${g.verb} ${l}${e.maximum.toString()} ${g.unit??"\xE9l\xE9ment(s)"}`:`Trop grand : ${e.origin??"valeur"} doit \xEAtre ${l}${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`Trop petit : ${e.origin} doit ${g.verb} ${l}${e.minimum.toString()} ${g.unit}`:`Trop petit : ${e.origin} doit \xEAtre ${l}${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${e.prefix}"`:e.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${e.suffix}"`:e.format==="includes"?`Cha\xEEne invalide : doit inclure "${e.includes}"`:e.format==="regex"?`Cha\xEEne invalide : doit correspondre au mod\xE8le ${e.pattern}`:`${r[e.format]??e.format} invalide`;case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${e.divisor}`;case"unrecognized_keys":return`Cl\xE9${e.keys.length>1?"s":""} non reconnue${e.keys.length>1?"s":""} : ${b(e.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${e.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${e.origin}`;default:return"Entr\xE9e invalide"}}};function ks(){return{localeError:Ja()}}let Ha=()=>{let t={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}},r={regex:"entr\xE9e",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"},n={nan:"NaN"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`Entr\xE9e invalide : attendu instanceof ${e.expected}, re\xE7u ${M}`:`Entr\xE9e invalide : attendu ${l}, re\xE7u ${M}`}case"invalid_value":return e.values.length===1?`Entr\xE9e invalide : attendu ${ge(e.values[0])}`:`Option invalide : attendu l'une des valeurs suivantes ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"\u2264":"<",g=t[e.origin]??null;return g?`Trop grand : attendu que ${e.origin??"la valeur"} ait ${l}${e.maximum.toString()} ${g.unit}`:`Trop grand : attendu que ${e.origin??"la valeur"} soit ${l}${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?"\u2265":">",g=t[e.origin]??null;return g?`Trop petit : attendu que ${e.origin} ait ${l}${e.minimum.toString()} ${g.unit}`:`Trop petit : attendu que ${e.origin} soit ${l}${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${e.prefix}"`:e.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${e.suffix}"`:e.format==="includes"?`Cha\xEEne invalide : doit inclure "${e.includes}"`:e.format==="regex"?`Cha\xEEne invalide : doit correspondre au motif ${e.pattern}`:`${r[e.format]??e.format} invalide`;case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${e.divisor}`;case"unrecognized_keys":return`Cl\xE9${e.keys.length>1?"s":""} non reconnue${e.keys.length>1?"s":""} : ${b(e.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${e.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${e.origin}`;default:return"Entr\xE9e invalide"}}};function Ns(){return{localeError:Ha()}}let Qa=()=>{let t={string:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA",gender:"f"},number:{label:"\u05DE\u05E1\u05E4\u05E8",gender:"m"},boolean:{label:"\u05E2\u05E8\u05DA \u05D1\u05D5\u05DC\u05D9\u05D0\u05E0\u05D9",gender:"m"},bigint:{label:"BigInt",gender:"m"},date:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA",gender:"m"},array:{label:"\u05DE\u05E2\u05E8\u05DA",gender:"m"},object:{label:"\u05D0\u05D5\u05D1\u05D9\u05D9\u05E7\u05D8",gender:"m"},null:{label:"\u05E2\u05E8\u05DA \u05E8\u05D9\u05E7 (null)",gender:"m"},undefined:{label:"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05DE\u05D5\u05D2\u05D3\u05E8 (undefined)",gender:"m"},symbol:{label:"\u05E1\u05D9\u05DE\u05D1\u05D5\u05DC (Symbol)",gender:"m"},function:{label:"\u05E4\u05D5\u05E0\u05E7\u05E6\u05D9\u05D4",gender:"f"},map:{label:"\u05DE\u05E4\u05D4 (Map)",gender:"f"},set:{label:"\u05E7\u05D1\u05D5\u05E6\u05D4 (Set)",gender:"f"},file:{label:"\u05E7\u05D5\u05D1\u05E5",gender:"m"},promise:{label:"Promise",gender:"m"},NaN:{label:"NaN",gender:"m"},unknown:{label:"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05D9\u05D3\u05D5\u05E2",gender:"m"},value:{label:"\u05E2\u05E8\u05DA",gender:"m"}},r={string:{unit:"\u05EA\u05D5\u05D5\u05D9\u05DD",shortLabel:"\u05E7\u05E6\u05E8",longLabel:"\u05D0\u05E8\u05D5\u05DA"},file:{unit:"\u05D1\u05D9\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},array:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},set:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},number:{unit:"",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"}},n=_e=>_e?t[_e]:void 0,e=_e=>{let Ne=n(_e);return Ne?Ne.label:_e??t.unknown.label},l=_e=>`\u05D4${e(_e)}`,g=_e=>(n(_e)?.gender??"m")==="f"?"\u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05D9\u05D5\u05EA":"\u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA",M=_e=>_e?r[_e]??null:null,be={regex:{label:"\u05E7\u05DC\u05D8",gender:"m"},email:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05D0\u05D9\u05DE\u05D9\u05D9\u05DC",gender:"f"},url:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05E8\u05E9\u05EA",gender:"f"},emoji:{label:"\u05D0\u05D9\u05DE\u05D5\u05D2'\u05D9",gender:"m"},uuid:{label:"UUID",gender:"m"},nanoid:{label:"nanoid",gender:"m"},guid:{label:"GUID",gender:"m"},cuid:{label:"cuid",gender:"m"},cuid2:{label:"cuid2",gender:"m"},ulid:{label:"ULID",gender:"m"},xid:{label:"XID",gender:"m"},ksuid:{label:"KSUID",gender:"m"},datetime:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA \u05D5\u05D6\u05DE\u05DF ISO",gender:"m"},date:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA ISO",gender:"m"},time:{label:"\u05D6\u05DE\u05DF ISO",gender:"m"},duration:{label:"\u05DE\u05E9\u05DA \u05D6\u05DE\u05DF ISO",gender:"m"},ipv4:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv4",gender:"f"},ipv6:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv6",gender:"f"},cidrv4:{label:"\u05D8\u05D5\u05D5\u05D7 IPv4",gender:"m"},cidrv6:{label:"\u05D8\u05D5\u05D5\u05D7 IPv6",gender:"m"},base64:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64",gender:"f"},base64url:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64 \u05DC\u05DB\u05EA\u05D5\u05D1\u05D5\u05EA \u05E8\u05E9\u05EA",gender:"f"},json_string:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA JSON",gender:"f"},e164:{label:"\u05DE\u05E1\u05E4\u05E8 E.164",gender:"m"},jwt:{label:"JWT",gender:"m"},ends_with:{label:"\u05E7\u05DC\u05D8",gender:"m"},includes:{label:"\u05E7\u05DC\u05D8",gender:"m"},lowercase:{label:"\u05E7\u05DC\u05D8",gender:"m"},starts_with:{label:"\u05E7\u05DC\u05D8",gender:"m"},uppercase:{label:"\u05E7\u05DC\u05D8",gender:"m"}},De={nan:"NaN"};return _e=>{switch(_e.code){case"invalid_type":{let Ne=_e.expected,et=De[Ne??""]??e(Ne),st=tt(_e.input),Nt=De[st]??t[st]?.label??st;return/^[A-Z]/.test(_e.expected)?`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA instanceof ${_e.expected}, \u05D4\u05EA\u05E7\u05D1\u05DC ${Nt}`:`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${et}, \u05D4\u05EA\u05E7\u05D1\u05DC ${Nt}`}case"invalid_value":{if(_e.values.length===1)return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05E2\u05E8\u05DA \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA ${ge(_e.values[0])}`;let Ne=_e.values.map(Nt=>ge(Nt));if(_e.values.length===2)return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA \u05D4\u05DE\u05EA\u05D0\u05D9\u05DE\u05D5\u05EA \u05D4\u05DF ${Ne[0]} \u05D0\u05D5 ${Ne[1]}`;let et=Ne[Ne.length-1];return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA \u05D4\u05DE\u05EA\u05D0\u05D9\u05DE\u05D5\u05EA \u05D4\u05DF ${Ne.slice(0,-1).join(", ")} \u05D0\u05D5 ${et}`}case"too_big":{let Ne=M(_e.origin),et=l(_e.origin??"value");if(_e.origin==="string")return`${Ne?.longLabel??"\u05D0\u05E8\u05D5\u05DA"} \u05DE\u05D3\u05D9: ${et} \u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05DB\u05D9\u05DC ${_e.maximum.toString()} ${Ne?.unit??""} ${_e.inclusive?"\u05D0\u05D5 \u05E4\u05D7\u05D5\u05EA":"\u05DC\u05DB\u05DC \u05D4\u05D9\u05D5\u05EA\u05E8"}`.trim();if(_e.origin==="number"){let Ke=_e.inclusive?`\u05E7\u05D8\u05DF \u05D0\u05D5 \u05E9\u05D5\u05D5\u05D4 \u05DC-${_e.maximum}`:`\u05E7\u05D8\u05DF \u05DE-${_e.maximum}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${et} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${Ke}`}if(_e.origin==="array"||_e.origin==="set"){let Ke=_e.origin==="set"?"\u05E6\u05E8\u05D9\u05DB\u05D4":"\u05E6\u05E8\u05D9\u05DA",Mt=_e.inclusive?`${_e.maximum} ${Ne?.unit??""} \u05D0\u05D5 \u05E4\u05D7\u05D5\u05EA`:`\u05E4\u05D7\u05D5\u05EA \u05DE-${_e.maximum} ${Ne?.unit??""}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${et} ${Ke} \u05DC\u05D4\u05DB\u05D9\u05DC ${Mt}`.trim()}let st=_e.inclusive?"<=":"<",Nt=g(_e.origin??"value");return Ne?.unit?`${Ne.longLabel} \u05DE\u05D3\u05D9: ${et} ${Nt} ${st}${_e.maximum.toString()} ${Ne.unit}`:`${Ne?.longLabel??"\u05D2\u05D3\u05D5\u05DC"} \u05DE\u05D3\u05D9: ${et} ${Nt} ${st}${_e.maximum.toString()}`}case"too_small":{let Ne=M(_e.origin),et=l(_e.origin??"value");if(_e.origin==="string")return`${Ne?.shortLabel??"\u05E7\u05E6\u05E8"} \u05DE\u05D3\u05D9: ${et} \u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05DB\u05D9\u05DC ${_e.minimum.toString()} ${Ne?.unit??""} ${_e.inclusive?"\u05D0\u05D5 \u05D9\u05D5\u05EA\u05E8":"\u05DC\u05E4\u05D7\u05D5\u05EA"}`.trim();if(_e.origin==="number"){let Ke=_e.inclusive?`\u05D2\u05D3\u05D5\u05DC \u05D0\u05D5 \u05E9\u05D5\u05D5\u05D4 \u05DC-${_e.minimum}`:`\u05D2\u05D3\u05D5\u05DC \u05DE-${_e.minimum}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${et} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${Ke}`}if(_e.origin==="array"||_e.origin==="set"){let Ke=_e.origin==="set"?"\u05E6\u05E8\u05D9\u05DB\u05D4":"\u05E6\u05E8\u05D9\u05DA";if(_e.minimum===1&&_e.inclusive){let Rr=(_e.origin,"\u05DC\u05E4\u05D7\u05D5\u05EA \u05E4\u05E8\u05D9\u05D8 \u05D0\u05D7\u05D3");return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${et} ${Ke} \u05DC\u05D4\u05DB\u05D9\u05DC ${Rr}`}let Mt=_e.inclusive?`${_e.minimum} ${Ne?.unit??""} \u05D0\u05D5 \u05D9\u05D5\u05EA\u05E8`:`\u05D9\u05D5\u05EA\u05E8 \u05DE-${_e.minimum} ${Ne?.unit??""}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${et} ${Ke} \u05DC\u05D4\u05DB\u05D9\u05DC ${Mt}`.trim()}let st=_e.inclusive?">=":">",Nt=g(_e.origin??"value");return Ne?.unit?`${Ne.shortLabel} \u05DE\u05D3\u05D9: ${et} ${Nt} ${st}${_e.minimum.toString()} ${Ne.unit}`:`${Ne?.shortLabel??"\u05E7\u05D8\u05DF"} \u05DE\u05D3\u05D9: ${et} ${Nt} ${st}${_e.minimum.toString()}`}case"invalid_format":{if(_e.format==="starts_with")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D7\u05D9\u05DC \u05D1 "${_e.prefix}"`;if(_e.format==="ends_with")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05E1\u05EA\u05D9\u05D9\u05DD \u05D1 "${_e.suffix}"`;if(_e.format==="includes")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05DB\u05DC\u05D5\u05DC "${_e.includes}"`;if(_e.format==="regex")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D0\u05D9\u05DD \u05DC\u05EA\u05D1\u05E0\u05D9\u05EA ${_e.pattern}`;let Ne=be[_e.format],et=Ne?.label??_e.format,st=Ne?.gender??"m";return`${et} \u05DC\u05D0 ${st==="f"?"\u05EA\u05E7\u05D9\u05E0\u05D4":"\u05EA\u05E7\u05D9\u05DF"}`}case"not_multiple_of":return`\u05DE\u05E1\u05E4\u05E8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA \u05DE\u05DB\u05E4\u05DC\u05D4 \u05E9\u05DC ${_e.divisor}`;case"unrecognized_keys":return`\u05DE\u05E4\u05EA\u05D7${_e.keys.length>1?"\u05D5\u05EA":""} \u05DC\u05D0 \u05DE\u05D6\u05D5\u05D4${_e.keys.length>1?"\u05D9\u05DD":"\u05D4"}: ${b(_e.keys,", ")}`;case"invalid_key":return"\u05E9\u05D3\u05D4 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1\u05D0\u05D5\u05D1\u05D9\u05D9\u05E7\u05D8";case"invalid_union":return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF";case"invalid_element":return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1${l(_e.origin??"array")}`;default:return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF"}}};function Lo(){return{localeError:Qa()}}let Xa=()=>{let t={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}},r={regex:"bemenet",email:"email c\xEDm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO id\u0151b\xE9lyeg",date:"ISO d\xE1tum",time:"ISO id\u0151",duration:"ISO id\u0151intervallum",ipv4:"IPv4 c\xEDm",ipv6:"IPv6 c\xEDm",cidrv4:"IPv4 tartom\xE1ny",cidrv6:"IPv6 tartom\xE1ny",base64:"base64-k\xF3dolt string",base64url:"base64url-k\xF3dolt string",json_string:"JSON string",e164:"E.164 sz\xE1m",jwt:"JWT",template_literal:"bemenet"},n={nan:"NaN",number:"sz\xE1m",array:"t\xF6mb"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k instanceof ${e.expected}, a kapott \xE9rt\xE9k ${M}`:`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${l}, a kapott \xE9rt\xE9k ${M}`}case"invalid_value":return e.values.length===1?`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${ge(e.values[0])}`:`\xC9rv\xE9nytelen opci\xF3: valamelyik \xE9rt\xE9k v\xE1rt ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`T\xFAl nagy: ${e.origin??"\xE9rt\xE9k"} m\xE9rete t\xFAl nagy ${l}${e.maximum.toString()} ${g.unit??"elem"}`:`T\xFAl nagy: a bemeneti \xE9rt\xE9k ${e.origin??"\xE9rt\xE9k"} t\xFAl nagy: ${l}${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${e.origin} m\xE9rete t\xFAl kicsi ${l}${e.minimum.toString()} ${g.unit}`:`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${e.origin} t\xFAl kicsi ${l}${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`\xC9rv\xE9nytelen string: "${e.prefix}" \xE9rt\xE9kkel kell kezd\u0151dnie`:e.format==="ends_with"?`\xC9rv\xE9nytelen string: "${e.suffix}" \xE9rt\xE9kkel kell v\xE9gz\u0151dnie`:e.format==="includes"?`\xC9rv\xE9nytelen string: "${e.includes}" \xE9rt\xE9ket kell tartalmaznia`:e.format==="regex"?`\xC9rv\xE9nytelen string: ${e.pattern} mint\xE1nak kell megfelelnie`:`\xC9rv\xE9nytelen ${r[e.format]??e.format}`;case"not_multiple_of":return`\xC9rv\xE9nytelen sz\xE1m: ${e.divisor} t\xF6bbsz\xF6r\xF6s\xE9nek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${e.keys.length>1?"s":""}: ${b(e.keys,", ")}`;case"invalid_key":return`\xC9rv\xE9nytelen kulcs ${e.origin}`;case"invalid_union":return"\xC9rv\xE9nytelen bemenet";case"invalid_element":return`\xC9rv\xE9nytelen \xE9rt\xE9k: ${e.origin}`;default:return"\xC9rv\xE9nytelen bemenet"}}};function Qn(){return{localeError:Xa()}}function qo(t,r,n){return Math.abs(t)===1?r:n}function ti(t){if(!t)return"";let r=t[t.length-1];return t+(["\u0561","\u0565","\u0568","\u056B","\u0578","\u0578\u0582","\u0585"].includes(r)?"\u0576":"\u0568")}let Ya=()=>{let t={string:{unit:{one:"\u0576\u0577\u0561\u0576",many:"\u0576\u0577\u0561\u0576\u0576\u0565\u0580"},verb:"\u0578\u0582\u0576\u0565\u0576\u0561\u056C"},file:{unit:{one:"\u0562\u0561\u0575\u0569",many:"\u0562\u0561\u0575\u0569\u0565\u0580"},verb:"\u0578\u0582\u0576\u0565\u0576\u0561\u056C"},array:{unit:{one:"\u057F\u0561\u0580\u0580",many:"\u057F\u0561\u0580\u0580\u0565\u0580"},verb:"\u0578\u0582\u0576\u0565\u0576\u0561\u056C"},set:{unit:{one:"\u057F\u0561\u0580\u0580",many:"\u057F\u0561\u0580\u0580\u0565\u0580"},verb:"\u0578\u0582\u0576\u0565\u0576\u0561\u056C"}},r={regex:"\u0574\u0578\u0582\u057F\u0584",email:"\u0567\u056C. \u0570\u0561\u057D\u0581\u0565",url:"URL",emoji:"\u0567\u0574\u0578\u057B\u056B",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0561\u0574\u057D\u0561\u0569\u056B\u057E \u0587 \u056A\u0561\u0574",date:"ISO \u0561\u0574\u057D\u0561\u0569\u056B\u057E",time:"ISO \u056A\u0561\u0574",duration:"ISO \u057F\u0587\u0578\u0572\u0578\u0582\u0569\u0575\u0578\u0582\u0576",ipv4:"IPv4 \u0570\u0561\u057D\u0581\u0565",ipv6:"IPv6 \u0570\u0561\u057D\u0581\u0565",cidrv4:"IPv4 \u0574\u056B\u057B\u0561\u056F\u0561\u0575\u0584",cidrv6:"IPv6 \u0574\u056B\u057B\u0561\u056F\u0561\u0575\u0584",base64:"base64 \u0571\u0587\u0561\u0579\u0561\u0583\u0578\u057E \u057F\u0578\u0572",base64url:"base64url \u0571\u0587\u0561\u0579\u0561\u0583\u0578\u057E \u057F\u0578\u0572",json_string:"JSON \u057F\u0578\u0572",e164:"E.164 \u0570\u0561\u0574\u0561\u0580",jwt:"JWT",template_literal:"\u0574\u0578\u0582\u057F\u0584"},n={nan:"NaN",number:"\u0569\u056B\u057E",array:"\u0566\u0561\u0576\u0563\u057E\u0561\u056E"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`\u054D\u056D\u0561\u056C \u0574\u0578\u0582\u057F\u0584\u0561\u0563\u0580\u0578\u0582\u0574\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567\u0580 instanceof ${e.expected}, \u057D\u057F\u0561\u0581\u057E\u0565\u056C \u0567 ${M}`:`\u054D\u056D\u0561\u056C \u0574\u0578\u0582\u057F\u0584\u0561\u0563\u0580\u0578\u0582\u0574\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567\u0580 ${l}, \u057D\u057F\u0561\u0581\u057E\u0565\u056C \u0567 ${M}`}case"invalid_value":return e.values.length===1?`\u054D\u056D\u0561\u056C \u0574\u0578\u0582\u057F\u0584\u0561\u0563\u0580\u0578\u0582\u0574\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567\u0580 ${ge(e.values[1])}`:`\u054D\u056D\u0561\u056C \u057F\u0561\u0580\u0562\u0565\u0580\u0561\u056F\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567\u0580 \u0570\u0565\u057F\u0587\u0575\u0561\u056C\u0576\u0565\u0580\u056B\u0581 \u0574\u0565\u056F\u0568\u055D ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;if(g){let M=qo(Number(e.maximum),g.unit.one,g.unit.many);return`\u0549\u0561\u0583\u0561\u0566\u0561\u0576\u0581 \u0574\u0565\u056E \u0561\u0580\u056A\u0565\u0584\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567, \u0578\u0580 ${ti(e.origin??"\u0561\u0580\u056A\u0565\u0584")} \u056F\u0578\u0582\u0576\u0565\u0576\u0561 ${l}${e.maximum.toString()} ${M}`}return`\u0549\u0561\u0583\u0561\u0566\u0561\u0576\u0581 \u0574\u0565\u056E \u0561\u0580\u056A\u0565\u0584\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567, \u0578\u0580 ${ti(e.origin??"\u0561\u0580\u056A\u0565\u0584")} \u056C\u056B\u0576\u056B ${l}${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;if(g){let M=qo(Number(e.minimum),g.unit.one,g.unit.many);return`\u0549\u0561\u0583\u0561\u0566\u0561\u0576\u0581 \u0583\u0578\u0584\u0580 \u0561\u0580\u056A\u0565\u0584\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567, \u0578\u0580 ${ti(e.origin)} \u056F\u0578\u0582\u0576\u0565\u0576\u0561 ${l}${e.minimum.toString()} ${M}`}return`\u0549\u0561\u0583\u0561\u0566\u0561\u0576\u0581 \u0583\u0578\u0584\u0580 \u0561\u0580\u056A\u0565\u0584\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567, \u0578\u0580 ${ti(e.origin)} \u056C\u056B\u0576\u056B ${l}${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`\u054D\u056D\u0561\u056C \u057F\u0578\u0572\u2024 \u057A\u0565\u057F\u0584 \u0567 \u057D\u056F\u057D\u057E\u056B "${e.prefix}"-\u0578\u057E`:e.format==="ends_with"?`\u054D\u056D\u0561\u056C \u057F\u0578\u0572\u2024 \u057A\u0565\u057F\u0584 \u0567 \u0561\u057E\u0561\u0580\u057F\u057E\u056B "${e.suffix}"-\u0578\u057E`:e.format==="includes"?`\u054D\u056D\u0561\u056C \u057F\u0578\u0572\u2024 \u057A\u0565\u057F\u0584 \u0567 \u057A\u0561\u0580\u0578\u0582\u0576\u0561\u056F\u056B "${e.includes}"`:e.format==="regex"?`\u054D\u056D\u0561\u056C \u057F\u0578\u0572\u2024 \u057A\u0565\u057F\u0584 \u0567 \u0570\u0561\u0574\u0561\u057A\u0561\u057F\u0561\u057D\u056D\u0561\u0576\u056B ${e.pattern} \u0571\u0587\u0561\u0579\u0561\u0583\u056B\u0576`:`\u054D\u056D\u0561\u056C ${r[e.format]??e.format}`;case"not_multiple_of":return`\u054D\u056D\u0561\u056C \u0569\u056B\u057E\u2024 \u057A\u0565\u057F\u0584 \u0567 \u0562\u0561\u0566\u0574\u0561\u057A\u0561\u057F\u056B\u056F \u056C\u056B\u0576\u056B ${e.divisor}-\u056B`;case"unrecognized_keys":return`\u0549\u0573\u0561\u0576\u0561\u0579\u057E\u0561\u056E \u0562\u0561\u0576\u0561\u056C\u056B${e.keys.length>1?"\u0576\u0565\u0580":""}. ${b(e.keys,", ")}`;case"invalid_key":return`\u054D\u056D\u0561\u056C \u0562\u0561\u0576\u0561\u056C\u056B ${ti(e.origin)}-\u0578\u0582\u0574`;case"invalid_union":return"\u054D\u056D\u0561\u056C \u0574\u0578\u0582\u057F\u0584\u0561\u0563\u0580\u0578\u0582\u0574";case"invalid_element":return`\u054D\u056D\u0561\u056C \u0561\u0580\u056A\u0565\u0584 ${ti(e.origin)}-\u0578\u0582\u0574`;default:return"\u054D\u056D\u0561\u056C \u0574\u0578\u0582\u057F\u0584\u0561\u0563\u0580\u0578\u0582\u0574"}}};function Xn(){return{localeError:Ya()}}let el=()=>{let t={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}},r={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"},n={nan:"NaN"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`Input tidak valid: diharapkan instanceof ${e.expected}, diterima ${M}`:`Input tidak valid: diharapkan ${l}, diterima ${M}`}case"invalid_value":return e.values.length===1?`Input tidak valid: diharapkan ${ge(e.values[0])}`:`Pilihan tidak valid: diharapkan salah satu dari ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`Terlalu besar: diharapkan ${e.origin??"value"} memiliki ${l}${e.maximum.toString()} ${g.unit??"elemen"}`:`Terlalu besar: diharapkan ${e.origin??"value"} menjadi ${l}${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`Terlalu kecil: diharapkan ${e.origin} memiliki ${l}${e.minimum.toString()} ${g.unit}`:`Terlalu kecil: diharapkan ${e.origin} menjadi ${l}${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`String tidak valid: harus dimulai dengan "${e.prefix}"`:e.format==="ends_with"?`String tidak valid: harus berakhir dengan "${e.suffix}"`:e.format==="includes"?`String tidak valid: harus menyertakan "${e.includes}"`:e.format==="regex"?`String tidak valid: harus sesuai pola ${e.pattern}`:`${r[e.format]??e.format} tidak valid`;case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${e.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${e.keys.length>1?"s":""}: ${b(e.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${e.origin}`;case"invalid_union":default:return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${e.origin}`}}};function tl(){return{localeError:el()}}let rl=()=>{let t={string:{unit:"stafi",verb:"a\xF0 hafa"},file:{unit:"b\xE6ti",verb:"a\xF0 hafa"},array:{unit:"hluti",verb:"a\xF0 hafa"},set:{unit:"hluti",verb:"a\xF0 hafa"}},r={regex:"gildi",email:"netfang",url:"vefsl\xF3\xF0",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og t\xEDmi",date:"ISO dagsetning",time:"ISO t\xEDmi",duration:"ISO t\xEDmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 t\xF6lugildi",jwt:"JWT",template_literal:"gildi"},n={nan:"NaN",number:"n\xFAmer",array:"fylki"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`Rangt gildi: \xDE\xFA sl\xF3st inn ${M} \xFEar sem \xE1 a\xF0 vera instanceof ${e.expected}`:`Rangt gildi: \xDE\xFA sl\xF3st inn ${M} \xFEar sem \xE1 a\xF0 vera ${l}`}case"invalid_value":return e.values.length===1?`Rangt gildi: gert r\xE1\xF0 fyrir ${ge(e.values[0])}`:`\xD3gilt val: m\xE1 vera eitt af eftirfarandi ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${e.origin??"gildi"} hafi ${l}${e.maximum.toString()} ${g.unit??"hluti"}`:`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${e.origin??"gildi"} s\xE9 ${l}${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${e.origin} hafi ${l}${e.minimum.toString()} ${g.unit}`:`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${e.origin} s\xE9 ${l}${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 byrja \xE1 "${e.prefix}"`:e.format==="ends_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 enda \xE1 "${e.suffix}"`:e.format==="includes"?`\xD3gildur strengur: ver\xF0ur a\xF0 innihalda "${e.includes}"`:e.format==="regex"?`\xD3gildur strengur: ver\xF0ur a\xF0 fylgja mynstri ${e.pattern}`:`Rangt ${r[e.format]??e.format}`;case"not_multiple_of":return`R\xF6ng tala: ver\xF0ur a\xF0 vera margfeldi af ${e.divisor}`;case"unrecognized_keys":return`\xD3\xFEekkt ${e.keys.length>1?"ir lyklar":"ur lykill"}: ${b(e.keys,", ")}`;case"invalid_key":return`Rangur lykill \xED ${e.origin}`;case"invalid_union":default:return"Rangt gildi";case"invalid_element":return`Rangt gildi \xED ${e.origin}`}}};function il(){return{localeError:rl()}}let nl=()=>{let t={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}},r={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"},n={nan:"NaN",number:"numero",array:"vettore"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`Input non valido: atteso instanceof ${e.expected}, ricevuto ${M}`:`Input non valido: atteso ${l}, ricevuto ${M}`}case"invalid_value":return e.values.length===1?`Input non valido: atteso ${ge(e.values[0])}`:`Opzione non valida: atteso uno tra ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`Troppo grande: ${e.origin??"valore"} deve avere ${l}${e.maximum.toString()} ${g.unit??"elementi"}`:`Troppo grande: ${e.origin??"valore"} deve essere ${l}${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`Troppo piccolo: ${e.origin} deve avere ${l}${e.minimum.toString()} ${g.unit}`:`Troppo piccolo: ${e.origin} deve essere ${l}${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`Stringa non valida: deve iniziare con "${e.prefix}"`:e.format==="ends_with"?`Stringa non valida: deve terminare con "${e.suffix}"`:e.format==="includes"?`Stringa non valida: deve includere "${e.includes}"`:e.format==="regex"?`Stringa non valida: deve corrispondere al pattern ${e.pattern}`:`Invalid ${r[e.format]??e.format}`;case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${e.divisor}`;case"unrecognized_keys":return`Chiav${e.keys.length>1?"i":"e"} non riconosciut${e.keys.length>1?"e":"a"}: ${b(e.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${e.origin}`;case"invalid_union":default:return"Input non valido";case"invalid_element":return`Valore non valido in ${e.origin}`}}};function sl(){return{localeError:nl()}}let ol=()=>{let t={string:{unit:"\u6587\u5B57",verb:"\u3067\u3042\u308B"},file:{unit:"\u30D0\u30A4\u30C8",verb:"\u3067\u3042\u308B"},array:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"},set:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"}},r={regex:"\u5165\u529B\u5024",email:"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9",url:"URL",emoji:"\u7D75\u6587\u5B57",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u6642",date:"ISO\u65E5\u4ED8",time:"ISO\u6642\u523B",duration:"ISO\u671F\u9593",ipv4:"IPv4\u30A2\u30C9\u30EC\u30B9",ipv6:"IPv6\u30A2\u30C9\u30EC\u30B9",cidrv4:"IPv4\u7BC4\u56F2",cidrv6:"IPv6\u7BC4\u56F2",base64:"base64\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",base64url:"base64url\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",json_string:"JSON\u6587\u5B57\u5217",e164:"E.164\u756A\u53F7",jwt:"JWT",template_literal:"\u5165\u529B\u5024"},n={nan:"NaN",number:"\u6570\u5024",array:"\u914D\u5217"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`\u7121\u52B9\u306A\u5165\u529B: instanceof ${e.expected}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F\u304C\u3001${M}\u304C\u5165\u529B\u3055\u308C\u307E\u3057\u305F`:`\u7121\u52B9\u306A\u5165\u529B: ${l}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F\u304C\u3001${M}\u304C\u5165\u529B\u3055\u308C\u307E\u3057\u305F`}case"invalid_value":return e.values.length===1?`\u7121\u52B9\u306A\u5165\u529B: ${ge(e.values[0])}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F`:`\u7121\u52B9\u306A\u9078\u629E: ${b(e.values,"\u3001")}\u306E\u3044\u305A\u308C\u304B\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"too_big":{let l=e.inclusive?"\u4EE5\u4E0B\u3067\u3042\u308B":"\u3088\u308A\u5C0F\u3055\u3044",g=t[e.origin]??null;return g?`\u5927\u304D\u3059\u304E\u308B\u5024: ${e.origin??"\u5024"}\u306F${e.maximum.toString()}${g.unit??"\u8981\u7D20"}${l}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5927\u304D\u3059\u304E\u308B\u5024: ${e.origin??"\u5024"}\u306F${e.maximum.toString()}${l}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"too_small":{let l=e.inclusive?"\u4EE5\u4E0A\u3067\u3042\u308B":"\u3088\u308A\u5927\u304D\u3044",g=t[e.origin]??null;return g?`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${e.origin}\u306F${e.minimum.toString()}${g.unit}${l}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${e.origin}\u306F${e.minimum.toString()}${l}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"invalid_format":return e.format==="starts_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${e.prefix}"\u3067\u59CB\u307E\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:e.format==="ends_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${e.suffix}"\u3067\u7D42\u308F\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:e.format==="includes"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${e.includes}"\u3092\u542B\u3080\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:e.format==="regex"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: \u30D1\u30BF\u30FC\u30F3${e.pattern}\u306B\u4E00\u81F4\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u7121\u52B9\u306A${r[e.format]??e.format}`;case"not_multiple_of":return`\u7121\u52B9\u306A\u6570\u5024: ${e.divisor}\u306E\u500D\u6570\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"unrecognized_keys":return`\u8A8D\u8B58\u3055\u308C\u3066\u3044\u306A\u3044\u30AD\u30FC${e.keys.length>1?"\u7FA4":""}: ${b(e.keys,"\u3001")}`;case"invalid_key":return`${e.origin}\u5185\u306E\u7121\u52B9\u306A\u30AD\u30FC`;case"invalid_union":return"\u7121\u52B9\u306A\u5165\u529B";case"invalid_element":return`${e.origin}\u5185\u306E\u7121\u52B9\u306A\u5024`;default:return"\u7121\u52B9\u306A\u5165\u529B"}}};function al(){return{localeError:ol()}}let ll=()=>{let t={string:{unit:"\u10E1\u10D8\u10DB\u10D1\u10DD\u10DA\u10DD",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},file:{unit:"\u10D1\u10D0\u10D8\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},array:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},set:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"}},r={regex:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0",email:"\u10D4\u10DA-\u10E4\u10DD\u10E1\u10E2\u10D8\u10E1 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",url:"URL",emoji:"\u10D4\u10DB\u10DD\u10EF\u10D8",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8-\u10D3\u10E0\u10DD",date:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8",time:"\u10D3\u10E0\u10DD",duration:"\u10EE\u10D0\u10DC\u10D2\u10E0\u10EB\u10DA\u10D8\u10D5\u10DD\u10D1\u10D0",ipv4:"IPv4 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",ipv6:"IPv6 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",cidrv4:"IPv4 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",cidrv6:"IPv6 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",base64:"base64-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",base64url:"base64url-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",json_string:"JSON \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",e164:"E.164 \u10DC\u10DD\u10DB\u10D4\u10E0\u10D8",jwt:"JWT",template_literal:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"},n={nan:"NaN",number:"\u10E0\u10D8\u10EA\u10EE\u10D5\u10D8",string:"\u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",boolean:"\u10D1\u10E3\u10DA\u10D4\u10D0\u10DC\u10D8",function:"\u10E4\u10E3\u10DC\u10E5\u10EA\u10D8\u10D0",array:"\u10DB\u10D0\u10E1\u10D8\u10D5\u10D8"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 instanceof ${e.expected}, \u10DB\u10D8\u10E6\u10D4\u10D1\u10E3\u10DA\u10D8 ${M}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${l}, \u10DB\u10D8\u10E6\u10D4\u10D1\u10E3\u10DA\u10D8 ${M}`}case"invalid_value":return e.values.length===1?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${ge(e.values[0])}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D5\u10D0\u10E0\u10D8\u10D0\u10DC\u10E2\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8\u10D0 \u10D4\u10E0\u10D7-\u10D4\u10E0\u10D7\u10D8 ${b(e.values,"|")}-\u10D3\u10D0\u10DC`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${e.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} ${g.verb} ${l}${e.maximum.toString()} ${g.unit}`:`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${e.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} \u10D8\u10E7\u10DD\u10E1 ${l}${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${e.origin} ${g.verb} ${l}${e.minimum.toString()} ${g.unit}`:`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${e.origin} \u10D8\u10E7\u10DD\u10E1 ${l}${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10EC\u10E7\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${e.prefix}"-\u10D8\u10D7`:e.format==="ends_with"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10DB\u10D7\u10D0\u10D5\u10E0\u10D3\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${e.suffix}"-\u10D8\u10D7`:e.format==="includes"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1 "${e.includes}"-\u10E1`:e.format==="regex"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D4\u10E1\u10D0\u10D1\u10D0\u10DB\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 \u10E8\u10D0\u10D1\u10DA\u10DD\u10DC\u10E1 ${e.pattern}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 ${r[e.format]??e.format}`;case"not_multiple_of":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E0\u10D8\u10EA\u10EE\u10D5\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10E7\u10DD\u10E1 ${e.divisor}-\u10D8\u10E1 \u10EF\u10D4\u10E0\u10D0\u10D3\u10D8`;case"unrecognized_keys":return`\u10E3\u10EA\u10DC\u10DD\u10D1\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1${e.keys.length>1?"\u10D4\u10D1\u10D8":"\u10D8"}: ${b(e.keys,", ")}`;case"invalid_key":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1\u10D8 ${e.origin}-\u10E8\u10D8`;case"invalid_union":return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0";case"invalid_element":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0 ${e.origin}-\u10E8\u10D8`;default:return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"}}};function ul(){return{localeError:ll()}}let cl=()=>{let t={string:{unit:"\u178F\u17BD\u17A2\u1780\u17D2\u179F\u179A",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},file:{unit:"\u1794\u17C3",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},array:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},set:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"}},r={regex:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B",email:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793\u17A2\u17CA\u17B8\u1798\u17C2\u179B",url:"URL",emoji:"\u179F\u1789\u17D2\u1789\u17B6\u17A2\u17B6\u179A\u1798\u17D2\u1798\u178E\u17CD",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 \u1793\u17B7\u1784\u1798\u17C9\u17C4\u1784 ISO",date:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 ISO",time:"\u1798\u17C9\u17C4\u1784 ISO",duration:"\u179A\u1799\u17C8\u1796\u17C1\u179B ISO",ipv4:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",ipv6:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",cidrv4:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",cidrv6:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",base64:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64",base64url:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64url",json_string:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A JSON",e164:"\u179B\u17C1\u1781 E.164",jwt:"JWT",template_literal:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B"},n={nan:"NaN",number:"\u179B\u17C1\u1781",array:"\u17A2\u17B6\u179A\u17C1 (Array)",null:"\u1782\u17D2\u1798\u17B6\u1793\u178F\u1798\u17D2\u179B\u17C3 (null)"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A instanceof ${e.expected} \u1794\u17C9\u17BB\u1793\u17D2\u178F\u17C2\u1791\u1791\u17BD\u179B\u1794\u17B6\u1793 ${M}`:`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${l} \u1794\u17C9\u17BB\u1793\u17D2\u178F\u17C2\u1791\u1791\u17BD\u179B\u1794\u17B6\u1793 ${M}`}case"invalid_value":return e.values.length===1?`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${ge(e.values[0])}`:`\u1787\u1798\u17D2\u179A\u17BE\u179F\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1787\u17B6\u1798\u17BD\u1799\u1780\u17D2\u1793\u17BB\u1784\u1785\u17C6\u178E\u17C4\u1798 ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${e.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${l} ${e.maximum.toString()} ${g.unit??"\u1792\u17B6\u178F\u17BB"}`:`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${e.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${l} ${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${e.origin} ${l} ${e.minimum.toString()} ${g.unit}`:`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${e.origin} ${l} ${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1785\u17B6\u1794\u17CB\u1795\u17D2\u178F\u17BE\u1798\u178A\u17C4\u1799 "${e.prefix}"`:e.format==="ends_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1794\u1789\u17D2\u1785\u1794\u17CB\u178A\u17C4\u1799 "${e.suffix}"`:e.format==="includes"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1798\u17B6\u1793 "${e.includes}"`:e.format==="regex"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1795\u17D2\u1782\u17BC\u1795\u17D2\u1782\u1784\u1793\u17B9\u1784\u1791\u1798\u17D2\u179A\u1784\u17CB\u178A\u17C2\u179B\u1794\u17B6\u1793\u1780\u17C6\u178E\u178F\u17CB ${e.pattern}`:`\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 ${r[e.format]??e.format}`;case"not_multiple_of":return`\u179B\u17C1\u1781\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1787\u17B6\u1796\u17A0\u17BB\u1782\u17BB\u178E\u1793\u17C3 ${e.divisor}`;case"unrecognized_keys":return`\u179A\u1780\u1783\u17BE\u1789\u179F\u17C4\u1798\u17B7\u1793\u179F\u17D2\u1782\u17B6\u179B\u17CB\u17D6 ${b(e.keys,", ")}`;case"invalid_key":return`\u179F\u17C4\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${e.origin}`;case"invalid_union":default:return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C";case"invalid_element":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${e.origin}`}}};function jo(){return{localeError:cl()}}function dl(){return jo()}let hl=()=>{let t={string:{unit:"\uBB38\uC790",verb:"to have"},file:{unit:"\uBC14\uC774\uD2B8",verb:"to have"},array:{unit:"\uAC1C",verb:"to have"},set:{unit:"\uAC1C",verb:"to have"}},r={regex:"\uC785\uB825",email:"\uC774\uBA54\uC77C \uC8FC\uC18C",url:"URL",emoji:"\uC774\uBAA8\uC9C0",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \uB0A0\uC9DC\uC2DC\uAC04",date:"ISO \uB0A0\uC9DC",time:"ISO \uC2DC\uAC04",duration:"ISO \uAE30\uAC04",ipv4:"IPv4 \uC8FC\uC18C",ipv6:"IPv6 \uC8FC\uC18C",cidrv4:"IPv4 \uBC94\uC704",cidrv6:"IPv6 \uBC94\uC704",base64:"base64 \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",base64url:"base64url \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",json_string:"JSON \uBB38\uC790\uC5F4",e164:"E.164 \uBC88\uD638",jwt:"JWT",template_literal:"\uC785\uB825"},n={nan:"NaN"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`\uC798\uBABB\uB41C \uC785\uB825: \uC608\uC0C1 \uD0C0\uC785\uC740 instanceof ${e.expected}, \uBC1B\uC740 \uD0C0\uC785\uC740 ${M}\uC785\uB2C8\uB2E4`:`\uC798\uBABB\uB41C \uC785\uB825: \uC608\uC0C1 \uD0C0\uC785\uC740 ${l}, \uBC1B\uC740 \uD0C0\uC785\uC740 ${M}\uC785\uB2C8\uB2E4`}case"invalid_value":return e.values.length===1?`\uC798\uBABB\uB41C \uC785\uB825: \uAC12\uC740 ${ge(e.values[0])} \uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C \uC635\uC158: ${b(e.values,"\uB610\uB294 ")} \uC911 \uD558\uB098\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"too_big":{let l=e.inclusive?"\uC774\uD558":"\uBBF8\uB9CC",g=l==="\uBBF8\uB9CC"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",M=t[e.origin]??null,be=M?.unit??"\uC694\uC18C";return M?`${e.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${e.maximum.toString()}${be} ${l}${g}`:`${e.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${e.maximum.toString()} ${l}${g}`}case"too_small":{let l=e.inclusive?"\uC774\uC0C1":"\uCD08\uACFC",g=l==="\uC774\uC0C1"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",M=t[e.origin]??null,be=M?.unit??"\uC694\uC18C";return M?`${e.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${e.minimum.toString()}${be} ${l}${g}`:`${e.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${e.minimum.toString()} ${l}${g}`}case"invalid_format":return e.format==="starts_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${e.prefix}"(\uC73C)\uB85C \uC2DC\uC791\uD574\uC57C \uD569\uB2C8\uB2E4`:e.format==="ends_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${e.suffix}"(\uC73C)\uB85C \uB05D\uB098\uC57C \uD569\uB2C8\uB2E4`:e.format==="includes"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${e.includes}"\uC744(\uB97C) \uD3EC\uD568\uD574\uC57C \uD569\uB2C8\uB2E4`:e.format==="regex"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: \uC815\uADDC\uC2DD ${e.pattern} \uD328\uD134\uACFC \uC77C\uCE58\uD574\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C ${r[e.format]??e.format}`;case"not_multiple_of":return`\uC798\uBABB\uB41C \uC22B\uC790: ${e.divisor}\uC758 \uBC30\uC218\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"unrecognized_keys":return`\uC778\uC2DD\uD560 \uC218 \uC5C6\uB294 \uD0A4: ${b(e.keys,", ")}`;case"invalid_key":return`\uC798\uBABB\uB41C \uD0A4: ${e.origin}`;case"invalid_union":default:return"\uC798\uBABB\uB41C \uC785\uB825";case"invalid_element":return`\uC798\uBABB\uB41C \uAC12: ${e.origin}`}}};function pl(){return{localeError:hl()}}let Yn=t=>t.charAt(0).toUpperCase()+t.slice(1);function zo(t){let r=Math.abs(t),n=r%10,e=r%100;return e>=11&&e<=19||n===0?"many":n===1?"one":"few"}let fl=()=>{let t={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne ilgesn\u0117 kaip",notInclusive:"turi b\u016Bti trumpesn\u0117 kaip"},bigger:{inclusive:"turi b\u016Bti ne trumpesn\u0117 kaip",notInclusive:"turi b\u016Bti ilgesn\u0117 kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne didesnis kaip",notInclusive:"turi b\u016Bti ma\u017Eesnis kaip"},bigger:{inclusive:"turi b\u016Bti ne ma\u017Eesnis kaip",notInclusive:"turi b\u016Bti didesnis kaip"}}},array:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}},set:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}}};function r(l,g,M,be){let De=t[l]??null;return De===null?De:{unit:De.unit[g],verb:De.verb[be][M?"inclusive":"notInclusive"]}}let n={regex:"\u012Fvestis",email:"el. pa\u0161to adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm\u0117",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 u\u017Ekoduota eilut\u0117",base64url:"base64url u\u017Ekoduota eilut\u0117",json_string:"JSON eilut\u0117",e164:"E.164 numeris",jwt:"JWT",template_literal:"\u012Fvestis"},e={nan:"NaN",number:"skai\u010Dius",bigint:"sveikasis skai\u010Dius",string:"eilut\u0117",boolean:"login\u0117 reik\u0161m\u0117",undefined:"neapibr\u0117\u017Eta reik\u0161m\u0117",function:"funkcija",symbol:"simbolis",array:"masyvas",object:"objektas",null:"nulin\u0117 reik\u0161m\u0117"};return l=>{switch(l.code){case"invalid_type":{let g=e[l.expected]??l.expected,M=tt(l.input),be=e[M]??M;return/^[A-Z]/.test(l.expected)?`Gautas tipas ${be}, o tik\u0117tasi - instanceof ${l.expected}`:`Gautas tipas ${be}, o tik\u0117tasi - ${g}`}case"invalid_value":return l.values.length===1?`Privalo b\u016Bti ${ge(l.values[0])}`:`Privalo b\u016Bti vienas i\u0161 ${b(l.values,"|")} pasirinkim\u0173`;case"too_big":{let g=e[l.origin]??l.origin,M=r(l.origin,zo(Number(l.maximum)),l.inclusive??!1,"smaller");if(M?.verb)return`${Yn(g??l.origin??"reik\u0161m\u0117")} ${M.verb} ${l.maximum.toString()} ${M.unit??"element\u0173"}`;let be=l.inclusive?"ne didesnis kaip":"ma\u017Eesnis kaip";return`${Yn(g??l.origin??"reik\u0161m\u0117")} turi b\u016Bti ${be} ${l.maximum.toString()} ${M?.unit}`}case"too_small":{let g=e[l.origin]??l.origin,M=r(l.origin,zo(Number(l.minimum)),l.inclusive??!1,"bigger");if(M?.verb)return`${Yn(g??l.origin??"reik\u0161m\u0117")} ${M.verb} ${l.minimum.toString()} ${M.unit??"element\u0173"}`;let be=l.inclusive?"ne ma\u017Eesnis kaip":"didesnis kaip";return`${Yn(g??l.origin??"reik\u0161m\u0117")} turi b\u016Bti ${be} ${l.minimum.toString()} ${M?.unit}`}case"invalid_format":return l.format==="starts_with"?`Eilut\u0117 privalo prasid\u0117ti "${l.prefix}"`:l.format==="ends_with"?`Eilut\u0117 privalo pasibaigti "${l.suffix}"`:l.format==="includes"?`Eilut\u0117 privalo \u012Ftraukti "${l.includes}"`:l.format==="regex"?`Eilut\u0117 privalo atitikti ${l.pattern}`:`Neteisingas ${n[l.format]??l.format}`;case"not_multiple_of":return`Skai\u010Dius privalo b\u016Bti ${l.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpa\u017Eint${l.keys.length>1?"i":"as"} rakt${l.keys.length>1?"ai":"as"}: ${b(l.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":default:return"Klaidinga \u012Fvestis";case"invalid_element":{let g=e[l.origin]??l.origin;return`${Yn(g??l.origin??"reik\u0161m\u0117")} turi klaiding\u0105 \u012Fvest\u012F`}}}};function ml(){return{localeError:fl()}}let Bo=()=>{let t={string:{unit:"\u0437\u043D\u0430\u0446\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},file:{unit:"\u0431\u0430\u0458\u0442\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},array:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},set:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"}},r={regex:"\u0432\u043D\u0435\u0441",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u043D\u0430 \u0435-\u043F\u043E\u0448\u0442\u0430",url:"URL",emoji:"\u0435\u043C\u043E\u045F\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0443\u043C \u0438 \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0443\u043C",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u0432\u0440\u0435\u043C\u0435\u0442\u0440\u0430\u0435\u045A\u0435",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441\u0430",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441\u0430",cidrv4:"IPv4 \u043E\u043F\u0441\u0435\u0433",cidrv6:"IPv6 \u043E\u043F\u0441\u0435\u0433",base64:"base64-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",base64url:"base64url-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",json_string:"JSON \u043D\u0438\u0437\u0430",e164:"E.164 \u0431\u0440\u043E\u0458",jwt:"JWT",template_literal:"\u0432\u043D\u0435\u0441"},n={nan:"NaN",number:"\u0431\u0440\u043E\u0458",array:"\u043D\u0438\u0437\u0430"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 instanceof ${e.expected}, \u043F\u0440\u0438\u043C\u0435\u043D\u043E ${M}`:`\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${l}, \u043F\u0440\u0438\u043C\u0435\u043D\u043E ${M}`}case"invalid_value":return e.values.length===1?`Invalid input: expected ${ge(e.values[0])}`:`\u0413\u0440\u0435\u0448\u0430\u043D\u0430 \u043E\u043F\u0446\u0438\u0458\u0430: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 \u0435\u0434\u043D\u0430 ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${e.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0438\u043C\u0430 ${l}${e.maximum.toString()} ${g.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0438"}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${e.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0431\u0438\u0434\u0435 ${l}${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${e.origin} \u0434\u0430 \u0438\u043C\u0430 ${l}${e.minimum.toString()} ${g.unit}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${e.origin} \u0434\u0430 \u0431\u0438\u0434\u0435 ${l}${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u043D\u0443\u0432\u0430 \u0441\u043E "${e.prefix}"`:e.format==="ends_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u0432\u0440\u0448\u0443\u0432\u0430 \u0441\u043E "${e.suffix}"`:e.format==="includes"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0432\u043A\u043B\u0443\u0447\u0443\u0432\u0430 "${e.includes}"`:e.format==="regex"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u043E\u0434\u0433\u043E\u0430\u0440\u0430 \u043D\u0430 \u043F\u0430\u0442\u0435\u0440\u043D\u043E\u0442 ${e.pattern}`:`Invalid ${r[e.format]??e.format}`;case"not_multiple_of":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0431\u0440\u043E\u0458: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0431\u0438\u0434\u0435 \u0434\u0435\u043B\u0438\u0432 \u0441\u043E ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D\u0438 \u043A\u043B\u0443\u0447\u0435\u0432\u0438":"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D \u043A\u043B\u0443\u0447"}: ${b(e.keys,", ")}`;case"invalid_key":return`\u0413\u0440\u0435\u0448\u0435\u043D \u043A\u043B\u0443\u0447 \u0432\u043E ${e.origin}`;case"invalid_union":return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441";case"invalid_element":return`\u0413\u0440\u0435\u0448\u043D\u0430 \u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442 \u0432\u043E ${e.origin}`;default:return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441"}}};function Mo(){return{localeError:Bo()}}let yl=()=>{let t={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}},r={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"},n={nan:"NaN",number:"nombor"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`Input tidak sah: dijangka instanceof ${e.expected}, diterima ${M}`:`Input tidak sah: dijangka ${l}, diterima ${M}`}case"invalid_value":return e.values.length===1?`Input tidak sah: dijangka ${ge(e.values[0])}`:`Pilihan tidak sah: dijangka salah satu daripada ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`Terlalu besar: dijangka ${e.origin??"nilai"} ${g.verb} ${l}${e.maximum.toString()} ${g.unit??"elemen"}`:`Terlalu besar: dijangka ${e.origin??"nilai"} adalah ${l}${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`Terlalu kecil: dijangka ${e.origin} ${g.verb} ${l}${e.minimum.toString()} ${g.unit}`:`Terlalu kecil: dijangka ${e.origin} adalah ${l}${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`String tidak sah: mesti bermula dengan "${e.prefix}"`:e.format==="ends_with"?`String tidak sah: mesti berakhir dengan "${e.suffix}"`:e.format==="includes"?`String tidak sah: mesti mengandungi "${e.includes}"`:e.format==="regex"?`String tidak sah: mesti sepadan dengan corak ${e.pattern}`:`${r[e.format]??e.format} tidak sah`;case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${e.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${b(e.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${e.origin}`;case"invalid_union":default:return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${e.origin}`}}};function Wo(){return{localeError:yl()}}let gl=()=>{let t={string:{unit:"tekens",verb:"heeft"},file:{unit:"bytes",verb:"heeft"},array:{unit:"elementen",verb:"heeft"},set:{unit:"elementen",verb:"heeft"}},r={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"},n={nan:"NaN",number:"getal"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`Ongeldige invoer: verwacht instanceof ${e.expected}, ontving ${M}`:`Ongeldige invoer: verwacht ${l}, ontving ${M}`}case"invalid_value":return e.values.length===1?`Ongeldige invoer: verwacht ${ge(e.values[0])}`:`Ongeldige optie: verwacht \xE9\xE9n van ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null,M=e.origin==="date"?"laat":e.origin==="string"?"lang":"groot";return g?`Te ${M}: verwacht dat ${e.origin??"waarde"} ${l}${e.maximum.toString()} ${g.unit??"elementen"} ${g.verb}`:`Te ${M}: verwacht dat ${e.origin??"waarde"} ${l}${e.maximum.toString()} is`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null,M=e.origin==="date"?"vroeg":e.origin==="string"?"kort":"klein";return g?`Te ${M}: verwacht dat ${e.origin} ${l}${e.minimum.toString()} ${g.unit} ${g.verb}`:`Te ${M}: verwacht dat ${e.origin} ${l}${e.minimum.toString()} is`}case"invalid_format":return e.format==="starts_with"?`Ongeldige tekst: moet met "${e.prefix}" beginnen`:e.format==="ends_with"?`Ongeldige tekst: moet op "${e.suffix}" eindigen`:e.format==="includes"?`Ongeldige tekst: moet "${e.includes}" bevatten`:e.format==="regex"?`Ongeldige tekst: moet overeenkomen met patroon ${e.pattern}`:`Ongeldig: ${r[e.format]??e.format}`;case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${e.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${e.keys.length>1?"s":""}: ${b(e.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${e.origin}`;case"invalid_union":default:return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${e.origin}`}}};function vl(){return{localeError:gl()}}let Be=()=>{let t={string:{unit:"tegn",verb:"\xE5 ha"},file:{unit:"bytes",verb:"\xE5 ha"},array:{unit:"elementer",verb:"\xE5 inneholde"},set:{unit:"elementer",verb:"\xE5 inneholde"}},r={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"},n={nan:"NaN",number:"tall",array:"liste"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`Ugyldig input: forventet instanceof ${e.expected}, fikk ${M}`:`Ugyldig input: forventet ${l}, fikk ${M}`}case"invalid_value":return e.values.length===1?`Ugyldig verdi: forventet ${ge(e.values[0])}`:`Ugyldig valg: forventet en av ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`For stor(t): forventet ${e.origin??"value"} til \xE5 ha ${l}${e.maximum.toString()} ${g.unit??"elementer"}`:`For stor(t): forventet ${e.origin??"value"} til \xE5 ha ${l}${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`For lite(n): forventet ${e.origin} til \xE5 ha ${l}${e.minimum.toString()} ${g.unit}`:`For lite(n): forventet ${e.origin} til \xE5 ha ${l}${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`Ugyldig streng: m\xE5 starte med "${e.prefix}"`:e.format==="ends_with"?`Ugyldig streng: m\xE5 ende med "${e.suffix}"`:e.format==="includes"?`Ugyldig streng: m\xE5 inneholde "${e.includes}"`:e.format==="regex"?`Ugyldig streng: m\xE5 matche m\xF8nsteret ${e.pattern}`:`Ugyldig ${r[e.format]??e.format}`;case"not_multiple_of":return`Ugyldig tall: m\xE5 v\xE6re et multiplum av ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"Ukjente n\xF8kler":"Ukjent n\xF8kkel"}: ${b(e.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8kkel i ${e.origin}`;case"invalid_union":default:return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${e.origin}`}}};function he(){return{localeError:Be()}}let Me=()=>{let t={string:{unit:"harf",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"unsur",verb:"olmal\u0131d\u0131r"},set:{unit:"unsur",verb:"olmal\u0131d\u0131r"}},r={regex:"giren",email:"epostag\xE2h",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO heng\xE2m\u0131",date:"ISO tarihi",time:"ISO zaman\u0131",duration:"ISO m\xFCddeti",ipv4:"IPv4 ni\u015F\xE2n\u0131",ipv6:"IPv6 ni\u015F\xE2n\u0131",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-\u015Fifreli metin",base64url:"base64url-\u015Fifreli metin",json_string:"JSON metin",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"giren"},n={nan:"NaN",number:"numara",array:"saf",null:"gayb"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`F\xE2sit giren: umulan instanceof ${e.expected}, al\u0131nan ${M}`:`F\xE2sit giren: umulan ${l}, al\u0131nan ${M}`}case"invalid_value":return e.values.length===1?`F\xE2sit giren: umulan ${ge(e.values[0])}`:`F\xE2sit tercih: m\xFBteberler ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`Fazla b\xFCy\xFCk: ${e.origin??"value"}, ${l}${e.maximum.toString()} ${g.unit??"elements"} sahip olmal\u0131yd\u0131.`:`Fazla b\xFCy\xFCk: ${e.origin??"value"}, ${l}${e.maximum.toString()} olmal\u0131yd\u0131.`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`Fazla k\xFC\xE7\xFCk: ${e.origin}, ${l}${e.minimum.toString()} ${g.unit} sahip olmal\u0131yd\u0131.`:`Fazla k\xFC\xE7\xFCk: ${e.origin}, ${l}${e.minimum.toString()} olmal\u0131yd\u0131.`}case"invalid_format":return e.format==="starts_with"?`F\xE2sit metin: "${e.prefix}" ile ba\u015Flamal\u0131.`:e.format==="ends_with"?`F\xE2sit metin: "${e.suffix}" ile bitmeli.`:e.format==="includes"?`F\xE2sit metin: "${e.includes}" ihtiv\xE2 etmeli.`:e.format==="regex"?`F\xE2sit metin: ${e.pattern} nak\u015F\u0131na uymal\u0131.`:`F\xE2sit ${r[e.format]??e.format}`;case"not_multiple_of":return`F\xE2sit say\u0131: ${e.divisor} kat\u0131 olmal\u0131yd\u0131.`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar ${e.keys.length>1?"s":""}: ${b(e.keys,", ")}`;case"invalid_key":return`${e.origin} i\xE7in tan\u0131nmayan anahtar var.`;case"invalid_union":return"Giren tan\u0131namad\u0131.";case"invalid_element":return`${e.origin} i\xE7in tan\u0131nmayan k\u0131ymet var.`;default:return"K\u0131ymet tan\u0131namad\u0131."}}};function Pe(){return{localeError:Me()}}let nt=()=>{let t={string:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},file:{unit:"\u0628\u0627\u06CC\u067C\u0633",verb:"\u0648\u0644\u0631\u064A"},array:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},set:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"}},r={regex:"\u0648\u0631\u0648\u062F\u064A",email:"\u0628\u0631\u06CC\u069A\u0646\u0627\u0644\u06CC\u06A9",url:"\u06CC\u0648 \u0622\u0631 \u0627\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0646\u06CC\u067C\u0647 \u0627\u0648 \u0648\u062E\u062A",date:"\u0646\u06D0\u067C\u0647",time:"\u0648\u062E\u062A",duration:"\u0645\u0648\u062F\u0647",ipv4:"\u062F IPv4 \u067E\u062A\u0647",ipv6:"\u062F IPv6 \u067E\u062A\u0647",cidrv4:"\u062F IPv4 \u0633\u0627\u062D\u0647",cidrv6:"\u062F IPv6 \u0633\u0627\u062D\u0647",base64:"base64-encoded \u0645\u062A\u0646",base64url:"base64url-encoded \u0645\u062A\u0646",json_string:"JSON \u0645\u062A\u0646",e164:"\u062F E.164 \u0634\u0645\u06D0\u0631\u0647",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u064A"},n={nan:"NaN",number:"\u0639\u062F\u062F",array:"\u0627\u0631\u06D0"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F instanceof ${e.expected} \u0648\u0627\u06CC, \u0645\u06AB\u0631 ${M} \u062A\u0631\u0644\u0627\u0633\u0647 \u0634\u0648`:`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${l} \u0648\u0627\u06CC, \u0645\u06AB\u0631 ${M} \u062A\u0631\u0644\u0627\u0633\u0647 \u0634\u0648`}case"invalid_value":return e.values.length===1?`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${ge(e.values[0])} \u0648\u0627\u06CC`:`\u0646\u0627\u0633\u0645 \u0627\u0646\u062A\u062E\u0627\u0628: \u0628\u0627\u06CC\u062F \u06CC\u0648 \u0644\u0647 ${b(e.values,"|")} \u0685\u062E\u0647 \u0648\u0627\u06CC`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${e.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${l}${e.maximum.toString()} ${g.unit??"\u0639\u0646\u0635\u0631\u0648\u0646\u0647"} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${e.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${l}${e.maximum.toString()} \u0648\u064A`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${e.origin} \u0628\u0627\u06CC\u062F ${l}${e.minimum.toString()} ${g.unit} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${e.origin} \u0628\u0627\u06CC\u062F ${l}${e.minimum.toString()} \u0648\u064A`}case"invalid_format":return e.format==="starts_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${e.prefix}" \u0633\u0631\u0647 \u067E\u06CC\u0644 \u0634\u064A`:e.format==="ends_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${e.suffix}" \u0633\u0631\u0647 \u067E\u0627\u06CC \u062A\u0647 \u0648\u0631\u0633\u064A\u0696\u064A`:e.format==="includes"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F "${e.includes}" \u0648\u0644\u0631\u064A`:e.format==="regex"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F ${e.pattern} \u0633\u0631\u0647 \u0645\u0637\u0627\u0628\u0642\u062A \u0648\u0644\u0631\u064A`:`${r[e.format]??e.format} \u0646\u0627\u0633\u0645 \u062F\u06CC`;case"not_multiple_of":return`\u0646\u0627\u0633\u0645 \u0639\u062F\u062F: \u0628\u0627\u06CC\u062F \u062F ${e.divisor} \u0645\u0636\u0631\u0628 \u0648\u064A`;case"unrecognized_keys":return`\u0646\u0627\u0633\u0645 ${e.keys.length>1?"\u06A9\u0644\u06CC\u0689\u0648\u0646\u0647":"\u06A9\u0644\u06CC\u0689"}: ${b(e.keys,", ")}`;case"invalid_key":return`\u0646\u0627\u0633\u0645 \u06A9\u0644\u06CC\u0689 \u067E\u0647 ${e.origin} \u06A9\u06D0`;case"invalid_union":default:return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A";case"invalid_element":return`\u0646\u0627\u0633\u0645 \u0639\u0646\u0635\u0631 \u067E\u0647 ${e.origin} \u06A9\u06D0`}}};function ot(){return{localeError:nt()}}let ft=()=>{let t={string:{unit:"znak\xF3w",verb:"mie\u0107"},file:{unit:"bajt\xF3w",verb:"mie\u0107"},array:{unit:"element\xF3w",verb:"mie\u0107"},set:{unit:"element\xF3w",verb:"mie\u0107"}},r={regex:"wyra\u017Cenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"ci\u0105g znak\xF3w zakodowany w formacie base64",base64url:"ci\u0105g znak\xF3w zakodowany w formacie base64url",json_string:"ci\u0105g znak\xF3w w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wej\u015Bcie"},n={nan:"NaN",number:"liczba",array:"tablica"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano instanceof ${e.expected}, otrzymano ${M}`:`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${l}, otrzymano ${M}`}case"invalid_value":return e.values.length===1?`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${ge(e.values[0])}`:`Nieprawid\u0142owa opcja: oczekiwano jednej z warto\u015Bci ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`Za du\u017Ca warto\u015B\u0107: oczekiwano, \u017Ce ${e.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${l}${e.maximum.toString()} ${g.unit??"element\xF3w"}`:`Zbyt du\u017C(y/a/e): oczekiwano, \u017Ce ${e.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${l}${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`Za ma\u0142a warto\u015B\u0107: oczekiwano, \u017Ce ${e.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${l}${e.minimum.toString()} ${g.unit??"element\xF3w"}`:`Zbyt ma\u0142(y/a/e): oczekiwano, \u017Ce ${e.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${l}${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zaczyna\u0107 si\u0119 od "${e.prefix}"`:e.format==="ends_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi ko\u0144czy\u0107 si\u0119 na "${e.suffix}"`:e.format==="includes"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zawiera\u0107 "${e.includes}"`:e.format==="regex"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi odpowiada\u0107 wzorcowi ${e.pattern}`:`Nieprawid\u0142ow(y/a/e) ${r[e.format]??e.format}`;case"not_multiple_of":return`Nieprawid\u0142owa liczba: musi by\u0107 wielokrotno\u015Bci\u0105 ${e.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${e.keys.length>1?"s":""}: ${b(e.keys,", ")}`;case"invalid_key":return`Nieprawid\u0142owy klucz w ${e.origin}`;case"invalid_union":return"Nieprawid\u0142owe dane wej\u015Bciowe";case"invalid_element":return`Nieprawid\u0142owa warto\u015B\u0107 w ${e.origin}`;default:return"Nieprawid\u0142owe dane wej\u015Bciowe"}}};function Rt(){return{localeError:ft()}}let zt=()=>{let t={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}},r={regex:"padr\xE3o",email:"endere\xE7o de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"dura\xE7\xE3o ISO",ipv4:"endere\xE7o IPv4",ipv6:"endere\xE7o IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"},n={nan:"NaN",number:"n\xFAmero",null:"nulo"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`Tipo inv\xE1lido: esperado instanceof ${e.expected}, recebido ${M}`:`Tipo inv\xE1lido: esperado ${l}, recebido ${M}`}case"invalid_value":return e.values.length===1?`Entrada inv\xE1lida: esperado ${ge(e.values[0])}`:`Op\xE7\xE3o inv\xE1lida: esperada uma das ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`Muito grande: esperado que ${e.origin??"valor"} tivesse ${l}${e.maximum.toString()} ${g.unit??"elementos"}`:`Muito grande: esperado que ${e.origin??"valor"} fosse ${l}${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`Muito pequeno: esperado que ${e.origin} tivesse ${l}${e.minimum.toString()} ${g.unit}`:`Muito pequeno: esperado que ${e.origin} fosse ${l}${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`Texto inv\xE1lido: deve come\xE7ar com "${e.prefix}"`:e.format==="ends_with"?`Texto inv\xE1lido: deve terminar com "${e.suffix}"`:e.format==="includes"?`Texto inv\xE1lido: deve incluir "${e.includes}"`:e.format==="regex"?`Texto inv\xE1lido: deve corresponder ao padr\xE3o ${e.pattern}`:`${r[e.format]??e.format} inv\xE1lido`;case"not_multiple_of":return`N\xFAmero inv\xE1lido: deve ser m\xFAltiplo de ${e.divisor}`;case"unrecognized_keys":return`Chave${e.keys.length>1?"s":""} desconhecida${e.keys.length>1?"s":""}: ${b(e.keys,", ")}`;case"invalid_key":return`Chave inv\xE1lida em ${e.origin}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido em ${e.origin}`;default:return"Campo inv\xE1lido"}}};function Kt(){return{localeError:zt()}}function Lt(t,r,n,e){let l=Math.abs(t),g=l%10,M=l%100;return M>=11&&M<=19?e:g===1?r:g>=2&&g<=4?n:e}let Bt=()=>{let t={string:{unit:{one:"\u0441\u0438\u043C\u0432\u043E\u043B",few:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",many:"\u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u0430",many:"\u0431\u0430\u0439\u0442"},verb:"\u0438\u043C\u0435\u0442\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"}},r={regex:"\u0432\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043C\u044F",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u044F",duration:"ISO \u0434\u043B\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64",base64url:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64url",json_string:"JSON \u0441\u0442\u0440\u043E\u043A\u0430",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0432\u043E\u0434"},n={nan:"NaN",number:"\u0447\u0438\u0441\u043B\u043E",array:"\u043C\u0430\u0441\u0441\u0438\u0432"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C instanceof ${e.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E ${M}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${l}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E ${M}`}case"invalid_value":return e.values.length===1?`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${ge(e.values[0])}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0430\u0440\u0438\u0430\u043D\u0442: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0434\u043D\u043E \u0438\u0437 ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;if(g){let M=Lt(Number(e.maximum),g.unit.one,g.unit.few,g.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${e.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${l}${e.maximum.toString()} ${M}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${e.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 ${l}${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;if(g){let M=Lt(Number(e.minimum),g.unit.one,g.unit.few,g.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${e.origin} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${l}${e.minimum.toString()} ${M}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${e.origin} \u0431\u0443\u0434\u0435\u0442 ${l}${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u043D\u0430\u0447\u0438\u043D\u0430\u0442\u044C\u0441\u044F \u0441 "${e.prefix}"`:e.format==="ends_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0437\u0430\u043A\u0430\u043D\u0447\u0438\u0432\u0430\u0442\u044C\u0441\u044F \u043D\u0430 "${e.suffix}"`:e.format==="includes"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C "${e.includes}"`:e.format==="regex"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043E\u0432\u0430\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${e.pattern}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 ${r[e.format]??e.format}`;case"not_multiple_of":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0447\u0438\u0441\u043B\u043E: \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${e.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u043E\u0437\u043D\u0430\u043D\u043D${e.keys.length>1?"\u044B\u0435":"\u044B\u0439"} \u043A\u043B\u044E\u0447${e.keys.length>1?"\u0438":""}: ${b(e.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043A\u043B\u044E\u0447 \u0432 ${e.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435";case"invalid_element":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0432 ${e.origin}`;default:return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435"}}};function xt(){return{localeError:Bt()}}let Dt=()=>{let t={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}},r={regex:"vnos",email:"e-po\u0161tni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in \u010Das",date:"ISO datum",time:"ISO \u010Das",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 \u0161tevilka",jwt:"JWT",template_literal:"vnos"},n={nan:"NaN",number:"\u0161tevilo",array:"tabela"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`Neveljaven vnos: pri\u010Dakovano instanceof ${e.expected}, prejeto ${M}`:`Neveljaven vnos: pri\u010Dakovano ${l}, prejeto ${M}`}case"invalid_value":return e.values.length===1?`Neveljaven vnos: pri\u010Dakovano ${ge(e.values[0])}`:`Neveljavna mo\u017Enost: pri\u010Dakovano eno izmed ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`Preveliko: pri\u010Dakovano, da bo ${e.origin??"vrednost"} imelo ${l}${e.maximum.toString()} ${g.unit??"elementov"}`:`Preveliko: pri\u010Dakovano, da bo ${e.origin??"vrednost"} ${l}${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`Premajhno: pri\u010Dakovano, da bo ${e.origin} imelo ${l}${e.minimum.toString()} ${g.unit}`:`Premajhno: pri\u010Dakovano, da bo ${e.origin} ${l}${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`Neveljaven niz: mora se za\u010Deti z "${e.prefix}"`:e.format==="ends_with"?`Neveljaven niz: mora se kon\u010Dati z "${e.suffix}"`:e.format==="includes"?`Neveljaven niz: mora vsebovati "${e.includes}"`:e.format==="regex"?`Neveljaven niz: mora ustrezati vzorcu ${e.pattern}`:`Neveljaven ${r[e.format]??e.format}`;case"not_multiple_of":return`Neveljavno \u0161tevilo: mora biti ve\u010Dkratnik ${e.divisor}`;case"unrecognized_keys":return`Neprepoznan${e.keys.length>1?"i klju\u010Di":" klju\u010D"}: ${b(e.keys,", ")}`;case"invalid_key":return`Neveljaven klju\u010D v ${e.origin}`;case"invalid_union":default:return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${e.origin}`}}};function Ht(){return{localeError:Dt()}}let dr=()=>{let t={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att inneh\xE5lla"},set:{unit:"objekt",verb:"att inneh\xE5lla"}},r={regex:"regulj\xE4rt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad str\xE4ng",base64url:"base64url-kodad str\xE4ng",json_string:"JSON-str\xE4ng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"},n={nan:"NaN",number:"antal",array:"lista"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`Ogiltig inmatning: f\xF6rv\xE4ntat instanceof ${e.expected}, fick ${M}`:`Ogiltig inmatning: f\xF6rv\xE4ntat ${l}, fick ${M}`}case"invalid_value":return e.values.length===1?`Ogiltig inmatning: f\xF6rv\xE4ntat ${ge(e.values[0])}`:`Ogiltigt val: f\xF6rv\xE4ntade en av ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`F\xF6r stor(t): f\xF6rv\xE4ntade ${e.origin??"v\xE4rdet"} att ha ${l}${e.maximum.toString()} ${g.unit??"element"}`:`F\xF6r stor(t): f\xF6rv\xE4ntat ${e.origin??"v\xE4rdet"} att ha ${l}${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`F\xF6r lite(t): f\xF6rv\xE4ntade ${e.origin??"v\xE4rdet"} att ha ${l}${e.minimum.toString()} ${g.unit}`:`F\xF6r lite(t): f\xF6rv\xE4ntade ${e.origin??"v\xE4rdet"} att ha ${l}${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`Ogiltig str\xE4ng: m\xE5ste b\xF6rja med "${e.prefix}"`:e.format==="ends_with"?`Ogiltig str\xE4ng: m\xE5ste sluta med "${e.suffix}"`:e.format==="includes"?`Ogiltig str\xE4ng: m\xE5ste inneh\xE5lla "${e.includes}"`:e.format==="regex"?`Ogiltig str\xE4ng: m\xE5ste matcha m\xF6nstret "${e.pattern}"`:`Ogiltig(t) ${r[e.format]??e.format}`;case"not_multiple_of":return`Ogiltigt tal: m\xE5ste vara en multipel av ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"Ok\xE4nda nycklar":"Ok\xE4nd nyckel"}: ${b(e.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${e.origin??"v\xE4rdet"}`;case"invalid_union":default:return"Ogiltig input";case"invalid_element":return`Ogiltigt v\xE4rde i ${e.origin??"v\xE4rdet"}`}}};function Gt(){return{localeError:dr()}}let cr=()=>{let t={string:{unit:"\u0B8E\u0BB4\u0BC1\u0BA4\u0BCD\u0BA4\u0BC1\u0B95\u0BCD\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},file:{unit:"\u0BAA\u0BC8\u0B9F\u0BCD\u0B9F\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},array:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},set:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"}},r={regex:"\u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1",email:"\u0BAE\u0BBF\u0BA9\u0BCD\u0BA9\u0B9E\u0BCD\u0B9A\u0BB2\u0BCD \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0BA4\u0BC7\u0BA4\u0BBF \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",date:"ISO \u0BA4\u0BC7\u0BA4\u0BBF",time:"ISO \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",duration:"ISO \u0B95\u0BBE\u0BB2 \u0B85\u0BB3\u0BB5\u0BC1",ipv4:"IPv4 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",ipv6:"IPv6 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",cidrv4:"IPv4 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",cidrv6:"IPv6 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",base64:"base64-encoded \u0B9A\u0BB0\u0BAE\u0BCD",base64url:"base64url-encoded \u0B9A\u0BB0\u0BAE\u0BCD",json_string:"JSON \u0B9A\u0BB0\u0BAE\u0BCD",e164:"E.164 \u0B8E\u0BA3\u0BCD",jwt:"JWT",template_literal:"input"},n={nan:"NaN",number:"\u0B8E\u0BA3\u0BCD",array:"\u0B85\u0BA3\u0BBF",null:"\u0BB5\u0BC6\u0BB1\u0BC1\u0BAE\u0BC8"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 instanceof ${e.expected}, \u0BAA\u0BC6\u0BB1\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${M}`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${l}, \u0BAA\u0BC6\u0BB1\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${M}`}case"invalid_value":return e.values.length===1?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${ge(e.values[0])}`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0BB0\u0BC1\u0BAA\u0BCD\u0BAA\u0BAE\u0BCD: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${b(e.values,"|")} \u0B87\u0BB2\u0BCD \u0B92\u0BA9\u0BCD\u0BB1\u0BC1`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${e.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${l}${e.maximum.toString()} ${g.unit??"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD"} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${e.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${l}${e.maximum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${e.origin} ${l}${e.minimum.toString()} ${g.unit} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${e.origin} ${l}${e.minimum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"invalid_format":return e.format==="starts_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${e.prefix}" \u0B87\u0BB2\u0BCD \u0BA4\u0BCA\u0B9F\u0B99\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:e.format==="ends_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${e.suffix}" \u0B87\u0BB2\u0BCD \u0BAE\u0BC1\u0B9F\u0BBF\u0BB5\u0B9F\u0BC8\u0BAF \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:e.format==="includes"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${e.includes}" \u0B90 \u0B89\u0BB3\u0BCD\u0BB3\u0B9F\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:e.format==="regex"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: ${e.pattern} \u0BAE\u0BC1\u0BB1\u0BC8\u0BAA\u0BBE\u0B9F\u0BCD\u0B9F\u0BC1\u0B9F\u0BA9\u0BCD \u0BAA\u0BCA\u0BB0\u0BC1\u0BA8\u0BCD\u0BA4 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 ${r[e.format]??e.format}`;case"not_multiple_of":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B8E\u0BA3\u0BCD: ${e.divisor} \u0B87\u0BA9\u0BCD \u0BAA\u0BB2\u0BAE\u0BBE\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;case"unrecognized_keys":return`\u0B85\u0B9F\u0BC8\u0BAF\u0BBE\u0BB3\u0BAE\u0BCD \u0BA4\u0BC6\u0BB0\u0BBF\u0BAF\u0BBE\u0BA4 \u0BB5\u0BBF\u0B9A\u0BC8${e.keys.length>1?"\u0B95\u0BB3\u0BCD":""}: ${b(e.keys,", ")}`;case"invalid_key":return`${e.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0B9A\u0BC8`;case"invalid_union":return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1";case"invalid_element":return`${e.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1`;default:return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1"}}};function _r(){return{localeError:cr()}}let yr=()=>{let t={string:{unit:"\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},file:{unit:"\u0E44\u0E1A\u0E15\u0E4C",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},array:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},set:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"}},r={regex:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19",email:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48\u0E2D\u0E35\u0E40\u0E21\u0E25",url:"URL",emoji:"\u0E2D\u0E34\u0E42\u0E21\u0E08\u0E34",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",date:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E1A\u0E1A ISO",time:"\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",duration:"\u0E0A\u0E48\u0E27\u0E07\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",ipv4:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv4",ipv6:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv6",cidrv4:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv4",cidrv6:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv6",base64:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64",base64url:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64 \u0E2A\u0E33\u0E2B\u0E23\u0E31\u0E1A URL",json_string:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A JSON",e164:"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07\u0E1B\u0E23\u0E30\u0E40\u0E17\u0E28 (E.164)",jwt:"\u0E42\u0E17\u0E40\u0E04\u0E19 JWT",template_literal:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19"},n={nan:"NaN",number:"\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02",array:"\u0E2D\u0E32\u0E23\u0E4C\u0E40\u0E23\u0E22\u0E4C (Array)",null:"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E04\u0E48\u0E32 (null)"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 instanceof ${e.expected} \u0E41\u0E15\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A ${M}`:`\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${l} \u0E41\u0E15\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A ${M}`}case"invalid_value":return e.values.length===1?`\u0E04\u0E48\u0E32\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${ge(e.values[0])}`:`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19\u0E2B\u0E19\u0E36\u0E48\u0E07\u0E43\u0E19 ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"\u0E44\u0E21\u0E48\u0E40\u0E01\u0E34\u0E19":"\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32",g=t[e.origin]??null;return g?`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${e.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${l} ${e.maximum.toString()} ${g.unit??"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23"}`:`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${e.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${l} ${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?"\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22":"\u0E21\u0E32\u0E01\u0E01\u0E27\u0E48\u0E32",g=t[e.origin]??null;return g?`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${e.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${l} ${e.minimum.toString()} ${g.unit}`:`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${e.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${l} ${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E02\u0E36\u0E49\u0E19\u0E15\u0E49\u0E19\u0E14\u0E49\u0E27\u0E22 "${e.prefix}"`:e.format==="ends_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E25\u0E07\u0E17\u0E49\u0E32\u0E22\u0E14\u0E49\u0E27\u0E22 "${e.suffix}"`:e.format==="includes"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E21\u0E35 "${e.includes}" \u0E2D\u0E22\u0E39\u0E48\u0E43\u0E19\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21`:e.format==="regex"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14 ${e.pattern}`:`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: ${r[e.format]??e.format}`;case"not_multiple_of":return`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E40\u0E1B\u0E47\u0E19\u0E08\u0E33\u0E19\u0E27\u0E19\u0E17\u0E35\u0E48\u0E2B\u0E32\u0E23\u0E14\u0E49\u0E27\u0E22 ${e.divisor} \u0E44\u0E14\u0E49\u0E25\u0E07\u0E15\u0E31\u0E27`;case"unrecognized_keys":return`\u0E1E\u0E1A\u0E04\u0E35\u0E22\u0E4C\u0E17\u0E35\u0E48\u0E44\u0E21\u0E48\u0E23\u0E39\u0E49\u0E08\u0E31\u0E01: ${b(e.keys,", ")}`;case"invalid_key":return`\u0E04\u0E35\u0E22\u0E4C\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${e.origin}`;case"invalid_union":return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E44\u0E21\u0E48\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E22\u0E39\u0E40\u0E19\u0E35\u0E22\u0E19\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14\u0E44\u0E27\u0E49";case"invalid_element":return`\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${e.origin}`;default:return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"}}};function sr(){return{localeError:yr()}}let Ar=()=>{let t={string:{unit:"karakter",verb:"olmal\u0131"},file:{unit:"bayt",verb:"olmal\u0131"},array:{unit:"\xF6\u011Fe",verb:"olmal\u0131"},set:{unit:"\xF6\u011Fe",verb:"olmal\u0131"}},r={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO s\xFCre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral\u0131\u011F\u0131",cidrv6:"IPv6 aral\u0131\u011F\u0131",base64:"base64 ile \u015Fifrelenmi\u015F metin",base64url:"base64url ile \u015Fifrelenmi\u015F metin",json_string:"JSON dizesi",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"\u015Eablon dizesi"},n={nan:"NaN"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`Ge\xE7ersiz de\u011Fer: beklenen instanceof ${e.expected}, al\u0131nan ${M}`:`Ge\xE7ersiz de\u011Fer: beklenen ${l}, al\u0131nan ${M}`}case"invalid_value":return e.values.length===1?`Ge\xE7ersiz de\u011Fer: beklenen ${ge(e.values[0])}`:`Ge\xE7ersiz se\xE7enek: a\u015Fa\u011F\u0131dakilerden biri olmal\u0131: ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`\xC7ok b\xFCy\xFCk: beklenen ${e.origin??"de\u011Fer"} ${l}${e.maximum.toString()} ${g.unit??"\xF6\u011Fe"}`:`\xC7ok b\xFCy\xFCk: beklenen ${e.origin??"de\u011Fer"} ${l}${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`\xC7ok k\xFC\xE7\xFCk: beklenen ${e.origin} ${l}${e.minimum.toString()} ${g.unit}`:`\xC7ok k\xFC\xE7\xFCk: beklenen ${e.origin} ${l}${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`Ge\xE7ersiz metin: "${e.prefix}" ile ba\u015Flamal\u0131`:e.format==="ends_with"?`Ge\xE7ersiz metin: "${e.suffix}" ile bitmeli`:e.format==="includes"?`Ge\xE7ersiz metin: "${e.includes}" i\xE7ermeli`:e.format==="regex"?`Ge\xE7ersiz metin: ${e.pattern} desenine uymal\u0131`:`Ge\xE7ersiz ${r[e.format]??e.format}`;case"not_multiple_of":return`Ge\xE7ersiz say\u0131: ${e.divisor} ile tam b\xF6l\xFCnebilmeli`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar${e.keys.length>1?"lar":""}: ${b(e.keys,", ")}`;case"invalid_key":return`${e.origin} i\xE7inde ge\xE7ersiz anahtar`;case"invalid_union":return"Ge\xE7ersiz de\u011Fer";case"invalid_element":return`${e.origin} i\xE7inde ge\xE7ersiz de\u011Fer`;default:return"Ge\xE7ersiz de\u011Fer"}}};function Dr(){return{localeError:Ar()}}let ri=()=>{let t={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},file:{unit:"\u0431\u0430\u0439\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"}},r={regex:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u0435\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u0457 \u043F\u043E\u0448\u0442\u0438",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0434\u0430\u0442\u0430 \u0442\u0430 \u0447\u0430\u0441 ISO",date:"\u0434\u0430\u0442\u0430 ISO",time:"\u0447\u0430\u0441 ISO",duration:"\u0442\u0440\u0438\u0432\u0430\u043B\u0456\u0441\u0442\u044C ISO",ipv4:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv4",ipv6:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv6",cidrv4:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv4",cidrv6:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv6",base64:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64",base64url:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64url",json_string:"\u0440\u044F\u0434\u043E\u043A JSON",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"},n={nan:"NaN",number:"\u0447\u0438\u0441\u043B\u043E",array:"\u043C\u0430\u0441\u0438\u0432"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F instanceof ${e.expected}, \u043E\u0442\u0440\u0438\u043C\u0430\u043D\u043E ${M}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${l}, \u043E\u0442\u0440\u0438\u043C\u0430\u043D\u043E ${M}`}case"invalid_value":return e.values.length===1?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${ge(e.values[0])}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0430 \u043E\u043F\u0446\u0456\u044F: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F \u043E\u0434\u043D\u0435 \u0437 ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${e.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} ${g.verb} ${l}${e.maximum.toString()} ${g.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432"}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${e.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} \u0431\u0443\u0434\u0435 ${l}${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${e.origin} ${g.verb} ${l}${e.minimum.toString()} ${g.unit}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${e.origin} \u0431\u0443\u0434\u0435 ${l}${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043F\u043E\u0447\u0438\u043D\u0430\u0442\u0438\u0441\u044F \u0437 "${e.prefix}"`:e.format==="ends_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0437\u0430\u043A\u0456\u043D\u0447\u0443\u0432\u0430\u0442\u0438\u0441\u044F \u043D\u0430 "${e.suffix}"`:e.format==="includes"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043C\u0456\u0441\u0442\u0438\u0442\u0438 "${e.includes}"`:e.format==="regex"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0432\u0456\u0434\u043F\u043E\u0432\u0456\u0434\u0430\u0442\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${e.pattern}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 ${r[e.format]??e.format}`;case"not_multiple_of":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0447\u0438\u0441\u043B\u043E: \u043F\u043E\u0432\u0438\u043D\u043D\u043E \u0431\u0443\u0442\u0438 \u043A\u0440\u0430\u0442\u043D\u0438\u043C ${e.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u043E\u0437\u043F\u0456\u0437\u043D\u0430\u043D\u0438\u0439 \u043A\u043B\u044E\u0447${e.keys.length>1?"\u0456":""}: ${b(e.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u043A\u043B\u044E\u0447 \u0443 ${e.origin}`;case"invalid_union":return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456";case"invalid_element":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F \u0443 ${e.origin}`;default:return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"}}};function hi(){return{localeError:ri()}}function Fo(){return hi()}let ki=()=>{let t={string:{unit:"\u062D\u0631\u0648\u0641",verb:"\u06C1\u0648\u0646\u0627"},file:{unit:"\u0628\u0627\u0626\u0679\u0633",verb:"\u06C1\u0648\u0646\u0627"},array:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"},set:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"}},r={regex:"\u0627\u0646 \u067E\u0679",email:"\u0627\u06CC \u0645\u06CC\u0644 \u0627\u06CC\u0688\u0631\u06CC\u0633",url:"\u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",uuidv4:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 4",uuidv6:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 6",nanoid:"\u0646\u06CC\u0646\u0648 \u0622\u0626\u06CC \u0688\u06CC",guid:"\u062C\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid2:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC 2",ulid:"\u06CC\u0648 \u0627\u06CC\u0644 \u0622\u0626\u06CC \u0688\u06CC",xid:"\u0627\u06CC\u06A9\u0633 \u0622\u0626\u06CC \u0688\u06CC",ksuid:"\u06A9\u06D2 \u0627\u06CC\u0633 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",datetime:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0688\u06CC\u0679 \u0679\u0627\u0626\u0645",date:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u062A\u0627\u0631\u06CC\u062E",time:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0648\u0642\u062A",duration:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0645\u062F\u062A",ipv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0627\u06CC\u0688\u0631\u06CC\u0633",ipv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0627\u06CC\u0688\u0631\u06CC\u0633",cidrv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0631\u06CC\u0646\u062C",cidrv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0631\u06CC\u0646\u062C",base64:"\u0628\u06CC\u0633 64 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",base64url:"\u0628\u06CC\u0633 64 \u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",json_string:"\u062C\u06D2 \u0627\u06CC\u0633 \u0627\u0648 \u0627\u06CC\u0646 \u0633\u0679\u0631\u0646\u06AF",e164:"\u0627\u06CC 164 \u0646\u0645\u0628\u0631",jwt:"\u062C\u06D2 \u0688\u0628\u0644\u06CC\u0648 \u0679\u06CC",template_literal:"\u0627\u0646 \u067E\u0679"},n={nan:"NaN",number:"\u0646\u0645\u0628\u0631",array:"\u0622\u0631\u06D2",null:"\u0646\u0644"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: instanceof ${e.expected} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627\u060C ${M} \u0645\u0648\u0635\u0648\u0644 \u06C1\u0648\u0627`:`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${l} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627\u060C ${M} \u0645\u0648\u0635\u0648\u0644 \u06C1\u0648\u0627`}case"invalid_value":return e.values.length===1?`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${ge(e.values[0])} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`:`\u063A\u0644\u0637 \u0622\u067E\u0634\u0646: ${b(e.values,"|")} \u0645\u06CC\u06BA \u0633\u06D2 \u0627\u06CC\u06A9 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`\u0628\u06C1\u062A \u0628\u0691\u0627: ${e.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u06D2 ${l}${e.maximum.toString()} ${g.unit??"\u0639\u0646\u0627\u0635\u0631"} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0628\u0691\u0627: ${e.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u0627 ${l}${e.maximum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${e.origin} \u06A9\u06D2 ${l}${e.minimum.toString()} ${g.unit} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${e.origin} \u06A9\u0627 ${l}${e.minimum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"invalid_format":return e.format==="starts_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${e.prefix}" \u0633\u06D2 \u0634\u0631\u0648\u0639 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:e.format==="ends_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${e.suffix}" \u067E\u0631 \u062E\u062A\u0645 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:e.format==="includes"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${e.includes}" \u0634\u0627\u0645\u0644 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:e.format==="regex"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: \u067E\u06CC\u0679\u0631\u0646 ${e.pattern} \u0633\u06D2 \u0645\u06CC\u0686 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:`\u063A\u0644\u0637 ${r[e.format]??e.format}`;case"not_multiple_of":return`\u063A\u0644\u0637 \u0646\u0645\u0628\u0631: ${e.divisor} \u06A9\u0627 \u0645\u0636\u0627\u0639\u0641 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;case"unrecognized_keys":return`\u063A\u06CC\u0631 \u062A\u0633\u0644\u06CC\u0645 \u0634\u062F\u06C1 \u06A9\u06CC${e.keys.length>1?"\u0632":""}: ${b(e.keys,"\u060C ")}`;case"invalid_key":return`${e.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u06A9\u06CC`;case"invalid_union":return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679";case"invalid_element":return`${e.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u0648\u06CC\u0644\u06CC\u0648`;default:return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679"}}};function Zs(){return{localeError:ki()}}let Jh=()=>{let t={string:{unit:"belgi",verb:"bo\u2018lishi kerak"},file:{unit:"bayt",verb:"bo\u2018lishi kerak"},array:{unit:"element",verb:"bo\u2018lishi kerak"},set:{unit:"element",verb:"bo\u2018lishi kerak"}},r={regex:"kirish",email:"elektron pochta manzili",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO sana va vaqti",date:"ISO sana",time:"ISO vaqt",duration:"ISO davomiylik",ipv4:"IPv4 manzil",ipv6:"IPv6 manzil",mac:"MAC manzil",cidrv4:"IPv4 diapazon",cidrv6:"IPv6 diapazon",base64:"base64 kodlangan satr",base64url:"base64url kodlangan satr",json_string:"JSON satr",e164:"E.164 raqam",jwt:"JWT",template_literal:"kirish"},n={nan:"NaN",number:"raqam",array:"massiv"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`Noto\u2018g\u2018ri kirish: kutilgan instanceof ${e.expected}, qabul qilingan ${M}`:`Noto\u2018g\u2018ri kirish: kutilgan ${l}, qabul qilingan ${M}`}case"invalid_value":return e.values.length===1?`Noto\u2018g\u2018ri kirish: kutilgan ${ge(e.values[0])}`:`Noto\u2018g\u2018ri variant: quyidagilardan biri kutilgan ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`Juda katta: kutilgan ${e.origin??"qiymat"} ${l}${e.maximum.toString()} ${g.unit} ${g.verb}`:`Juda katta: kutilgan ${e.origin??"qiymat"} ${l}${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`Juda kichik: kutilgan ${e.origin} ${l}${e.minimum.toString()} ${g.unit} ${g.verb}`:`Juda kichik: kutilgan ${e.origin} ${l}${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`Noto\u2018g\u2018ri satr: "${e.prefix}" bilan boshlanishi kerak`:e.format==="ends_with"?`Noto\u2018g\u2018ri satr: "${e.suffix}" bilan tugashi kerak`:e.format==="includes"?`Noto\u2018g\u2018ri satr: "${e.includes}" ni o\u2018z ichiga olishi kerak`:e.format==="regex"?`Noto\u2018g\u2018ri satr: ${e.pattern} shabloniga mos kelishi kerak`:`Noto\u2018g\u2018ri ${r[e.format]??e.format}`;case"not_multiple_of":return`Noto\u2018g\u2018ri raqam: ${e.divisor} ning karralisi bo\u2018lishi kerak`;case"unrecognized_keys":return`Noma\u2019lum kalit${e.keys.length>1?"lar":""}: ${b(e.keys,", ")}`;case"invalid_key":return`${e.origin} dagi kalit noto\u2018g\u2018ri`;case"invalid_union":return"Noto\u2018g\u2018ri kirish";case"invalid_element":return`${e.origin} da noto\u2018g\u2018ri qiymat`;default:return"Noto\u2018g\u2018ri kirish"}}};function Hh(){return{localeError:Jh()}}let Qh=()=>{let t={string:{unit:"k\xFD t\u1EF1",verb:"c\xF3"},file:{unit:"byte",verb:"c\xF3"},array:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"},set:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"}},r={regex:"\u0111\u1EA7u v\xE0o",email:"\u0111\u1ECBa ch\u1EC9 email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ng\xE0y gi\u1EDD ISO",date:"ng\xE0y ISO",time:"gi\u1EDD ISO",duration:"kho\u1EA3ng th\u1EDDi gian ISO",ipv4:"\u0111\u1ECBa ch\u1EC9 IPv4",ipv6:"\u0111\u1ECBa ch\u1EC9 IPv6",cidrv4:"d\u1EA3i IPv4",cidrv6:"d\u1EA3i IPv6",base64:"chu\u1ED7i m\xE3 h\xF3a base64",base64url:"chu\u1ED7i m\xE3 h\xF3a base64url",json_string:"chu\u1ED7i JSON",e164:"s\u1ED1 E.164",jwt:"JWT",template_literal:"\u0111\u1EA7u v\xE0o"},n={nan:"NaN",number:"s\u1ED1",array:"m\u1EA3ng"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i instanceof ${e.expected}, nh\u1EADn \u0111\u01B0\u1EE3c ${M}`:`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${l}, nh\u1EADn \u0111\u01B0\u1EE3c ${M}`}case"invalid_value":return e.values.length===1?`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${ge(e.values[0])}`:`T\xF9y ch\u1ECDn kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i m\u1ED9t trong c\xE1c gi\xE1 tr\u1ECB ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${e.origin??"gi\xE1 tr\u1ECB"} ${g.verb} ${l}${e.maximum.toString()} ${g.unit??"ph\u1EA7n t\u1EED"}`:`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${e.origin??"gi\xE1 tr\u1ECB"} ${l}${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${e.origin} ${g.verb} ${l}${e.minimum.toString()} ${g.unit}`:`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${e.origin} ${l}${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i b\u1EAFt \u0111\u1EA7u b\u1EB1ng "${e.prefix}"`:e.format==="ends_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i k\u1EBFt th\xFAc b\u1EB1ng "${e.suffix}"`:e.format==="includes"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i bao g\u1ED3m "${e.includes}"`:e.format==="regex"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i kh\u1EDBp v\u1EDBi m\u1EABu ${e.pattern}`:`${r[e.format]??e.format} kh\xF4ng h\u1EE3p l\u1EC7`;case"not_multiple_of":return`S\u1ED1 kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i l\xE0 b\u1ED9i s\u1ED1 c\u1EE7a ${e.divisor}`;case"unrecognized_keys":return`Kh\xF3a kh\xF4ng \u0111\u01B0\u1EE3c nh\u1EADn d\u1EA1ng: ${b(e.keys,", ")}`;case"invalid_key":return`Kh\xF3a kh\xF4ng h\u1EE3p l\u1EC7 trong ${e.origin}`;case"invalid_union":return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7";case"invalid_element":return`Gi\xE1 tr\u1ECB kh\xF4ng h\u1EE3p l\u1EC7 trong ${e.origin}`;default:return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7"}}};function Xh(){return{localeError:Qh()}}let Yh=()=>{let t={string:{unit:"\u5B57\u7B26",verb:"\u5305\u542B"},file:{unit:"\u5B57\u8282",verb:"\u5305\u542B"},array:{unit:"\u9879",verb:"\u5305\u542B"},set:{unit:"\u9879",verb:"\u5305\u542B"}},r={regex:"\u8F93\u5165",email:"\u7535\u5B50\u90AE\u4EF6",url:"URL",emoji:"\u8868\u60C5\u7B26\u53F7",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u671F\u65F6\u95F4",date:"ISO\u65E5\u671F",time:"ISO\u65F6\u95F4",duration:"ISO\u65F6\u957F",ipv4:"IPv4\u5730\u5740",ipv6:"IPv6\u5730\u5740",cidrv4:"IPv4\u7F51\u6BB5",cidrv6:"IPv6\u7F51\u6BB5",base64:"base64\u7F16\u7801\u5B57\u7B26\u4E32",base64url:"base64url\u7F16\u7801\u5B57\u7B26\u4E32",json_string:"JSON\u5B57\u7B26\u4E32",e164:"E.164\u53F7\u7801",jwt:"JWT",template_literal:"\u8F93\u5165"},n={nan:"NaN",number:"\u6570\u5B57",array:"\u6570\u7EC4",null:"\u7A7A\u503C(null)"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B instanceof ${e.expected}\uFF0C\u5B9E\u9645\u63A5\u6536 ${M}`:`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${l}\uFF0C\u5B9E\u9645\u63A5\u6536 ${M}`}case"invalid_value":return e.values.length===1?`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${ge(e.values[0])}`:`\u65E0\u6548\u9009\u9879\uFF1A\u671F\u671B\u4EE5\u4E0B\u4E4B\u4E00 ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${e.origin??"\u503C"} ${l}${e.maximum.toString()} ${g.unit??"\u4E2A\u5143\u7D20"}`:`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${e.origin??"\u503C"} ${l}${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${e.origin} ${l}${e.minimum.toString()} ${g.unit}`:`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${e.origin} ${l}${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${e.prefix}" \u5F00\u5934`:e.format==="ends_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${e.suffix}" \u7ED3\u5C3E`:e.format==="includes"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u5305\u542B "${e.includes}"`:e.format==="regex"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u6EE1\u8DB3\u6B63\u5219\u8868\u8FBE\u5F0F ${e.pattern}`:`\u65E0\u6548${r[e.format]??e.format}`;case"not_multiple_of":return`\u65E0\u6548\u6570\u5B57\uFF1A\u5FC5\u987B\u662F ${e.divisor} \u7684\u500D\u6570`;case"unrecognized_keys":return`\u51FA\u73B0\u672A\u77E5\u7684\u952E(key): ${b(e.keys,", ")}`;case"invalid_key":return`${e.origin} \u4E2D\u7684\u952E(key)\u65E0\u6548`;case"invalid_union":return"\u65E0\u6548\u8F93\u5165";case"invalid_element":return`${e.origin} \u4E2D\u5305\u542B\u65E0\u6548\u503C(value)`;default:return"\u65E0\u6548\u8F93\u5165"}}};function ep(){return{localeError:Yh()}}let tp=()=>{let t={string:{unit:"\u5B57\u5143",verb:"\u64C1\u6709"},file:{unit:"\u4F4D\u5143\u7D44",verb:"\u64C1\u6709"},array:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"},set:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"}},r={regex:"\u8F38\u5165",email:"\u90F5\u4EF6\u5730\u5740",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u65E5\u671F\u6642\u9593",date:"ISO \u65E5\u671F",time:"ISO \u6642\u9593",duration:"ISO \u671F\u9593",ipv4:"IPv4 \u4F4D\u5740",ipv6:"IPv6 \u4F4D\u5740",cidrv4:"IPv4 \u7BC4\u570D",cidrv6:"IPv6 \u7BC4\u570D",base64:"base64 \u7DE8\u78BC\u5B57\u4E32",base64url:"base64url \u7DE8\u78BC\u5B57\u4E32",json_string:"JSON \u5B57\u4E32",e164:"E.164 \u6578\u503C",jwt:"JWT",template_literal:"\u8F38\u5165"},n={nan:"NaN"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA instanceof ${e.expected}\uFF0C\u4F46\u6536\u5230 ${M}`:`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${l}\uFF0C\u4F46\u6536\u5230 ${M}`}case"invalid_value":return e.values.length===1?`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${ge(e.values[0])}`:`\u7121\u6548\u7684\u9078\u9805\uFF1A\u9810\u671F\u70BA\u4EE5\u4E0B\u5176\u4E2D\u4E4B\u4E00 ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${e.origin??"\u503C"} \u61C9\u70BA ${l}${e.maximum.toString()} ${g.unit??"\u500B\u5143\u7D20"}`:`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${e.origin??"\u503C"} \u61C9\u70BA ${l}${e.maximum.toString()}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${e.origin} \u61C9\u70BA ${l}${e.minimum.toString()} ${g.unit}`:`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${e.origin} \u61C9\u70BA ${l}${e.minimum.toString()}`}case"invalid_format":return e.format==="starts_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${e.prefix}" \u958B\u982D`:e.format==="ends_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${e.suffix}" \u7D50\u5C3E`:e.format==="includes"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u5305\u542B "${e.includes}"`:e.format==="regex"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u7B26\u5408\u683C\u5F0F ${e.pattern}`:`\u7121\u6548\u7684 ${r[e.format]??e.format}`;case"not_multiple_of":return`\u7121\u6548\u7684\u6578\u5B57\uFF1A\u5FC5\u9808\u70BA ${e.divisor} \u7684\u500D\u6578`;case"unrecognized_keys":return`\u7121\u6CD5\u8B58\u5225\u7684\u9375\u503C${e.keys.length>1?"\u5011":""}\uFF1A${b(e.keys,"\u3001")}`;case"invalid_key":return`${e.origin} \u4E2D\u6709\u7121\u6548\u7684\u9375\u503C`;case"invalid_union":return"\u7121\u6548\u7684\u8F38\u5165\u503C";case"invalid_element":return`${e.origin} \u4E2D\u6709\u7121\u6548\u7684\u503C`;default:return"\u7121\u6548\u7684\u8F38\u5165\u503C"}}};function rp(){return{localeError:tp()}}let ip=()=>{let t={string:{unit:"\xE0mi",verb:"n\xED"},file:{unit:"bytes",verb:"n\xED"},array:{unit:"nkan",verb:"n\xED"},set:{unit:"nkan",verb:"n\xED"}},r={regex:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9",email:"\xE0d\xEDr\u1EB9\u0301s\xEC \xECm\u1EB9\u0301l\xEC",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\xE0k\xF3k\xF2 ISO",date:"\u1ECDj\u1ECD\u0301 ISO",time:"\xE0k\xF3k\xF2 ISO",duration:"\xE0k\xF3k\xF2 t\xF3 p\xE9 ISO",ipv4:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv4",ipv6:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv6",cidrv4:"\xE0gb\xE8gb\xE8 IPv4",cidrv6:"\xE0gb\xE8gb\xE8 IPv6",base64:"\u1ECD\u0300r\u1ECD\u0300 t\xED a k\u1ECD\u0301 n\xED base64",base64url:"\u1ECD\u0300r\u1ECD\u0300 base64url",json_string:"\u1ECD\u0300r\u1ECD\u0300 JSON",e164:"n\u1ECD\u0301mb\xE0 E.164",jwt:"JWT",template_literal:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9"},n={nan:"NaN",number:"n\u1ECD\u0301mb\xE0",array:"akop\u1ECD"};return e=>{switch(e.code){case"invalid_type":{let l=n[e.expected]??e.expected,g=tt(e.input),M=n[g]??g;return/^[A-Z]/.test(e.expected)?`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi instanceof ${e.expected}, \xE0m\u1ECD\u0300 a r\xED ${M}`:`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${l}, \xE0m\u1ECD\u0300 a r\xED ${M}`}case"invalid_value":return e.values.length===1?`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${ge(e.values[0])}`:`\xC0\u1E63\xE0y\xE0n a\u1E63\xEC\u1E63e: yan \u1ECD\u0300kan l\xE1ra ${b(e.values,"|")}`;case"too_big":{let l=e.inclusive?"<=":"<",g=t[e.origin]??null;return g?`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${e.origin??"iye"} ${g.verb} ${l}${e.maximum} ${g.unit}`:`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 ${l}${e.maximum}`}case"too_small":{let l=e.inclusive?">=":">",g=t[e.origin]??null;return g?`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${e.origin} ${g.verb} ${l}${e.minimum} ${g.unit}`:`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 ${l}${e.minimum}`}case"invalid_format":return e.format==="starts_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\u1EB9\u0300r\u1EB9\u0300 p\u1EB9\u0300l\xFA "${e.prefix}"`:e.format==="ends_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 par\xED p\u1EB9\u0300l\xFA "${e.suffix}"`:e.format==="includes"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 n\xED "${e.includes}"`:e.format==="regex"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\xE1 \xE0p\u1EB9\u1EB9r\u1EB9 mu ${e.pattern}`:`A\u1E63\xEC\u1E63e: ${r[e.format]??e.format}`;case"not_multiple_of":return`N\u1ECD\u0301mb\xE0 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 j\u1EB9\u0301 \xE8y\xE0 p\xEDp\xEDn ti ${e.divisor}`;case"unrecognized_keys":return`B\u1ECDt\xECn\xEC \xE0\xECm\u1ECD\u0300: ${b(e.keys,", ")}`;case"invalid_key":return`B\u1ECDt\xECn\xEC a\u1E63\xEC\u1E63e n\xEDn\xFA ${e.origin}`;case"invalid_union":default:return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e";case"invalid_element":return`Iye a\u1E63\xEC\u1E63e n\xEDn\xFA ${e.origin}`}}};function np(){return{localeError:ip()}}let Fu=Symbol("ZodOutput"),Zu=Symbol("ZodInput");class Vu{constructor(){this._map=new WeakMap,this._idmap=new Map}add(r,...n){let e=n[0];return this._map.set(r,e),e&&typeof e=="object"&&"id"in e&&this._idmap.set(e.id,r),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(r){let n=this._map.get(r);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(r),this}get(r){let n=r._zod.parent;if(n){let e={...this.get(n)??{}};delete e.id;let l={...e,...this._map.get(r)};return Object.keys(l).length?l:void 0}return this._map.get(r)}has(r){return this._map.has(r)}}function wl(){return new Vu}(d=Sr).__zod_globalRegistry??(d.__zod_globalRegistry=wl());let Ni=Sr.__zod_globalRegistry;function Gu(t,r){return new t({type:"string",...x(r)})}function Ku(t,r){return new t({type:"string",coerce:!0,...x(r)})}function bl(t,r){return new t({type:"string",format:"email",check:"string_format",abort:!1,...x(r)})}function Zo(t,r){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...x(r)})}function _l(t,r){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...x(r)})}function xl(t,r){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...x(r)})}function kl(t,r){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...x(r)})}function Nl(t,r){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...x(r)})}function Vo(t,r){return new t({type:"string",format:"url",check:"string_format",abort:!1,...x(r)})}function Sl(t,r){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...x(r)})}function Tl(t,r){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...x(r)})}function Il(t,r){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...x(r)})}function El(t,r){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...x(r)})}function Al(t,r){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...x(r)})}function $l(t,r){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...x(r)})}function Ol(t,r){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...x(r)})}function Cl(t,r){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...x(r)})}function Pl(t,r){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...x(r)})}function Ju(t,r){return new t({type:"string",format:"mac",check:"string_format",abort:!1,...x(r)})}function Rl(t,r){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...x(r)})}function Ul(t,r){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...x(r)})}function Dl(t,r){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...x(r)})}function Ll(t,r){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...x(r)})}function ql(t,r){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...x(r)})}function jl(t,r){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...x(r)})}let Hu={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function Qu(t,r){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...x(r)})}function Xu(t,r){return new t({type:"string",format:"date",check:"string_format",...x(r)})}function Yu(t,r){return new t({type:"string",format:"time",check:"string_format",precision:null,...x(r)})}function ec(t,r){return new t({type:"string",format:"duration",check:"string_format",...x(r)})}function tc(t,r){return new t({type:"number",checks:[],...x(r)})}function rc(t,r){return new t({type:"number",coerce:!0,checks:[],...x(r)})}function ic(t,r){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...x(r)})}function nc(t,r){return new t({type:"number",check:"number_format",abort:!1,format:"float32",...x(r)})}function sc(t,r){return new t({type:"number",check:"number_format",abort:!1,format:"float64",...x(r)})}function oc(t,r){return new t({type:"number",check:"number_format",abort:!1,format:"int32",...x(r)})}function ac(t,r){return new t({type:"number",check:"number_format",abort:!1,format:"uint32",...x(r)})}function lc(t,r){return new t({type:"boolean",...x(r)})}function uc(t,r){return new t({type:"boolean",coerce:!0,...x(r)})}function cc(t,r){return new t({type:"bigint",...x(r)})}function dc(t,r){return new t({type:"bigint",coerce:!0,...x(r)})}function hc(t,r){return new t({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...x(r)})}function pc(t,r){return new t({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...x(r)})}function fc(t,r){return new t({type:"symbol",...x(r)})}function mc(t,r){return new t({type:"undefined",...x(r)})}function yc(t,r){return new t({type:"null",...x(r)})}function gc(t){return new t({type:"any"})}function vc(t){return new t({type:"unknown"})}function wc(t,r){return new t({type:"never",...x(r)})}function bc(t,r){return new t({type:"void",...x(r)})}function _c(t,r){return new t({type:"date",...x(r)})}function xc(t,r){return new t({type:"date",coerce:!0,...x(r)})}function kc(t,r){return new t({type:"nan",...x(r)})}function An(t,r){return new Ji({check:"less_than",...x(r),value:t,inclusive:!1})}function Si(t,r){return new Ji({check:"less_than",...x(r),value:t,inclusive:!0})}function $n(t,r){return new Rn({check:"greater_than",...x(r),value:t,inclusive:!1})}function li(t,r){return new Rn({check:"greater_than",...x(r),value:t,inclusive:!0})}function zl(t){return $n(0,t)}function Bl(t){return An(0,t)}function Ml(t){return Si(0,t)}function Wl(t){return li(0,t)}function Ss(t,r){return new Un({check:"multiple_of",...x(r),value:t})}function Ts(t,r){return new as({check:"max_size",...x(r),maximum:t})}function On(t,r){return new Dn({check:"min_size",...x(r),minimum:t})}function Vs(t,r){return new ls({check:"size_equals",...x(r),size:t})}function Gs(t,r){return new Hi({check:"max_length",...x(r),maximum:t})}function es(t,r){return new us({check:"min_length",...x(r),minimum:t})}function Ks(t,r){return new cs({check:"length_equals",...x(r),length:t})}function Go(t,r){return new Ri({check:"string_format",format:"regex",...x(r),pattern:t})}function Ko(t){return new ds({check:"string_format",format:"lowercase",...x(t)})}function Jo(t){return new Ln({check:"string_format",format:"uppercase",...x(t)})}function Ho(t,r){return new hs({check:"string_format",format:"includes",...x(r),includes:t})}function Qo(t,r){return new qn({check:"string_format",format:"starts_with",...x(r),prefix:t})}function Xo(t,r){return new ps({check:"string_format",format:"ends_with",...x(r),suffix:t})}function Fl(t,r,n){return new mn({check:"property",property:t,schema:r,...x(n)})}function Yo(t,r){return new Mi({check:"mime_type",mime:t,...x(r)})}function ln(t){return new fs({check:"overwrite",tx:t})}function ea(t){return ln(r=>r.normalize(t))}function ta(){return ln(t=>t.trim())}function ra(){return ln(t=>t.toLowerCase())}function ia(){return ln(t=>t.toUpperCase())}function na(){return ln(t=>A(t))}function Nc(t,r,n){return new t({type:"array",element:r,...x(n)})}function sp(t,r,n){return new t({type:"union",options:r,...x(n)})}function op(t,r,n){return new t({type:"union",options:r,inclusive:!1,...x(n)})}function ap(t,r,n,e){return new t({type:"union",options:n,discriminator:r,...x(e)})}function lp(t,r,n){return new t({type:"intersection",left:r,right:n})}function up(t,r,n,e){let l=n instanceof Zt,g=l?e:n;return new t({type:"tuple",items:r,rest:l?n:null,...x(g)})}function cp(t,r,n,e){return new t({type:"record",keyType:r,valueType:n,...x(e)})}function dp(t,r,n,e){return new t({type:"map",keyType:r,valueType:n,...x(e)})}function hp(t,r,n){return new t({type:"set",valueType:r,...x(n)})}function pp(t,r,n){return new t({type:"enum",entries:Array.isArray(r)?Object.fromEntries(r.map(e=>[e,e])):r,...x(n)})}function fp(t,r,n){return new t({type:"enum",entries:r,...x(n)})}function mp(t,r,n){return new t({type:"literal",values:Array.isArray(r)?r:[r],...x(n)})}function Sc(t,r){return new t({type:"file",...x(r)})}function yp(t,r){return new t({type:"transform",transform:r})}function gp(t,r){return new t({type:"optional",innerType:r})}function vp(t,r){return new t({type:"nullable",innerType:r})}function wp(t,r,n){return new t({type:"default",innerType:r,get defaultValue(){return typeof n=="function"?n():ee(n)}})}function bp(t,r,n){return new t({type:"nonoptional",innerType:r,...x(n)})}function _p(t,r){return new t({type:"success",innerType:r})}function xp(t,r,n){return new t({type:"catch",innerType:r,catchValue:typeof n=="function"?n:()=>n})}function kp(t,r,n){return new t({type:"pipe",in:r,out:n})}function Np(t,r){return new t({type:"readonly",innerType:r})}function Sp(t,r,n){return new t({type:"template_literal",parts:r,...x(n)})}function Tp(t,r){return new t({type:"lazy",getter:r})}function Ip(t,r){return new t({type:"promise",innerType:r})}function Tc(t,r,n){let e=x(n);return e.abort??(e.abort=!0),new t({type:"custom",check:"custom",fn:r,...e})}function Ic(t,r,n){return new t({type:"custom",check:"custom",fn:r,...x(n)})}function Zl(t){let r=Ec(n=>(n.addIssue=e=>{typeof e=="string"?n.issues.push(Ot(e,n.value,r._zod.def)):(e.fatal&&(e.continue=!1),e.code??(e.code="custom"),e.input??(e.input=n.value),e.inst??(e.inst=r),e.continue??(e.continue=!r._zod.def.abort),n.issues.push(Ot(e)))},t(n.value,n)));return r}function Ec(t,r){let n=new hr({check:"custom",...x(r)});return n._zod.check=t,n}function Ac(t){let r=new hr({check:"describe"});return r._zod.onattach=[n=>{let e=Ni.get(n)??{};Ni.add(n,{...e,description:t})}],r._zod.check=()=>{},r}function $c(t){let r=new hr({check:"meta"});return r._zod.onattach=[n=>{let e=Ni.get(n)??{};Ni.add(n,{...e,...t})}],r._zod.check=()=>{},r}function Oc(t,r){let n=x(r),e=n.truthy??["true","1","yes","on","y","enabled"],l=n.falsy??["false","0","no","off","n","disabled"];n.case!=="sensitive"&&(e=e.map(Ne=>typeof Ne=="string"?Ne.toLowerCase():Ne),l=l.map(Ne=>typeof Ne=="string"?Ne.toLowerCase():Ne));let g=new Set(e),M=new Set(l),be=t.Codec??Ws,De=t.Boolean??Wn,_e=new be({type:"pipe",in:new(t.String??wi)({type:"string",error:n.error}),out:new De({type:"boolean",error:n.error}),transform:(Ne,et)=>{let st=Ne;return n.case!=="sensitive"&&(st=st.toLowerCase()),!!g.has(st)||!M.has(st)&&(et.issues.push({code:"invalid_value",expected:"stringbool",values:[...g,...M],input:et.value,inst:_e,continue:!1}),{})},reverseTransform:(Ne,et)=>Ne===!0?e[0]||"true":l[0]||"false",error:n.error});return _e}function Js(t,r,n,e={}){let l=x(e),g={...x(e),check:"string_format",type:"string",format:r,fn:typeof n=="function"?n:M=>n.test(M),...l};return n instanceof RegExp&&(g.pattern=n),new t(g)}function Is(t){let r=t?.target??"draft-2020-12";return r==="draft-4"&&(r="draft-04"),r==="draft-7"&&(r="draft-07"),{processors:t.processors??{},metadataRegistry:t?.metadata??Ni,target:r,unrepresentable:t?.unrepresentable??"throw",override:t?.override??(()=>{}),io:t?.io??"output",counter:0,seen:new Map,cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0}}function xr(t,r,n={path:[],schemaPath:[]}){var e;let l=t._zod.def,g=r.seen.get(t);if(g)return g.count++,n.schemaPath.includes(t)&&(g.cycle=n.path),g.schema;let M={schema:{},count:1,cycle:void 0,path:n.path};r.seen.set(t,M);let be=t._zod.toJSONSchema?.();if(be)M.schema=be;else{let _e={...n,schemaPath:[...n.schemaPath,t],path:n.path};if(t._zod.processJSONSchema)t._zod.processJSONSchema(r,M.schema,_e);else{let et=M.schema,st=r.processors[l.type];if(!st)throw Error(`[toJSONSchema]: Non-representable type encountered: ${l.type}`);st(t,r,et,_e)}let Ne=t._zod.parent;Ne&&(M.ref||(M.ref=Ne),xr(Ne,r,_e),r.seen.get(Ne).isParent=!0)}let De=r.metadataRegistry.get(t);return De&&Object.assign(M.schema,De),r.io==="input"&&function _e(Ne,et){let st=et??{seen:new Set};if(st.seen.has(Ne))return!1;st.seen.add(Ne);let Nt=Ne._zod.def;if(Nt.type==="transform")return!0;if(Nt.type==="array")return _e(Nt.element,st);if(Nt.type==="set")return _e(Nt.valueType,st);if(Nt.type==="lazy")return _e(Nt.getter(),st);if(Nt.type==="promise"||Nt.type==="optional"||Nt.type==="nonoptional"||Nt.type==="nullable"||Nt.type==="readonly"||Nt.type==="default"||Nt.type==="prefault")return _e(Nt.innerType,st);if(Nt.type==="intersection")return _e(Nt.left,st)||_e(Nt.right,st);if(Nt.type==="record"||Nt.type==="map")return _e(Nt.keyType,st)||_e(Nt.valueType,st);if(Nt.type==="pipe")return _e(Nt.in,st)||_e(Nt.out,st);if(Nt.type==="object"){for(let Ke in Nt.shape)if(_e(Nt.shape[Ke],st))return!0;return!1}if(Nt.type==="union"){for(let Ke of Nt.options)if(_e(Ke,st))return!0;return!1}if(Nt.type==="tuple"){for(let Ke of Nt.items)if(_e(Ke,st))return!0;if(Nt.rest&&_e(Nt.rest,st))return!0}return!1}(t)&&(delete M.schema.examples,delete M.schema.default),r.io==="input"&&M.schema._prefault&&((e=M.schema).default??(e.default=M.schema._prefault)),delete M.schema._prefault,r.seen.get(t).schema}function Es(t,r){let n=t.seen.get(r);if(!n)throw Error("Unprocessed schema. This is a bug in Zod.");let e=new Map;for(let M of t.seen.entries()){let be=t.metadataRegistry.get(M[0])?.id;if(be){let De=e.get(be);if(De&&De!==M[0])throw Error(`Duplicate schema id "${be}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);e.set(be,M[0])}}let l=M=>{let be=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){let Ne=t.external.registry.get(M[0])?.id,et=t.external.uri??(Nt=>Nt);if(Ne)return{ref:et(Ne)};let st=M[1].defId??M[1].schema.id??`schema${t.counter++}`;return M[1].defId=st,{defId:st,ref:`${et("__shared")}#/${be}/${st}`}}if(M[1]===n)return{ref:"#"};let De=`#/${be}/`,_e=M[1].schema.id??`__schema${t.counter++}`;return{defId:_e,ref:De+_e}},g=M=>{if(M[1].schema.$ref)return;let be=M[1],{ref:De,defId:_e}=l(M);be.def={...be.schema},_e&&(be.defId=_e);let Ne=be.schema;for(let et in Ne)delete Ne[et];Ne.$ref=De};if(t.cycles==="throw")for(let M of t.seen.entries()){let be=M[1];if(be.cycle)throw Error(`Cycle detected: #/${be.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let M of t.seen.entries()){let be=M[1];if(r===M[0]){g(M);continue}if(t.external){let De=t.external.registry.get(M[0])?.id;if(r!==M[0]&&De){g(M);continue}}if(t.metadataRegistry.get(M[0])?.id||be.cycle||be.count>1&&t.reused==="ref"){g(M);continue}}}function As(t,r){let n=t.seen.get(r);if(!n)throw Error("Unprocessed schema. This is a bug in Zod.");let e=M=>{let be=t.seen.get(M);if(be.ref===null)return;let De=be.def??be.schema,_e={...De},Ne=be.ref;if(be.ref=null,Ne){e(Ne);let st=t.seen.get(Ne),Nt=st.schema;if(Nt.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(De.allOf=De.allOf??[],De.allOf.push(Nt)):Object.assign(De,Nt),Object.assign(De,_e),M._zod.parent===Ne)for(let Ke in De)Ke==="$ref"||Ke==="allOf"||Ke in _e||delete De[Ke];if(Nt.$ref&&st.def)for(let Ke in De)Ke!=="$ref"&&Ke!=="allOf"&&Ke in st.def&&JSON.stringify(De[Ke])===JSON.stringify(st.def[Ke])&&delete De[Ke]}let et=M._zod.parent;if(et&&et!==Ne){e(et);let st=t.seen.get(et);if(st?.schema.$ref&&(De.$ref=st.schema.$ref,st.def))for(let Nt in De)Nt!=="$ref"&&Nt!=="allOf"&&Nt in st.def&&JSON.stringify(De[Nt])===JSON.stringify(st.def[Nt])&&delete De[Nt]}t.override({zodSchema:M,jsonSchema:De,path:be.path??[]})};for(let M of[...t.seen.entries()].reverse())e(M[0]);let l={};if(t.target==="draft-2020-12"?l.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?l.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?l.$schema="http://json-schema.org/draft-04/schema#":t.target,t.external?.uri){let M=t.external.registry.get(r)?.id;if(!M)throw Error("Schema is missing an `id` property");l.$id=t.external.uri(M)}Object.assign(l,n.def??n.schema);let g=t.external?.defs??{};for(let M of t.seen.entries()){let be=M[1];be.def&&be.defId&&(g[be.defId]=be.def)}t.external||Object.keys(g).length>0&&(t.target==="draft-2020-12"?l.$defs=g:l.definitions=g);try{let M=JSON.parse(JSON.stringify(l));return Object.defineProperty(M,"~standard",{value:{...r["~standard"],jsonSchema:{input:Hs(r,"input",t.processors),output:Hs(r,"output",t.processors)}},enumerable:!1,writable:!1}),M}catch{throw Error("Error converting schema to JSON.")}}let Cc=(t,r={})=>n=>{let e=Is({...n,processors:r});return xr(t,e),Es(e,t),As(e,t)},Hs=(t,r,n={})=>e=>{let{libraryOptions:l,target:g}=e??{},M=Is({...l??{},target:g,io:r,processors:n});return xr(t,M),Es(M,t),As(M,t)},Ep={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},Pc=(t,r,n,e)=>{n.type="string";let{minimum:l,maximum:g,format:M,patterns:be,contentEncoding:De}=t._zod.bag;if(typeof l=="number"&&(n.minLength=l),typeof g=="number"&&(n.maxLength=g),M&&(n.format=Ep[M]??M,n.format===""&&delete n.format,M==="time"&&delete n.format),De&&(n.contentEncoding=De),be&&be.size>0){let _e=[...be];_e.length===1?n.pattern=_e[0].source:_e.length>1&&(n.allOf=[..._e.map(Ne=>({...r.target==="draft-07"||r.target==="draft-04"||r.target==="openapi-3.0"?{type:"string"}:{},pattern:Ne.source}))])}},Rc=(t,r,n,e)=>{let{minimum:l,maximum:g,format:M,multipleOf:be,exclusiveMaximum:De,exclusiveMinimum:_e}=t._zod.bag;typeof M=="string"&&M.includes("int")?n.type="integer":n.type="number",typeof _e=="number"&&(r.target==="draft-04"||r.target==="openapi-3.0"?(n.minimum=_e,n.exclusiveMinimum=!0):n.exclusiveMinimum=_e),typeof l=="number"&&(n.minimum=l,typeof _e=="number"&&r.target!=="draft-04"&&(_e>=l?delete n.minimum:delete n.exclusiveMinimum)),typeof De=="number"&&(r.target==="draft-04"||r.target==="openapi-3.0"?(n.maximum=De,n.exclusiveMaximum=!0):n.exclusiveMaximum=De),typeof g=="number"&&(n.maximum=g,typeof De=="number"&&r.target!=="draft-04"&&(De<=g?delete n.maximum:delete n.exclusiveMaximum)),typeof be=="number"&&(n.multipleOf=be)},Uc=(t,r,n,e)=>{n.type="boolean"},Dc=(t,r,n,e)=>{if(r.unrepresentable==="throw")throw Error("BigInt cannot be represented in JSON Schema")},Lc=(t,r,n,e)=>{if(r.unrepresentable==="throw")throw Error("Symbols cannot be represented in JSON Schema")},qc=(t,r,n,e)=>{r.target==="openapi-3.0"?(n.type="string",n.nullable=!0,n.enum=[null]):n.type="null"},jc=(t,r,n,e)=>{if(r.unrepresentable==="throw")throw Error("Undefined cannot be represented in JSON Schema")},zc=(t,r,n,e)=>{if(r.unrepresentable==="throw")throw Error("Void cannot be represented in JSON Schema")},Bc=(t,r,n,e)=>{n.not={}},Mc=(t,r,n,e)=>{},Wc=(t,r,n,e)=>{},Fc=(t,r,n,e)=>{if(r.unrepresentable==="throw")throw Error("Date cannot be represented in JSON Schema")},Zc=(t,r,n,e)=>{let l=P(t._zod.def.entries);l.every(g=>typeof g=="number")&&(n.type="number"),l.every(g=>typeof g=="string")&&(n.type="string"),n.enum=l},Vc=(t,r,n,e)=>{let l=t._zod.def,g=[];for(let M of l.values)if(M===void 0){if(r.unrepresentable==="throw")throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof M=="bigint"){if(r.unrepresentable==="throw")throw Error("BigInt literals cannot be represented in JSON Schema");g.push(Number(M))}else g.push(M);if(g.length!==0)if(g.length===1){let M=g[0];n.type=M===null?"null":typeof M,r.target==="draft-04"||r.target==="openapi-3.0"?n.enum=[M]:n.const=M}else g.every(M=>typeof M=="number")&&(n.type="number"),g.every(M=>typeof M=="string")&&(n.type="string"),g.every(M=>typeof M=="boolean")&&(n.type="boolean"),g.every(M=>M===null)&&(n.type="null"),n.enum=g},Gc=(t,r,n,e)=>{if(r.unrepresentable==="throw")throw Error("NaN cannot be represented in JSON Schema")},Kc=(t,r,n,e)=>{let l=t._zod.pattern;if(!l)throw Error("Pattern not found in template literal");n.type="string",n.pattern=l.source},Jc=(t,r,n,e)=>{let l={type:"string",format:"binary",contentEncoding:"binary"},{minimum:g,maximum:M,mime:be}=t._zod.bag;g!==void 0&&(l.minLength=g),M!==void 0&&(l.maxLength=M),be?be.length===1?(l.contentMediaType=be[0],Object.assign(n,l)):(Object.assign(n,l),n.anyOf=be.map(De=>({contentMediaType:De}))):Object.assign(n,l)},Hc=(t,r,n,e)=>{n.type="boolean"},Qc=(t,r,n,e)=>{if(r.unrepresentable==="throw")throw Error("Custom types cannot be represented in JSON Schema")},Xc=(t,r,n,e)=>{if(r.unrepresentable==="throw")throw Error("Function types cannot be represented in JSON Schema")},Yc=(t,r,n,e)=>{if(r.unrepresentable==="throw")throw Error("Transforms cannot be represented in JSON Schema")},ed=(t,r,n,e)=>{if(r.unrepresentable==="throw")throw Error("Map cannot be represented in JSON Schema")},td=(t,r,n,e)=>{if(r.unrepresentable==="throw")throw Error("Set cannot be represented in JSON Schema")},rd=(t,r,n,e)=>{let l=t._zod.def,{minimum:g,maximum:M}=t._zod.bag;typeof g=="number"&&(n.minItems=g),typeof M=="number"&&(n.maxItems=M),n.type="array",n.items=xr(l.element,r,{...e,path:[...e.path,"items"]})},id=(t,r,n,e)=>{let l=t._zod.def;n.type="object",n.properties={};let g=l.shape;for(let be in g)n.properties[be]=xr(g[be],r,{...e,path:[...e.path,"properties",be]});let M=new Set([...new Set(Object.keys(g))].filter(be=>{let De=l.shape[be]._zod;return r.io==="input"?De.optin===void 0:De.optout===void 0}));M.size>0&&(n.required=Array.from(M)),l.catchall?._zod.def.type==="never"?n.additionalProperties=!1:l.catchall?l.catchall&&(n.additionalProperties=xr(l.catchall,r,{...e,path:[...e.path,"additionalProperties"]})):r.io==="output"&&(n.additionalProperties=!1)},Vl=(t,r,n,e)=>{let l=t._zod.def,g=l.inclusive===!1,M=l.options.map((be,De)=>xr(be,r,{...e,path:[...e.path,g?"oneOf":"anyOf",De]}));g?n.oneOf=M:n.anyOf=M},nd=(t,r,n,e)=>{let l=t._zod.def,g=xr(l.left,r,{...e,path:[...e.path,"allOf",0]}),M=xr(l.right,r,{...e,path:[...e.path,"allOf",1]}),be=De=>"allOf"in De&&Object.keys(De).length===1;n.allOf=[...be(g)?g.allOf:[g],...be(M)?M.allOf:[M]]},sd=(t,r,n,e)=>{let l=t._zod.def;n.type="array";let g=r.target==="draft-2020-12"?"prefixItems":"items",M=r.target==="draft-2020-12"||r.target==="openapi-3.0"?"items":"additionalItems",be=l.items.map((et,st)=>xr(et,r,{...e,path:[...e.path,g,st]})),De=l.rest?xr(l.rest,r,{...e,path:[...e.path,M,...r.target==="openapi-3.0"?[l.items.length]:[]]}):null;r.target==="draft-2020-12"?(n.prefixItems=be,De&&(n.items=De)):r.target==="openapi-3.0"?(n.items={anyOf:be},De&&n.items.anyOf.push(De),n.minItems=be.length,De||(n.maxItems=be.length)):(n.items=be,De&&(n.additionalItems=De));let{minimum:_e,maximum:Ne}=t._zod.bag;typeof _e=="number"&&(n.minItems=_e),typeof Ne=="number"&&(n.maxItems=Ne)},od=(t,r,n,e)=>{let l=t._zod.def;n.type="object";let g=l.keyType,M=g._zod.bag,be=M?.patterns;if(l.mode==="loose"&&be&&be.size>0){let _e=xr(l.valueType,r,{...e,path:[...e.path,"patternProperties","*"]});for(let Ne of(n.patternProperties={},be))n.patternProperties[Ne.source]=_e}else(r.target==="draft-07"||r.target==="draft-2020-12")&&(n.propertyNames=xr(l.keyType,r,{...e,path:[...e.path,"propertyNames"]})),n.additionalProperties=xr(l.valueType,r,{...e,path:[...e.path,"additionalProperties"]});let De=g._zod.values;if(De){let _e=[...De].filter(Ne=>typeof Ne=="string"||typeof Ne=="number");_e.length>0&&(n.required=_e)}},ad=(t,r,n,e)=>{let l=t._zod.def,g=xr(l.innerType,r,e),M=r.seen.get(t);r.target==="openapi-3.0"?(M.ref=l.innerType,n.nullable=!0):n.anyOf=[g,{type:"null"}]},ld=(t,r,n,e)=>{let l=t._zod.def;xr(l.innerType,r,e),r.seen.get(t).ref=l.innerType},ud=(t,r,n,e)=>{let l=t._zod.def;xr(l.innerType,r,e),r.seen.get(t).ref=l.innerType,n.default=JSON.parse(JSON.stringify(l.defaultValue))},cd=(t,r,n,e)=>{let l=t._zod.def;xr(l.innerType,r,e),r.seen.get(t).ref=l.innerType,r.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(l.defaultValue)))},dd=(t,r,n,e)=>{let l,g=t._zod.def;xr(g.innerType,r,e),r.seen.get(t).ref=g.innerType;try{l=g.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}n.default=l},hd=(t,r,n,e)=>{let l=t._zod.def,g=r.io==="input"?l.in._zod.def.type==="transform"?l.out:l.in:l.out;xr(g,r,e),r.seen.get(t).ref=g},pd=(t,r,n,e)=>{let l=t._zod.def;xr(l.innerType,r,e),r.seen.get(t).ref=l.innerType,n.readOnly=!0},fd=(t,r,n,e)=>{let l=t._zod.def;xr(l.innerType,r,e),r.seen.get(t).ref=l.innerType},Gl=(t,r,n,e)=>{let l=t._zod.def;xr(l.innerType,r,e),r.seen.get(t).ref=l.innerType},md=(t,r,n,e)=>{let l=t._zod.innerType;xr(l,r,e),r.seen.get(t).ref=l},Kl={string:Pc,number:Rc,boolean:Uc,bigint:Dc,symbol:Lc,null:qc,undefined:jc,void:zc,never:Bc,any:Mc,unknown:Wc,date:Fc,enum:Zc,literal:Vc,nan:Gc,template_literal:Kc,file:Jc,success:Hc,custom:Qc,function:Xc,transform:Yc,map:ed,set:td,array:rd,object:id,union:Vl,intersection:nd,tuple:sd,record:od,nullable:ad,nonoptional:ld,default:ud,prefault:cd,catch:dd,pipe:hd,readonly:pd,promise:fd,optional:Gl,lazy:md};function yd(t,r){if("_idmap"in t){let e=Is({...r,processors:Kl}),l={};for(let M of t._idmap.entries()){let[be,De]=M;xr(De,e)}let g={};for(let M of(e.external={registry:t,uri:r?.uri,defs:l},t._idmap.entries())){let[be,De]=M;Es(e,De),g[be]=As(e,De)}return Object.keys(l).length>0&&(g.__shared={[e.target==="draft-2020-12"?"$defs":"definitions"]:l}),{schemas:g}}let n=Is({...r,processors:Kl});return xr(t,n),Es(n,t),As(n,t)}class Ap{get metadataRegistry(){return this.ctx.metadataRegistry}get target(){return this.ctx.target}get unrepresentable(){return this.ctx.unrepresentable}get override(){return this.ctx.override}get io(){return this.ctx.io}get counter(){return this.ctx.counter}set counter(r){this.ctx.counter=r}get seen(){return this.ctx.seen}constructor(r){let n=r?.target??"draft-2020-12";n==="draft-4"&&(n="draft-04"),n==="draft-7"&&(n="draft-07"),this.ctx=Is({processors:Kl,target:n,...r?.metadata&&{metadata:r.metadata},...r?.unrepresentable&&{unrepresentable:r.unrepresentable},...r?.override&&{override:r.override},...r?.io&&{io:r.io}})}process(r,n={path:[],schemaPath:[]}){return xr(r,this.ctx,n)}emit(r,n){n&&(n.cycles&&(this.ctx.cycles=n.cycles),n.reused&&(this.ctx.reused=n.reused),n.external&&(this.ctx.external=n.external)),Es(this.ctx,r);let{"~standard":e,...l}=As(this.ctx,r);return l}}let Jl=p("ZodISODateTime",(t,r)=>{u.init(t,r),Nr.init(t,r)});function gd(t){return Qu(Jl,t)}let Hl=p("ZodISODate",(t,r)=>{B.init(t,r),Nr.init(t,r)});function vd(t){return Xu(Hl,t)}let Ql=p("ZodISOTime",(t,r)=>{de.init(t,r),Nr.init(t,r)});function wd(t){return Yu(Ql,t)}let Xl=p("ZodISODuration",(t,r)=>{je.init(t,r),Nr.init(t,r)});function bd(t){return ec(Xl,t)}let _d=(t,r)=>{Fe.init(t,r),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>dt(t,n)},flatten:{value:n=>ht(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,z,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,z,2)}},isEmpty:{get:()=>t.issues.length===0}})},$p=p("ZodError",_d),pi=p("ZodError",_d,{Parent:Error}),xd=Ft(pi),kd=ye(pi),Nd=Te(pi),Sd=Ce(pi),Td=Ge(pi),Id=gt(pi),Ed=wt(pi),Ad=Qt(pi),$d=er(pi),Od=Pt(pi),Cd=or(pi),Pd=lr(pi),Xt=p("ZodType",(t,r)=>(Zt.init(t,r),Object.assign(t["~standard"],{jsonSchema:{input:Hs(t,"input"),output:Hs(t,"output")}}),t.toJSONSchema=Cc(t,{}),t.def=r,t.type=r.type,Object.defineProperty(t,"_def",{value:r}),t.check=(...n)=>t.clone($e(r,{checks:[...r.checks??[],...n.map(e=>typeof e=="function"?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]}),{parent:!0}),t.with=t.check,t.clone=(n,e)=>ue(t,n,e),t.brand=()=>t,t.register=(n,e)=>(n.add(t,e),t),t.parse=(n,e)=>xd(t,n,e,{callee:t.parse}),t.safeParse=(n,e)=>Nd(t,n,e),t.parseAsync=async(n,e)=>kd(t,n,e,{callee:t.parseAsync}),t.safeParseAsync=async(n,e)=>Sd(t,n,e),t.spa=t.safeParseAsync,t.encode=(n,e)=>Td(t,n,e),t.decode=(n,e)=>Id(t,n,e),t.encodeAsync=async(n,e)=>Ed(t,n,e),t.decodeAsync=async(n,e)=>Ad(t,n,e),t.safeEncode=(n,e)=>$d(t,n,e),t.safeDecode=(n,e)=>Od(t,n,e),t.safeEncodeAsync=async(n,e)=>Cd(t,n,e),t.safeDecodeAsync=async(n,e)=>Pd(t,n,e),t.refine=(n,e)=>t.check(Mu(n,e)),t.superRefine=n=>t.check(Zl(n)),t.overwrite=n=>t.check(ln(n)),t.optional=()=>ao(t),t.exactOptional=()=>Nu(t),t.nullable=()=>lo(t),t.nullish=()=>ao(lo(t)),t.nonoptional=n=>$u(t,n),t.array=()=>io(t),t.or=n=>Ia([t,n]),t.and=n=>fu(t,n),t.transform=n=>uo(t,Aa(n)),t.default=n=>Iu(t,n),t.prefault=n=>Au(t,n),t.catch=n=>Pu(t,n),t.pipe=n=>uo(t,n),t.readonly=()=>Du(t),t.describe=n=>{let e=t.clone();return Ni.add(e,{description:n}),e},Object.defineProperty(t,"description",{get:()=>Ni.get(t)?.description,configurable:!0}),t.meta=(...n)=>{if(n.length===0)return Ni.get(t);let e=t.clone();return Ni.add(e,n[0]),e},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t.apply=n=>n(t),t)),sa=p("_ZodString",(t,r)=>{wi.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(e,l,g)=>Pc(t,e,l,g);let n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...e)=>t.check(Go(...e)),t.includes=(...e)=>t.check(Ho(...e)),t.startsWith=(...e)=>t.check(Qo(...e)),t.endsWith=(...e)=>t.check(Xo(...e)),t.min=(...e)=>t.check(es(...e)),t.max=(...e)=>t.check(Gs(...e)),t.length=(...e)=>t.check(Ks(...e)),t.nonempty=(...e)=>t.check(es(1,...e)),t.lowercase=e=>t.check(Ko(e)),t.uppercase=e=>t.check(Jo(e)),t.trim=()=>t.check(ta()),t.normalize=(...e)=>t.check(ea(...e)),t.toLowerCase=()=>t.check(ra()),t.toUpperCase=()=>t.check(ia()),t.slugify=()=>t.check(na())}),Qs=p("ZodString",(t,r)=>{wi.init(t,r),sa.init(t,r),t.email=n=>t.check(bl(aa,n)),t.url=n=>t.check(Vo(Ys,n)),t.jwt=n=>t.check(jl(xa,n)),t.emoji=n=>t.check(Sl(la,n)),t.guid=n=>t.check(Zo(Xs,n)),t.uuid=n=>t.check(_l(Fi,n)),t.uuidv4=n=>t.check(xl(Fi,n)),t.uuidv6=n=>t.check(kl(Fi,n)),t.uuidv7=n=>t.check(Nl(Fi,n)),t.nanoid=n=>t.check(Tl(ua,n)),t.guid=n=>t.check(Zo(Xs,n)),t.cuid=n=>t.check(Il(ca,n)),t.cuid2=n=>t.check(El(da,n)),t.ulid=n=>t.check(Al(ha,n)),t.base64=n=>t.check(Dl(wa,n)),t.base64url=n=>t.check(Ll(ba,n)),t.xid=n=>t.check($l(pa,n)),t.ksuid=n=>t.check(Ol(fa,n)),t.ipv4=n=>t.check(Cl(ma,n)),t.ipv6=n=>t.check(Pl(ya,n)),t.cidrv4=n=>t.check(Rl(ga,n)),t.cidrv6=n=>t.check(Ul(va,n)),t.e164=n=>t.check(ql(_a,n)),t.datetime=n=>t.check(gd(n)),t.date=n=>t.check(vd(n)),t.time=n=>t.check(wd(n)),t.duration=n=>t.check(bd(n))});function oa(t){return Gu(Qs,t)}let Nr=p("ZodStringFormat",(t,r)=>{tr.init(t,r),sa.init(t,r)}),aa=p("ZodEmail",(t,r)=>{yn.init(t,r),Nr.init(t,r)});function Rd(t){return bl(aa,t)}let Xs=p("ZodGUID",(t,r)=>{Yi.init(t,r),Nr.init(t,r)});function Ud(t){return Zo(Xs,t)}let Fi=p("ZodUUID",(t,r)=>{wr.init(t,r),Nr.init(t,r)});function Dd(t){return _l(Fi,t)}function Ld(t){return xl(Fi,t)}function qd(t){return kl(Fi,t)}function jd(t){return Nl(Fi,t)}let Ys=p("ZodURL",(t,r)=>{en.init(t,r),Nr.init(t,r)});function zd(t){return Vo(Ys,t)}function Bd(t){return Vo(Ys,{protocol:/^https?$/,hostname:ci,...x(t)})}let la=p("ZodEmoji",(t,r)=>{Bn.init(t,r),Nr.init(t,r)});function Md(t){return Sl(la,t)}let ua=p("ZodNanoID",(t,r)=>{gn.init(t,r),Nr.init(t,r)});function Wd(t){return Tl(ua,t)}let ca=p("ZodCUID",(t,r)=>{ms.init(t,r),Nr.init(t,r)});function Fd(t){return Il(ca,t)}let da=p("ZodCUID2",(t,r)=>{Mn.init(t,r),Nr.init(t,r)});function Zd(t){return El(da,t)}let ha=p("ZodULID",(t,r)=>{ys.init(t,r),Nr.init(t,r)});function Vd(t){return Al(ha,t)}let pa=p("ZodXID",(t,r)=>{tn.init(t,r),Nr.init(t,r)});function Gd(t){return $l(pa,t)}let fa=p("ZodKSUID",(t,r)=>{T.init(t,r),Nr.init(t,r)});function Kd(t){return Ol(fa,t)}let ma=p("ZodIPv4",(t,r)=>{Xe.init(t,r),Nr.init(t,r)});function Jd(t){return Cl(ma,t)}let Yl=p("ZodMAC",(t,r)=>{Qe.init(t,r),Nr.init(t,r)});function Hd(t){return Ju(Yl,t)}let ya=p("ZodIPv6",(t,r)=>{pt.init(t,r),Nr.init(t,r)});function Qd(t){return Pl(ya,t)}let ga=p("ZodCIDRv4",(t,r)=>{mt.init(t,r),Nr.init(t,r)});function Xd(t){return Rl(ga,t)}let va=p("ZodCIDRv6",(t,r)=>{rr.init(t,r),Nr.init(t,r)});function Yd(t){return Ul(va,t)}let wa=p("ZodBase64",(t,r)=>{kr.init(t,r),Nr.init(t,r)});function eh(t){return Dl(wa,t)}let ba=p("ZodBase64URL",(t,r)=>{$r.init(t,r),Nr.init(t,r)});function th(t){return Ll(ba,t)}let _a=p("ZodE164",(t,r)=>{Zr.init(t,r),Nr.init(t,r)});function rh(t){return ql(_a,t)}let xa=p("ZodJWT",(t,r)=>{di.init(t,r),Nr.init(t,r)});function ih(t){return jl(xa,t)}let $s=p("ZodCustomStringFormat",(t,r)=>{Ui.init(t,r),Nr.init(t,r)});function nh(t,r,n={}){return Js($s,t,r,n)}function sh(t){return Js($s,"hostname",Gi,t)}function oh(t){return Js($s,"hex",Ki,t)}function ah(t,r){let n=r?.enc??"hex",e=`${t}_${n}`,l=i[e];if(!l)throw Error(`Unrecognized hash format: ${e}`);return Js($s,e,l,r)}let eo=p("ZodNumber",(t,r)=>{Er.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(e,l,g)=>Rc(t,e,l,g),t.gt=(e,l)=>t.check($n(e,l)),t.gte=(e,l)=>t.check(li(e,l)),t.min=(e,l)=>t.check(li(e,l)),t.lt=(e,l)=>t.check(An(e,l)),t.lte=(e,l)=>t.check(Si(e,l)),t.max=(e,l)=>t.check(Si(e,l)),t.int=e=>t.check(ka(e)),t.safe=e=>t.check(ka(e)),t.positive=e=>t.check($n(0,e)),t.nonnegative=e=>t.check(li(0,e)),t.negative=e=>t.check(An(0,e)),t.nonpositive=e=>t.check(Si(0,e)),t.multipleOf=(e,l)=>t.check(Ss(e,l)),t.step=(e,l)=>t.check(Ss(e,l)),t.finite=()=>t;let n=t._zod.bag;t.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),t.isFinite=!0,t.format=n.format??null});function eu(t){return tc(eo,t)}let ts=p("ZodNumberFormat",(t,r)=>{Yr.init(t,r),eo.init(t,r)});function ka(t){return ic(ts,t)}function lh(t){return nc(ts,t)}function uh(t){return sc(ts,t)}function ch(t){return oc(ts,t)}function dh(t){return ac(ts,t)}let to=p("ZodBoolean",(t,r)=>{Wn.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>Uc(t,n,e,l)});function tu(t){return lc(to,t)}let ro=p("ZodBigInt",(t,r)=>{vn.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(e,l,g)=>Dc(t,e,l,g),t.gte=(e,l)=>t.check(li(e,l)),t.min=(e,l)=>t.check(li(e,l)),t.gt=(e,l)=>t.check($n(e,l)),t.gte=(e,l)=>t.check(li(e,l)),t.min=(e,l)=>t.check(li(e,l)),t.lt=(e,l)=>t.check(An(e,l)),t.lte=(e,l)=>t.check(Si(e,l)),t.max=(e,l)=>t.check(Si(e,l)),t.positive=e=>t.check($n(BigInt(0),e)),t.negative=e=>t.check(An(BigInt(0),e)),t.nonpositive=e=>t.check(Si(BigInt(0),e)),t.nonnegative=e=>t.check(li(BigInt(0),e)),t.multipleOf=(e,l)=>t.check(Ss(e,l));let n=t._zod.bag;t.minValue=n.minimum??null,t.maxValue=n.maximum??null,t.format=n.format??null});function hh(t){return cc(ro,t)}let Na=p("ZodBigIntFormat",(t,r)=>{wn.init(t,r),ro.init(t,r)});function ph(t){return hc(Na,t)}function fh(t){return pc(Na,t)}let ru=p("ZodSymbol",(t,r)=>{ai.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>Lc(t,n,e,l)});function mh(t){return fc(ru,t)}let iu=p("ZodUndefined",(t,r)=>{Gr.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>jc(t,n,e,l)});function yh(t){return mc(iu,t)}let nu=p("ZodNull",(t,r)=>{Di.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>qc(t,n,e,l)});function su(t){return yc(nu,t)}let ou=p("ZodAny",(t,r)=>{bn.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>Mc(t,n,e,l)});function gh(){return gc(ou)}let au=p("ZodUnknown",(t,r)=>{rn.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>Wc(t,n,e,l)});function rs(){return vc(au)}let lu=p("ZodNever",(t,r)=>{_n.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>Bc(t,n,e,l)});function Sa(t){return wc(lu,t)}let uu=p("ZodVoid",(t,r)=>{xn.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>zc(t,n,e,l)});function vh(t){return bc(uu,t)}let Ta=p("ZodDate",(t,r)=>{po.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(e,l,g)=>Fc(t,e,l,g),t.min=(e,l)=>t.check(li(e,l)),t.max=(e,l)=>t.check(Si(e,l));let n=t._zod.bag;t.minDate=n.minimum?new Date(n.minimum):null,t.maxDate=n.maximum?new Date(n.maximum):null});function wh(t){return _c(Ta,t)}let cu=p("ZodArray",(t,r)=>{fo.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>rd(t,n,e,l),t.element=r.element,t.min=(n,e)=>t.check(es(n,e)),t.nonempty=n=>t.check(es(1,n)),t.max=(n,e)=>t.check(Gs(n,e)),t.length=(n,e)=>t.check(Ks(n,e)),t.unwrap=()=>t.element});function io(t,r){return Nc(cu,t,r)}function bh(t){return Ea(Object.keys(t._zod.def.shape))}let no=p("ZodObject",(t,r)=>{Fn.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>id(t,n,e,l),ne(t,"shape",()=>r.shape),t.keyof=()=>Ea(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:rs()}),t.loose=()=>t.clone({...t._zod.def,catchall:rs()}),t.strict=()=>t.clone({...t._zod.def,catchall:Sa()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>Je(t,n),t.safeExtend=n=>rt(t,n),t.merge=n=>Ye(t,n),t.pick=n=>Ae(t,n),t.omit=n=>lt(t,n),t.partial=(...n)=>St($a,t,n[0]),t.required=(...n)=>bt(Oa,t,n[0])});function _h(t,r){return new no({type:"object",shape:t??{},...x(r)})}function xh(t,r){return new no({type:"object",shape:t,catchall:Sa(),...x(r)})}function kh(t,r){return new no({type:"object",shape:t,catchall:rs(),...x(r)})}let so=p("ZodUnion",(t,r)=>{Zn.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>Vl(t,n,e,l),t.options=r.options});function Ia(t,r){return new so({type:"union",options:t,...x(r)})}let du=p("ZodXor",(t,r)=>{so.init(t,r),Ls.init(t,r),t._zod.processJSONSchema=(n,e,l)=>Vl(t,n,e,l),t.options=r.options});function Nh(t,r){return new du({type:"union",options:t,inclusive:!1,...x(r)})}let hu=p("ZodDiscriminatedUnion",(t,r)=>{so.init(t,r),wo.init(t,r)});function Sh(t,r,n){return new hu({type:"union",options:r,discriminator:t,...x(n)})}let pu=p("ZodIntersection",(t,r)=>{qs.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>nd(t,n,e,l)});function fu(t,r){return new pu({type:"intersection",left:t,right:r})}let mu=p("ZodTuple",(t,r)=>{kn.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>sd(t,n,e,l),t.rest=n=>t.clone({...t._zod.def,rest:n})});function yu(t,r,n){let e=r instanceof Zt,l=e?n:r;return new mu({type:"tuple",items:t,rest:e?r:null,...x(l)})}let oo=p("ZodRecord",(t,r)=>{_o.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>od(t,n,e,l),t.keyType=r.keyType,t.valueType=r.valueType});function gu(t,r,n){return new oo({type:"record",keyType:t,valueType:r,...x(n)})}function Th(t,r,n){let e=ue(t);return e._zod.values=void 0,new oo({type:"record",keyType:e,valueType:r,...x(n)})}function Ih(t,r,n){return new oo({type:"record",keyType:t,valueType:r,mode:"loose",...x(n)})}let vu=p("ZodMap",(t,r)=>{ws.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>ed(t,n,e,l),t.keyType=r.keyType,t.valueType=r.valueType,t.min=(...n)=>t.check(On(...n)),t.nonempty=n=>t.check(On(1,n)),t.max=(...n)=>t.check(Ts(...n)),t.size=(...n)=>t.check(Vs(...n))});function Eh(t,r,n){return new vu({type:"map",keyType:t,valueType:r,...x(n)})}let wu=p("ZodSet",(t,r)=>{Nn.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>td(t,n,e,l),t.min=(...n)=>t.check(On(...n)),t.nonempty=n=>t.check(On(1,n)),t.max=(...n)=>t.check(Ts(...n)),t.size=(...n)=>t.check(Vs(...n))});function Ah(t,r){return new wu({type:"set",valueType:t,...x(r)})}let Os=p("ZodEnum",(t,r)=>{js.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(e,l,g)=>Zc(t,e,l,g),t.enum=r.entries,t.options=Object.values(r.entries);let n=new Set(Object.keys(r.entries));t.extract=(e,l)=>{let g={};for(let M of e)if(n.has(M))g[M]=r.entries[M];else throw Error(`Key ${M} not found in enum`);return new Os({...r,checks:[],...x(l),entries:g})},t.exclude=(e,l)=>{let g={...r.entries};for(let M of e)if(n.has(M))delete g[M];else throw Error(`Key ${M} not found in enum`);return new Os({...r,checks:[],...x(l),entries:g})}});function Ea(t,r){return new Os({type:"enum",entries:Array.isArray(t)?Object.fromEntries(t.map(n=>[n,n])):t,...x(r)})}function $h(t,r){return new Os({type:"enum",entries:t,...x(r)})}let bu=p("ZodLiteral",(t,r)=>{No.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>Vc(t,n,e,l),t.values=new Set(r.values),Object.defineProperty(t,"value",{get(){if(r.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return r.values[0]}})});function Oh(t,r){return new bu({type:"literal",values:Array.isArray(t)?t:[t],...x(r)})}let _u=p("ZodFile",(t,r)=>{Vn.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>Jc(t,n,e,l),t.min=(n,e)=>t.check(On(n,e)),t.max=(n,e)=>t.check(Ts(n,e)),t.mime=(n,e)=>t.check(Yo(Array.isArray(n)?n:[n],e))});function Ch(t){return Sc(_u,t)}let xu=p("ZodTransform",(t,r)=>{So.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>Yc(t,n,e,l),t._zod.parse=(n,e)=>{if(e.direction==="backward")throw new q(t.constructor.name);n.addIssue=g=>{typeof g=="string"?n.issues.push(Ot(g,n.value,r)):(g.fatal&&(g.continue=!1),g.code??(g.code="custom"),g.input??(g.input=n.value),g.inst??(g.inst=t),n.issues.push(Ot(g)))};let l=r.transform(n.value,n);return l instanceof Promise?l.then(g=>(n.value=g,n)):(n.value=l,n)}});function Aa(t){return new xu({type:"transform",transform:t})}let $a=p("ZodOptional",(t,r)=>{zs.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>Gl(t,n,e,l),t.unwrap=()=>t._zod.def.innerType});function ao(t){return new $a({type:"optional",innerType:t})}let ku=p("ZodExactOptional",(t,r)=>{To.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>Gl(t,n,e,l),t.unwrap=()=>t._zod.def.innerType});function Nu(t){return new ku({type:"optional",innerType:t})}let Su=p("ZodNullable",(t,r)=>{Io.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>ad(t,n,e,l),t.unwrap=()=>t._zod.def.innerType});function lo(t){return new Su({type:"nullable",innerType:t})}function Ph(t){return ao(lo(t))}let Tu=p("ZodDefault",(t,r)=>{Bs.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>ud(t,n,e,l),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function Iu(t,r){return new Tu({type:"default",innerType:t,get defaultValue(){return typeof r=="function"?r():ee(r)}})}let Eu=p("ZodPrefault",(t,r)=>{Eo.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>cd(t,n,e,l),t.unwrap=()=>t._zod.def.innerType});function Au(t,r){return new Eu({type:"prefault",innerType:t,get defaultValue(){return typeof r=="function"?r():ee(r)}})}let Oa=p("ZodNonOptional",(t,r)=>{Ms.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>ld(t,n,e,l),t.unwrap=()=>t._zod.def.innerType});function $u(t,r){return new Oa({type:"nonoptional",innerType:t,...x(r)})}let Ou=p("ZodSuccess",(t,r)=>{ei.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>Hc(t,n,e,l),t.unwrap=()=>t._zod.def.innerType});function Rh(t){return new Ou({type:"success",innerType:t})}let Cu=p("ZodCatch",(t,r)=>{$o.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>dd(t,n,e,l),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function Pu(t,r){return new Cu({type:"catch",innerType:t,catchValue:typeof r=="function"?r:()=>r})}let Ru=p("ZodNaN",(t,r)=>{Sn.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>Gc(t,n,e,l)});function Uh(t){return kc(Ru,t)}let Ca=p("ZodPipe",(t,r)=>{Oo.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>hd(t,n,e,l),t.in=r.in,t.out=r.out});function uo(t,r){return new Ca({type:"pipe",in:t,out:r})}let Pa=p("ZodCodec",(t,r)=>{Ca.init(t,r),Ws.init(t,r)});function Dh(t,r,n){return new Pa({type:"pipe",in:t,out:r,transform:n.decode,reverseTransform:n.encode})}let Uu=p("ZodReadonly",(t,r)=>{sn.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>pd(t,n,e,l),t.unwrap=()=>t._zod.def.innerType});function Du(t){return new Uu({type:"readonly",innerType:t})}let Lu=p("ZodTemplateLiteral",(t,r)=>{qi.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>Kc(t,n,e,l)});function Lh(t,r){return new Lu({type:"template_literal",parts:t,...x(r)})}let qu=p("ZodLazy",(t,r)=>{Ro.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>md(t,n,e,l),t.unwrap=()=>t._zod.def.getter()});function ju(t){return new qu({type:"lazy",getter:t})}let zu=p("ZodPromise",(t,r)=>{on.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>fd(t,n,e,l),t.unwrap=()=>t._zod.def.innerType});function qh(t){return new zu({type:"promise",innerType:t})}let Bu=p("ZodFunction",(t,r)=>{Po.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>Xc(t,n,e,l)});function Ra(t){return new Bu({type:"function",input:Array.isArray(t?.input)?yu(t?.input):t?.input??io(rs()),output:t?.output??rs()})}let co=p("ZodCustom",(t,r)=>{Tn.init(t,r),Xt.init(t,r),t._zod.processJSONSchema=(n,e,l)=>Qc(t,n,e,l)});function jh(t){let r=new hr({check:"custom"});return r._zod.check=t,r}function zh(t,r){return Tc(co,t??(()=>!0),r)}function Mu(t,r={}){return Ic(co,t,r)}function Bh(t){return Zl(t)}let Mh=Ac,Wh=$c;function Fh(t,r={}){let n=new co({type:"custom",check:"custom",fn:e=>e instanceof t,abort:!0,...x(r)});return n._zod.bag.Class=t,n._zod.check=e=>{e.value instanceof t||e.issues.push({code:"invalid_type",expected:t.name,input:e.value,inst:n,path:[...n._zod.def.path??[]]})},n}let Zh=(...t)=>Oc({Codec:Pa,Boolean:to,String:Qs},...t);function Vh(t){let r=ju(()=>Ia([oa(t),eu(),tu(),su(),io(r),gu(oa(),r)]));return r}function Gh(t,r){return uo(Aa(t),r)}let Op={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function Cp(t){a({customError:t})}function Pp(){return a().customError}y||(y={});let At={...W,...j,iso:$},Rp=new Set(["$schema","$ref","$defs","definitions","$id","id","$comment","$anchor","$vocabulary","$dynamicRef","$dynamicAnchor","type","enum","const","anyOf","oneOf","allOf","not","properties","required","additionalProperties","patternProperties","propertyNames","minProperties","maxProperties","items","prefixItems","additionalItems","minItems","maxItems","uniqueItems","contains","minContains","maxContains","minLength","maxLength","pattern","format","minimum","maximum","exclusiveMinimum","exclusiveMaximum","multipleOf","description","default","contentEncoding","contentMediaType","contentSchema","unevaluatedItems","unevaluatedProperties","if","then","else","dependentSchemas","dependentRequired","nullable","readOnly"]);function Up(t,r){if(typeof t=="boolean")return t?At.any():At.never();let n={version:function(e,l){let g=e.$schema;return g==="https://json-schema.org/draft/2020-12/schema"?"draft-2020-12":g==="http://json-schema.org/draft-07/schema#"?"draft-7":g==="http://json-schema.org/draft-04/schema#"?"draft-4":l??"draft-2020-12"}(t,r?.defaultTarget),defs:t.$defs||t.definitions||{},refs:new Map,processing:new Set,rootSchema:t,registry:r?.registry??Ni};return function e(l,g){if(typeof l=="boolean")return l?At.any():At.never();let M=function _e(Ne,et){let st;if(Ne.not!==void 0){if(typeof Ne.not=="object"&&Object.keys(Ne.not).length===0)return At.never();throw Error("not is not supported in Zod (except { not: {} } for never)")}if(Ne.unevaluatedItems!==void 0)throw Error("unevaluatedItems is not supported");if(Ne.unevaluatedProperties!==void 0)throw Error("unevaluatedProperties is not supported");if(Ne.if!==void 0||Ne.then!==void 0||Ne.else!==void 0)throw Error("Conditional schemas (if/then/else) are not supported");if(Ne.dependentSchemas!==void 0||Ne.dependentRequired!==void 0)throw Error("dependentSchemas and dependentRequired are not supported");if(Ne.$ref){let Ke=Ne.$ref;if(et.refs.has(Ke))return et.refs.get(Ke);if(et.processing.has(Ke))return At.lazy(()=>{if(!et.refs.has(Ke))throw Error(`Circular reference not resolved: ${Ke}`);return et.refs.get(Ke)});et.processing.add(Ke);let Mt=e(function(Rr,fr){if(!Rr.startsWith("#"))throw Error("External $ref is not supported, only local refs (#/...) are allowed");let mr=Rr.slice(1).split("/").filter(Boolean);if(mr.length===0)return fr.rootSchema;let jr=fr.version==="draft-2020-12"?"$defs":"definitions";if(mr[0]===jr){let fi=mr[1];if(!fi||!fr.defs[fi])throw Error(`Reference not found: ${Rr}`);return fr.defs[fi]}throw Error(`Reference not found: ${Rr}`)}(Ke,et),et);return et.refs.set(Ke,Mt),et.processing.delete(Ke),Mt}if(Ne.enum!==void 0){let Ke=Ne.enum;if(et.version==="openapi-3.0"&&Ne.nullable===!0&&Ke.length===1&&Ke[0]===null)return At.null();if(Ke.length===0)return At.never();if(Ke.length===1)return At.literal(Ke[0]);if(Ke.every(Rr=>typeof Rr=="string"))return At.enum(Ke);let Mt=Ke.map(Rr=>At.literal(Rr));return Mt.length<2?Mt[0]:At.union([Mt[0],Mt[1],...Mt.slice(2)])}if(Ne.const!==void 0)return At.literal(Ne.const);let Nt=Ne.type;if(Array.isArray(Nt)){let Ke=Nt.map(Mt=>_e({...Ne,type:Mt},et));return Ke.length===0?At.never():Ke.length===1?Ke[0]:At.union(Ke)}if(!Nt)return At.any();switch(Nt){case"string":{let Ke=At.string();if(Ne.format){let Mt=Ne.format;Mt==="email"?Ke=Ke.check(At.email()):Mt==="uri"||Mt==="uri-reference"?Ke=Ke.check(At.url()):Mt==="uuid"||Mt==="guid"?Ke=Ke.check(At.uuid()):Mt==="date-time"?Ke=Ke.check(At.iso.datetime()):Mt==="date"?Ke=Ke.check(At.iso.date()):Mt==="time"?Ke=Ke.check(At.iso.time()):Mt==="duration"?Ke=Ke.check(At.iso.duration()):Mt==="ipv4"?Ke=Ke.check(At.ipv4()):Mt==="ipv6"?Ke=Ke.check(At.ipv6()):Mt==="mac"?Ke=Ke.check(At.mac()):Mt==="cidr"?Ke=Ke.check(At.cidrv4()):Mt==="cidr-v6"?Ke=Ke.check(At.cidrv6()):Mt==="base64"?Ke=Ke.check(At.base64()):Mt==="base64url"?Ke=Ke.check(At.base64url()):Mt==="e164"?Ke=Ke.check(At.e164()):Mt==="jwt"?Ke=Ke.check(At.jwt()):Mt==="emoji"?Ke=Ke.check(At.emoji()):Mt==="nanoid"?Ke=Ke.check(At.nanoid()):Mt==="cuid"?Ke=Ke.check(At.cuid()):Mt==="cuid2"?Ke=Ke.check(At.cuid2()):Mt==="ulid"?Ke=Ke.check(At.ulid()):Mt==="xid"?Ke=Ke.check(At.xid()):Mt==="ksuid"&&(Ke=Ke.check(At.ksuid()))}typeof Ne.minLength=="number"&&(Ke=Ke.min(Ne.minLength)),typeof Ne.maxLength=="number"&&(Ke=Ke.max(Ne.maxLength)),Ne.pattern&&(Ke=Ke.regex(new RegExp(Ne.pattern))),st=Ke;break}case"number":case"integer":{let Ke=Nt==="integer"?At.number().int():At.number();typeof Ne.minimum=="number"&&(Ke=Ke.min(Ne.minimum)),typeof Ne.maximum=="number"&&(Ke=Ke.max(Ne.maximum)),typeof Ne.exclusiveMinimum=="number"?Ke=Ke.gt(Ne.exclusiveMinimum):Ne.exclusiveMinimum===!0&&typeof Ne.minimum=="number"&&(Ke=Ke.gt(Ne.minimum)),typeof Ne.exclusiveMaximum=="number"?Ke=Ke.lt(Ne.exclusiveMaximum):Ne.exclusiveMaximum===!0&&typeof Ne.maximum=="number"&&(Ke=Ke.lt(Ne.maximum)),typeof Ne.multipleOf=="number"&&(Ke=Ke.multipleOf(Ne.multipleOf)),st=Ke;break}case"boolean":st=At.boolean();break;case"null":st=At.null();break;case"object":{let Ke={},Mt=Ne.properties||{},Rr=new Set(Ne.required||[]);for(let[mr,jr]of Object.entries(Mt)){let fi=e(jr,et);Ke[mr]=Rr.has(mr)?fi:fi.optional()}if(Ne.propertyNames){let mr=e(Ne.propertyNames,et),jr=Ne.additionalProperties&&typeof Ne.additionalProperties=="object"?e(Ne.additionalProperties,et):At.any();if(Object.keys(Ke).length===0){st=At.record(mr,jr);break}let fi=At.object(Ke).passthrough(),mi=At.looseRecord(mr,jr);st=At.intersection(fi,mi);break}if(Ne.patternProperties){let mr=Ne.patternProperties,jr=Object.keys(mr),fi=[];for(let Cs of jr){let ho=e(mr[Cs],et),Bp=At.string().regex(new RegExp(Cs));fi.push(At.looseRecord(Bp,ho))}let mi=[];if(Object.keys(Ke).length>0&&mi.push(At.object(Ke).passthrough()),mi.push(...fi),mi.length===0)st=At.object({}).passthrough();else if(mi.length===1)st=mi[0];else{let Cs=At.intersection(mi[0],mi[1]);for(let ho=2;ho<mi.length;ho++)Cs=At.intersection(Cs,mi[ho]);st=Cs}break}let fr=At.object(Ke);st=Ne.additionalProperties===!1?fr.strict():typeof Ne.additionalProperties=="object"?fr.catchall(e(Ne.additionalProperties,et)):fr.passthrough();break}case"array":{let Ke=Ne.prefixItems,Mt=Ne.items;if(Ke&&Array.isArray(Ke)){let Rr=Ke.map(mr=>e(mr,et)),fr=Mt&&typeof Mt=="object"&&!Array.isArray(Mt)?e(Mt,et):void 0;st=fr?At.tuple(Rr).rest(fr):At.tuple(Rr),typeof Ne.minItems=="number"&&(st=st.check(At.minLength(Ne.minItems))),typeof Ne.maxItems=="number"&&(st=st.check(At.maxLength(Ne.maxItems)))}else if(Array.isArray(Mt)){let Rr=Mt.map(mr=>e(mr,et)),fr=Ne.additionalItems&&typeof Ne.additionalItems=="object"?e(Ne.additionalItems,et):void 0;st=fr?At.tuple(Rr).rest(fr):At.tuple(Rr),typeof Ne.minItems=="number"&&(st=st.check(At.minLength(Ne.minItems))),typeof Ne.maxItems=="number"&&(st=st.check(At.maxLength(Ne.maxItems)))}else if(Mt!==void 0){let Rr=e(Mt,et),fr=At.array(Rr);typeof Ne.minItems=="number"&&(fr=fr.min(Ne.minItems)),typeof Ne.maxItems=="number"&&(fr=fr.max(Ne.maxItems)),st=fr}else st=At.array(At.any());break}default:throw Error(`Unsupported type: ${Nt}`)}return Ne.description&&(st=st.describe(Ne.description)),Ne.default!==void 0&&(st=st.default(Ne.default)),st}(l,g),be=l.type||l.enum!==void 0||l.const!==void 0;if(l.anyOf&&Array.isArray(l.anyOf)){let _e=l.anyOf.map(et=>e(et,g)),Ne=At.union(_e);M=be?At.intersection(M,Ne):Ne}if(l.oneOf&&Array.isArray(l.oneOf)){let _e=l.oneOf.map(et=>e(et,g)),Ne=At.xor(_e);M=be?At.intersection(M,Ne):Ne}if(l.allOf&&Array.isArray(l.allOf))if(l.allOf.length===0)M=be?M:At.any();else{let _e=be?M:e(l.allOf[0],g),Ne=+!be;for(let et=Ne;et<l.allOf.length;et++)_e=At.intersection(_e,e(l.allOf[et],g));M=_e}l.nullable===!0&&g.version==="openapi-3.0"&&(M=At.nullable(M)),l.readOnly===!0&&(M=At.readonly(M));let De={};for(let _e of["$id","id","$comment","$anchor","$vocabulary","$dynamicRef","$dynamicAnchor"])_e in l&&(De[_e]=l[_e]);for(let _e of["contentEncoding","contentMediaType","contentSchema"])_e in l&&(De[_e]=l[_e]);for(let _e of Object.keys(l))Rp.has(_e)||(De[_e]=l[_e]);return Object.keys(De).length>0&&g.registry.add(M,De),M}(t,n)}function Dp(t){return Ku(Qs,t)}function Lp(t){return rc(eo,t)}function qp(t){return uc(to,t)}function jp(t){return dc(ro,t)}function zp(t){return xc(Ta,t)}a(In())},Le.__chunk_13191=(Ue,ie,o)=>{"use strict";o.d(ie,{zp:()=>E,vX:()=>S}),o(78139),o(80766),o(50426);var d=o(3013);function y(A){if(typeof A!="boolean")throw Error(`boolean expected, not ${A}`)}function h(A){if(!Number.isSafeInteger(A)||A<0)throw Error("positive integer expected, got "+A)}function i(A,U,te=""){let Y=A instanceof Uint8Array||ArrayBuffer.isView(A)&&A.constructor.name==="Uint8Array",D=A?.length,ee=U!==void 0;if(!Y||ee&&D!==U)throw Error((te&&`"${te}" `)+"expected Uint8Array"+(ee?` of length ${U}`:"")+", got "+(Y?`length=${D}`:`type=${typeof A}`));return A}function s(A,U=!0){if(A.destroyed)throw Error("Hash instance has been destroyed");if(U&&A.finished)throw Error("Hash#digest() has already been called")}function c(A){return new Uint32Array(A.buffer,A.byteOffset,Math.floor(A.byteLength/4))}function O(...A){for(let U=0;U<A.length;U++)A[U].fill(0)}let j=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,$=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",W=Array.from({length:256},(A,U)=>U.toString(16).padStart(2,"0")),K={_0:48,_9:57,A:65,F:70,a:97,f:102};function I(A){return A>=K._0&&A<=K._9?A-K._0:A>=K.A&&A<=K.F?A-(K.A-10):A>=K.a&&A<=K.f?A-(K.a-10):void 0}function p(A,U,te=!0){if(U===void 0)return new Uint8Array(A);if(U.length!==A)throw Error('"output" expected Uint8Array of length '+A+", got: "+U.length);if(te&&U.byteOffset%4!=0)throw Error("invalid output, must be aligned");return U}function _(A){return Uint8Array.from(A)}function m(A=32){let U=typeof Sr=="object"?Sr.crypto:null;if(typeof U?.getRandomValues!="function")throw Error("crypto.getRandomValues must be defined");return U.getRandomValues(new Uint8Array(A))}function q(A,U=m){let{nonceLength:te}=A;h(te);let Y=(D,ee)=>{let le=function(...se){let ce=0;for(let H=0;H<se.length;H++){let ue=se[H];i(ue),ce+=ue.length}let me=new Uint8Array(ce);for(let H=0,ue=0;H<se.length;H++){let x=se[H];me.set(x,ue),ue+=x.length}return me}(D,ee);return ee.fill(0),le};return(D,...ee)=>({encrypt(le){i(le);let se=U(te),ce=A(D,se,...ee).encrypt(le);return ce instanceof Promise?ce.then(me=>Y(se,me)):Y(se,ce)},decrypt(le){i(le);let se=le.subarray(0,te),ce=le.subarray(te);return A(D,se,...ee).decrypt(ce)}})}let J=A=>Uint8Array.from(A.split(""),U=>U.charCodeAt(0)),a=J("expand 16-byte k"),V=J("expand 32-byte k"),C=c(a),L=c(V);function k(A,U){return A<<U|A>>>32-U}function N(A){return A.byteOffset%4==0}let P=4294967296-1,b=Uint32Array.of();function z(A,U){let{allowShortKeys:te,extendNonceFn:Y,counterLength:D,counterRight:ee,rounds:le}=function(se,ce){if(ce==null||typeof ce!="object")throw Error("options must be defined");return Object.assign(se,ce)}({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},U);if(typeof A!="function")throw Error("core must be a function");return h(D),h(le),y(ee),y(te),(se,ce,me,H,ue=0)=>{let x,fe;i(se,void 0,"key"),i(ce,void 0,"nonce"),i(me,void 0,"data");let ge=me.length;if(H===void 0&&(H=new Uint8Array(ge)),i(H,void 0,"output"),h(ue),ue<0||ue>=P)throw Error("arx: counter overflow");if(H.length<ge)throw Error(`arx: output (${H.length}) is shorter than data (${ge})`);let Se=[],Re=se.length;if(Re===32)Se.push(x=_(se)),fe=L;else if(Re===16&&te)(x=new Uint8Array(32)).set(se),x.set(se,16),fe=C,Se.push(x);else throw i(se,32,"arx key"),Error("invalid key size");N(ce)||Se.push(ce=_(ce));let ae=c(x);if(Y){if(ce.length!==24)throw Error("arx: extended nonce must be 24 bytes");Y(fe,ae,c(ce.subarray(0,16)),ae),ce=ce.subarray(16)}let Ae=16-D;if(Ae!==ce.length)throw Error(`arx: nonce must be ${Ae} or 16 bytes`);if(Ae!==12){let lt=new Uint8Array(12);lt.set(ce,ee?0:12-ce.length),ce=lt,Se.push(ce)}return function(lt,Je,rt,Ye,St,bt,qe,re){let We=St.length,ut=new Uint8Array(64),kt=c(ut),Ct=N(St)&&N(bt),tt=Ct?c(St):b,Ot=Ct?c(bt):b;for(let Wt=0;Wt<We;qe++){if(lt(Je,rt,Ye,kt,qe,re),qe>=P)throw Error("arx: counter overflow");let yt=Math.min(64,We-Wt);if(Ct&&yt===64){let ct=Wt/4;if(Wt%4!=0)throw Error("arx: invalid block position");for(let vt=0,Ut;vt<16;vt++)Ot[Ut=ct+vt]=tt[Ut]^kt[vt];Wt+=64;continue}for(let ct=0,vt;ct<yt;ct++)bt[vt=Wt+ct]=St[vt]^ut[ct];Wt+=yt}}(A,fe,ae,c(ce),me,H,ue,le),O(...Se),H}}function F(A,U){return 255&A[U++]|(255&A[U++])<<8}class Q{blockLen=16;outputLen=16;buffer=new Uint8Array(16);r=new Uint16Array(10);h=new Uint16Array(10);pad=new Uint16Array(8);pos=0;finished=!1;constructor(U){let te=F(U=_(i(U,32,"key")),0),Y=F(U,2),D=F(U,4),ee=F(U,6),le=F(U,8),se=F(U,10),ce=F(U,12),me=F(U,14);this.r[0]=8191&te,this.r[1]=(te>>>13|Y<<3)&8191,this.r[2]=(Y>>>10|D<<6)&7939,this.r[3]=(D>>>7|ee<<9)&8191,this.r[4]=(ee>>>4|le<<12)&255,this.r[5]=le>>>1&8190,this.r[6]=(le>>>14|se<<2)&8191,this.r[7]=(se>>>11|ce<<5)&8065,this.r[8]=(ce>>>8|me<<8)&8191,this.r[9]=me>>>5&127;for(let H=0;H<8;H++)this.pad[H]=F(U,16+2*H)}process(U,te,Y=!1){let{h:D,r:ee}=this,le=ee[0],se=ee[1],ce=ee[2],me=ee[3],H=ee[4],ue=ee[5],x=ee[6],fe=ee[7],ge=ee[8],Se=ee[9],Re=F(U,te+0),ae=F(U,te+2),Ae=F(U,te+4),lt=F(U,te+6),Je=F(U,te+8),rt=F(U,te+10),Ye=F(U,te+12),St=F(U,te+14),bt=D[0]+(8191&Re),qe=D[1]+((Re>>>13|ae<<3)&8191),re=D[2]+((ae>>>10|Ae<<6)&8191),We=D[3]+((Ae>>>7|lt<<9)&8191),ut=D[4]+((lt>>>4|Je<<12)&8191),kt=D[5]+(Je>>>1&8191),Ct=D[6]+((Je>>>14|rt<<2)&8191),tt=D[7]+((rt>>>11|Ye<<5)&8191),Ot=D[8]+((Ye>>>8|St<<8)&8191),Wt=D[9]+(St>>>5|2048*!Y),yt=0,ct=0+bt*le+5*Se*qe+5*ge*re+5*fe*We+5*x*ut;yt=ct>>>13,ct&=8191,ct+=5*ue*kt+5*H*Ct+5*me*tt+5*ce*Ot+5*se*Wt,yt+=ct>>>13,ct&=8191;let vt=yt+bt*se+qe*le+5*Se*re+5*ge*We+5*fe*ut;yt=vt>>>13,vt&=8191,vt+=5*x*kt+5*ue*Ct+5*H*tt+5*me*Ot+5*ce*Wt,yt+=vt>>>13,vt&=8191;let Ut=yt+bt*ce+qe*se+re*le+5*Se*We+5*ge*ut;yt=Ut>>>13,Ut&=8191,Ut+=5*fe*kt+5*x*Ct+5*ue*tt+5*H*Ot+5*me*Wt,yt+=Ut>>>13,Ut&=8191;let nr=yt+bt*me+qe*ce+re*se+We*le+5*Se*ut;yt=nr>>>13,nr&=8191,nr+=5*ge*kt+5*fe*Ct+5*x*tt+5*ue*Ot+5*H*Wt,yt+=nr>>>13,nr&=8191;let br=yt+bt*H+qe*me+re*ce+We*se+ut*le;yt=br>>>13,br&=8191,br+=5*Se*kt+5*ge*Ct+5*fe*tt+5*x*Ot+5*ue*Wt,yt+=br>>>13,br&=8191;let ke=yt+bt*ue+qe*H+re*me+We*ce+ut*se;yt=ke>>>13,ke&=8191,ke+=kt*le+5*Se*Ct+5*ge*tt+5*fe*Ot+5*x*Wt,yt+=ke>>>13,ke&=8191;let xe=yt+bt*x+qe*ue+re*H+We*me+ut*ce;yt=xe>>>13,xe&=8191,xe+=kt*se+Ct*le+5*Se*tt+5*ge*Ot+5*fe*Wt,yt+=xe>>>13,xe&=8191;let Fe=yt+bt*fe+qe*x+re*ue+We*H+ut*me;yt=Fe>>>13,Fe&=8191,Fe+=kt*ce+Ct*se+tt*le+5*Se*Ot+5*ge*Wt,yt+=Fe>>>13,Fe&=8191;let Ze=yt+bt*ge+qe*fe+re*x+We*ue+ut*H;yt=Ze>>>13,Ze&=8191,Ze+=kt*me+Ct*ce+tt*se+Ot*le+5*Se*Wt,yt+=Ze>>>13,Ze&=8191;let ht=yt+bt*Se+qe*ge+re*fe+We*x+ut*ue;yt=ht>>>13,ht&=8191,ht+=kt*H+Ct*me+tt*ce+Ot*se+Wt*le,yt+=ht>>>13,ht&=8191,ct=8191&(yt=(yt=(yt<<2)+yt|0)+ct|0),yt>>>=13,vt+=yt,D[0]=ct,D[1]=vt,D[2]=Ut,D[3]=nr,D[4]=br,D[5]=ke,D[6]=xe,D[7]=Fe,D[8]=Ze,D[9]=ht}finalize(){let{h:U,pad:te}=this,Y=new Uint16Array(10),D=U[1]>>>13;U[1]&=8191;for(let se=2;se<10;se++)U[se]+=D,D=U[se]>>>13,U[se]&=8191;U[0]+=5*D,D=U[0]>>>13,U[0]&=8191,U[1]+=D,D=U[1]>>>13,U[1]&=8191,U[2]+=D,Y[0]=U[0]+5,D=Y[0]>>>13,Y[0]&=8191;for(let se=1;se<10;se++)Y[se]=U[se]+D,D=Y[se]>>>13,Y[se]&=8191;Y[9]-=8192;let ee=(1^D)-1;for(let se=0;se<10;se++)Y[se]&=ee;ee=~ee;for(let se=0;se<10;se++)U[se]=U[se]&ee|Y[se];U[0]=(U[0]|U[1]<<13)&65535,U[1]=(U[1]>>>3|U[2]<<10)&65535,U[2]=(U[2]>>>6|U[3]<<7)&65535,U[3]=(U[3]>>>9|U[4]<<4)&65535,U[4]=(U[4]>>>12|U[5]<<1|U[6]<<14)&65535,U[5]=(U[6]>>>2|U[7]<<11)&65535,U[6]=(U[7]>>>5|U[8]<<8)&65535,U[7]=(U[8]>>>8|U[9]<<5)&65535;let le=U[0]+te[0];U[0]=65535&le;for(let se=1;se<8;se++)le=(U[se]+te[se]|0)+(le>>>16)|0,U[se]=65535&le;O(Y)}update(U){s(this),i(U);let{buffer:te,blockLen:Y}=this,D=(U=_(U)).length;for(let ee=0;ee<D;){let le=Math.min(Y-this.pos,D-ee);if(le===Y){for(;Y<=D-ee;ee+=Y)this.process(U,ee);continue}te.set(U.subarray(ee,ee+le),this.pos),this.pos+=le,ee+=le,this.pos===Y&&(this.process(te,0,!1),this.pos=0)}return this}destroy(){O(this.h,this.r,this.buffer,this.pad)}digestInto(U){s(this),function(le,se){i(le,void 0,"output");let ce=se.outputLen;if(le.length<ce)throw Error("digestInto() expects output buffer of length at least "+ce)}(U,this),this.finished=!0;let{buffer:te,h:Y}=this,{pos:D}=this;if(D){for(te[D++]=1;D<16;D++)te[D]=0;this.process(te,0,!0)}this.finalize();let ee=0;for(let le=0;le<8;le++)U[ee++]=Y[le]>>>0,U[ee++]=Y[le]>>>8;return U}digest(){let{buffer:U,outputLen:te}=this;this.digestInto(U);let Y=U.slice(0,te);return this.destroy(),Y}}let G=function(A){let U=(Y,D)=>A(D).update(Y).digest(),te=A(new Uint8Array(32));return U.outputLen=te.outputLen,U.blockLen=te.blockLen,U.create=Y=>A(Y),U}(A=>new Q(A));function X(A,U,te,Y,D,ee=20){let le=A[0],se=A[1],ce=A[2],me=A[3],H=U[0],ue=U[1],x=U[2],fe=U[3],ge=U[4],Se=U[5],Re=U[6],ae=U[7],Ae=te[0],lt=te[1],Je=te[2],rt=le,Ye=se,St=ce,bt=me,qe=H,re=ue,We=x,ut=fe,kt=ge,Ct=Se,tt=Re,Ot=ae,Wt=D,yt=Ae,ct=lt,vt=Je;for(let nr=0;nr<ee;nr+=2)kt=kt+(Wt=k(Wt^(rt=rt+qe|0),16))|0,rt=rt+(qe=k(qe^kt,12))|0,kt=kt+(Wt=k(Wt^rt,8))|0,qe=k(qe^kt,7),Ct=Ct+(yt=k(yt^(Ye=Ye+re|0),16))|0,Ye=Ye+(re=k(re^Ct,12))|0,Ct=Ct+(yt=k(yt^Ye,8))|0,re=k(re^Ct,7),tt=tt+(ct=k(ct^(St=St+We|0),16))|0,St=St+(We=k(We^tt,12))|0,tt=tt+(ct=k(ct^St,8))|0,We=k(We^tt,7),Ot=Ot+(vt=k(vt^(bt=bt+ut|0),16))|0,bt=bt+(ut=k(ut^Ot,12))|0,Ot=Ot+(vt=k(vt^bt,8))|0,ut=k(ut^Ot,7),tt=tt+(vt=k(vt^(rt=rt+re|0),16))|0,rt=rt+(re=k(re^tt,12))|0,tt=tt+(vt=k(vt^rt,8))|0,re=k(re^tt,7),Ot=Ot+(Wt=k(Wt^(Ye=Ye+We|0),16))|0,Ye=Ye+(We=k(We^Ot,12))|0,Ot=Ot+(Wt=k(Wt^Ye,8))|0,We=k(We^Ot,7),kt=kt+(yt=k(yt^(St=St+ut|0),16))|0,St=St+(ut=k(ut^kt,12))|0,kt=kt+(yt=k(yt^St,8))|0,ut=k(ut^kt,7),Ct=Ct+(ct=k(ct^(bt=bt+qe|0),16))|0,bt=bt+(qe=k(qe^Ct,12))|0,Ct=Ct+(ct=k(ct^bt,8))|0,qe=k(qe^Ct,7);let Ut=0;Y[Ut++]=le+rt|0,Y[Ut++]=se+Ye|0,Y[Ut++]=ce+St|0,Y[Ut++]=me+bt|0,Y[Ut++]=H+qe|0,Y[Ut++]=ue+re|0,Y[Ut++]=x+We|0,Y[Ut++]=fe+ut|0,Y[Ut++]=ge+kt|0,Y[Ut++]=Se+Ct|0,Y[Ut++]=Re+tt|0,Y[Ut++]=ae+Ot|0,Y[Ut++]=D+Wt|0,Y[Ut++]=Ae+yt|0,Y[Ut++]=lt+ct|0,Y[Ut++]=Je+vt|0}let oe=z(X,{counterRight:!1,counterLength:4,allowShortKeys:!1}),ne=z(X,{counterRight:!1,counterLength:8,extendNonceFn:function(A,U,te,Y){let D=A[0],ee=A[1],le=A[2],se=A[3],ce=U[0],me=U[1],H=U[2],ue=U[3],x=U[4],fe=U[5],ge=U[6],Se=U[7],Re=te[0],ae=te[1],Ae=te[2],lt=te[3];for(let rt=0;rt<20;rt+=2)x=x+(Re=k(Re^(D=D+ce|0),16))|0,D=D+(ce=k(ce^x,12))|0,x=x+(Re=k(Re^D,8))|0,ce=k(ce^x,7),fe=fe+(ae=k(ae^(ee=ee+me|0),16))|0,ee=ee+(me=k(me^fe,12))|0,fe=fe+(ae=k(ae^ee,8))|0,me=k(me^fe,7),ge=ge+(Ae=k(Ae^(le=le+H|0),16))|0,le=le+(H=k(H^ge,12))|0,ge=ge+(Ae=k(Ae^le,8))|0,H=k(H^ge,7),Se=Se+(lt=k(lt^(se=se+ue|0),16))|0,se=se+(ue=k(ue^Se,12))|0,Se=Se+(lt=k(lt^se,8))|0,ue=k(ue^Se,7),ge=ge+(lt=k(lt^(D=D+me|0),16))|0,D=D+(me=k(me^ge,12))|0,ge=ge+(lt=k(lt^D,8))|0,me=k(me^ge,7),Se=Se+(Re=k(Re^(ee=ee+H|0),16))|0,ee=ee+(H=k(H^Se,12))|0,Se=Se+(Re=k(Re^ee,8))|0,H=k(H^Se,7),x=x+(ae=k(ae^(le=le+ue|0),16))|0,le=le+(ue=k(ue^x,12))|0,x=x+(ae=k(ae^le,8))|0,ue=k(ue^x,7),fe=fe+(Ae=k(Ae^(se=se+ce|0),16))|0,se=se+(ce=k(ce^fe,12))|0,fe=fe+(Ae=k(Ae^se,8))|0,ce=k(ce^fe,7);let Je=0;Y[Je++]=D,Y[Je++]=ee,Y[Je++]=le,Y[Je++]=se,Y[Je++]=Re,Y[Je++]=ae,Y[Je++]=Ae,Y[Je++]=lt},allowShortKeys:!1}),we=new Uint8Array(16),Ee=(A,U)=>{A.update(U);let te=U.length%16;te&&A.update(we.subarray(te))},$e=new Uint8Array(32);function v(A,U,te,Y,D){D!==void 0&&i(D,void 0,"AAD");let ee=A(U,te,$e),le=function(me,H,ue){y(ue);let x=new Uint8Array(16),fe=new DataView(x.buffer,x.byteOffset,x.byteLength);return fe.setBigUint64(0,BigInt(H),ue),fe.setBigUint64(8,BigInt(me),ue),x}(Y.length,D?D.length:0,!0),se=G.create(ee);D&&Ee(se,D),Ee(se,Y),se.update(le);let ce=se.digest();return O(ee,le),ce}let Z=A=>(U,te,Y)=>({encrypt(D,ee){let le=D.length;(ee=p(le+16,ee,!1)).set(D);let se=ee.subarray(0,-16);A(U,te,se,se,1);let ce=v(A,U,te,se,Y);return ee.set(ce,le),O(ce),ee},decrypt(D,ee){ee=p(D.length-16,ee,!1);let le=D.subarray(0,-16),se=D.subarray(-16),ce=v(A,U,te,le,Y);if(!function(me,H){if(me.length!==H.length)return!1;let ue=0;for(let x=0;x<me.length;x++)ue|=me[x]^H[x];return ue===0}(se,ce))throw Error("invalid tag");return ee.set(D.subarray(0,-16)),A(U,te,ee,ee,1),O(ce),ee}});Z(oe);let R=((A,U)=>{function te(Y,...D){if(i(Y,void 0,"key"),!j)throw Error("Non little-endian hardware is not yet supported");A.nonceLength!==void 0&&i(D[0],A.varSizeNonce?void 0:A.nonceLength,"nonce");let ee=A.tagLength;ee&&D[1]!==void 0&&i(D[1],void 0,"AAD");let le=U(Y,...D),se=(me,H)=>{if(H!==void 0){if(me!==2)throw Error("cipher output not supported");i(H,void 0,"output")}},ce=!1;return{encrypt(me,H){if(ce)throw Error("cannot encrypt() twice with same key + nonce");return ce=!0,i(me),se(le.encrypt.length,H),le.encrypt(me,H)},decrypt(me,H){if(i(me),ee&&me.length<ee)throw Error('"ciphertext" expected length bigger than tagLength='+ee);return se(le.decrypt.length,H),le.decrypt(me,H)}}}return Object.assign(te,A),te})({blockSize:64,nonceLength:24,tagLength:16},Z(ne)),S=async({key:A,data:U})=>{let te=await(0,d.n)("SHA-256").digest(A),Y=function(D){if(typeof D!="string")throw Error("string expected");return new Uint8Array(new TextEncoder().encode(D))}(U);return function(D){if(i(D),$)return D.toHex();let ee="";for(let le=0;le<D.length;le++)ee+=W[D[le]];return ee}(q(R)(new Uint8Array(te)).encrypt(Y))},E=async({key:A,data:U})=>{let te=await(0,d.n)("SHA-256").digest(A),Y=function(ee){if(typeof ee!="string")throw Error("hex string expected, got "+typeof ee);if($)return Uint8Array.fromHex(ee);let le=ee.length,se=le/2;if(le%2)throw Error("hex string expected, got unpadded hex of length "+le);let ce=new Uint8Array(se);for(let me=0,H=0;me<se;me++,H+=2){let ue=I(ee.charCodeAt(H)),x=I(ee.charCodeAt(H+1));if(ue===void 0||x===void 0)throw Error('hex string expected, got non-hex character "'+(ee[H]+ee[H+1])+'" at index '+H);ce[me]=16*ue+x}return ce}(U),D=q(R)(new Uint8Array(te));return new TextDecoder().decode(D.decrypt(Y))}},Le.__chunk_13015=(Ue,ie,o)=>{"use strict";o.d(ie,{sL:()=>j,HX:()=>d.H,d3:()=>W,xA:()=>y.xA,ty:()=>s,vp:()=>K,Qs:()=>y.Qs,uy:()=>O,iD:()=>I});var d=o(68506),y=o(25162),h=o(9203);let i=async()=>{let p=(0,d.Q)();if(!p.context.requestStateAsyncStorage){let _=await(0,h.V)();p.context.requestStateAsyncStorage=new _}return p.context.requestStateAsyncStorage};async function s(){return(await i()).getStore()!==void 0}async function c(){let p=(await i()).getStore();if(!p)throw Error("No request state found. Please make sure you are calling this function within a `runWithRequestState` callback.");return p}async function O(p,_){return(await i()).run(p,_)}function j(p){let _=Object.freeze({});return{get ref(){return _},async get(){let m=await c();if(!m.has(_)){let q=await p();return m.set(_,q),q}return m.get(_)},async set(m){(await c()).set(_,m)}}}let $=async()=>{let p=(0,d.Q)();if(!p.context.adapterAsyncStorage){let _=await(0,h.V)();p.context.adapterAsyncStorage=new _}return p.context.adapterAsyncStorage},W=async p=>$().then(_=>_.getStore()||p).catch(()=>p),K=async(p,_)=>{let m=!0;return $().then(q=>(m=!0,q.run(p,_))).catch(q=>{if(!m)return _();throw q})},I=async(p,_)=>{let m=!0;return $().then(q=>(m=!0,p.transaction(async J=>q.run(J,_)))).catch(q=>{if(!m)return _();throw q})}},Le.__chunk_12897=(Ue,ie,o)=>{"use strict";o.d(ie,{J:()=>h});var d=o(31448),y=o(79895);async function h({refreshToken:i,options:s,tokenEndpoint:c,authentication:O,extraParams:j}){let{body:$,headers:W}=function({refreshToken:_,options:m,authentication:q,extraParams:J,resource:a}){let V=new URLSearchParams,C={"content-type":"application/x-www-form-urlencoded",accept:"application/json"};if(V.set("grant_type","refresh_token"),V.set("refresh_token",_),q==="basic"){let L=Array.isArray(m.clientId)?m.clientId[0]:m.clientId;L?C.authorization="Basic "+d.K.encode(`${L}:${m.clientSecret??""}`):C.authorization="Basic "+d.K.encode(`:${m.clientSecret??""}`)}else{let L=Array.isArray(m.clientId)?m.clientId[0]:m.clientId;V.set("client_id",L),m.clientSecret&&V.set("client_secret",m.clientSecret)}if(a)if(typeof a=="string")V.append("resource",a);else for(let L of a)V.append("resource",L);if(J)for(let[L,k]of Object.entries(J))V.set(L,k);return{body:V,headers:C}}({refreshToken:i,options:s,authentication:O,extraParams:j}),{data:K,error:I}=await(0,y.zZ)(c,{method:"POST",body:$,headers:W});if(I)throw I;let p={accessToken:K.access_token,refreshToken:K.refresh_token,tokenType:K.token_type,scopes:K.scope?.split(" "),idToken:K.id_token};return K.expires_in&&(p.accessTokenExpiresAt=new Date(new Date().getTime()+1e3*K.expires_in)),p}},Le.__chunk_12821=(Ue,ie,o)=>{"use strict";o.d(ie,{Mn:()=>p,dc:()=>O,eP:()=>j,gS:()=>K,h6:()=>I,kc:()=>c,oh:()=>_,pS:()=>W,yO:()=>$});var d=o(48157),y=o(54030);let h=new WeakMap;function i(m,q){let J=q.fields,a={};for(let V in m){let C=J[V];if(!C){a[V]=m[V];continue}(C.returned!==!1||V==="id")&&(a[V]=m[V])}return a}function s(m,q,J){let a=`${q}:${J}`;h.has(m)||h.set(m,new Map);let V=h.get(m);if(V.has(a))return V.get(a);let C=J==="output"?d.getAuthTables(m)[q]?.fields??{}:{},L=q==="user"||q==="session"||q==="account"?m[q]?.additionalFields:void 0,k={...C,...L??{}};for(let N of m.plugins||[])N.schema&&N.schema[q]&&(k={...k,...N.schema[q].fields});return V.set(a,k),k}function c(m,q){return i(q,{fields:s(m,"user","output")})}function O(m,q){return i(q,{fields:s(m,"session","output")})}function j(m,q){let{accessToken:J,refreshToken:a,idToken:V,accessTokenExpiresAt:C,refreshTokenExpiresAt:L,password:k,...N}=i(q,{fields:s(m,"account","output")});return N}function $(m,q){let J=q.action||"create",a=q.fields,V=Object.assign(Object.create(null),null);for(let C in a){if(C in m){if(a[C].input===!1){if(a[C].defaultValue!==void 0&&J!=="update"){V[C]=a[C].defaultValue;continue}if(m[C])throw new y.LG("BAD_REQUEST",{message:`${C} is not allowed to be set`});continue}if(a[C].validator?.input&&m[C]!==void 0){let L=a[C].validator.input["~standard"].validate(m[C]);if(L instanceof Promise)throw new y.LG("INTERNAL_SERVER_ERROR",{message:"Async validation is not supported for additional fields"});if("issues"in L&&L.issues)throw new y.LG("BAD_REQUEST",{message:L.issues[0]?.message||"Validation Error"});V[C]=L.value;continue}if(a[C].transform?.input&&m[C]!==void 0){V[C]=a[C].transform?.input(m[C]);continue}V[C]=m[C];continue}if(a[C].defaultValue!==void 0&&J==="create"){if(typeof a[C].defaultValue=="function"){V[C]=a[C].defaultValue();continue}V[C]=a[C].defaultValue;continue}if(a[C].required&&J==="create")throw new y.LG("BAD_REQUEST",{message:`${C} is required`})}return V}function W(m,q={},J){return $(q,{fields:s(m,"user","input"),action:J})}function K(m,q){return $(q||{},{fields:s(m,"user","input")})}function I(m,q){return $(q,{fields:s(m,"account","input")})}function p(m,q){return $(q,{fields:s(m,"session","input")})}function _(m,q){if(!q)return m;for(let J in q){let a=q[J]?.modelName;for(let V in a&&(m[J].modelName=a),m[J].fields){let C=q[J]?.fields?.[V];C&&(m[J].fields[V].fieldName=C)}}return m}},Le.__chunk_12308=(Ue,ie,o)=>{"use strict";o.d(ie,{i:()=>y});var d=o(26772);let y=(0,d.CN)({is:h=>h.kind==="SetOperationNode",create:(h,i,s)=>(0,d.CN)({kind:"SetOperationNode",operator:h,expression:i,all:s})})},Le.__chunk_12163=(Ue,ie,o)=>{"use strict";o.d(ie,{q:()=>h});var d=o(9822),y=o(26772);let h=(0,y.CN)({is:i=>i.kind==="ReferenceNode",create:(i,s)=>(0,y.CN)({kind:"ReferenceNode",table:s,column:i}),createSelectAll:i=>(0,y.CN)({kind:"ReferenceNode",table:i,column:d.U.create()})})},Le.__chunk_11999=(Ue,ie,o)=>{"use strict";o.d(ie,{J:()=>h,n:()=>y});var d=o(77438);class y{static[d.i]="Subquery";constructor(s,c,O,j=!1,$=[]){this._={brand:"Subquery",sql:s,selectedFields:c,alias:O,isWith:j,usedTables:$}}}class h extends y{static[d.i]="WithSubquery"}},Le.__chunk_11793=(Ue,ie,o)=>{"use strict";o.d(ie,{k:()=>y});var d=o(77438);class y{static[d.i]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(i){return this.then(void 0,i)}finally(i){return this.then(s=>(i?.(),s),s=>{throw i?.(),s})}then(i,s){return this.execute().then(i,s)}}},Le.__chunk_11528=(Ue,ie,o)=>{"use strict";o.d(ie,{h:()=>y});var d=o(26772);let y=(0,d.CN)({is:h=>h.kind==="PrimitiveValueListNode",create:h=>(0,d.CN)({kind:"PrimitiveValueListNode",values:(0,d.CN)([...h])})})},Le.__chunk_11305=(Ue,ie,o)=>{"use strict";o.d(ie,{l:()=>m});var d=o(9789),y=o(35889),h=o(2170),i=o(72391),s=o(66557),c=o(7286),O=o(89709),j=o(30797),$=o(93692),W=o(26772),K=o(8224);class I{#e;constructor(a){this.#e=(0,W.CN)(a)}get expressionType(){}get isRawBuilder(){return!0}as(a){return new _(this,a)}$castTo(){return new I({...this.#e})}$notNull(){return new I(this.#e)}withPlugin(a){return new I({...this.#e,plugins:this.#e.plugins!==void 0?(0,W.CN)([...this.#e.plugins,a]):(0,W.CN)([a])})}toOperationNode(){return this.#r(this.#t())}compile(a){return this.#i(this.#t(a))}async execute(a){let V=this.#t(a);return V.executeQuery(this.#i(V))}#t(a){let V=a!==void 0?a.getExecutor():K.W;return this.#e.plugins!==void 0?V.withPlugins(this.#e.plugins):V}#r(a){return a.transformQuery(this.#e.rawNode,this.#e.queryId)}#i(a){return a.compileQuery(this.#r(a),this.#e.queryId)}}function p(J){return new I(J)}class _{#e;#t;constructor(a,V){this.#e=a,this.#t=V}get expression(){return this.#e}get alias(){return this.#t}get rawBuilder(){return this.#e}toOperationNode(){return $.N.create(this.#e.toOperationNode(),(0,y.N)(this.#t)?this.#t.toOperationNode():d.O.create(this.#t))}}let m=Object.assign((J,...a)=>p({queryId:(0,j.a)(),rawNode:h.z.create(J,a?.map(q)??[])}),{ref:J=>p({queryId:(0,j.a)(),rawNode:h.z.createWithChild((0,s.q5)(J))}),val:J=>p({queryId:(0,j.a)(),rawNode:h.z.createWithChild((0,O.$s)(J))}),value(J){return this.val(J)},table:J=>p({queryId:(0,j.a)(),rawNode:h.z.createWithChild((0,c.M$)(J))}),id(...J){let a=Array(J.length+1).fill(".");return a[0]="",a[a.length-1]="",p({queryId:(0,j.a)(),rawNode:h.z.create(a,J.map(d.O.create))})},lit:J=>p({queryId:(0,j.a)(),rawNode:h.z.createWithChild(i.q.createImmediate(J))}),literal(J){return this.lit(J)},raw:J=>p({queryId:(0,j.a)(),rawNode:h.z.createWithSql(J)}),join(J,a=m`, `){let V=Array(Math.max(2*J.length-1,0)),C=a.toOperationNode();for(let L=0;L<J.length;++L)V[2*L]=q(J[L]),L!==J.length-1&&(V[2*L+1]=C);return p({queryId:(0,j.a)(),rawNode:h.z.createWithChildren(V)})}});function q(J){return(0,y.N)(J)?J.toOperationNode():(0,O.$s)(J)}},Le.__chunk_10816=(Ue,ie,o)=>{"use strict";o.d(ie,{Aw:()=>c,Di:()=>i});var d=o(25162);o(13015);var y=o(54030);let h=(0,y.Ny)(async()=>({})),i=y.Ny.create({use:[h,(0,y.Ny)(async()=>({}))]}),s=[h];function c(O,j,$){let W=typeof O=="string"?O:void 0,K=typeof j=="object"?j:O,I=typeof j=="function"?j:$;return W?(0,y.UD)(W,{...K,use:[...K?.use||[],...s]},async p=>(0,d.Qs)(p,()=>I(p))):(0,y.UD)({...K,use:[...K?.use||[],...s]},async p=>(0,d.Qs)(p,()=>I(p)))}},Le.__chunk_10705=(Ue,ie,o)=>{"use strict";o.d(ie,{A:()=>vl});var d={};o.r(d),o.d(d,{StripeAPIError:()=>$e,StripeAuthenticationError:()=>v,StripeCardError:()=>we,StripeConnectionError:()=>S,StripeError:()=>ne,StripeIdempotencyError:()=>A,StripeInvalidGrantError:()=>U,StripeInvalidRequestError:()=>Ee,StripePermissionError:()=>Z,StripeRateLimitError:()=>R,StripeSignatureVerificationError:()=>E,StripeUnknownError:()=>te,TemporarySessionExpiredError:()=>Y,generateV1Error:()=>X,generateV2Error:()=>oe});var y={};o.r(y),o.d(y,{Account:()=>mt,AccountLinks:()=>Ir,AccountSessions:()=>Pr,Accounts:()=>mt,ApplePayDomains:()=>Zr,ApplicationFees:()=>di,Apps:()=>tl,Balance:()=>Er,BalanceSettings:()=>Wn,BalanceTransactions:()=>wn,Billing:()=>rl,BillingPortal:()=>il,Charges:()=>Gr,Checkout:()=>nl,Climate:()=>sl,ConfirmationTokens:()=>bn,CountrySpecs:()=>_n,Coupons:()=>po,CreditNotes:()=>fo,CustomerSessions:()=>mo,Customers:()=>yo,Disputes:()=>go,Entitlements:()=>ol,EphemeralKeys:()=>vo,Events:()=>wo,ExchangeRates:()=>bo,FileLinks:()=>vs,Files:()=>xo,FinancialConnections:()=>al,Forwarding:()=>ll,Identity:()=>ul,InvoiceItems:()=>ko,InvoicePayments:()=>No,InvoiceRenderingTemplates:()=>So,Invoices:()=>zs,Issuing:()=>cl,Mandates:()=>Io,OAuth:()=>Eo,PaymentAttemptRecords:()=>Ao,PaymentIntents:()=>$o,PaymentLinks:()=>Oo,PaymentMethodConfigurations:()=>Ws,PaymentMethodDomains:()=>_s,PaymentMethods:()=>Co,PaymentRecords:()=>Po,Payouts:()=>Ro,Plans:()=>Uo,Prices:()=>Ua,Products:()=>Da,PromotionCodes:()=>La,Quotes:()=>qa,Radar:()=>jo,Refunds:()=>ja,Reporting:()=>dl,Reviews:()=>za,SetupAttempts:()=>Ma,SetupIntents:()=>Wa,ShippingRates:()=>Fa,Sigma:()=>hl,Sources:()=>Za,SubscriptionItems:()=>Va,SubscriptionSchedules:()=>Ga,Subscriptions:()=>Ka,Tax:()=>pl,TaxCodes:()=>Ja,TaxIds:()=>Ha,TaxRates:()=>Qa,Terminal:()=>Yn,TestHelpers:()=>zo,Tokens:()=>Xa,Topups:()=>qo,Transfers:()=>Ya,Treasury:()=>fl,V2:()=>ml,WebhookEndpoints:()=>el});let h=["apiKey","idempotencyKey","stripeAccount","apiVersion","maxNetworkRetries","timeout","host","authenticator","stripeContext","additionalHeaders","streaming"];function i(Be){return Be&&typeof Be=="object"&&h.some(he=>Object.prototype.hasOwnProperty.call(Be,he))}function s(Be){return encodeURIComponent(Be).replace(/!/g,"%21").replace(/\*/g,"%2A").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/'/g,"%27").replace(/%5B/g,"[").replace(/%5D/g,"]")}function c(Be){let he=[];if(typeof Be=="object"&&Be!==null)for(let Me of Object.keys(Be))(function Pe(nt,ot){if(ot!==void 0){if(ot===null||typeof ot!="object"||ot instanceof Date){he.push(s(nt)+"="+s(ot instanceof Date?Math.floor(ot.getTime()/1e3).toString():ot===null?"":String(ot)));return}if(Array.isArray(ot)){for(let ft=0;ft<ot.length;ft++)ot[ft]!==void 0&&Pe(nt+"["+ft+"]",ot[ft]);return}for(let ft of Object.keys(ot))Pe(nt+"["+ft+"]",ot[ft])}})(Me,Be[Me]);return he.join("&")}let O=(()=>{let Be={"\n":"\\n",'"':'\\"',"\u2028":"\\u2028","\u2029":"\\u2029"};return he=>{let Me=he.replace(/["\n\r\u2028\u2029]/g,Pe=>Be[Pe]);return Pe=>Me.replace(/\{([\s\S]+?)\}/g,(nt,ot)=>{let ft=Pe[ot];return["number","string","boolean"].includes(typeof ft)?encodeURIComponent(ft):""})}})();function j(Be){if(!Array.isArray(Be)||!Be[0]||typeof Be[0]!="object")return{};if(!i(Be[0]))return Be.shift();let he=Object.keys(Be[0]),Me=he.filter(Pe=>h.includes(Pe));return Me.length>0&&Me.length!==he.length&&I(`Options found in arguments (${Me.join(", ")}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.`),{}}function $(Be){let he={host:null,headers:{},settings:{},streaming:!1};if(Be.length>0){let Me=Be[Be.length-1];if(typeof Me=="string")he.authenticator=_(Be.pop());else if(i(Me)){let Pe=Object.assign({},Be.pop()),nt=Object.keys(Pe).filter(ot=>!h.includes(ot));if(nt.length&&I(`Invalid options found (${nt.join(", ")}); ignoring.`),Pe.apiKey&&(he.authenticator=_(Pe.apiKey)),Pe.idempotencyKey&&(he.headers["Idempotency-Key"]=Pe.idempotencyKey),Pe.stripeAccount&&(he.headers["Stripe-Account"]=Pe.stripeAccount),Pe.stripeContext){if(he.headers["Stripe-Account"])throw Error("Can't specify both stripeAccount and stripeContext.");he.headers["Stripe-Context"]=Pe.stripeContext}if(Pe.apiVersion&&(he.headers["Stripe-Version"]=Pe.apiVersion),Number.isInteger(Pe.maxNetworkRetries)&&(he.settings.maxNetworkRetries=Pe.maxNetworkRetries),Number.isInteger(Pe.timeout)&&(he.settings.timeout=Pe.timeout),Pe.host&&(he.host=Pe.host),Pe.authenticator){if(Pe.apiKey)throw Error("Can't specify both apiKey and authenticator.");if(typeof Pe.authenticator!="function")throw Error("The authenticator must be a function receiving a request as the first parameter.");he.authenticator=Pe.authenticator}Pe.additionalHeaders&&(he.headers=Pe.additionalHeaders),Pe.streaming&&(he.streaming=!0)}}return he}function W(Be){if(typeof Be!="object")throw Error("Argument must be an object");return Object.keys(Be).reduce((he,Me)=>(Be[Me]!=null&&(he[Me]=Be[Me]),he),{})}function K(Be,he){return he?Be.then(Me=>{setTimeout(()=>{he(null,Me)},0)},Me=>{setTimeout(()=>{he(Me,null)},0)}):Be}function I(Be){return typeof process.emitWarning!="function"?console.warn(`Stripe: ${Be}`):process.emitWarning(Be,"Stripe")}function p(Be,he,Me){if(!Number.isInteger(he)){if(Me!==void 0)return Me;throw Error(`${Be} must be an integer`)}return he}function _(Be){let he=Me=>(Me.headers.Authorization="Bearer "+Be,Promise.resolve());return he._apiKey=Be,he}function m(Be,he){return this[Be]instanceof Date?Math.floor(this[Be].getTime()/1e3).toString():he}function q(Be){return Be&&Be.startsWith("/v2")?"v2":"v1"}function J(Be){return Array.isArray(Be)?Be.join(", "):String(Be)}class a{getClientName(){throw Error("getClientName not implemented.")}makeRequest(he,Me,Pe,nt,ot,ft,Rt,zt){throw Error("makeRequest not implemented.")}static makeTimeoutError(){let he=TypeError(a.TIMEOUT_ERROR_CODE);return he.code=a.TIMEOUT_ERROR_CODE,he}}a.CONNECTION_CLOSED_ERROR_CODES=["ECONNRESET","EPIPE"],a.TIMEOUT_ERROR_CODE="ETIMEDOUT";class V{constructor(he,Me){this._statusCode=he,this._headers=Me}getStatusCode(){return this._statusCode}getHeaders(){return this._headers}getRawResponse(){throw Error("getRawResponse not implemented.")}toStream(he){throw Error("toStream not implemented.")}toJSON(){throw Error("toJSON not implemented.")}}class C extends a{constructor(he){if(super(),!he){if(!Sr.fetch)throw Error("fetch() function not provided and is not defined in the global scope. You must provide a fetch implementation.");he=Sr.fetch}Sr.AbortController?this._fetchFn=C.makeFetchWithAbortTimeout(he):this._fetchFn=C.makeFetchWithRaceTimeout(he)}static makeFetchWithRaceTimeout(he){return(Me,Pe,nt)=>{let ot,ft=new Promise((Rt,zt)=>{ot=setTimeout(()=>{ot=null,zt(a.makeTimeoutError())},nt)});return Promise.race([he(Me,Pe),ft]).finally(()=>{ot&&clearTimeout(ot)})}}static makeFetchWithAbortTimeout(he){return async(Me,Pe,nt)=>{let ot=new AbortController,ft=setTimeout(()=>{ft=null,ot.abort(a.makeTimeoutError())},nt);try{return await he(Me,Object.assign(Object.assign({},Pe),{signal:ot.signal}))}catch(Rt){throw Rt.name==="AbortError"?a.makeTimeoutError():Rt}finally{ft&&clearTimeout(ft)}}}getClientName(){return"fetch"}async makeRequest(he,Me,Pe,nt,ot,ft,Rt,zt){let Kt=new URL(Pe,`${Rt==="http"?"http":"https"}://${he}`);Kt.port=Me;let Lt=nt=="POST"||nt=="PUT"||nt=="PATCH";return new L(await this._fetchFn(Kt.toString(),{method:nt,headers:Object.entries(ot).map(([Bt,xt])=>[Bt,J(xt)]),body:ft||(Lt?"":void 0)},zt))}}class L extends V{constructor(he){super(he.status,L._transformHeadersToObject(he.headers)),this._res=he}getRawResponse(){return this._res}toStream(he){return he(),this._res.body}toJSON(){return this._res.json()}static _transformHeadersToObject(he){let Me={};for(let Pe of he){if(!Array.isArray(Pe)||Pe.length!=2)throw Error("Response objects produced by the fetch function given to FetchHttpClient do not have an iterable headers map. Response#headers should be an iterable object.");Me[Pe[0]]=Pe[1]}return Me}}class k{computeHMACSignature(he,Me){throw Error("computeHMACSignature not implemented.")}computeHMACSignatureAsync(he,Me){throw Error("computeHMACSignatureAsync not implemented.")}computeSHA256Async(he){throw Error("computeSHA256 not implemented.")}}class N extends Error{}class P extends k{constructor(he){super(),this.subtleCrypto=he||crypto.subtle}computeHMACSignature(he,Me){throw new N("SubtleCryptoProvider cannot be used in a synchronous context.")}async computeHMACSignatureAsync(he,Me){let Pe=new TextEncoder,nt=await this.subtleCrypto.importKey("raw",Pe.encode(Me),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),ot=new Uint8Array(await this.subtleCrypto.sign("hmac",nt,Pe.encode(he))),ft=Array(ot.length);for(let Rt=0;Rt<ot.length;Rt++)ft[Rt]=b[ot[Rt]];return ft.join("")}async computeSHA256Async(he){return new Uint8Array(await this.subtleCrypto.digest("SHA-256",he))}}let b=Array(256);for(let Be=0;Be<b.length;Be++)b[Be]=Be.toString(16).padStart(2,"0");class z{constructor(){this._fetchFn=null,this._agent=null}getUname(){throw Error("getUname not implemented.")}uuid4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,he=>{let Me=16*Math.random()|0;return(he==="x"?Me:3&Me|8).toString(16)})}secureCompare(he,Me){if(he.length!==Me.length)return!1;let Pe=he.length,nt=0;for(let ot=0;ot<Pe;++ot)nt|=he.charCodeAt(ot)^Me.charCodeAt(ot);return nt===0}createEmitter(){throw Error("createEmitter not implemented.")}tryBufferData(he){throw Error("tryBufferData not implemented.")}createNodeHttpClient(he){throw Error("createNodeHttpClient not implemented.")}createFetchHttpClient(he){return new C(he)}createDefaultHttpClient(){throw Error("createDefaultHttpClient not implemented.")}createNodeCryptoProvider(){throw Error("createNodeCryptoProvider not implemented.")}createSubtleCryptoProvider(he){return new P(he)}createDefaultCryptoProvider(){throw Error("createDefaultCryptoProvider not implemented.")}}class F extends Event{constructor(he,Me){super(he),this.data=Me}}class Q{constructor(){this.eventTarget=new EventTarget,this.listenerMapping=new Map}on(he,Me){let Pe=nt=>{Me(nt.data)};return this.listenerMapping.set(Me,Pe),this.eventTarget.addEventListener(he,Pe)}removeListener(he,Me){let Pe=this.listenerMapping.get(Me);return this.listenerMapping.delete(Me),this.eventTarget.removeEventListener(he,Pe)}once(he,Me){let Pe=nt=>{Me(nt.data)};return this.listenerMapping.set(Me,Pe),this.eventTarget.addEventListener(he,Pe,{once:!0})}emit(he,Me){return this.eventTarget.dispatchEvent(new F(he,Me))}}class G extends z{getUname(){return Promise.resolve(null)}createEmitter(){return new Q}tryBufferData(he){if(he.file.data instanceof ReadableStream)throw Error("Uploading a file as a stream is not supported in non-Node environments. Please open or upvote an issue at github.com/stripe/stripe-node if you use this, detailing your use-case.");return Promise.resolve(he)}createNodeHttpClient(){throw Error("Stripe: `createNodeHttpClient()` is not available in non-Node environments. Please use `createFetchHttpClient()` instead.")}createDefaultHttpClient(){return super.createFetchHttpClient()}createNodeCryptoProvider(){throw Error("Stripe: `createNodeCryptoProvider()` is not available in non-Node environments. Please use `createSubtleCryptoProvider()` instead.")}createDefaultCryptoProvider(){return this.createSubtleCryptoProvider()}}let X=Be=>{switch(Be.type){case"card_error":return new we(Be);case"invalid_request_error":return new Ee(Be);case"api_error":return new $e(Be);case"authentication_error":return new v(Be);case"rate_limit_error":return new R(Be);case"idempotency_error":return new A(Be);case"invalid_grant":return new U(Be);default:return new te(Be)}},oe=Be=>Be.type==="temporary_session_expired"?new Y(Be):Be.code==="invalid_fields"?new Ee(Be):X(Be);class ne extends Error{constructor(he={},Me=null){var Pe;super(he.message),this.type=Me||this.constructor.name,this.raw=he,this.rawType=he.type,this.code=he.code,this.doc_url=he.doc_url,this.param=he.param,this.detail=he.detail,this.headers=he.headers,this.requestId=he.requestId,this.statusCode=he.statusCode,this.message=(Pe=he.message)!==null&&Pe!==void 0?Pe:"",this.userMessage=he.user_message,this.charge=he.charge,this.decline_code=he.decline_code,this.payment_intent=he.payment_intent,this.payment_method=he.payment_method,this.payment_method_type=he.payment_method_type,this.setup_intent=he.setup_intent,this.source=he.source}}ne.generate=X;class we extends ne{constructor(he={}){super(he,"StripeCardError")}}class Ee extends ne{constructor(he={}){super(he,"StripeInvalidRequestError")}}class $e extends ne{constructor(he={}){super(he,"StripeAPIError")}}class v extends ne{constructor(he={}){super(he,"StripeAuthenticationError")}}class Z extends ne{constructor(he={}){super(he,"StripePermissionError")}}class R extends ne{constructor(he={}){super(he,"StripeRateLimitError")}}class S extends ne{constructor(he={}){super(he,"StripeConnectionError")}}class E extends ne{constructor(he,Me,Pe={}){super(Pe,"StripeSignatureVerificationError"),this.header=he,this.payload=Me}}class A extends ne{constructor(he={}){super(he,"StripeIdempotencyError")}}class U extends ne{constructor(he={}){super(he,"StripeInvalidGrantError")}}class te extends ne{constructor(he={}){super(he,"StripeUnknownError")}}class Y extends ne{constructor(he={}){super(he,"TemporarySessionExpiredError")}}class D{constructor(he,Me){this._stripe=he,this._maxBufferedRequestMetric=Me}_normalizeStripeContext(he,Me){return he?he.toString()||null:Me?.toString()||null}_addHeadersDirectlyToObject(he,Me){he.requestId=Me["request-id"],he.stripeAccount=he.stripeAccount||Me["stripe-account"],he.apiVersion=he.apiVersion||Me["stripe-version"],he.idempotencyKey=he.idempotencyKey||Me["idempotency-key"]}_makeResponseEvent(he,Me,Pe){let nt=Date.now(),ot=nt-he.request_start_time;return W({api_version:Pe["stripe-version"],account:Pe["stripe-account"],idempotency_key:Pe["idempotency-key"],method:he.method,path:he.path,status:Me,request_id:this._getRequestId(Pe),elapsed:ot,request_start_time:he.request_start_time,request_end_time:nt})}_getRequestId(he){return he["request-id"]}_streamingResponseHandler(he,Me,Pe){return nt=>{let ot=nt.getHeaders(),ft=nt.toStream(()=>{let Rt=this._makeResponseEvent(he,nt.getStatusCode(),ot);this._stripe._emitter.emit("response",Rt),this._recordRequestMetrics(this._getRequestId(ot),Rt.elapsed,Me)});return this._addHeadersDirectlyToObject(ft,ot),Pe(null,ft)}}_jsonResponseHandler(he,Me,Pe,nt){return ot=>{let ft=ot.getHeaders(),Rt=this._getRequestId(ft),zt=ot.getStatusCode(),Kt=this._makeResponseEvent(he,zt,ft);this._stripe._emitter.emit("response",Kt),ot.toJSON().then(Lt=>{if(Lt.error){let Bt;throw typeof Lt.error=="string"&&(Lt.error={type:Lt.error,message:Lt.error_description}),Lt.error.headers=ft,Lt.error.statusCode=zt,Lt.error.requestId=Rt,zt===401?new v(Lt.error):zt===403?new Z(Lt.error):zt===429?new R(Lt.error):Me==="v2"?oe(Lt.error):X(Lt.error)}return Lt},Lt=>{throw new $e({message:"Invalid JSON received from the Stripe API",exception:Lt,requestId:ft["request-id"]})}).then(Lt=>{this._recordRequestMetrics(Rt,Kt.elapsed,Pe);let Bt=ot.getRawResponse();this._addHeadersDirectlyToObject(Bt,ft),Object.defineProperty(Lt,"lastResponse",{enumerable:!1,writable:!1,value:Bt}),nt(null,Lt)},Lt=>nt(Lt,null))}}static _generateConnectionErrorMessage(he){return`An error occurred with our connection to Stripe.${he>0?` Request was retried ${he} times.`:""}`}static _shouldRetry(he,Me,Pe,nt){return!!(nt&&Me===0&&a.CONNECTION_CLOSED_ERROR_CODES.includes(nt.code))||!(Me>=Pe)&&(!he||he.getHeaders()["stripe-should-retry"]!=="false"&&(he.getHeaders()["stripe-should-retry"]==="true"||he.getStatusCode()===409||he.getStatusCode()>=500))}_getSleepTimeInMS(he,Me=null){let Pe=this._stripe.getInitialNetworkRetryDelay(),nt=Math.min(Pe*Math.pow(2,he-1),this._stripe.getMaxNetworkRetryDelay());return nt*=.5*(1+Math.random()),nt=Math.max(Pe,nt),Number.isInteger(Me)&&Me<=60&&(nt=Math.max(nt,Me)),1e3*nt}_getMaxNetworkRetries(he={}){return he.maxNetworkRetries!==void 0&&Number.isInteger(he.maxNetworkRetries)?he.maxNetworkRetries:this._stripe.getMaxNetworkRetries()}_defaultIdempotencyKey(he,Me,Pe){let nt=this._getMaxNetworkRetries(Me),ot=()=>`stripe-node-retry-${this._stripe._platformFunctions.uuid4()}`;if(Pe==="v2"){if(he==="POST"||he==="DELETE")return ot()}else if(Pe==="v1"&&he==="POST"&&nt>0)return ot();return null}_makeHeaders({contentType:he,contentLength:Me,apiVersion:Pe,clientUserAgent:nt,method:ot,userSuppliedHeaders:ft,userSuppliedSettings:Rt,stripeAccount:zt,stripeContext:Kt,apiMode:Lt}){let Bt={Accept:"application/json","Content-Type":he,"User-Agent":this._getUserAgentString(Lt),"X-Stripe-Client-User-Agent":nt,"X-Stripe-Client-Telemetry":this._getTelemetryHeader(),"Stripe-Version":Pe,"Stripe-Account":zt,"Stripe-Context":Kt,"Idempotency-Key":this._defaultIdempotencyKey(ot,Rt,Lt)},xt=ot=="POST"||ot=="PUT"||ot=="PATCH";return(xt||Me)&&(xt||I(`${ot} method had non-zero contentLength but no payload is expected for this verb`),Bt["Content-Length"]=Me),Object.assign(W(Bt),ft&&typeof ft=="object"?Object.keys(ft).reduce((Dt,Ht)=>(Dt[Ht.split("-").map(dr=>dr.charAt(0).toUpperCase()+dr.substr(1).toLowerCase()).join("-")]=ft[Ht],Dt),{}):ft)}_getUserAgentString(he){let Me=this._stripe.getConstant("PACKAGE_VERSION"),Pe=this._stripe._appInfo?this._stripe.getAppInfoAsString():"";return`Stripe/${he} NodeBindings/${Me} ${Pe}`.trim()}_getTelemetryHeader(){if(this._stripe.getTelemetryEnabled()&&this._stripe._prevRequestMetrics.length>0)return JSON.stringify({last_request_metrics:this._stripe._prevRequestMetrics.shift()})}_recordRequestMetrics(he,Me,Pe){if(this._stripe.getTelemetryEnabled()&&he)if(this._stripe._prevRequestMetrics.length>this._maxBufferedRequestMetric)I("Request metrics buffer is full, dropping telemetry message.");else{let nt={request_id:he,request_duration_ms:Me};Pe&&Pe.length>0&&(nt.usage=Pe),this._stripe._prevRequestMetrics.push(nt)}}_rawRequest(he,Me,Pe,nt,ot){return new Promise((ft,Rt)=>{let zt;try{let xt=he.toUpperCase();if(xt!=="POST"&&Pe&&Object.keys(Pe).length!==0)throw Error("rawRequest only supports params on POST requests. Please pass null and add your parameters to path.");let Dt=[].slice.call([Pe,nt]),Ht=j(Dt),dr=xt==="POST"?Object.assign({},Ht):null,Gt=$(Dt),cr=Gt.headers,_r=Gt.authenticator;zt={requestMethod:xt,requestPath:Me,bodyData:dr,queryData:{},authenticator:_r,headers:cr,host:Gt.host,streaming:!!Gt.streaming,settings:{},usage:ot||["raw_request"]}}catch(xt){Rt(xt);return}let{headers:Kt,settings:Lt}=zt,Bt=zt.authenticator;this._request(zt.requestMethod,zt.host,Me,zt.bodyData,Bt,{headers:Kt,settings:Lt,streaming:zt.streaming},zt.usage,function(xt,Dt){xt?Rt(xt):ft(Dt)})})}_getContentLength(he){return typeof he=="string"?new TextEncoder().encode(he).length:he.length}_request(he,Me,Pe,nt,ot,ft,Rt=[],zt,Kt=null){var Lt;let Bt;ot=(Lt=ot??this._stripe._authenticator)!==null&&Lt!==void 0?Lt:null;let xt=q(Pe),Dt=(Gt,cr,_r,yr,sr)=>setTimeout(Gt,this._getSleepTimeInMS(yr,sr),cr,_r,yr+1),Ht=(Gt,cr,_r)=>{let yr=ft.settings&&ft.settings.timeout&&Number.isInteger(ft.settings.timeout)&&ft.settings.timeout>=0?ft.settings.timeout:this._stripe.getApiField("timeout"),sr={host:Me||this._stripe.getApiField("host"),port:this._stripe.getApiField("port"),path:Pe,method:he,headers:Object.assign({},cr),body:Bt,protocol:this._stripe.getApiField("protocol")};ot(sr).then(()=>{let Ar=this._stripe.getApiField("httpClient").makeRequest(sr.host,sr.port,sr.path,sr.method,sr.headers,sr.body,sr.protocol,yr),Dr=Date.now(),ri=W({api_version:Gt,account:J(cr["Stripe-Account"]),idempotency_key:J(cr["Idempotency-Key"]),method:he,path:Pe,request_start_time:Dr}),hi=_r||0,Fo=this._getMaxNetworkRetries(ft.settings||{});this._stripe._emitter.emit("request",ri),Ar.then(ki=>{if(D._shouldRetry(ki,hi,Fo)){var Zs;return Dt(Ht,Gt,cr,hi,Number(Array.isArray(Zs=ki.getHeaders()["retry-after"])?Zs[0]:Zs))}return ft.streaming&&400>ki.getStatusCode()?this._streamingResponseHandler(ri,Rt,zt)(ki):this._jsonResponseHandler(ri,xt,Rt,zt)(ki)}).catch(ki=>D._shouldRetry(null,hi,Fo,ki)?Dt(Ht,Gt,cr,hi,null):zt(new S({message:ki.code&&ki.code===a.TIMEOUT_ERROR_CODE?`Request aborted due to timeout being reached (${yr}ms)`:D._generateConnectionErrorMessage(hi),detail:ki})))}).catch(Ar=>{throw new ne({message:"Unable to authenticate the request",exception:Ar})})},dr=(Gt,cr)=>{if(Gt)return zt(Gt);Bt=cr,this._stripe.getClientUserAgent(_r=>{var yr,sr,Ar;let Dr=this._stripe.getApiField("version"),ri=this._makeHeaders({contentType:xt=="v2"?"application/json":"application/x-www-form-urlencoded",contentLength:this._getContentLength(cr),apiVersion:Dr,clientUserAgent:_r,method:he,userSuppliedHeaders:(yr=ft.headers)!==null&&yr!==void 0?yr:null,userSuppliedSettings:(sr=ft.settings)!==null&&sr!==void 0?sr:{},stripeAccount:(Ar=ft.stripeAccount)!==null&&Ar!==void 0?Ar:this._stripe.getApiField("stripeAccount"),stripeContext:this._normalizeStripeContext(ft.stripeContext,this._stripe.getApiField("stripeContext")),apiMode:xt});Ht(Dr,ri,0)})};if(Kt)Kt(he,nt,ft.headers,dr);else{let Gt;dr(null,Gt=xt=="v2"?nt?JSON.stringify(nt,m):"":c(nt||{}))}}}class ee{constructor(he,Me,Pe,nt){this.index=0,this.pagePromise=he,this.promiseCache={currentPromise:null},this.requestArgs=Me,this.spec=Pe,this.stripeResource=nt}async iterate(he){if(!(he&&he.data&&typeof he.data.length=="number"))throw Error("Unexpected: Stripe API response does not have a well-formed `data` array.");let Me=ue(this.requestArgs);if(this.index<he.data.length){let Pe=Me?he.data.length-1-this.index:this.index,nt=he.data[Pe];return this.index+=1,{value:nt,done:!1}}if(he.has_more){this.index=0,this.pagePromise=this.getNextPage(he);let Pe=await this.pagePromise;return this.iterate(Pe)}return{done:!0,value:void 0}}getNextPage(he){throw Error("Unimplemented")}async _next(){return this.iterate(await this.pagePromise)}next(){if(this.promiseCache.currentPromise)return this.promiseCache.currentPromise;let he=(async()=>{let Me=await this._next();return this.promiseCache.currentPromise=null,Me})();return this.promiseCache.currentPromise=he,he}}class le extends ee{getNextPage(he){let Me=ue(this.requestArgs),Pe=function(nt,ot){let ft=ot?0:nt.data.length-1,Rt=nt.data[ft],zt=Rt&&Rt.id;if(!zt)throw Error("Unexpected: No `id` found on the last item while auto-paging a list.");return zt}(he,Me);return this.stripeResource._makeRequest(this.requestArgs,this.spec,{[Me?"ending_before":"starting_after"]:Pe})}}class se extends ee{getNextPage(he){if(!he.next_page)throw Error("Unexpected: Stripe API response does not have a well-formed `next_page` field, but `has_more` was true.");return this.stripeResource._makeRequest(this.requestArgs,this.spec,{page:he.next_page})}}class ce{constructor(he,Me,Pe,nt){this.firstPagePromise=he,this.currentPageIterator=null,this.nextPageUrl=null,this.requestArgs=Me,this.spec=Pe,this.stripeResource=nt}async initFirstPage(){if(this.firstPagePromise){let he=await this.firstPagePromise;this.firstPagePromise=null,this.currentPageIterator=he.data[Symbol.iterator](),this.nextPageUrl=he.next_page_url||null}}async turnPage(){if(!this.nextPageUrl)return null;this.spec.fullPath=this.nextPageUrl;let he=await this.stripeResource._makeRequest([],this.spec,{});return this.nextPageUrl=he.next_page_url||null,this.currentPageIterator=he.data[Symbol.iterator](),this.currentPageIterator}async next(){if(await this.initFirstPage(),this.currentPageIterator){let Pe=this.currentPageIterator.next();if(!Pe.done)return{done:!1,value:Pe.value}}let he=await this.turnPage();if(!he)return{done:!0,value:void 0};let Me=he.next();return Me.done?{done:!0,value:void 0}:{done:!1,value:Me.value}}}let me=(Be,he,Me,Pe)=>{let nt=q(Me.fullPath||Me.path);return nt!=="v2"&&Me.methodType==="search"?H(new se(Pe,he,Me,Be)):nt!=="v2"&&Me.methodType==="list"?H(new le(Pe,he,Me,Be)):nt==="v2"&&Me.methodType==="list"?H(new ce(Pe,he,Me,Be)):null},H=Be=>{var he,Me;let Pe=(he=(...ft)=>Be.next(...ft),function(){var ft,Rt;let zt=[].slice.call(arguments),Kt=function(Bt){if(Bt.length===0)return;let xt=Bt[0];if(typeof xt!="function")throw Error(`The first argument to autoPagingEach, if present, must be a callback function; received ${typeof xt}`);if(xt.length===2)return xt;if(xt.length>2)throw Error(`The \`onItem\` callback function passed to autoPagingEach must accept at most two arguments; got ${xt}`);return function(Dt,Ht){Ht(xt(Dt))}}(zt),Lt=function(Bt){if(Bt.length<2)return null;let xt=Bt[1];if(typeof xt!="function")throw Error(`The second argument to autoPagingEach, if present, must be a callback function; received ${typeof xt}`);return xt}(zt);if(zt.length>2)throw Error(`autoPagingEach takes up to two arguments; received ${zt}`);return K((ft=he,Rt=Kt,new Promise((Bt,xt)=>{ft().then(function Dt(Ht){if(Ht.done){Bt();return}let dr=Ht.value;return new Promise(Gt=>{Rt(dr,Gt)}).then(Gt=>Gt===!1?Dt({done:!0,value:void 0}):ft().then(Dt))}).catch(xt)})),Lt)}),nt=(Me=Pe,function(ft,Rt){let zt=ft&&ft.limit;if(!zt)throw Error("You must pass a `limit` option to autoPagingToArray, e.g., `autoPagingToArray({limit: 1000});`.");if(zt>1e4)throw Error("You cannot specify a limit of more than 10,000 items to fetch in `autoPagingToArray`; use `autoPagingEach` to iterate through longer lists.");return K(new Promise((Kt,Lt)=>{let Bt=[];Me(xt=>{if(Bt.push(xt),Bt.length>=zt)return!1}).then(()=>{Kt(Bt)}).catch(Lt)}),Rt)}),ot={autoPagingEach:Pe,autoPagingToArray:nt,next:()=>Be.next(),return:()=>({}),[typeof Symbol<"u"&&Symbol.asyncIterator?Symbol.asyncIterator:"@@asyncIterator"]:()=>ot};return ot};function ue(Be){return!!j([].slice.call(Be)).ending_before}function x(Be,he){if(this._stripe=Be,he)throw Error("Support for curried url params was dropped in stripe-node v7.0.0. Instead, pass two ids.");this.basePath=O(this.basePath||Be.getApiField("basePath")),this.resourcePath=this.path,this.path=O(this.path),this.initialize(...arguments)}x.extend=function(Be){let he=this,Me=Object.prototype.hasOwnProperty.call(Be,"constructor")?Be.constructor:function(...Pe){he.apply(this,Pe)};return Object.assign(Me,he),Me.prototype=Object.create(he.prototype),Object.assign(Me.prototype,Be),Me},x.method=function(Be){if(Be.path!==void 0&&Be.fullPath!==void 0)throw Error(`Method spec specified both a 'path' (${Be.path}) and a 'fullPath' (${Be.fullPath}).`);return function(...he){let Me=typeof he[he.length-1]=="function"&&he.pop();Be.urlParams=function(nt){let ot=nt.match(/\{\w+\}/g);return ot?ot.map(ft=>ft.replace(/[{}]/g,"")):[]}(Be.fullPath||this.createResourcePathWithSymbols(Be.path||""));let Pe=K(this._makeRequest(he,Be,{}),Me);return Object.assign(Pe,me(this,he,Be,Pe)),Pe}},x.MAX_BUFFERED_REQUEST_METRICS=100,x.prototype={_stripe:null,path:"",resourcePath:"",basePath:null,initialize(){},requestDataProcessor:null,validateRequest:null,createFullPath(Be,he){let Me=[this.basePath(he),this.path(he)];if(typeof Be=="function"){let Pe=Be(he);Pe&&Me.push(Pe)}else Me.push(Be);return this._joinUrlParts(Me)},createResourcePathWithSymbols(Be){return Be?`/${this._joinUrlParts([this.resourcePath,Be])}`:`/${this.resourcePath}`},_joinUrlParts:Be=>Be.join("/").replace(/\/{2,}/g,"/"),_getRequestOpts(Be,he,Me){var Pe;let nt=(he.method||"GET").toUpperCase(),ot=he.usage||[],ft=he.urlParams||[],Rt=he.encode||(sr=>sr),zt=!!he.fullPath,Kt=O(zt?he.fullPath:he.path||""),Lt=zt?he.fullPath:this.createResourcePathWithSymbols(he.path),Bt=[].slice.call(Be),xt=ft.reduce((sr,Ar)=>{let Dr=Bt.shift();if(typeof Dr!="string")throw Error(`Stripe: Argument "${Ar}" must be a string, but got: ${Dr} (on API request to \`${nt} ${Lt}\`)`);return sr[Ar]=Dr,sr},{}),Dt=Rt(Object.assign({},j(Bt),Me)),Ht=$(Bt),dr=Ht.host||he.host,Gt=!!he.streaming||!!Ht.streaming;if(Bt.filter(sr=>sr!=null).length)throw Error(`Stripe: Unknown arguments (${Bt}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options. (on API request to ${nt} \`${Lt}\`)`);let cr=zt?Kt(xt):this.createFullPath(Kt,xt),_r=Object.assign(Ht.headers,he.headers);he.validator&&he.validator(Dt,{headers:_r});let yr=he.method==="GET"||he.method==="DELETE";return{requestMethod:nt,requestPath:cr,bodyData:yr?null:Dt,queryData:yr?Dt:{},authenticator:(Pe=Ht.authenticator)!==null&&Pe!==void 0?Pe:null,headers:_r,host:dr??null,streaming:Gt,settings:Ht.settings,usage:ot}},_makeRequest(Be,he,Me){return new Promise((Pe,nt)=>{var ot;let ft;try{ft=this._getRequestOpts(Be,he,Me)}catch(Bt){nt(Bt);return}let Rt=Object.keys(ft.queryData).length===0,zt=[ft.requestPath,Rt?"":"?",c(ft.queryData)].join(""),{headers:Kt,settings:Lt}=ft;this._stripe._requestSender._request(ft.requestMethod,ft.host,zt,ft.bodyData,ft.authenticator,{headers:Kt,settings:Lt,streaming:ft.streaming},ft.usage,function(Bt,xt){Bt?nt(Bt):Pe(he.transformResponseData?he.transformResponseData(xt):xt)},(ot=this.requestDataProcessor)===null||ot===void 0?void 0:ot.bind(this))})}};class fe{constructor(he=[]){this._segments=[...he]}get segments(){return[...this._segments]}push(he){if(!he)throw Error("Segment cannot be null or undefined");return new fe([...this._segments,he])}pop(){if(this._segments.length===0)throw Error("Cannot pop from an empty context");return new fe(this._segments.slice(0,-1))}toString(){return this._segments.join("/")}static parse(he){return new fe(he?he.split("/"):[])}}let ge="2026-01-28.clover";function Se(Be,he){for(let Me in he){if(!Object.prototype.hasOwnProperty.call(he,Me))continue;let Pe=Me[0].toLowerCase()+Me.substring(1),nt=new he[Me](Be);this[Pe]=nt}}function Re(Be,he){return function(Me){return new Se(Me,he)}}let ae=x.method,Ae=x.extend({create:ae({method:"POST",fullPath:"/v2/core/account_links"})}),lt=x.method,Je=x.extend({create:lt({method:"POST",fullPath:"/v2/core/account_tokens"}),retrieve:lt({method:"GET",fullPath:"/v2/core/account_tokens/{id}"})}),rt=x.method,Ye=x.extend({retrieve:rt({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}"}),list:rt({method:"GET",fullPath:"/v1/financial_connections/accounts",methodType:"list"}),disconnect:rt({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/disconnect"}),listOwners:rt({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}/owners",methodType:"list"}),refresh:rt({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/refresh"}),subscribe:rt({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/subscribe"}),unsubscribe:rt({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/unsubscribe"})}),St=x.method,bt=x.extend({create:St({method:"POST",fullPath:"/v2/core/accounts/{account_id}/persons"}),retrieve:St({method:"GET",fullPath:"/v2/core/accounts/{account_id}/persons/{id}"}),update:St({method:"POST",fullPath:"/v2/core/accounts/{account_id}/persons/{id}"}),list:St({method:"GET",fullPath:"/v2/core/accounts/{account_id}/persons",methodType:"list"}),del:St({method:"DELETE",fullPath:"/v2/core/accounts/{account_id}/persons/{id}"})}),qe=x.method,re=x.extend({create:qe({method:"POST",fullPath:"/v2/core/accounts/{account_id}/person_tokens"}),retrieve:qe({method:"GET",fullPath:"/v2/core/accounts/{account_id}/person_tokens/{id}"})}),We=x.method,ut=x.extend({constructor:function(...Be){x.apply(this,Be),this.persons=new bt(...Be),this.personTokens=new re(...Be)},create:We({method:"POST",fullPath:"/v2/core/accounts"}),retrieve:We({method:"GET",fullPath:"/v2/core/accounts/{id}"}),update:We({method:"POST",fullPath:"/v2/core/accounts/{id}"}),list:We({method:"GET",fullPath:"/v2/core/accounts",methodType:"list"}),close:We({method:"POST",fullPath:"/v2/core/accounts/{id}/close"})}),kt=x.method,Ct=x.extend({retrieve:kt({method:"GET",fullPath:"/v1/entitlements/active_entitlements/{id}"}),list:kt({method:"GET",fullPath:"/v1/entitlements/active_entitlements",methodType:"list"})}),tt=x.method,Ot=x.extend({create:tt({method:"POST",fullPath:"/v1/billing/alerts"}),retrieve:tt({method:"GET",fullPath:"/v1/billing/alerts/{id}"}),list:tt({method:"GET",fullPath:"/v1/billing/alerts",methodType:"list"}),activate:tt({method:"POST",fullPath:"/v1/billing/alerts/{id}/activate"}),archive:tt({method:"POST",fullPath:"/v1/billing/alerts/{id}/archive"}),deactivate:tt({method:"POST",fullPath:"/v1/billing/alerts/{id}/deactivate"})}),Wt=x.method,yt=x.extend({find:Wt({method:"GET",fullPath:"/v1/tax/associations/find"})}),ct=x.method,vt=x.extend({retrieve:ct({method:"GET",fullPath:"/v1/issuing/authorizations/{authorization}"}),update:ct({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}"}),list:ct({method:"GET",fullPath:"/v1/issuing/authorizations",methodType:"list"}),approve:ct({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/approve"}),decline:ct({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/decline"})}),Ut=x.method,nr=x.extend({create:Ut({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations"}),capture:Ut({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/capture"}),expire:Ut({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/expire"}),finalizeAmount:Ut({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/finalize_amount"}),increment:Ut({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/increment"}),respond:Ut({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/fraud_challenges/respond"}),reverse:Ut({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/reverse"})}),br=x.method,ke=x.extend({create:br({method:"POST",fullPath:"/v1/tax/calculations"}),retrieve:br({method:"GET",fullPath:"/v1/tax/calculations/{calculation}"}),listLineItems:br({method:"GET",fullPath:"/v1/tax/calculations/{calculation}/line_items",methodType:"list"})}),xe=x.method,Fe=x.extend({create:xe({method:"POST",fullPath:"/v1/issuing/cardholders"}),retrieve:xe({method:"GET",fullPath:"/v1/issuing/cardholders/{cardholder}"}),update:xe({method:"POST",fullPath:"/v1/issuing/cardholders/{cardholder}"}),list:xe({method:"GET",fullPath:"/v1/issuing/cardholders",methodType:"list"})}),Ze=x.method,ht=x.extend({create:Ze({method:"POST",fullPath:"/v1/issuing/cards"}),retrieve:Ze({method:"GET",fullPath:"/v1/issuing/cards/{card}"}),update:Ze({method:"POST",fullPath:"/v1/issuing/cards/{card}"}),list:Ze({method:"GET",fullPath:"/v1/issuing/cards",methodType:"list"})}),dt=x.method,Et=x.extend({deliverCard:dt({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/deliver"}),failCard:dt({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/fail"}),returnCard:dt({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/return"}),shipCard:dt({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/ship"}),submitCard:dt({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/submit"})}),It=x.method,jt=x.extend({create:It({method:"POST",fullPath:"/v1/billing_portal/configurations"}),retrieve:It({method:"GET",fullPath:"/v1/billing_portal/configurations/{configuration}"}),update:It({method:"POST",fullPath:"/v1/billing_portal/configurations/{configuration}"}),list:It({method:"GET",fullPath:"/v1/billing_portal/configurations",methodType:"list"})}),Ft=x.method,f=x.extend({create:Ft({method:"POST",fullPath:"/v1/terminal/configurations"}),retrieve:Ft({method:"GET",fullPath:"/v1/terminal/configurations/{configuration}"}),update:Ft({method:"POST",fullPath:"/v1/terminal/configurations/{configuration}"}),list:Ft({method:"GET",fullPath:"/v1/terminal/configurations",methodType:"list"}),del:Ft({method:"DELETE",fullPath:"/v1/terminal/configurations/{configuration}"})}),ye=x.method,Ie=x.extend({create:ye({method:"POST",fullPath:"/v1/test_helpers/confirmation_tokens"})}),Te=x.method,ze=x.extend({create:Te({method:"POST",fullPath:"/v1/terminal/connection_tokens"})}),Ce=x.method,He=x.extend({retrieve:Ce({method:"GET",fullPath:"/v1/billing/credit_balance_summary"})}),Ge=x.method,it=x.extend({retrieve:Ge({method:"GET",fullPath:"/v1/billing/credit_balance_transactions/{id}"}),list:Ge({method:"GET",fullPath:"/v1/billing/credit_balance_transactions",methodType:"list"})}),gt=x.method,at=x.extend({create:gt({method:"POST",fullPath:"/v1/billing/credit_grants"}),retrieve:gt({method:"GET",fullPath:"/v1/billing/credit_grants/{id}"}),update:gt({method:"POST",fullPath:"/v1/billing/credit_grants/{id}"}),list:gt({method:"GET",fullPath:"/v1/billing/credit_grants",methodType:"list"}),expire:gt({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/expire"}),voidGrant:gt({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/void"})}),wt=x.method,Tt=x.extend({create:wt({method:"POST",fullPath:"/v1/treasury/credit_reversals"}),retrieve:wt({method:"GET",fullPath:"/v1/treasury/credit_reversals/{credit_reversal}"}),list:wt({method:"GET",fullPath:"/v1/treasury/credit_reversals",methodType:"list"})}),Qt=x.method,Jt=x.extend({fundCashBalance:Qt({method:"POST",fullPath:"/v1/test_helpers/customers/{customer}/fund_cash_balance"})}),er=x.method,$t=x.extend({create:er({method:"POST",fullPath:"/v1/treasury/debit_reversals"}),retrieve:er({method:"GET",fullPath:"/v1/treasury/debit_reversals/{debit_reversal}"}),list:er({method:"GET",fullPath:"/v1/treasury/debit_reversals",methodType:"list"})}),Pt=x.method,qt=x.extend({create:Pt({method:"POST",fullPath:"/v1/issuing/disputes"}),retrieve:Pt({method:"GET",fullPath:"/v1/issuing/disputes/{dispute}"}),update:Pt({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}"}),list:Pt({method:"GET",fullPath:"/v1/issuing/disputes",methodType:"list"}),submit:Pt({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}/submit"})}),or=x.method,Vt=x.extend({retrieve:or({method:"GET",fullPath:"/v1/radar/early_fraud_warnings/{early_fraud_warning}"}),list:or({method:"GET",fullPath:"/v1/radar/early_fraud_warnings",methodType:"list"})}),lr=x.method,ur=x.extend({create:lr({method:"POST",fullPath:"/v2/core/event_destinations"}),retrieve:lr({method:"GET",fullPath:"/v2/core/event_destinations/{id}"}),update:lr({method:"POST",fullPath:"/v2/core/event_destinations/{id}"}),list:lr({method:"GET",fullPath:"/v2/core/event_destinations",methodType:"list"}),del:lr({method:"DELETE",fullPath:"/v2/core/event_destinations/{id}"}),disable:lr({method:"POST",fullPath:"/v2/core/event_destinations/{id}/disable"}),enable:lr({method:"POST",fullPath:"/v2/core/event_destinations/{id}/enable"}),ping:lr({method:"POST",fullPath:"/v2/core/event_destinations/{id}/ping"})}),gr=x.method,Or=x.extend({retrieve(...Be){return gr({method:"GET",fullPath:"/v2/core/events/{id}",transformResponseData:he=>this.addFetchRelatedObjectIfNeeded(he)}).apply(this,Be)},list(...Be){return gr({method:"GET",fullPath:"/v2/core/events",methodType:"list",transformResponseData:he=>Object.assign(Object.assign({},he),{data:he.data.map(this.addFetchRelatedObjectIfNeeded.bind(this))})}).apply(this,Be)},addFetchRelatedObjectIfNeeded(Be){return Be.related_object&&Be.related_object.url?Object.assign(Object.assign({},Be),{fetchRelatedObject:()=>gr({method:"GET",fullPath:Be.related_object.url}).apply(this,[{stripeContext:Be.context}])}):Be}}),ir=x.method,vr=x.extend({create:ir({method:"POST",fullPath:"/v1/entitlements/features"}),retrieve:ir({method:"GET",fullPath:"/v1/entitlements/features/{id}"}),update:ir({method:"POST",fullPath:"/v1/entitlements/features/{id}"}),list:ir({method:"GET",fullPath:"/v1/entitlements/features",methodType:"list"})}),Cr=x.method,Mr=x.extend({create:Cr({method:"POST",fullPath:"/v1/treasury/financial_accounts"}),retrieve:Cr({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),update:Cr({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),list:Cr({method:"GET",fullPath:"/v1/treasury/financial_accounts",methodType:"list"}),close:Cr({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/close"}),retrieveFeatures:Cr({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"}),updateFeatures:Cr({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"})}),Wr=x.method,Ti=x.extend({fail:Wr({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/fail"}),returnInboundTransfer:Wr({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/return"}),succeed:Wr({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/succeed"})}),Kr=x.method,yi=x.extend({create:Kr({method:"POST",fullPath:"/v1/treasury/inbound_transfers"}),retrieve:Kr({method:"GET",fullPath:"/v1/treasury/inbound_transfers/{id}"}),list:Kr({method:"GET",fullPath:"/v1/treasury/inbound_transfers",methodType:"list"}),cancel:Kr({method:"POST",fullPath:"/v1/treasury/inbound_transfers/{inbound_transfer}/cancel"})}),ii=x.method,Ii=x.extend({create:ii({method:"POST",fullPath:"/v1/terminal/locations"}),retrieve:ii({method:"GET",fullPath:"/v1/terminal/locations/{location}"}),update:ii({method:"POST",fullPath:"/v1/terminal/locations/{location}"}),list:ii({method:"GET",fullPath:"/v1/terminal/locations",methodType:"list"}),del:ii({method:"DELETE",fullPath:"/v1/terminal/locations/{location}"})}),Ei=x.method,un=x.extend({create:Ei({method:"POST",fullPath:"/v1/billing/meter_event_adjustments"})}),Cn=x.method,Pn=x.extend({create:Cn({method:"POST",fullPath:"/v2/billing/meter_event_adjustments"})}),ui=x.method,Zi=x.extend({create:ui({method:"POST",fullPath:"/v2/billing/meter_event_session"})}),cn=x.method,Jr=x.extend({create:cn({method:"POST",fullPath:"/v2/billing/meter_event_stream",host:"meter-events.stripe.com"})}),Ai=x.method,Vi=x.extend({create:Ai({method:"POST",fullPath:"/v1/billing/meter_events"})}),dn=x.method,zi=x.extend({create:dn({method:"POST",fullPath:"/v2/billing/meter_events"})}),Hr=x.method,Fr=x.extend({create:Hr({method:"POST",fullPath:"/v1/billing/meters"}),retrieve:Hr({method:"GET",fullPath:"/v1/billing/meters/{id}"}),update:Hr({method:"POST",fullPath:"/v1/billing/meters/{id}"}),list:Hr({method:"GET",fullPath:"/v1/billing/meters",methodType:"list"}),deactivate:Hr({method:"POST",fullPath:"/v1/billing/meters/{id}/deactivate"}),listEventSummaries:Hr({method:"GET",fullPath:"/v1/billing/meters/{id}/event_summaries",methodType:"list"}),reactivate:Hr({method:"POST",fullPath:"/v1/billing/meters/{id}/reactivate"})}),Qr=x.method,Gi=x.extend({create:Qr({method:"POST",fullPath:"/v1/terminal/onboarding_links"})}),ci=x.method,$i=x.extend({create:ci({method:"POST",fullPath:"/v1/climate/orders"}),retrieve:ci({method:"GET",fullPath:"/v1/climate/orders/{order}"}),update:ci({method:"POST",fullPath:"/v1/climate/orders/{order}"}),list:ci({method:"GET",fullPath:"/v1/climate/orders",methodType:"list"}),cancel:ci({method:"POST",fullPath:"/v1/climate/orders/{order}/cancel"})}),Oi=x.method,hn=x.extend({update:Oi({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}"}),fail:Oi({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/fail"}),post:Oi({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/post"}),returnOutboundPayment:Oi({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/return"})}),gi=x.method,pn=x.extend({create:gi({method:"POST",fullPath:"/v1/treasury/outbound_payments"}),retrieve:gi({method:"GET",fullPath:"/v1/treasury/outbound_payments/{id}"}),list:gi({method:"GET",fullPath:"/v1/treasury/outbound_payments",methodType:"list"}),cancel:gi({method:"POST",fullPath:"/v1/treasury/outbound_payments/{id}/cancel"})}),zr=x.method,ni=x.extend({update:zr({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}"}),fail:zr({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/fail"}),post:zr({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/post"}),returnOutboundTransfer:zr({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/return"})}),si=x.method,Ci=x.extend({create:si({method:"POST",fullPath:"/v1/treasury/outbound_transfers"}),retrieve:si({method:"GET",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}"}),list:si({method:"GET",fullPath:"/v1/treasury/outbound_transfers",methodType:"list"}),cancel:si({method:"POST",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}/cancel"})}),vi=x.method,Vr=x.extend({create:vi({method:"POST",fullPath:"/v1/radar/payment_evaluations"})}),Xr=x.method,oi=x.extend({create:Xr({method:"POST",fullPath:"/v1/issuing/personalization_designs"}),retrieve:Xr({method:"GET",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),update:Xr({method:"POST",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),list:Xr({method:"GET",fullPath:"/v1/issuing/personalization_designs",methodType:"list"})}),Br=x.method,Bi=x.extend({activate:Br({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/activate"}),deactivate:Br({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/deactivate"}),reject:Br({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/reject"})}),Ki=x.method,ve=x.extend({retrieve:Ki({method:"GET",fullPath:"/v1/issuing/physical_bundles/{physical_bundle}"}),list:Ki({method:"GET",fullPath:"/v1/issuing/physical_bundles",methodType:"list"})}),w=x.method,pe=x.extend({retrieve:w({method:"GET",fullPath:"/v1/climate/products/{product}"}),list:w({method:"GET",fullPath:"/v1/climate/products",methodType:"list"})}),Oe=x.method,Ve=x.extend({create:Oe({method:"POST",fullPath:"/v1/terminal/readers"}),retrieve:Oe({method:"GET",fullPath:"/v1/terminal/readers/{reader}"}),update:Oe({method:"POST",fullPath:"/v1/terminal/readers/{reader}"}),list:Oe({method:"GET",fullPath:"/v1/terminal/readers",methodType:"list"}),del:Oe({method:"DELETE",fullPath:"/v1/terminal/readers/{reader}"}),cancelAction:Oe({method:"POST",fullPath:"/v1/terminal/readers/{reader}/cancel_action"}),collectInputs:Oe({method:"POST",fullPath:"/v1/terminal/readers/{reader}/collect_inputs"}),collectPaymentMethod:Oe({method:"POST",fullPath:"/v1/terminal/readers/{reader}/collect_payment_method"}),confirmPaymentIntent:Oe({method:"POST",fullPath:"/v1/terminal/readers/{reader}/confirm_payment_intent"}),processPaymentIntent:Oe({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_payment_intent"}),processSetupIntent:Oe({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_setup_intent"}),refundPayment:Oe({method:"POST",fullPath:"/v1/terminal/readers/{reader}/refund_payment"}),setReaderDisplay:Oe({method:"POST",fullPath:"/v1/terminal/readers/{reader}/set_reader_display"})}),_t=x.method,Yt=x.extend({presentPaymentMethod:_t({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/present_payment_method"}),succeedInputCollection:_t({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/succeed_input_collection"}),timeoutInputCollection:_t({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/timeout_input_collection"})}),ar=x.method,Tr=x.extend({create:ar({method:"POST",fullPath:"/v1/test_helpers/treasury/received_credits"})}),Lr=x.method,qr=x.extend({retrieve:Lr({method:"GET",fullPath:"/v1/treasury/received_credits/{id}"}),list:Lr({method:"GET",fullPath:"/v1/treasury/received_credits",methodType:"list"})}),Pi=x.method,Ps=x.extend({create:Pi({method:"POST",fullPath:"/v1/test_helpers/treasury/received_debits"})}),ns=x.method,Rs=x.extend({retrieve:ns({method:"GET",fullPath:"/v1/treasury/received_debits/{id}"}),list:ns({method:"GET",fullPath:"/v1/treasury/received_debits",methodType:"list"})}),Us=x.method,Ds=x.extend({expire:Us({method:"POST",fullPath:"/v1/test_helpers/refunds/{refund}/expire"})}),hr=x.method,ss=x.extend({create:hr({method:"POST",fullPath:"/v1/tax/registrations"}),retrieve:hr({method:"GET",fullPath:"/v1/tax/registrations/{id}"}),update:hr({method:"POST",fullPath:"/v1/tax/registrations/{id}"}),list:hr({method:"GET",fullPath:"/v1/tax/registrations",methodType:"list"})}),Ji=x.method,Rn=x.extend({create:Ji({method:"POST",fullPath:"/v1/reporting/report_runs"}),retrieve:Ji({method:"GET",fullPath:"/v1/reporting/report_runs/{report_run}"}),list:Ji({method:"GET",fullPath:"/v1/reporting/report_runs",methodType:"list"})}),Un=x.method,os=x.extend({retrieve:Un({method:"GET",fullPath:"/v1/reporting/report_types/{report_type}"}),list:Un({method:"GET",fullPath:"/v1/reporting/report_types",methodType:"list"})}),fn=x.method,as=x.extend({create:fn({method:"POST",fullPath:"/v1/forwarding/requests"}),retrieve:fn({method:"GET",fullPath:"/v1/forwarding/requests/{id}"}),list:fn({method:"GET",fullPath:"/v1/forwarding/requests",methodType:"list"})}),Dn=x.method,ls=x.extend({retrieve:Dn({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs/{scheduled_query_run}"}),list:Dn({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs",methodType:"list"})}),Hi=x.method,us=x.extend({create:Hi({method:"POST",fullPath:"/v1/apps/secrets"}),list:Hi({method:"GET",fullPath:"/v1/apps/secrets",methodType:"list"}),deleteWhere:Hi({method:"POST",fullPath:"/v1/apps/secrets/delete"}),find:Hi({method:"GET",fullPath:"/v1/apps/secrets/find"})}),cs=x.method,Qi=x.extend({create:cs({method:"POST",fullPath:"/v1/billing_portal/sessions"})}),Ri=x.method,ds=x.extend({create:Ri({method:"POST",fullPath:"/v1/checkout/sessions"}),retrieve:Ri({method:"GET",fullPath:"/v1/checkout/sessions/{session}"}),update:Ri({method:"POST",fullPath:"/v1/checkout/sessions/{session}"}),list:Ri({method:"GET",fullPath:"/v1/checkout/sessions",methodType:"list"}),expire:Ri({method:"POST",fullPath:"/v1/checkout/sessions/{session}/expire"}),listLineItems:Ri({method:"GET",fullPath:"/v1/checkout/sessions/{session}/line_items",methodType:"list"})}),Ln=x.method,hs=x.extend({create:Ln({method:"POST",fullPath:"/v1/financial_connections/sessions"}),retrieve:Ln({method:"GET",fullPath:"/v1/financial_connections/sessions/{session}"})}),qn=x.method,ps=x.extend({retrieve:qn({method:"GET",fullPath:"/v1/tax/settings"}),update:qn({method:"POST",fullPath:"/v1/tax/settings"})}),jn=x.method,mn=x.extend({retrieve:jn({method:"GET",fullPath:"/v1/climate/suppliers/{supplier}"}),list:jn({method:"GET",fullPath:"/v1/climate/suppliers",methodType:"list"})}),Mi=x.method,fs=x.extend({create:Mi({method:"POST",fullPath:"/v1/test_helpers/test_clocks"}),retrieve:Mi({method:"GET",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),list:Mi({method:"GET",fullPath:"/v1/test_helpers/test_clocks",methodType:"list"}),del:Mi({method:"DELETE",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),advance:Mi({method:"POST",fullPath:"/v1/test_helpers/test_clocks/{test_clock}/advance"})}),Xi=x.method,zn=x.extend({retrieve:Xi({method:"GET",fullPath:"/v1/issuing/tokens/{token}"}),update:Xi({method:"POST",fullPath:"/v1/issuing/tokens/{token}"}),list:Xi({method:"GET",fullPath:"/v1/issuing/tokens",methodType:"list"})}),Zt=x.method,wi=x.extend({retrieve:Zt({method:"GET",fullPath:"/v1/treasury/transaction_entries/{id}"}),list:Zt({method:"GET",fullPath:"/v1/treasury/transaction_entries",methodType:"list"})}),tr=x.method,Yi=x.extend({retrieve:tr({method:"GET",fullPath:"/v1/financial_connections/transactions/{transaction}"}),list:tr({method:"GET",fullPath:"/v1/financial_connections/transactions",methodType:"list"})}),wr=x.method,yn=x.extend({retrieve:wr({method:"GET",fullPath:"/v1/issuing/transactions/{transaction}"}),update:wr({method:"POST",fullPath:"/v1/issuing/transactions/{transaction}"}),list:wr({method:"GET",fullPath:"/v1/issuing/transactions",methodType:"list"})}),en=x.method,Bn=x.extend({retrieve:en({method:"GET",fullPath:"/v1/tax/transactions/{transaction}"}),createFromCalculation:en({method:"POST",fullPath:"/v1/tax/transactions/create_from_calculation"}),createReversal:en({method:"POST",fullPath:"/v1/tax/transactions/create_reversal"}),listLineItems:en({method:"GET",fullPath:"/v1/tax/transactions/{transaction}/line_items",methodType:"list"})}),gn=x.method,ms=x.extend({createForceCapture:gn({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_force_capture"}),createUnlinkedRefund:gn({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_unlinked_refund"}),refund:gn({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/{transaction}/refund"})}),Mn=x.method,ys=x.extend({retrieve:Mn({method:"GET",fullPath:"/v1/treasury/transactions/{id}"}),list:Mn({method:"GET",fullPath:"/v1/treasury/transactions",methodType:"list"})}),tn=x.method,T=x.extend({create:tn({method:"POST",fullPath:"/v1/radar/value_list_items"}),retrieve:tn({method:"GET",fullPath:"/v1/radar/value_list_items/{item}"}),list:tn({method:"GET",fullPath:"/v1/radar/value_list_items",methodType:"list"}),del:tn({method:"DELETE",fullPath:"/v1/radar/value_list_items/{item}"})}),u=x.method,B=x.extend({create:u({method:"POST",fullPath:"/v1/radar/value_lists"}),retrieve:u({method:"GET",fullPath:"/v1/radar/value_lists/{value_list}"}),update:u({method:"POST",fullPath:"/v1/radar/value_lists/{value_list}"}),list:u({method:"GET",fullPath:"/v1/radar/value_lists",methodType:"list"}),del:u({method:"DELETE",fullPath:"/v1/radar/value_lists/{value_list}"})}),de=x.method,je=x.extend({retrieve:de({method:"GET",fullPath:"/v1/identity/verification_reports/{report}"}),list:de({method:"GET",fullPath:"/v1/identity/verification_reports",methodType:"list"})}),Xe=x.method,pt=x.extend({create:Xe({method:"POST",fullPath:"/v1/identity/verification_sessions"}),retrieve:Xe({method:"GET",fullPath:"/v1/identity/verification_sessions/{session}"}),update:Xe({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}"}),list:Xe({method:"GET",fullPath:"/v1/identity/verification_sessions",methodType:"list"}),cancel:Xe({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/cancel"}),redact:Xe({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/redact"})}),Qe=x.method,mt=x.extend({create:Qe({method:"POST",fullPath:"/v1/accounts"}),retrieve(Be,...he){return typeof Be=="string"?Qe({method:"GET",fullPath:"/v1/accounts/{id}"}).apply(this,[Be,...he]):(Be==null&&[].shift.apply([Be,...he]),Qe({method:"GET",fullPath:"/v1/account"}).apply(this,[Be,...he]))},update:Qe({method:"POST",fullPath:"/v1/accounts/{account}"}),list:Qe({method:"GET",fullPath:"/v1/accounts",methodType:"list"}),del:Qe({method:"DELETE",fullPath:"/v1/accounts/{account}"}),createExternalAccount:Qe({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts"}),createLoginLink:Qe({method:"POST",fullPath:"/v1/accounts/{account}/login_links"}),createPerson:Qe({method:"POST",fullPath:"/v1/accounts/{account}/persons"}),deleteExternalAccount:Qe({method:"DELETE",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),deletePerson:Qe({method:"DELETE",fullPath:"/v1/accounts/{account}/persons/{person}"}),listCapabilities:Qe({method:"GET",fullPath:"/v1/accounts/{account}/capabilities",methodType:"list"}),listExternalAccounts:Qe({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts",methodType:"list"}),listPersons:Qe({method:"GET",fullPath:"/v1/accounts/{account}/persons",methodType:"list"}),reject:Qe({method:"POST",fullPath:"/v1/accounts/{account}/reject"}),retrieveCurrent:Qe({method:"GET",fullPath:"/v1/account"}),retrieveCapability:Qe({method:"GET",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),retrieveExternalAccount:Qe({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),retrievePerson:Qe({method:"GET",fullPath:"/v1/accounts/{account}/persons/{person}"}),updateCapability:Qe({method:"POST",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),updateExternalAccount:Qe({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),updatePerson:Qe({method:"POST",fullPath:"/v1/accounts/{account}/persons/{person}"})}),rr=x.method,Ir=x.extend({create:rr({method:"POST",fullPath:"/v1/account_links"})}),kr=x.method,Pr=x.extend({create:kr({method:"POST",fullPath:"/v1/account_sessions"})}),$r=x.method,Zr=x.extend({create:$r({method:"POST",fullPath:"/v1/apple_pay/domains"}),retrieve:$r({method:"GET",fullPath:"/v1/apple_pay/domains/{domain}"}),list:$r({method:"GET",fullPath:"/v1/apple_pay/domains",methodType:"list"}),del:$r({method:"DELETE",fullPath:"/v1/apple_pay/domains/{domain}"})}),bi=x.method,di=x.extend({retrieve:bi({method:"GET",fullPath:"/v1/application_fees/{id}"}),list:bi({method:"GET",fullPath:"/v1/application_fees",methodType:"list"}),createRefund:bi({method:"POST",fullPath:"/v1/application_fees/{id}/refunds"}),listRefunds:bi({method:"GET",fullPath:"/v1/application_fees/{id}/refunds",methodType:"list"}),retrieveRefund:bi({method:"GET",fullPath:"/v1/application_fees/{fee}/refunds/{id}"}),updateRefund:bi({method:"POST",fullPath:"/v1/application_fees/{fee}/refunds/{id}"})}),Ui=x.method,Er=x.extend({retrieve:Ui({method:"GET",fullPath:"/v1/balance"})}),Yr=x.method,Wn=x.extend({retrieve:Yr({method:"GET",fullPath:"/v1/balance_settings"}),update:Yr({method:"POST",fullPath:"/v1/balance_settings"})}),vn=x.method,wn=x.extend({retrieve:vn({method:"GET",fullPath:"/v1/balance_transactions/{id}"}),list:vn({method:"GET",fullPath:"/v1/balance_transactions",methodType:"list"})}),ai=x.method,Gr=x.extend({create:ai({method:"POST",fullPath:"/v1/charges"}),retrieve:ai({method:"GET",fullPath:"/v1/charges/{charge}"}),update:ai({method:"POST",fullPath:"/v1/charges/{charge}"}),list:ai({method:"GET",fullPath:"/v1/charges",methodType:"list"}),capture:ai({method:"POST",fullPath:"/v1/charges/{charge}/capture"}),search:ai({method:"GET",fullPath:"/v1/charges/search",methodType:"search"})}),Di=x.method,bn=x.extend({retrieve:Di({method:"GET",fullPath:"/v1/confirmation_tokens/{confirmation_token}"})}),rn=x.method,_n=x.extend({retrieve:rn({method:"GET",fullPath:"/v1/country_specs/{country}"}),list:rn({method:"GET",fullPath:"/v1/country_specs",methodType:"list"})}),xn=x.method,po=x.extend({create:xn({method:"POST",fullPath:"/v1/coupons"}),retrieve:xn({method:"GET",fullPath:"/v1/coupons/{coupon}"}),update:xn({method:"POST",fullPath:"/v1/coupons/{coupon}"}),list:xn({method:"GET",fullPath:"/v1/coupons",methodType:"list"}),del:xn({method:"DELETE",fullPath:"/v1/coupons/{coupon}"})}),Li=x.method,fo=x.extend({create:Li({method:"POST",fullPath:"/v1/credit_notes"}),retrieve:Li({method:"GET",fullPath:"/v1/credit_notes/{id}"}),update:Li({method:"POST",fullPath:"/v1/credit_notes/{id}"}),list:Li({method:"GET",fullPath:"/v1/credit_notes",methodType:"list"}),listLineItems:Li({method:"GET",fullPath:"/v1/credit_notes/{credit_note}/lines",methodType:"list"}),listPreviewLineItems:Li({method:"GET",fullPath:"/v1/credit_notes/preview/lines",methodType:"list"}),preview:Li({method:"GET",fullPath:"/v1/credit_notes/preview"}),voidCreditNote:Li({method:"POST",fullPath:"/v1/credit_notes/{id}/void"})}),gs=x.method,mo=x.extend({create:gs({method:"POST",fullPath:"/v1/customer_sessions"})}),pr=x.method,yo=x.extend({create:pr({method:"POST",fullPath:"/v1/customers"}),retrieve:pr({method:"GET",fullPath:"/v1/customers/{customer}"}),update:pr({method:"POST",fullPath:"/v1/customers/{customer}"}),list:pr({method:"GET",fullPath:"/v1/customers",methodType:"list"}),del:pr({method:"DELETE",fullPath:"/v1/customers/{customer}"}),createBalanceTransaction:pr({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions"}),createFundingInstructions:pr({method:"POST",fullPath:"/v1/customers/{customer}/funding_instructions"}),createSource:pr({method:"POST",fullPath:"/v1/customers/{customer}/sources"}),createTaxId:pr({method:"POST",fullPath:"/v1/customers/{customer}/tax_ids"}),deleteDiscount:pr({method:"DELETE",fullPath:"/v1/customers/{customer}/discount"}),deleteSource:pr({method:"DELETE",fullPath:"/v1/customers/{customer}/sources/{id}"}),deleteTaxId:pr({method:"DELETE",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),listBalanceTransactions:pr({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions",methodType:"list"}),listCashBalanceTransactions:pr({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions",methodType:"list"}),listPaymentMethods:pr({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods",methodType:"list"}),listSources:pr({method:"GET",fullPath:"/v1/customers/{customer}/sources",methodType:"list"}),listTaxIds:pr({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids",methodType:"list"}),retrieveBalanceTransaction:pr({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),retrieveCashBalance:pr({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance"}),retrieveCashBalanceTransaction:pr({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions/{transaction}"}),retrievePaymentMethod:pr({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods/{payment_method}"}),retrieveSource:pr({method:"GET",fullPath:"/v1/customers/{customer}/sources/{id}"}),retrieveTaxId:pr({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),search:pr({method:"GET",fullPath:"/v1/customers/search",methodType:"search"}),updateBalanceTransaction:pr({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),updateCashBalance:pr({method:"POST",fullPath:"/v1/customers/{customer}/cash_balance"}),updateSource:pr({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}"}),verifySource:pr({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}/verify"})}),Fn=x.method,go=x.extend({retrieve:Fn({method:"GET",fullPath:"/v1/disputes/{dispute}"}),update:Fn({method:"POST",fullPath:"/v1/disputes/{dispute}"}),list:Fn({method:"GET",fullPath:"/v1/disputes",methodType:"list"}),close:Fn({method:"POST",fullPath:"/v1/disputes/{dispute}/close"})}),Zn=x.method,vo=x.extend({create:Zn({method:"POST",fullPath:"/v1/ephemeral_keys",validator:(Be,he)=>{if(!he.headers||!he.headers["Stripe-Version"])throw Error("Passing apiVersion in a separate options hash is required to create an ephemeral key. See https://stripe.com/docs/api/versioning?lang=node")}}),del:Zn({method:"DELETE",fullPath:"/v1/ephemeral_keys/{key}"})}),Ls=x.method,wo=x.extend({retrieve:Ls({method:"GET",fullPath:"/v1/events/{id}"}),list:Ls({method:"GET",fullPath:"/v1/events",methodType:"list"})}),qs=x.method,bo=x.extend({retrieve:qs({method:"GET",fullPath:"/v1/exchange_rates/{rate_id}"}),list:qs({method:"GET",fullPath:"/v1/exchange_rates",methodType:"list"})}),kn=x.method,vs=x.extend({create:kn({method:"POST",fullPath:"/v1/file_links"}),retrieve:kn({method:"GET",fullPath:"/v1/file_links/{link}"}),update:kn({method:"POST",fullPath:"/v1/file_links/{link}"}),list:kn({method:"GET",fullPath:"/v1/file_links",methodType:"list"})}),_o=(Be,he,Me)=>{let Pe=(Math.round(1e16*Math.random())+Math.round(1e16*Math.random())).toString();Me["Content-Type"]=`multipart/form-data; boundary=${Pe}`;let nt=new TextEncoder,ot=new Uint8Array(0),ft=nt.encode(`\r
`);function Rt(Lt){let Bt=ot,xt=Lt instanceof Uint8Array?Lt:new Uint8Array(nt.encode(Lt));(ot=new Uint8Array(Bt.length+xt.length+2)).set(Bt),ot.set(xt,Bt.length),ot.set(ft,ot.length-2)}function zt(Lt){return`"${Lt.replace(/"|"/g,"%22").replace(/\r\n|\r|\n/g," ")}"`}let Kt=function(Lt){let Bt={},xt=(Dt,Ht)=>{Object.entries(Dt).forEach(([dr,Gt])=>{let cr=Ht?`${Ht}[${dr}]`:dr;if(function(_r){let yr=typeof _r;return(yr==="function"||yr==="object")&&!!_r}(Gt)){if(!(Gt instanceof Uint8Array)&&!Object.prototype.hasOwnProperty.call(Gt,"data"))return xt(Gt,cr);Bt[cr]=Gt}else Bt[cr]=String(Gt)})};return xt(Lt,null),Bt}(he);for(let Lt in Kt){if(!Object.prototype.hasOwnProperty.call(Kt,Lt))continue;let Bt=Kt[Lt];Rt(`--${Pe}`),Object.prototype.hasOwnProperty.call(Bt,"data")?(Rt(`Content-Disposition: form-data; name=${zt(Lt)}; filename=${zt(Bt.name||"blob")}`),Rt(`Content-Type: ${Bt.type||"application/octet-stream"}`),Rt(""),Rt(Bt.data)):(Rt(`Content-Disposition: form-data; name=${zt(Lt)}`),Rt(""),Rt(Bt))}return Rt(`--${Pe}--`),ot},ws=x.method,xo=x.extend({create:ws({method:"POST",fullPath:"/v1/files",headers:{"Content-Type":"multipart/form-data"},host:"files.stripe.com"}),retrieve:ws({method:"GET",fullPath:"/v1/files/{file}"}),list:ws({method:"GET",fullPath:"/v1/files",methodType:"list"}),requestDataProcessor:function(Be,he,Me,Pe){if(he=he||{},Be!=="POST")return Pe(null,c(he));this._stripe._platformFunctions.tryBufferData(he).then(nt=>Pe(null,_o(Be,nt,Me))).catch(nt=>Pe(nt,null))}}),Nn=x.method,ko=x.extend({create:Nn({method:"POST",fullPath:"/v1/invoiceitems"}),retrieve:Nn({method:"GET",fullPath:"/v1/invoiceitems/{invoiceitem}"}),update:Nn({method:"POST",fullPath:"/v1/invoiceitems/{invoiceitem}"}),list:Nn({method:"GET",fullPath:"/v1/invoiceitems",methodType:"list"}),del:Nn({method:"DELETE",fullPath:"/v1/invoiceitems/{invoiceitem}"})}),js=x.method,No=x.extend({retrieve:js({method:"GET",fullPath:"/v1/invoice_payments/{invoice_payment}"}),list:js({method:"GET",fullPath:"/v1/invoice_payments",methodType:"list"})}),Vn=x.method,So=x.extend({retrieve:Vn({method:"GET",fullPath:"/v1/invoice_rendering_templates/{template}"}),list:Vn({method:"GET",fullPath:"/v1/invoice_rendering_templates",methodType:"list"}),archive:Vn({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/archive"}),unarchive:Vn({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/unarchive"})}),Ur=x.method,zs=x.extend({create:Ur({method:"POST",fullPath:"/v1/invoices"}),retrieve:Ur({method:"GET",fullPath:"/v1/invoices/{invoice}"}),update:Ur({method:"POST",fullPath:"/v1/invoices/{invoice}"}),list:Ur({method:"GET",fullPath:"/v1/invoices",methodType:"list"}),del:Ur({method:"DELETE",fullPath:"/v1/invoices/{invoice}"}),addLines:Ur({method:"POST",fullPath:"/v1/invoices/{invoice}/add_lines"}),attachPayment:Ur({method:"POST",fullPath:"/v1/invoices/{invoice}/attach_payment"}),createPreview:Ur({method:"POST",fullPath:"/v1/invoices/create_preview"}),finalizeInvoice:Ur({method:"POST",fullPath:"/v1/invoices/{invoice}/finalize"}),listLineItems:Ur({method:"GET",fullPath:"/v1/invoices/{invoice}/lines",methodType:"list"}),markUncollectible:Ur({method:"POST",fullPath:"/v1/invoices/{invoice}/mark_uncollectible"}),pay:Ur({method:"POST",fullPath:"/v1/invoices/{invoice}/pay"}),removeLines:Ur({method:"POST",fullPath:"/v1/invoices/{invoice}/remove_lines"}),search:Ur({method:"GET",fullPath:"/v1/invoices/search",methodType:"search"}),sendInvoice:Ur({method:"POST",fullPath:"/v1/invoices/{invoice}/send"}),updateLines:Ur({method:"POST",fullPath:"/v1/invoices/{invoice}/update_lines"}),updateLineItem:Ur({method:"POST",fullPath:"/v1/invoices/{invoice}/lines/{line_item_id}"}),voidInvoice:Ur({method:"POST",fullPath:"/v1/invoices/{invoice}/void"})}),To=x.method,Io=x.extend({retrieve:To({method:"GET",fullPath:"/v1/mandates/{mandate}"})}),Bs=x.method,bs="connect.stripe.com",Eo=x.extend({basePath:"/",authorizeUrl(Be,he){Be=Be||{};let Me="oauth/authorize";return(he=he||{}).express&&(Me=`express/${Me}`),Be.response_type||(Be.response_type="code"),Be.client_id||(Be.client_id=this._stripe.getClientId()),Be.scope||(Be.scope="read_write"),`https://${bs}/${Me}?${c(Be)}`},token:Bs({method:"POST",path:"oauth/token",host:bs}),deauthorize(Be,...he){return Be.client_id||(Be.client_id=this._stripe.getClientId()),Bs({method:"POST",path:"oauth/deauthorize",host:bs}).apply(this,[Be,...he])}}),Ms=x.method,Ao=x.extend({retrieve:Ms({method:"GET",fullPath:"/v1/payment_attempt_records/{id}"}),list:Ms({method:"GET",fullPath:"/v1/payment_attempt_records",methodType:"list"})}),ei=x.method,$o=x.extend({create:ei({method:"POST",fullPath:"/v1/payment_intents"}),retrieve:ei({method:"GET",fullPath:"/v1/payment_intents/{intent}"}),update:ei({method:"POST",fullPath:"/v1/payment_intents/{intent}"}),list:ei({method:"GET",fullPath:"/v1/payment_intents",methodType:"list"}),applyCustomerBalance:ei({method:"POST",fullPath:"/v1/payment_intents/{intent}/apply_customer_balance"}),cancel:ei({method:"POST",fullPath:"/v1/payment_intents/{intent}/cancel"}),capture:ei({method:"POST",fullPath:"/v1/payment_intents/{intent}/capture"}),confirm:ei({method:"POST",fullPath:"/v1/payment_intents/{intent}/confirm"}),incrementAuthorization:ei({method:"POST",fullPath:"/v1/payment_intents/{intent}/increment_authorization"}),listAmountDetailsLineItems:ei({method:"GET",fullPath:"/v1/payment_intents/{intent}/amount_details_line_items",methodType:"list"}),search:ei({method:"GET",fullPath:"/v1/payment_intents/search",methodType:"search"}),verifyMicrodeposits:ei({method:"POST",fullPath:"/v1/payment_intents/{intent}/verify_microdeposits"})}),Sn=x.method,Oo=x.extend({create:Sn({method:"POST",fullPath:"/v1/payment_links"}),retrieve:Sn({method:"GET",fullPath:"/v1/payment_links/{payment_link}"}),update:Sn({method:"POST",fullPath:"/v1/payment_links/{payment_link}"}),list:Sn({method:"GET",fullPath:"/v1/payment_links",methodType:"list"}),listLineItems:Sn({method:"GET",fullPath:"/v1/payment_links/{payment_link}/line_items",methodType:"list"})}),nn=x.method,Ws=x.extend({create:nn({method:"POST",fullPath:"/v1/payment_method_configurations"}),retrieve:nn({method:"GET",fullPath:"/v1/payment_method_configurations/{configuration}"}),update:nn({method:"POST",fullPath:"/v1/payment_method_configurations/{configuration}"}),list:nn({method:"GET",fullPath:"/v1/payment_method_configurations",methodType:"list"})}),Wi=x.method,_s=x.extend({create:Wi({method:"POST",fullPath:"/v1/payment_method_domains"}),retrieve:Wi({method:"GET",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),update:Wi({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),list:Wi({method:"GET",fullPath:"/v1/payment_method_domains",methodType:"list"}),validate:Wi({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}/validate"})}),sn=x.method,Co=x.extend({create:sn({method:"POST",fullPath:"/v1/payment_methods"}),retrieve:sn({method:"GET",fullPath:"/v1/payment_methods/{payment_method}"}),update:sn({method:"POST",fullPath:"/v1/payment_methods/{payment_method}"}),list:sn({method:"GET",fullPath:"/v1/payment_methods",methodType:"list"}),attach:sn({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/attach"}),detach:sn({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/detach"})}),qi=x.method,Po=x.extend({retrieve:qi({method:"GET",fullPath:"/v1/payment_records/{id}"}),reportPayment:qi({method:"POST",fullPath:"/v1/payment_records/report_payment"}),reportPaymentAttempt:qi({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt"}),reportPaymentAttemptCanceled:qi({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_canceled"}),reportPaymentAttemptFailed:qi({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_failed"}),reportPaymentAttemptGuaranteed:qi({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_guaranteed"}),reportPaymentAttemptInformational:qi({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_informational"}),reportRefund:qi({method:"POST",fullPath:"/v1/payment_records/{id}/report_refund"})}),on=x.method,Ro=x.extend({create:on({method:"POST",fullPath:"/v1/payouts"}),retrieve:on({method:"GET",fullPath:"/v1/payouts/{payout}"}),update:on({method:"POST",fullPath:"/v1/payouts/{payout}"}),list:on({method:"GET",fullPath:"/v1/payouts",methodType:"list"}),cancel:on({method:"POST",fullPath:"/v1/payouts/{payout}/cancel"}),reverse:on({method:"POST",fullPath:"/v1/payouts/{payout}/reverse"})}),Tn=x.method,Uo=x.extend({create:Tn({method:"POST",fullPath:"/v1/plans"}),retrieve:Tn({method:"GET",fullPath:"/v1/plans/{plan}"}),update:Tn({method:"POST",fullPath:"/v1/plans/{plan}"}),list:Tn({method:"GET",fullPath:"/v1/plans",methodType:"list"}),del:Tn({method:"DELETE",fullPath:"/v1/plans/{plan}"})}),Gn=x.method,Ua=x.extend({create:Gn({method:"POST",fullPath:"/v1/prices"}),retrieve:Gn({method:"GET",fullPath:"/v1/prices/{price}"}),update:Gn({method:"POST",fullPath:"/v1/prices/{price}"}),list:Gn({method:"GET",fullPath:"/v1/prices",methodType:"list"}),search:Gn({method:"GET",fullPath:"/v1/prices/search",methodType:"search"})}),_i=x.method,Da=x.extend({create:_i({method:"POST",fullPath:"/v1/products"}),retrieve:_i({method:"GET",fullPath:"/v1/products/{id}"}),update:_i({method:"POST",fullPath:"/v1/products/{id}"}),list:_i({method:"GET",fullPath:"/v1/products",methodType:"list"}),del:_i({method:"DELETE",fullPath:"/v1/products/{id}"}),createFeature:_i({method:"POST",fullPath:"/v1/products/{product}/features"}),deleteFeature:_i({method:"DELETE",fullPath:"/v1/products/{product}/features/{id}"}),listFeatures:_i({method:"GET",fullPath:"/v1/products/{product}/features",methodType:"list"}),retrieveFeature:_i({method:"GET",fullPath:"/v1/products/{product}/features/{id}"}),search:_i({method:"GET",fullPath:"/v1/products/search",methodType:"search"})}),Kn=x.method,La=x.extend({create:Kn({method:"POST",fullPath:"/v1/promotion_codes"}),retrieve:Kn({method:"GET",fullPath:"/v1/promotion_codes/{promotion_code}"}),update:Kn({method:"POST",fullPath:"/v1/promotion_codes/{promotion_code}"}),list:Kn({method:"GET",fullPath:"/v1/promotion_codes",methodType:"list"})}),xi=x.method,qa=x.extend({create:xi({method:"POST",fullPath:"/v1/quotes"}),retrieve:xi({method:"GET",fullPath:"/v1/quotes/{quote}"}),update:xi({method:"POST",fullPath:"/v1/quotes/{quote}"}),list:xi({method:"GET",fullPath:"/v1/quotes",methodType:"list"}),accept:xi({method:"POST",fullPath:"/v1/quotes/{quote}/accept"}),cancel:xi({method:"POST",fullPath:"/v1/quotes/{quote}/cancel"}),finalizeQuote:xi({method:"POST",fullPath:"/v1/quotes/{quote}/finalize"}),listComputedUpfrontLineItems:xi({method:"GET",fullPath:"/v1/quotes/{quote}/computed_upfront_line_items",methodType:"list"}),listLineItems:xi({method:"GET",fullPath:"/v1/quotes/{quote}/line_items",methodType:"list"}),pdf:xi({method:"GET",fullPath:"/v1/quotes/{quote}/pdf",host:"files.stripe.com",streaming:!0})}),Jn=x.method,ja=x.extend({create:Jn({method:"POST",fullPath:"/v1/refunds"}),retrieve:Jn({method:"GET",fullPath:"/v1/refunds/{refund}"}),update:Jn({method:"POST",fullPath:"/v1/refunds/{refund}"}),list:Jn({method:"GET",fullPath:"/v1/refunds",methodType:"list"}),cancel:Jn({method:"POST",fullPath:"/v1/refunds/{refund}/cancel"})}),Fs=x.method,za=x.extend({retrieve:Fs({method:"GET",fullPath:"/v1/reviews/{review}"}),list:Fs({method:"GET",fullPath:"/v1/reviews",methodType:"list"}),approve:Fs({method:"POST",fullPath:"/v1/reviews/{review}/approve"})}),Ba=x.method,Ma=x.extend({list:Ba({method:"GET",fullPath:"/v1/setup_attempts",methodType:"list"})}),an=x.method,Wa=x.extend({create:an({method:"POST",fullPath:"/v1/setup_intents"}),retrieve:an({method:"GET",fullPath:"/v1/setup_intents/{intent}"}),update:an({method:"POST",fullPath:"/v1/setup_intents/{intent}"}),list:an({method:"GET",fullPath:"/v1/setup_intents",methodType:"list"}),cancel:an({method:"POST",fullPath:"/v1/setup_intents/{intent}/cancel"}),confirm:an({method:"POST",fullPath:"/v1/setup_intents/{intent}/confirm"}),verifyMicrodeposits:an({method:"POST",fullPath:"/v1/setup_intents/{intent}/verify_microdeposits"})}),xs=x.method,Fa=x.extend({create:xs({method:"POST",fullPath:"/v1/shipping_rates"}),retrieve:xs({method:"GET",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),update:xs({method:"POST",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),list:xs({method:"GET",fullPath:"/v1/shipping_rates",methodType:"list"})}),In=x.method,Za=x.extend({create:In({method:"POST",fullPath:"/v1/sources"}),retrieve:In({method:"GET",fullPath:"/v1/sources/{source}"}),update:In({method:"POST",fullPath:"/v1/sources/{source}"}),listSourceTransactions:In({method:"GET",fullPath:"/v1/sources/{source}/source_transactions",methodType:"list"}),verify:In({method:"POST",fullPath:"/v1/sources/{source}/verify"})}),Hn=x.method,Va=x.extend({create:Hn({method:"POST",fullPath:"/v1/subscription_items"}),retrieve:Hn({method:"GET",fullPath:"/v1/subscription_items/{item}"}),update:Hn({method:"POST",fullPath:"/v1/subscription_items/{item}"}),list:Hn({method:"GET",fullPath:"/v1/subscription_items",methodType:"list"}),del:Hn({method:"DELETE",fullPath:"/v1/subscription_items/{item}"})}),En=x.method,Ga=x.extend({create:En({method:"POST",fullPath:"/v1/subscription_schedules"}),retrieve:En({method:"GET",fullPath:"/v1/subscription_schedules/{schedule}"}),update:En({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}"}),list:En({method:"GET",fullPath:"/v1/subscription_schedules",methodType:"list"}),cancel:En({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/cancel"}),release:En({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/release"})}),ji=x.method,Ka=x.extend({create:ji({method:"POST",fullPath:"/v1/subscriptions"}),retrieve:ji({method:"GET",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),update:ji({method:"POST",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),list:ji({method:"GET",fullPath:"/v1/subscriptions",methodType:"list"}),cancel:ji({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),deleteDiscount:ji({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}/discount"}),migrate:ji({method:"POST",fullPath:"/v1/subscriptions/{subscription}/migrate"}),resume:ji({method:"POST",fullPath:"/v1/subscriptions/{subscription}/resume"}),search:ji({method:"GET",fullPath:"/v1/subscriptions/search",methodType:"search"})}),Do=x.method,Ja=x.extend({retrieve:Do({method:"GET",fullPath:"/v1/tax_codes/{id}"}),list:Do({method:"GET",fullPath:"/v1/tax_codes",methodType:"list"})}),ks=x.method,Ha=x.extend({create:ks({method:"POST",fullPath:"/v1/tax_ids"}),retrieve:ks({method:"GET",fullPath:"/v1/tax_ids/{id}"}),list:ks({method:"GET",fullPath:"/v1/tax_ids",methodType:"list"}),del:ks({method:"DELETE",fullPath:"/v1/tax_ids/{id}"})}),Ns=x.method,Qa=x.extend({create:Ns({method:"POST",fullPath:"/v1/tax_rates"}),retrieve:Ns({method:"GET",fullPath:"/v1/tax_rates/{tax_rate}"}),update:Ns({method:"POST",fullPath:"/v1/tax_rates/{tax_rate}"}),list:Ns({method:"GET",fullPath:"/v1/tax_rates",methodType:"list"})}),Lo=x.method,Xa=x.extend({create:Lo({method:"POST",fullPath:"/v1/tokens"}),retrieve:Lo({method:"GET",fullPath:"/v1/tokens/{token}"})}),Qn=x.method,qo=x.extend({create:Qn({method:"POST",fullPath:"/v1/topups"}),retrieve:Qn({method:"GET",fullPath:"/v1/topups/{topup}"}),update:Qn({method:"POST",fullPath:"/v1/topups/{topup}"}),list:Qn({method:"GET",fullPath:"/v1/topups",methodType:"list"}),cancel:Qn({method:"POST",fullPath:"/v1/topups/{topup}/cancel"})}),ti=x.method,Ya=x.extend({create:ti({method:"POST",fullPath:"/v1/transfers"}),retrieve:ti({method:"GET",fullPath:"/v1/transfers/{transfer}"}),update:ti({method:"POST",fullPath:"/v1/transfers/{transfer}"}),list:ti({method:"GET",fullPath:"/v1/transfers",methodType:"list"}),createReversal:ti({method:"POST",fullPath:"/v1/transfers/{id}/reversals"}),listReversals:ti({method:"GET",fullPath:"/v1/transfers/{id}/reversals",methodType:"list"}),retrieveReversal:ti({method:"GET",fullPath:"/v1/transfers/{transfer}/reversals/{id}"}),updateReversal:ti({method:"POST",fullPath:"/v1/transfers/{transfer}/reversals/{id}"})}),Xn=x.method,el=x.extend({create:Xn({method:"POST",fullPath:"/v1/webhook_endpoints"}),retrieve:Xn({method:"GET",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),update:Xn({method:"POST",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),list:Xn({method:"GET",fullPath:"/v1/webhook_endpoints",methodType:"list"}),del:Xn({method:"DELETE",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"})}),tl=Re("apps",{Secrets:us}),rl=Re("billing",{Alerts:Ot,CreditBalanceSummary:He,CreditBalanceTransactions:it,CreditGrants:at,MeterEventAdjustments:un,MeterEvents:Vi,Meters:Fr}),il=Re("billingPortal",{Configurations:jt,Sessions:Qi}),nl=Re("checkout",{Sessions:ds}),sl=Re("climate",{Orders:$i,Products:pe,Suppliers:mn}),ol=Re("entitlements",{ActiveEntitlements:Ct,Features:vr}),al=Re("financialConnections",{Accounts:Ye,Sessions:hs,Transactions:Yi}),ll=Re("forwarding",{Requests:as}),ul=Re("identity",{VerificationReports:je,VerificationSessions:pt}),cl=Re("issuing",{Authorizations:vt,Cardholders:Fe,Cards:ht,Disputes:qt,PersonalizationDesigns:oi,PhysicalBundles:ve,Tokens:zn,Transactions:yn}),jo=Re("radar",{EarlyFraudWarnings:Vt,PaymentEvaluations:Vr,ValueListItems:T,ValueLists:B}),dl=Re("reporting",{ReportRuns:Rn,ReportTypes:os}),hl=Re("sigma",{ScheduledQueryRuns:ls}),pl=Re("tax",{Associations:yt,Calculations:ke,Registrations:ss,Settings:ps,Transactions:Bn}),Yn=Re("terminal",{Configurations:f,ConnectionTokens:ze,Locations:Ii,OnboardingLinks:Gi,Readers:Ve}),zo=Re("testHelpers",{ConfirmationTokens:Ie,Customers:Jt,Refunds:Ds,TestClocks:fs,Issuing:Re("issuing",{Authorizations:nr,Cards:Et,PersonalizationDesigns:Bi,Transactions:ms}),Terminal:Re("terminal",{Readers:Yt}),Treasury:Re("treasury",{InboundTransfers:Ti,OutboundPayments:hn,OutboundTransfers:ni,ReceivedCredits:Tr,ReceivedDebits:Ps})}),fl=Re("treasury",{CreditReversals:Tt,DebitReversals:$t,FinancialAccounts:Mr,InboundTransfers:yi,OutboundPayments:pn,OutboundTransfers:Ci,ReceivedCredits:qr,ReceivedDebits:Rs,TransactionEntries:wi,Transactions:ys}),ml=Re("v2",{Billing:Re("billing",{MeterEventAdjustments:Pn,MeterEventSession:Zi,MeterEventStream:Jr,MeterEvents:zi}),Core:Re("core",{AccountLinks:Ae,AccountTokens:Je,Accounts:ut,EventDestinations:ur,Events:Or})}),Bo="api.stripe.com",Mo="/v1/",yl=["name","version","url","partner_id"],Wo=["authenticator","apiVersion","typescript","maxNetworkRetries","httpAgent","httpClient","timeout","host","port","protocol","telemetry","appInfo","stripeAccount","stripeContext"],gl=Be=>new D(Be,x.MAX_BUFFERED_REQUEST_METRICS),vl=function(Be,he=gl){function Me(Pe,nt={}){if(!(this instanceof Me))return new Me(Pe,nt);let ot=this._getPropsFromConfig(nt);this._platformFunctions=Be,Object.defineProperty(this,"_emitter",{value:this._platformFunctions.createEmitter(),enumerable:!1,configurable:!1,writable:!1}),this.VERSION=Me.PACKAGE_VERSION,this.on=this._emitter.on.bind(this._emitter),this.once=this._emitter.once.bind(this._emitter),this.off=this._emitter.removeListener.bind(this._emitter);let ft=ot.httpAgent||null;this._api={host:ot.host||Bo,port:ot.port||"443",protocol:ot.protocol||"https",basePath:Mo,version:ot.apiVersion||ge,timeout:p("timeout",ot.timeout,8e4),maxNetworkRetries:p("maxNetworkRetries",ot.maxNetworkRetries,2),agent:ft,httpClient:ot.httpClient||(ft?this._platformFunctions.createNodeHttpClient(ft):this._platformFunctions.createDefaultHttpClient()),dev:!1,stripeAccount:ot.stripeAccount||null,stripeContext:ot.stripeContext||null};let Rt=ot.typescript||!1;Rt!==Me.USER_AGENT.typescript&&(Me.USER_AGENT.typescript=Rt),ot.appInfo&&this._setAppInfo(ot.appInfo),this._prepResources(),this._setAuthenticator(Pe,ot.authenticator),this.errors=d,this.webhooks=Me.webhooks,this._prevRequestMetrics=[],this._enableTelemetry=ot.telemetry!==!1,this._requestSender=he(this),this.StripeResource=Me.StripeResource}return Me.PACKAGE_VERSION="20.3.1",Me.API_VERSION=ge,Me.USER_AGENT=Object.assign({bindings_version:Me.PACKAGE_VERSION,lang:"node",publisher:"stripe",uname:null,typescript:!1},typeof process>"u"?{}:{lang_version:process.version,platform:process.platform}),Me.StripeResource=x,Me.StripeContext=fe,Me.resources=y,Me.HttpClient=a,Me.HttpClientResponse=V,Me.CryptoProvider=k,Me.webhooks=function(Pe){let nt={DEFAULT_TOLERANCE:300,signature:null,constructEvent(xt,Dt,Ht,dr,Gt,cr){try{if(!this.signature)throw Error("ERR: missing signature helper, unable to verify");this.signature.verifyHeader(xt,Dt,Ht,dr||nt.DEFAULT_TOLERANCE,Gt,cr)}catch(_r){throw _r instanceof N&&(_r.message+="\nUse `await constructEventAsync(...)` instead of `constructEvent(...)`"),_r}return xt instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(xt)):JSON.parse(xt)},async constructEventAsync(xt,Dt,Ht,dr,Gt,cr){if(!this.signature)throw Error("ERR: missing signature helper, unable to verify");return await this.signature.verifyHeaderAsync(xt,Dt,Ht,dr||nt.DEFAULT_TOLERANCE,Gt,cr),xt instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(xt)):JSON.parse(xt)},generateTestHeaderString:function(xt){let Dt=Bt(xt),Ht=Dt.signature||Dt.cryptoProvider.computeHMACSignature(Dt.payloadString,Dt.secret);return Dt.generateHeaderString(Ht)},generateTestHeaderStringAsync:async function(xt){let Dt=Bt(xt),Ht=Dt.signature||await Dt.cryptoProvider.computeHMACSignatureAsync(Dt.payloadString,Dt.secret);return Dt.generateHeaderString(Ht)}},ot={EXPECTED_SCHEME:"v1",verifyHeader(xt,Dt,Ht,dr,Gt,cr){let{decodedHeader:_r,decodedPayload:yr,details:sr,suspectPayloadType:Ar}=Rt(xt,Dt,this.EXPECTED_SCHEME),Dr=/\s/.test(Ht),ri=(Gt=Gt||Lt()).computeHMACSignature(ft(yr,sr),Ht);return zt(yr,_r,sr,ri,dr,Ar,Dr,cr),!0},async verifyHeaderAsync(xt,Dt,Ht,dr,Gt,cr){let{decodedHeader:_r,decodedPayload:yr,details:sr,suspectPayloadType:Ar}=Rt(xt,Dt,this.EXPECTED_SCHEME),Dr=/\s/.test(Ht);Gt=Gt||Lt();let ri=await Gt.computeHMACSignatureAsync(ft(yr,sr),Ht);return zt(yr,_r,sr,ri,dr,Ar,Dr,cr)}};function ft(xt,Dt){return`${Dt.timestamp}.${xt}`}function Rt(xt,Dt,Ht){var dr,Gt;if(!xt)throw new E(Dt,xt,{message:"No webhook payload was provided."});let cr=typeof xt!="string"&&!(xt instanceof Uint8Array),_r=new TextDecoder("utf8"),yr=xt instanceof Uint8Array?_r.decode(xt):xt;if(Array.isArray(Dt))throw Error("Unexpected: An array was passed as a header, which should not be possible for the stripe-signature header.");if(Dt==null||Dt=="")throw new E(Dt,xt,{message:"No stripe-signature header value was provided."});let sr=Dt instanceof Uint8Array?_r.decode(Dt):Dt,Ar=(dr=sr,Gt=Ht,typeof dr!="string"?null:dr.split(",").reduce((Dr,ri)=>{let hi=ri.split("=");return hi[0]==="t"&&(Dr.timestamp=parseInt(hi[1],10)),hi[0]===Gt&&Dr.signatures.push(hi[1]),Dr},{timestamp:-1,signatures:[]}));if(!Ar||Ar.timestamp===-1)throw new E(sr,yr,{message:"Unable to extract timestamp and signatures from header"});if(!Ar.signatures.length)throw new E(sr,yr,{message:"No signatures found with expected scheme"});return{decodedPayload:yr,decodedHeader:sr,details:Ar,suspectPayloadType:cr}}function zt(xt,Dt,Ht,dr,Gt,cr,_r,yr){let sr=!!Ht.signatures.filter(Pe.secureCompare.bind(Pe,dr)).length,Ar=`
Learn more about webhook signing and explore webhook integration examples for various frameworks at https://docs.stripe.com/webhooks/signature`,Dr=_r?`

Note: The provided signing secret contains whitespace. This often indicates an extra newline or space is in the value`:"";if(!sr)throw cr?new E(Dt,xt,{message:`Webhook payload must be provided as a string or a Buffer (https://nodejs.org/api/buffer.html) instance representing the _raw_ request body.Payload was provided as a parsed JavaScript object instead. 
Signature verification is impossible without access to the original signed material. 
`+Ar+`
`+Dr}):new E(Dt,xt,{message:`No signatures found matching the expected signature for payload. Are you passing the raw request body you received from Stripe? 
 If a webhook request is being forwarded by a third-party tool, ensure that the exact request body, including JSON formatting and new line style, is preserved.
`+Ar+`
`+Dr});let ri=Math.floor((typeof yr=="number"?yr:Date.now())/1e3)-Ht.timestamp;if(Gt>0&&ri>Gt)throw new E(Dt,xt,{message:"Timestamp outside the tolerance zone"});return!0}let Kt=null;function Lt(){return Kt||(Kt=Pe.createDefaultCryptoProvider()),Kt}function Bt(xt){if(!xt)throw new ne({message:"Options are required"});let Dt=Math.floor(xt.timestamp)||Math.floor(Date.now()/1e3),Ht=xt.scheme||ot.EXPECTED_SCHEME,dr=xt.cryptoProvider||Lt(),Gt=`${Dt}.${xt.payload}`;return Object.assign(Object.assign({},xt),{timestamp:Dt,scheme:Ht,cryptoProvider:dr,payloadString:Gt,generateHeaderString:cr=>`t=${Dt},${Ht}=${cr}`})}return nt.signature=ot,nt}(Be),Me.errors=d,Me.createNodeHttpClient=Be.createNodeHttpClient,Me.createFetchHttpClient=Be.createFetchHttpClient,Me.createNodeCryptoProvider=Be.createNodeCryptoProvider,Me.createSubtleCryptoProvider=Be.createSubtleCryptoProvider,Me.prototype={_appInfo:void 0,on:null,off:null,once:null,VERSION:null,StripeResource:null,webhooks:null,errors:null,_api:null,_prevRequestMetrics:null,_emitter:null,_enableTelemetry:null,_requestSender:null,_platformFunctions:null,rawRequest(Pe,nt,ot,ft){return this._requestSender._rawRequest(Pe,nt,ot,ft)},_setAuthenticator(Pe,nt){if(Pe&&nt)throw Error("Can't specify both apiKey and authenticator");if(!Pe&&!nt)throw Error("Neither apiKey nor config.authenticator provided");this._authenticator=Pe?_(Pe):nt},_setAppInfo(Pe){if(Pe&&typeof Pe!="object")throw Error("AppInfo must be an object.");if(Pe&&!Pe.name)throw Error("AppInfo.name is required");Pe=Pe||{},this._appInfo=yl.reduce((nt,ot)=>(typeof Pe[ot]=="string"&&((nt=nt||{})[ot]=Pe[ot]),nt),{})},_setApiField(Pe,nt){this._api[Pe]=nt},getApiField(Pe){return this._api[Pe]},setClientId(Pe){this._clientId=Pe},getClientId(){return this._clientId},getConstant:Pe=>{switch(Pe){case"DEFAULT_HOST":return Bo;case"DEFAULT_PORT":return"443";case"DEFAULT_BASE_PATH":return Mo;case"DEFAULT_API_VERSION":return ge;case"DEFAULT_TIMEOUT":return 8e4;case"MAX_NETWORK_RETRY_DELAY_SEC":return 5;case"INITIAL_NETWORK_RETRY_DELAY_SEC":return .5}return Me[Pe]},getMaxNetworkRetries(){return this.getApiField("maxNetworkRetries")},_setApiNumberField(Pe,nt,ot){let ft=p(Pe,nt,ot);this._setApiField(Pe,ft)},getMaxNetworkRetryDelay:()=>5,getInitialNetworkRetryDelay:()=>.5,getClientUserAgent(Pe){return this.getClientUserAgentSeeded(Me.USER_AGENT,Pe)},getClientUserAgentSeeded(Pe,nt){this._platformFunctions.getUname().then(ot=>{var ft;let Rt={};for(let Kt in Pe)Object.prototype.hasOwnProperty.call(Pe,Kt)&&(Rt[Kt]=encodeURIComponent((ft=Pe[Kt])!==null&&ft!==void 0?ft:"null"));Rt.uname=encodeURIComponent(ot||"UNKNOWN");let zt=this.getApiField("httpClient");zt&&(Rt.httplib=encodeURIComponent(zt.getClientName())),this._appInfo&&(Rt.application=this._appInfo),nt(JSON.stringify(Rt))})},getAppInfoAsString(){if(!this._appInfo)return"";let Pe=this._appInfo.name;return this._appInfo.version&&(Pe+=`/${this._appInfo.version}`),this._appInfo.url&&(Pe+=` (${this._appInfo.url})`),Pe},getTelemetryEnabled(){return this._enableTelemetry},_prepResources(){for(let Pe in y)Object.prototype.hasOwnProperty.call(y,Pe)&&(this[Pe==="OAuth"?"oauth":Pe[0].toLowerCase()+Pe.substring(1)]=new y[Pe](this))},_getPropsFromConfig(Pe){if(!Pe)return{};let nt=typeof Pe=="string";if(!(Pe===Object(Pe)&&!Array.isArray(Pe))&&!nt)throw Error("Config must either be an object or a string");if(nt)return{apiVersion:Pe};if(Object.keys(Pe).filter(ot=>!Wo.includes(ot)).length>0)throw Error(`Config object may only contain the following: ${Wo.join(", ")}`);return Pe},parseEventNotification(Pe,nt,ot,ft,Rt,zt){let Kt=this.webhooks.constructEvent(Pe,nt,ot,ft,Rt,zt);return Kt.context&&(Kt.context=fe.parse(Kt.context)),Kt.fetchEvent=()=>this._requestSender._rawRequest("GET",`/v2/core/events/${Kt.id}`,void 0,{stripeContext:Kt.context},["fetch_event"]),Kt.fetchRelatedObject=()=>Kt.related_object?this._requestSender._rawRequest("GET",Kt.related_object.url,void 0,{stripeContext:Kt.context},["fetch_related_object"]):Promise.resolve(null),Kt}},Me}(new G)},Le.__chunk_9822=(Ue,ie,o)=>{"use strict";o.d(ie,{U:()=>y});var d=o(26772);let y=(0,d.CN)({is:h=>h.kind==="SelectAllNode",create:()=>(0,d.CN)({kind:"SelectAllNode"})})},Le.__chunk_9789=(Ue,ie,o)=>{"use strict";o.d(ie,{O:()=>y});var d=o(26772);let y=(0,d.CN)({is:h=>h.kind==="IdentifierNode",create:h=>(0,d.CN)({kind:"IdentifierNode",name:h})})},Le.__chunk_9378=(Ue,ie,o)=>{"use strict";o.d(ie,{Y:()=>h});var d=o(26772),y=o(3580);let h=(0,d.CN)({is:i=>i.kind==="CreateViewNode",create:i=>(0,d.CN)({kind:"CreateViewNode",name:y.y.create(i)}),cloneWith:(i,s)=>(0,d.CN)({...i,...s})})},Le.__chunk_9300=(Ue,ie,o)=>{"use strict";o.d(ie,{c:()=>d});class d{#e;#t;#r;constructor(){this.#e=new Promise((h,i)=>{this.#r=i,this.#t=h})}get promise(){return this.#e}resolve=h=>{this.#t&&this.#t(h)};reject=h=>{this.#r&&this.#r(h)}}},Le.__chunk_9203=(Ue,ie,o)=>{"use strict";o.d(ie,{V:()=>h});var d=class{#e=void 0;run(i,s){let c=this.#e;this.#e=i;let O=s();return O instanceof Promise?O.finally(()=>{this.#e=c}):(this.#e=c,O)}getStore(){return this.#e}};let y=Promise.resolve().then(()=>"AsyncLocalStorage"in Sr?Sr.AsyncLocalStorage:d);async function h(){let i=await y;if(i!==null)return i;throw Error("getAsyncLocalStorage is only available in server code")}},Le.__chunk_8779=(Ue,ie,o)=>{"use strict";o.d(ie,{_:()=>le});var d=o(52072),y=o(53186),h=o(99597),i=o(10816),s=o(80338),c=o(13348),O=o(93219);let j=(0,h.EU)({UNAUTHORIZED:"Unauthorized access",INVALID_REQUEST_BODY:"Invalid request body",SUBSCRIPTION_NOT_FOUND:"Subscription not found",SUBSCRIPTION_PLAN_NOT_FOUND:"Subscription plan not found",ALREADY_SUBSCRIBED_PLAN:"You're already subscribed to this plan",REFERENCE_ID_NOT_ALLOWED:"Reference id is not allowed",CUSTOMER_NOT_FOUND:"Stripe customer not found for this user",UNABLE_TO_CREATE_CUSTOMER:"Unable to create customer",UNABLE_TO_CREATE_BILLING_PORTAL:"Unable to create billing portal session",STRIPE_SIGNATURE_NOT_FOUND:"Stripe signature not found",STRIPE_WEBHOOK_SECRET_NOT_FOUND:"Stripe webhook secret not found",STRIPE_WEBHOOK_ERROR:"Stripe webhook error",FAILED_TO_CONSTRUCT_STRIPE_EVENT:"Failed to construct Stripe event",FAILED_TO_FETCH_PLANS:"Failed to fetch plans",EMAIL_VERIFICATION_REQUIRED:"Email verification is required before you can subscribe to a plan",SUBSCRIPTION_NOT_ACTIVE:"Subscription is not active",SUBSCRIPTION_NOT_SCHEDULED_FOR_CANCELLATION:"Subscription is not scheduled for cancellation",ORGANIZATION_NOT_FOUND:"Organization not found",ORGANIZATION_SUBSCRIPTION_NOT_ENABLED:"Organization subscription is not enabled",ORGANIZATION_HAS_ACTIVE_SUBSCRIPTION:"Cannot delete organization with active subscription",ORGANIZATION_REFERENCE_ID_REQUIRED:"Reference ID is required. Provide referenceId or set activeOrganizationId in session"}),$={keys:{userId:"userId",organizationId:"organizationId",customerType:"customerType"},set:(se,...ce)=>(0,y.$Q)(se,...ce.filter(Boolean))},W={set:(se,...ce)=>(0,y.$Q)(se,...ce.filter(Boolean)),get:se=>({userId:se?.userId,subscriptionId:se?.subscriptionId,referenceId:se?.referenceId})};async function K(se){if(se?.enabled)return typeof se.plans=="function"?await se.plans():se.plans;throw Error("Subscriptions are not enabled in the Stripe options.")}async function I(se,ce,me){return await K(se.subscription).then(H=>H?.find(ue=>ue.priceId===ce||ue.annualDiscountPriceId===ce||me&&(ue.lookupKey===me||ue.annualDiscountLookupKey===me)))}async function p(se,ce){return await K(se.subscription).then(me=>me?.find(H=>H.name.toLowerCase()===ce.toLowerCase()))}function _(se){return se.status==="active"||se.status==="trialing"}function m(se){return!!(se.cancelAtPeriodEnd||se.cancelAt)}function q(se){return!!(se.cancel_at_period_end||se.cancel_at)}function J(se){return se.replace(/"/g,'\\"')}async function a(se,ce,me){if(ce.organization?.enabled){let ue=await se.context.adapter.findOne({model:"organization",where:[{field:"stripeCustomerId",value:me}]});if(ue)return{customerType:"organization",referenceId:ue.id}}let H=await se.context.adapter.findOne({model:"user",where:[{field:"stripeCustomerId",value:me}]});return H?{customerType:"user",referenceId:H.id}:null}async function V(se,ce,me){try{let H=ce.stripeClient,ue=me.data.object;if(ue.mode==="setup"||!ce.subscription?.enabled)return;let x=await H.subscriptions.retrieve(ue.subscription),fe=x.items.data[0];if(!fe){se.context.logger.warn(`Stripe webhook warning: Subscription ${x.id} has no items`);return}let ge=fe.price.id,Se=fe.price.lookup_key,Re=await I(ce,ge,Se);if(Re){let ae=W.get(ue?.metadata),Ae=ue?.client_reference_id||ae.referenceId,{subscriptionId:lt}=ae,Je=fe.quantity;if(Ae&&lt){let rt=x.trial_start&&x.trial_end?{trialStart:new Date(1e3*x.trial_start),trialEnd:new Date(1e3*x.trial_end)}:{},Ye=await se.context.adapter.update({model:"subscription",update:{plan:Re.name.toLowerCase(),status:x.status,updatedAt:new Date,periodStart:new Date(1e3*fe.current_period_start),periodEnd:new Date(1e3*fe.current_period_end),stripeSubscriptionId:ue.subscription,cancelAtPeriodEnd:x.cancel_at_period_end,cancelAt:x.cancel_at?new Date(1e3*x.cancel_at):null,canceledAt:x.canceled_at?new Date(1e3*x.canceled_at):null,endedAt:x.ended_at?new Date(1e3*x.ended_at):null,seats:Je,...rt},where:[{field:"id",value:lt}]});rt.trialStart&&Re.freeTrial?.onTrialStart&&await Re.freeTrial.onTrialStart(Ye),Ye||(Ye=await se.context.adapter.findOne({model:"subscription",where:[{field:"id",value:lt}]})),await ce.subscription?.onSubscriptionComplete?.({event:me,subscription:Ye,stripeSubscription:x,plan:Re},se);return}}}catch(H){se.context.logger.error(`Stripe webhook failed. Error: ${H.message}`)}}async function C(se,ce,me){try{if(!ce.subscription?.enabled)return;let H=me.data.object,ue=H.customer?.toString();if(!ue){se.context.logger.warn("Stripe webhook warning: customer.subscription.created event received without customer ID");return}let{subscriptionId:x}=W.get(H.metadata),fe=await se.context.adapter.findOne({model:"subscription",where:x?[{field:"id",value:x}]:[{field:"stripeSubscriptionId",value:H.id}]});if(fe){se.context.logger.info(`Stripe webhook: Subscription already exists in database (id: ${fe.id}), skipping creation`);return}let ge=await a(se,ce,ue);if(!ge){se.context.logger.warn(`Stripe webhook warning: No user or organization found with stripeCustomerId: ${ue}`);return}let{referenceId:Se,customerType:Re}=ge,ae=H.items.data[0];if(!ae){se.context.logger.warn(`Stripe webhook warning: Subscription ${H.id} has no items`);return}let Ae=ae.price.id,lt=await I(ce,Ae,ae.price.lookup_key||null);if(!lt){se.context.logger.warn(`Stripe webhook warning: No matching plan found for priceId: ${Ae}`);return}let Je=ae.quantity,rt=new Date(1e3*ae.current_period_start),Ye=new Date(1e3*ae.current_period_end),St=H.trial_start&&H.trial_end?{trialStart:new Date(1e3*H.trial_start),trialEnd:new Date(1e3*H.trial_end)}:{},bt=await se.context.adapter.create({model:"subscription",data:{referenceId:Se,stripeCustomerId:ue,stripeSubscriptionId:H.id,status:H.status,plan:lt.name.toLowerCase(),periodStart:rt,periodEnd:Ye,seats:Je,...lt.limits?{limits:lt.limits}:{},...St}});se.context.logger.info(`Stripe webhook: Created subscription ${H.id} for ${Re} ${Se} from dashboard`),await ce.subscription.onSubscriptionCreated?.({event:me,subscription:bt,stripeSubscription:H,plan:lt})}catch(H){se.context.logger.error(`Stripe webhook failed. Error: ${H}`)}}async function L(se,ce,me){try{if(!ce.subscription?.enabled)return;let H=me.data.object,ue=H.items.data[0];if(!ue){se.context.logger.warn(`Stripe webhook warning: Subscription ${H.id} has no items`);return}let x=ue.price.id,fe=ue.price.lookup_key,ge=await I(ce,x,fe),{subscriptionId:Se}=W.get(H.metadata),Re=H.customer?.toString(),ae=await se.context.adapter.findOne({model:"subscription",where:Se?[{field:"id",value:Se}]:[{field:"stripeSubscriptionId",value:H.id}]});if(!ae){let lt=await se.context.adapter.findMany({model:"subscription",where:[{field:"stripeCustomerId",value:Re}]});if(lt.length>1){let Je=lt.find(rt=>_(rt));if(!Je){se.context.logger.warn(`Stripe webhook error: Multiple subscriptions found for customerId: ${Re} and no active subscription is found`);return}ae=Je}else ae=lt[0]}let Ae=await se.context.adapter.update({model:"subscription",update:{...ge?{plan:ge.name.toLowerCase(),limits:ge.limits}:{},updatedAt:new Date,status:H.status,periodStart:new Date(1e3*ue.current_period_start),periodEnd:new Date(1e3*ue.current_period_end),cancelAtPeriodEnd:H.cancel_at_period_end,cancelAt:H.cancel_at?new Date(1e3*H.cancel_at):null,canceledAt:H.canceled_at?new Date(1e3*H.canceled_at):null,endedAt:H.ended_at?new Date(1e3*H.ended_at):null,seats:ue.quantity,stripeSubscriptionId:H.id},where:[{field:"id",value:ae.id}]});H.status==="active"&&q(H)&&!m(ae)&&await ce.subscription.onSubscriptionCancel?.({subscription:ae,cancellationDetails:H.cancellation_details||void 0,stripeSubscription:H,event:me}),await ce.subscription.onSubscriptionUpdate?.({event:me,subscription:Ae||ae}),ge&&(H.status==="active"&&ae.status==="trialing"&&ge.freeTrial?.onTrialEnd&&await ge.freeTrial.onTrialEnd({subscription:ae},se),H.status==="incomplete_expired"&&ae.status==="trialing"&&ge.freeTrial?.onTrialExpired&&await ge.freeTrial.onTrialExpired(ae,se))}catch(H){se.context.logger.error(`Stripe webhook failed. Error: ${H}`)}}async function k(se,ce,me){if(ce.subscription?.enabled)try{let H=me.data.object,ue=H.id,x=await se.context.adapter.findOne({model:"subscription",where:[{field:"stripeSubscriptionId",value:ue}]});x?(await se.context.adapter.update({model:"subscription",where:[{field:"id",value:x.id}],update:{status:"canceled",updatedAt:new Date,cancelAtPeriodEnd:H.cancel_at_period_end,cancelAt:H.cancel_at?new Date(1e3*H.cancel_at):null,canceledAt:H.canceled_at?new Date(1e3*H.canceled_at):null,endedAt:H.ended_at?new Date(1e3*H.ended_at):null}}),await ce.subscription.onSubscriptionDeleted?.({event:me,stripeSubscription:H,subscription:x})):se.context.logger.warn(`Stripe webhook error: Subscription not found for subscriptionId: ${ue}`)}catch(H){se.context.logger.error(`Stripe webhook failed. Error: ${H}`)}}let N=(0,i.Di)({use:[s.ld]},async se=>({session:se.context.session})),P=(se,ce)=>(0,i.Di)(async me=>{let H=me.context.session;if(!H)throw new s.LG("UNAUTHORIZED",{message:j.UNAUTHORIZED});let ue=me.body?.customerType||me.query?.customerType,x=me.body?.referenceId||me.query?.referenceId;if(ue==="organization"){if(!se.authorizeReference)throw me.context.logger.error("Organization subscriptions require authorizeReference to be defined in your stripe plugin config."),new s.LG("BAD_REQUEST",{message:j.ORGANIZATION_SUBSCRIPTION_NOT_ENABLED});let fe=x||H.session.activeOrganizationId;if(!fe)throw new s.LG("BAD_REQUEST",{message:j.ORGANIZATION_REFERENCE_ID_REQUIRED});if(!await se.authorizeReference({user:H.user,session:H.session,referenceId:fe,action:ce},me))throw new s.LG("UNAUTHORIZED",{message:j.UNAUTHORIZED});return}if(x&&x!==H.user.id){if(!se.authorizeReference)throw me.context.logger.error("Passing referenceId into a subscription action isn't allowed if subscription.authorizeReference isn't defined in your stripe plugin config."),new s.LG("BAD_REQUEST",{message:j.REFERENCE_ID_NOT_ALLOWED});if(!await se.authorizeReference({user:H.user,session:H.session,referenceId:x,action:ce},me))throw new s.LG("UNAUTHORIZED",{message:j.UNAUTHORIZED})}});function b(se,ce){return/^[a-zA-Z][a-zA-Z0-9+\-.]*:/.test(ce)?ce:`${se.context.options.baseURL}${ce.startsWith("/")?ce:`/${ce}`}`}async function z(se,ce){if(ce)return(await se.prices.list({lookup_keys:[ce],active:!0,limit:1})).data[0]?.id}function F(se,ce,me){let{user:H,session:ue}=se;if((ce||"user")==="organization"){if(!me.organization?.enabled)throw new s.LG("BAD_REQUEST",{message:j.ORGANIZATION_SUBSCRIPTION_NOT_ENABLED});if(!ue.activeOrganizationId)throw new s.LG("BAD_REQUEST",{message:j.ORGANIZATION_NOT_FOUND});return ue.activeOrganizationId}return H.id}let Q=c.object({plan:c.string().meta({description:'The name of the plan to upgrade to. Eg: "pro"'}),annual:c.boolean().meta({description:"Whether to upgrade to an annual plan. Eg: true"}).optional(),referenceId:c.string().meta({description:'Reference ID for the subscription. Eg: "org_123"'}).optional(),subscriptionId:c.string().meta({description:'The Stripe subscription ID to upgrade. Eg: "sub_1ABC2DEF3GHI4JKL"'}).optional(),customerType:c.enum(["user","organization"]).meta({description:'Customer type for the subscription. Eg: "user" or "organization"'}).optional(),metadata:c.record(c.string(),c.any()).optional(),seats:c.number().meta({description:"Number of seats to upgrade to (if applicable). Eg: 1"}).optional(),locale:c.custom(se=>typeof se=="string").meta({description:"The locale to display Checkout in. Eg: 'en', 'ko'. If not provided or set to `auto`, the browser's locale is used."}).optional(),successUrl:c.string().meta({description:'Callback URL to redirect back after successful subscription. Eg: "https://example.com/success"'}).default("/"),cancelUrl:c.string().meta({description:'If set, checkout shows a back button and customers will be directed here if they cancel payment. Eg: "https://example.com/pricing"'}).default("/"),returnUrl:c.string().meta({description:'URL to take customers to when they click on the billing portal\u2019s link to return to your website. Eg: "https://example.com/dashboard"'}).optional(),disableRedirect:c.boolean().meta({description:"Disable redirect after successful subscription. Eg: true"}).default(!1)}),G=se=>{let ce=se.stripeClient,me=se.subscription;return(0,i.Aw)("/subscription/upgrade",{method:"POST",body:Q,metadata:{openapi:{operationId:"upgradeSubscription"}},use:[N,P(me,"upgrade-subscription"),(0,s.vv)(H=>[H.body.successUrl,H.body.cancelUrl])]},async H=>{let ue,{user:x,session:fe}=H.context.session,ge=H.body.customerType||"user",Se=H.body.referenceId||F(H.context.session,ge,se);if(!x.emailVerified&&me.requireEmailVerification)throw new s.LG("BAD_REQUEST",{message:j.EMAIL_VERIFICATION_REQUIRED});let Re=await p(se,H.body.plan);if(!Re)throw new s.LG("BAD_REQUEST",{message:j.SUBSCRIPTION_PLAN_NOT_FOUND});let ae=H.body.subscriptionId?await H.context.adapter.findOne({model:"subscription",where:[{field:"stripeSubscriptionId",value:H.body.subscriptionId}]}):null;if(H.body.subscriptionId&&!ae||H.body.subscriptionId&&ae&&ae.referenceId!==Se)throw new s.LG("BAD_REQUEST",{message:j.SUBSCRIPTION_NOT_FOUND});if(ge==="organization"){if(!(ue=ae?.stripeCustomerId)){let ct=await H.context.adapter.findOne({model:"organization",where:[{field:"id",value:Se}]});if(!ct)throw new s.LG("BAD_REQUEST",{message:j.ORGANIZATION_NOT_FOUND});if(!(ue=ct.stripeCustomerId))try{let vt=(await ce.customers.search({query:`metadata["${$.keys.organizationId}"]:"${ct.id}"`,limit:1})).data[0];if(!vt){let Ut={};se.organization?.getCustomerCreateParams&&(Ut=await se.organization.getCustomerCreateParams(ct,H));let nr=(0,y.$Q)({name:ct.name,metadata:$.set({organizationId:ct.id,customerType:"organization"},H.body.metadata)},Ut);vt=await ce.customers.create(nr),await se.organization?.onCustomerCreate?.({stripeCustomer:vt,organization:{...ct,stripeCustomerId:vt.id}},H)}await H.context.adapter.update({model:"organization",update:{stripeCustomerId:vt.id},where:[{field:"id",value:ct.id}]}),ue=vt.id}catch(vt){throw H.context.logger.error(vt),new s.LG("BAD_REQUEST",{message:j.UNABLE_TO_CREATE_CUSTOMER})}}}else if(!(ue=ae?.stripeCustomerId||x.stripeCustomerId))try{let ct=(await ce.customers.search({query:`email:"${J(x.email)}" AND -metadata["${$.keys.customerType}"]:"organization"`,limit:1})).data[0];ct||(ct=await ce.customers.create({email:x.email,name:x.name,metadata:$.set({userId:x.id,customerType:"user"},H.body.metadata)})),await H.context.adapter.update({model:"user",update:{stripeCustomerId:ct.id},where:[{field:"id",value:x.id}]}),ue=ct.id}catch(ct){throw H.context.logger.error(ct),new s.LG("BAD_REQUEST",{message:j.UNABLE_TO_CREATE_CUSTOMER})}let Ae=ae?[ae]:await H.context.adapter.findMany({model:"subscription",where:[{field:"referenceId",value:Se}]}),lt=Ae.find(ct=>_(ct)),Je=(await ce.subscriptions.list({customer:ue}).then(ct=>ct.data.filter(vt=>_(vt)))).find(ct=>ae?.stripeSubscriptionId||H.body.subscriptionId?ct.id===ae?.stripeSubscriptionId||ct.id===H.body.subscriptionId:!!lt?.stripeSubscriptionId&&ct.id===lt.stripeSubscriptionId),rt=Je?.items.data[0]?.price.id,Ye=Ae.find(ct=>ct.status==="incomplete"),St=H.body.annual?Re.annualDiscountPriceId:Re.priceId,bt=H.body.annual?Re.annualDiscountLookupKey:Re.lookupKey,qe=bt?await z(ce,bt):void 0,re=St||qe;if(!re)throw H.error("BAD_REQUEST",{message:"Price ID not found for the selected plan"});let We=lt?.plan===H.body.plan,ut=lt?.seats===(H.body.seats||1),kt=rt===re,Ct=!lt?.periodEnd||lt.periodEnd>new Date;if(lt?.status==="active"&&We&&ut&&kt&&Ct)throw new s.LG("BAD_REQUEST",{message:j.ALREADY_SUBSCRIBED_PLAN});if(Je&&ue){let ct=await H.context.adapter.findOne({model:"subscription",where:[{field:"stripeSubscriptionId",value:Je.id}]});!ct&&lt&&(await H.context.adapter.update({model:"subscription",update:{stripeSubscriptionId:Je.id,updatedAt:new Date},where:[{field:"id",value:lt.id}]}),ct=lt);let{url:vt}=await ce.billingPortal.sessions.create({customer:ue,return_url:b(H,H.body.returnUrl||"/"),flow_data:{type:"subscription_update_confirm",after_completion:{type:"redirect",redirect:{return_url:b(H,H.body.returnUrl||"/")}},subscription_update_confirm:{subscription:Je.id,items:[{id:Je.items.data[0]?.id,quantity:H.body.seats||1,price:re}]}}}).catch(async Ut=>{throw H.error("BAD_REQUEST",{message:Ut.message,code:Ut.code})});return H.json({url:vt,redirect:!H.body.disableRedirect})}let tt=lt||Ye;if(Ye&&!lt&&(tt=await H.context.adapter.update({model:"subscription",update:{plan:Re.name.toLowerCase(),seats:H.body.seats||1,updatedAt:new Date},where:[{field:"id",value:Ye.id}]})||Ye),tt||(tt=await H.context.adapter.create({model:"subscription",data:{plan:Re.name.toLowerCase(),stripeCustomerId:ue,status:"incomplete",referenceId:Se,seats:H.body.seats||1}})),!tt)throw H.context.logger.error("Subscription ID not found"),new s.LG("NOT_FOUND",{message:j.SUBSCRIPTION_NOT_FOUND});let Ot=await me.getCheckoutSessionParams?.({user:x,session:fe,plan:Re,subscription:tt},H.request,H),Wt=!(await H.context.adapter.findMany({model:"subscription",where:[{field:"referenceId",value:Se}]})).some(ct=>!!(ct.trialStart||ct.trialEnd)||ct.status==="trialing")&&Re.freeTrial?{trial_period_days:Re.freeTrial.days}:void 0,yt=await ce.checkout.sessions.create({...ue?{customer:ue,customer_update:ge!=="user"?{address:"auto"}:{name:"auto",address:"auto"}}:{customer_email:x.email},locale:H.body.locale,success_url:b(H,`${H.context.baseURL}/subscription/success?callbackURL=${encodeURIComponent(H.body.successUrl)}&subscriptionId=${encodeURIComponent(tt.id)}`),cancel_url:b(H,H.body.cancelUrl),line_items:[{price:re,quantity:H.body.seats||1}],subscription_data:{...Wt,metadata:W.set({userId:x.id,subscriptionId:tt.id,referenceId:Se},H.body.metadata,Ot?.params?.subscription_data?.metadata)},mode:"subscription",client_reference_id:Se,...Ot?.params,metadata:W.set({userId:x.id,subscriptionId:tt.id,referenceId:Se},H.body.metadata,Ot?.params?.metadata)},Ot?.options).catch(async ct=>{throw H.error("BAD_REQUEST",{message:ct.message,code:ct.code})});return H.json({...yt,redirect:!H.body.disableRedirect})})},X=c.record(c.string(),c.any()).optional(),oe=se=>{let ce=se.stripeClient,me=se.subscription;return(0,i.Aw)("/subscription/cancel/callback",{method:"GET",query:X,metadata:{openapi:{operationId:"cancelSubscriptionCallback"}},use:[(0,s.vv)(H=>H.query.callbackURL)]},async H=>{if(!H.query||!H.query.callbackURL||!H.query.subscriptionId)throw H.redirect(b(H,H.query?.callbackURL||"/"));let ue=await(0,s.sg)(H);if(!ue)throw H.redirect(b(H,H.query?.callbackURL||"/"));let{user:x}=ue,{callbackURL:fe,subscriptionId:ge}=H.query;if(x?.stripeCustomerId)try{let Se=await H.context.adapter.findOne({model:"subscription",where:[{field:"id",value:ge}]});if(!Se||Se.status==="canceled"||m(Se))throw H.redirect(b(H,fe));let Re=(await ce.subscriptions.list({customer:x.stripeCustomerId,status:"active"})).data.find(ae=>ae.id===Se.stripeSubscriptionId);Re&&q(Re)&&!m(Se)&&(await H.context.adapter.update({model:"subscription",update:{status:Re?.status,cancelAtPeriodEnd:Re?.cancel_at_period_end||!1,cancelAt:Re?.cancel_at?new Date(1e3*Re.cancel_at):null,canceledAt:Re?.canceled_at?new Date(1e3*Re.canceled_at):null},where:[{field:"id",value:Se.id}]}),await me.onSubscriptionCancel?.({subscription:Se,cancellationDetails:Re.cancellation_details,stripeSubscription:Re,event:void 0}))}catch(Se){H.context.logger.error("Error checking subscription status from Stripe",Se)}throw H.redirect(b(H,fe))})},ne=c.object({referenceId:c.string().meta({description:"Reference id of the subscription to cancel. Eg: '123'"}).optional(),subscriptionId:c.string().meta({description:"The Stripe subscription ID to cancel. Eg: 'sub_1ABC2DEF3GHI4JKL'"}).optional(),customerType:c.enum(["user","organization"]).meta({description:'Customer type for the subscription. Eg: "user" or "organization"'}).optional(),returnUrl:c.string().meta({description:`URL to take customers to when they click on the billing portal's link to return to your website. Eg: "/account"`}),disableRedirect:c.boolean().meta({description:"Disable redirect after successful subscription cancellation. Eg: true"}).default(!1)}),we=se=>{let ce=se.stripeClient,me=se.subscription;return(0,i.Aw)("/subscription/cancel",{method:"POST",body:ne,metadata:{openapi:{operationId:"cancelSubscription"}},use:[N,P(me,"cancel-subscription"),(0,s.vv)(H=>H.body.returnUrl)]},async H=>{let ue=H.body.customerType||"user",x=H.body.referenceId||F(H.context.session,ue,se),fe=H.body.subscriptionId?await H.context.adapter.findOne({model:"subscription",where:[{field:"stripeSubscriptionId",value:H.body.subscriptionId}]}):await H.context.adapter.findMany({model:"subscription",where:[{field:"referenceId",value:x}]}).then(ae=>ae.find(Ae=>_(Ae)));if(H.body.subscriptionId&&fe&&fe.referenceId!==x&&(fe=void 0),!fe||!fe.stripeCustomerId)throw H.error("BAD_REQUEST",{message:j.SUBSCRIPTION_NOT_FOUND});let ge=await ce.subscriptions.list({customer:fe.stripeCustomerId}).then(ae=>ae.data.filter(Ae=>_(Ae)));if(!ge.length)throw await H.context.adapter.deleteMany({model:"subscription",where:[{field:"referenceId",value:x}]}),H.error("BAD_REQUEST",{message:j.SUBSCRIPTION_NOT_FOUND});let Se=ge.find(ae=>ae.id===fe.stripeSubscriptionId);if(!Se)throw H.error("BAD_REQUEST",{message:j.SUBSCRIPTION_NOT_FOUND});let{url:Re}=await ce.billingPortal.sessions.create({customer:fe.stripeCustomerId,return_url:b(H,`${H.context.baseURL}/subscription/cancel/callback?callbackURL=${encodeURIComponent(H.body?.returnUrl||"/")}&subscriptionId=${encodeURIComponent(fe.id)}`),flow_data:{type:"subscription_cancel",subscription_cancel:{subscription:Se.id}}}).catch(async ae=>{if(ae.message?.includes("already set to be canceled")&&!m(fe)){let Ae=await ce.subscriptions.retrieve(Se.id);await H.context.adapter.update({model:"subscription",update:{cancelAtPeriodEnd:Ae.cancel_at_period_end,cancelAt:Ae.cancel_at?new Date(1e3*Ae.cancel_at):null,canceledAt:Ae.canceled_at?new Date(1e3*Ae.canceled_at):null},where:[{field:"id",value:fe.id}]})}throw H.error("BAD_REQUEST",{message:ae.message,code:ae.code})});return H.json({url:Re,redirect:!H.body.disableRedirect})})},Ee=c.object({referenceId:c.string().meta({description:"Reference id of the subscription to restore. Eg: '123'"}).optional(),subscriptionId:c.string().meta({description:"The Stripe subscription ID to restore. Eg: 'sub_1ABC2DEF3GHI4JKL'"}).optional(),customerType:c.enum(["user","organization"]).meta({description:'Customer type for the subscription. Eg: "user" or "organization"'}).optional()}),$e=se=>{let ce=se.stripeClient,me=se.subscription;return(0,i.Aw)("/subscription/restore",{method:"POST",body:Ee,metadata:{openapi:{operationId:"restoreSubscription"}},use:[N,P(me,"restore-subscription")]},async H=>{let ue=H.body.customerType||"user",x=H.body.referenceId||F(H.context.session,ue,se),fe=H.body.subscriptionId?await H.context.adapter.findOne({model:"subscription",where:[{field:"stripeSubscriptionId",value:H.body.subscriptionId}]}):await H.context.adapter.findMany({model:"subscription",where:[{field:"referenceId",value:x}]}).then(ae=>ae.find(Ae=>_(Ae)));if(H.body.subscriptionId&&fe&&fe.referenceId!==x&&(fe=void 0),!fe||!fe.stripeCustomerId)throw H.error("BAD_REQUEST",{message:j.SUBSCRIPTION_NOT_FOUND});if(!_(fe))throw H.error("BAD_REQUEST",{message:j.SUBSCRIPTION_NOT_ACTIVE});if(!m(fe))throw H.error("BAD_REQUEST",{message:j.SUBSCRIPTION_NOT_SCHEDULED_FOR_CANCELLATION});let ge=await ce.subscriptions.list({customer:fe.stripeCustomerId}).then(ae=>ae.data.filter(Ae=>_(Ae))[0]);if(!ge)throw H.error("BAD_REQUEST",{message:j.SUBSCRIPTION_NOT_FOUND});let Se={};ge.cancel_at?Se.cancel_at="":ge.cancel_at_period_end&&(Se.cancel_at_period_end=!1);let Re=await ce.subscriptions.update(ge.id,Se).catch(ae=>{throw H.error("BAD_REQUEST",{message:ae.message,code:ae.code})});return await H.context.adapter.update({model:"subscription",update:{cancelAtPeriodEnd:!1,cancelAt:null,canceledAt:null,updatedAt:new Date},where:[{field:"id",value:fe.id}]}),H.json(Re)})},v=c.optional(c.object({referenceId:c.string().meta({description:"Reference id of the subscription to list. Eg: '123'"}).optional(),customerType:c.enum(["user","organization"]).meta({description:'Customer type for the subscription. Eg: "user" or "organization"'}).optional()})),Z=se=>{let ce=se.subscription;return(0,i.Aw)("/subscription/list",{method:"GET",query:v,metadata:{openapi:{operationId:"listActiveSubscriptions"}},use:[N,P(ce,"list-subscription")]},async me=>{let H=me.query?.customerType||"user",ue=me.query?.referenceId||F(me.context.session,H,se),x=await me.context.adapter.findMany({model:"subscription",where:[{field:"referenceId",value:ue}]});if(!x.length)return[];let fe=await K(se.subscription);if(!fe)return[];let ge=x.map(Se=>{let Re=fe.find(ae=>ae.name.toLowerCase()===Se.plan.toLowerCase());return{...Se,limits:Re?.limits,priceId:Re?.priceId}}).filter(Se=>_(Se));return me.json(ge)})},R=c.record(c.string(),c.any()).optional(),S=se=>{let ce=se.stripeClient;return(0,i.Aw)("/subscription/success",{method:"GET",query:R,metadata:{openapi:{operationId:"handleSubscriptionSuccess"}},use:[(0,s.vv)(me=>me.query.callbackURL)]},async me=>{if(!me.query||!me.query.callbackURL||!me.query.subscriptionId)throw me.redirect(b(me,me.query?.callbackURL||"/"));let{callbackURL:H,subscriptionId:ue}=me.query,x=await(0,s.sg)(me);if(!x)throw me.redirect(b(me,me.query?.callbackURL||"/"));let fe=await me.context.adapter.findOne({model:"subscription",where:[{field:"id",value:ue}]});if(!fe)throw me.context.logger.warn(`Subscription record not found for subscriptionId: ${ue}`),me.redirect(b(me,H));if(_(fe))throw me.redirect(b(me,H));let ge=fe.stripeCustomerId||x.user.stripeCustomerId;if(!ge)throw me.redirect(b(me,H));let Se=await ce.subscriptions.list({customer:ge,status:"active"}).then(Ae=>Ae.data[0]).catch(Ae=>{throw me.context.logger.error("Error fetching subscription from Stripe",Ae),me.redirect(b(me,H))});if(!Se)throw me.redirect(b(me,H));let Re=Se.items.data[0];if(!Re)throw me.context.logger.warn(`No subscription items found for Stripe subscription ${Se.id}`),me.redirect(b(me,H));let ae=await I(se,Re.price.id,Re.price.lookup_key);throw ae?(await me.context.adapter.update({model:"subscription",update:{status:Se.status,seats:Re.quantity||1,plan:ae.name.toLowerCase(),periodEnd:new Date(1e3*Re.current_period_end),periodStart:new Date(1e3*Re.current_period_start),stripeSubscriptionId:Se.id,cancelAtPeriodEnd:Se.cancel_at_period_end,cancelAt:Se.cancel_at?new Date(1e3*Se.cancel_at):null,canceledAt:Se.canceled_at?new Date(1e3*Se.canceled_at):null,...Se.trial_start&&Se.trial_end?{trialStart:new Date(1e3*Se.trial_start),trialEnd:new Date(1e3*Se.trial_end)}:{}},where:[{field:"id",value:fe.id}]}),me.redirect(b(me,H))):(me.context.logger.warn(`Plan not found for price ${Re.price.id}`),me.redirect(b(me,H)))})},E=c.object({locale:c.custom(se=>typeof se=="string").meta({description:"The IETF language tag of the locale Customer Portal is displayed in. Eg: 'en', 'ko'. If not provided or set to `auto`, the browser's locale is used."}).optional(),referenceId:c.string().optional(),customerType:c.enum(["user","organization"]).meta({description:'Customer type for the subscription. Eg: "user" or "organization"'}).optional(),returnUrl:c.string().default("/"),disableRedirect:c.boolean().meta({description:"Disable redirect after creating billing portal session. Eg: true"}).default(!1)}),A=se=>{let ce=se.stripeClient,me=se.subscription;return(0,i.Aw)("/subscription/billing-portal",{method:"POST",body:E,metadata:{openapi:{operationId:"createBillingPortal"}},use:[N,P(me,"billing-portal"),(0,s.vv)(H=>H.body.returnUrl)]},async H=>{let ue,{user:x}=H.context.session,fe=H.body.customerType||"user",ge=H.body.referenceId||F(H.context.session,fe,se);if(fe==="organization"?(ue=(await H.context.adapter.findOne({model:"organization",where:[{field:"id",value:ge}]}))?.stripeCustomerId)||(ue=(await H.context.adapter.findMany({model:"subscription",where:[{field:"referenceId",value:ge}]}).then(Se=>Se.find(Re=>_(Re))))?.stripeCustomerId):(ue=x.stripeCustomerId)||(ue=(await H.context.adapter.findMany({model:"subscription",where:[{field:"referenceId",value:ge}]}).then(Se=>Se.find(Re=>_(Re))))?.stripeCustomerId),!ue)throw new s.LG("NOT_FOUND",{message:j.CUSTOMER_NOT_FOUND});try{let{url:Se}=await ce.billingPortal.sessions.create({locale:H.body.locale,customer:ue,return_url:b(H,H.body.returnUrl)});return H.json({url:Se,redirect:!H.body.disableRedirect})}catch(Se){throw H.context.logger.error("Error creating billing portal session",Se),new s.LG("INTERNAL_SERVER_ERROR",{message:j.UNABLE_TO_CREATE_BILLING_PORTAL})}})},U=se=>{let ce=se.stripeClient;return(0,i.Aw)("/stripe/webhook",{method:"POST",metadata:{...d.BT,openapi:{operationId:"handleStripeWebhook"}},cloneRequest:!0,disableBody:!0},async me=>{let H;if(!me.request?.body)throw new s.LG("BAD_REQUEST",{message:j.INVALID_REQUEST_BODY});let ue=me.request.headers.get("stripe-signature");if(!ue)throw new s.LG("BAD_REQUEST",{message:j.STRIPE_SIGNATURE_NOT_FOUND});let x=se.stripeWebhookSecret;if(!x)throw new s.LG("INTERNAL_SERVER_ERROR",{message:j.STRIPE_WEBHOOK_SECRET_NOT_FOUND});let fe=await me.request.text();try{H=typeof ce.webhooks.constructEventAsync=="function"?await ce.webhooks.constructEventAsync(fe,ue,x):ce.webhooks.constructEvent(fe,ue,x)}catch(ge){throw me.context.logger.error(`${ge.message}`),new s.LG("BAD_REQUEST",{message:j.FAILED_TO_CONSTRUCT_STRIPE_EVENT})}if(!H)throw new s.LG("BAD_REQUEST",{message:j.FAILED_TO_CONSTRUCT_STRIPE_EVENT});try{switch(H.type){case"checkout.session.completed":await V(me,se,H),await se.onEvent?.(H);break;case"customer.subscription.created":await C(me,se,H),await se.onEvent?.(H);break;case"customer.subscription.updated":await L(me,se,H),await se.onEvent?.(H);break;case"customer.subscription.deleted":await k(me,se,H),await se.onEvent?.(H);break;default:await se.onEvent?.(H)}}catch(ge){throw me.context.logger.error(`Stripe webhook failed. Error: ${ge.message}`),new s.LG("BAD_REQUEST",{message:j.STRIPE_WEBHOOK_ERROR})}return me.json({success:!0})})},te={subscription:{fields:{plan:{type:"string",required:!0},referenceId:{type:"string",required:!0},stripeCustomerId:{type:"string",required:!1},stripeSubscriptionId:{type:"string",required:!1},status:{type:"string",defaultValue:"incomplete"},periodStart:{type:"date",required:!1},periodEnd:{type:"date",required:!1},trialStart:{type:"date",required:!1},trialEnd:{type:"date",required:!1},cancelAtPeriodEnd:{type:"boolean",required:!1,defaultValue:!1},cancelAt:{type:"date",required:!1},canceledAt:{type:"date",required:!1},endedAt:{type:"date",required:!1},seats:{type:"number",required:!1}}}},Y={user:{fields:{stripeCustomerId:{type:"string",required:!1}}}},D={organization:{fields:{stripeCustomerId:{type:"string",required:!1}}}},ee=se=>{let ce={};if(ce=se.subscription?.enabled?{...te,...Y}:{...Y},se.organization?.enabled&&(ce={...ce,...D}),se.schema&&!se.subscription?.enabled&&"subscription"in se.schema){let{subscription:me,...H}=se.schema;return(0,O.oh)(ce,H)}return(0,O.oh)(ce,se.schema)},le=se=>{let ce=se.stripeClient,me={upgradeSubscription:G(se),cancelSubscriptionCallback:oe(se),cancelSubscription:we(se),restoreSubscription:$e(se),listActiveSubscriptions:Z(se),subscriptionSuccess:S(se),createBillingPortal:A(se)};return{id:"stripe",endpoints:{stripeWebhook:U(se),...se.subscription?.enabled?me:{}},init(H){if(se.organization?.enabled){let ue=H.getPlugin("organization");if(!ue){H.logger.error("Organization plugin not found");return}let x=ue.options.organizationHooks??{},fe=async Se=>{let{organization:Re}=Se;if(Re?.stripeCustomerId)try{let ae=await ce.customers.retrieve(Re.stripeCustomerId);if(ae.deleted){H.logger.warn(`Stripe customer ${Re.stripeCustomerId} was deleted`);return}Re.name!==ae.name&&(await ce.customers.update(Re.stripeCustomerId,{name:Re.name}),H.logger.info(`Synced organization name to Stripe: "${ae.name}" \u2192 "${Re.name}"`))}catch(ae){H.logger.error(`Failed to sync organization to Stripe: ${ae.message}`)}},ge=async Se=>{let{organization:Re}=Se;if(Re.stripeCustomerId)try{for(let ae of(await ce.subscriptions.list({customer:Re.stripeCustomerId,status:"all",limit:100})).data)if(ae.status!=="canceled"&&ae.status!=="incomplete"&&ae.status!=="incomplete_expired")throw new d.LG("BAD_REQUEST",{message:j.ORGANIZATION_HAS_ACTIVE_SUBSCRIPTION})}catch(ae){throw ae instanceof d.LG||H.logger.error(`Failed to check organization subscriptions: ${ae.message}`),ae}};ue.options.organizationHooks={...x,afterUpdateOrganization:x.afterUpdateOrganization?async Se=>{await x.afterUpdateOrganization(Se),await fe(Se)}:fe,beforeDeleteOrganization:x.beforeDeleteOrganization?async Se=>{await x.beforeDeleteOrganization(Se),await ge(Se)}:ge}}return{options:{databaseHooks:{user:{create:{async after(ue,x){if(x&&se.createCustomerOnSignUp&&!ue.stripeCustomerId)try{let fe=(await ce.customers.search({query:`email:"${J(ue.email)}" AND -metadata["${$.keys.customerType}"]:"organization"`,limit:1})).data[0];if(fe){await x.context.internalAdapter.updateUser(ue.id,{stripeCustomerId:fe.id}),await se.onCustomerCreate?.({stripeCustomer:fe,user:{...ue,stripeCustomerId:fe.id}},x),x.context.logger.info(`Linked existing Stripe customer ${fe.id} to user ${ue.id}`);return}let ge={};se.getCustomerCreateParams&&(ge=await se.getCustomerCreateParams(ue,x));let Se=(0,y.$Q)({email:ue.email,name:ue.name,metadata:$.set({userId:ue.id,customerType:"user"},ge?.metadata)},ge);fe=await ce.customers.create(Se),await x.context.internalAdapter.updateUser(ue.id,{stripeCustomerId:fe.id}),await se.onCustomerCreate?.({stripeCustomer:fe,user:{...ue,stripeCustomerId:fe.id}},x),x.context.logger.info(`Created new Stripe customer ${fe.id} for user ${ue.id}`)}catch(fe){x.context.logger.error(`Failed to create or link Stripe customer: ${fe.message}`,fe)}}},update:{async after(ue,x){if(x&&ue.stripeCustomerId)try{let fe=await ce.customers.retrieve(ue.stripeCustomerId);if(fe.deleted){x.context.logger.warn(`Stripe customer ${ue.stripeCustomerId} was deleted, cannot update email`);return}fe.email!==ue.email&&(await ce.customers.update(ue.stripeCustomerId,{email:ue.email}),x.context.logger.info(`Updated Stripe customer email from ${fe.email} to ${ue.email}`))}catch(fe){x.context.logger.error(`Failed to sync email to Stripe customer: ${fe.message}`,fe)}}}}}}}},schema:ee(se),options:se,$ERROR_CODES:j}}},Le.__chunk_8587=(Ue,ie,o)=>{"use strict";o.d(ie,{B:()=>h,q:()=>i});var d=o(35889),y=o(26772);function h(s){return(0,y.Gv)(s)&&"expressionType"in s&&(0,d.N)(s)}function i(s){return(0,y.Gv)(s)&&"expression"in s&&(0,y.Kg)(s.alias)&&(0,d.N)(s)}},Le.__chunk_8342=(Ue,ie,o)=>{"use strict";o.d(ie,{a:()=>y});let d=new Map,y={decode:(h,i="utf-8")=>(d.has(i)||d.set(i,new TextDecoder(i)),d.get(i).decode(h)),encode:new TextEncoder().encode}},Le.__chunk_8224=(Ue,ie,o)=>{"use strict";o.d(ie,{W:()=>h});var d=o(62049);class y extends d.R{get adapter(){throw Error("this query cannot be compiled to SQL")}compileQuery(){throw Error("this query cannot be compiled to SQL")}provideConnection(){throw Error("this query cannot be executed")}withConnectionProvider(){throw Error("this query cannot have a connection provider")}withPlugin(s){return new y([...this.plugins,s])}withPlugins(s){return new y([...this.plugins,...s])}withPluginAtFront(s){return new y([s,...this.plugins])}withoutPlugins(){return new y([])}}let h=new y},Le.__chunk_7757=(Ue,ie,o)=>{"use strict";o.d(ie,{a:()=>y});var d=o(26772);let y=(0,d.CN)({is:h=>h.kind==="LimitNode",create:h=>(0,d.CN)({kind:"LimitNode",limit:h})})},Le.__chunk_7442=(Ue,ie,o)=>{var d=typeof Sr<"u"&&Sr||typeof is<"u"&&is||o.g!==void 0&&o.g,y=function(){function i(){this.fetch=!1,this.DOMException=d.DOMException}return i.prototype=d,new i}();(function(i){(function(s){var c=i!==void 0&&i||typeof is<"u"&&is||o.g!==void 0&&o.g||{},O={searchParams:"URLSearchParams"in c,iterable:"Symbol"in c&&"iterator"in Symbol,blob:"FileReader"in c&&"Blob"in c&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in c};if(O.arrayBuffer)var j=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],$=ArrayBuffer.isView||function(b){return b&&j.indexOf(Object.prototype.toString.call(b))>-1};function W(b){if(typeof b!="string"&&(b=String(b)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(b)||b==="")throw TypeError('Invalid character in header field name: "'+b+'"');return b.toLowerCase()}function K(b){return typeof b!="string"&&(b=String(b)),b}function I(b){var z={next:function(){var F=b.shift();return{done:F===void 0,value:F}}};return O.iterable&&(z[Symbol.iterator]=function(){return z}),z}function p(b){this.map={},b instanceof p?b.forEach(function(z,F){this.append(F,z)},this):Array.isArray(b)?b.forEach(function(z){if(z.length!=2)throw TypeError("Headers constructor: expected name/value pair to be length 2, found"+z.length);this.append(z[0],z[1])},this):b&&Object.getOwnPropertyNames(b).forEach(function(z){this.append(z,b[z])},this)}function _(b){if(!b._noBody){if(b.bodyUsed)return Promise.reject(TypeError("Already read"));b.bodyUsed=!0}}function m(b){return new Promise(function(z,F){b.onload=function(){z(b.result)},b.onerror=function(){F(b.error)}})}function q(b){var z=new FileReader,F=m(z);return z.readAsArrayBuffer(b),F}function J(b){if(b.slice)return b.slice(0);var z=new Uint8Array(b.byteLength);return z.set(new Uint8Array(b)),z.buffer}function a(){return this.bodyUsed=!1,this._initBody=function(b){if(this.bodyUsed=this.bodyUsed,this._bodyInit=b,b)if(typeof b=="string")this._bodyText=b;else if(O.blob&&Blob.prototype.isPrototypeOf(b))this._bodyBlob=b;else if(O.formData&&FormData.prototype.isPrototypeOf(b))this._bodyFormData=b;else if(O.searchParams&&URLSearchParams.prototype.isPrototypeOf(b))this._bodyText=b.toString();else{var z;O.arrayBuffer&&O.blob&&(z=b)&&DataView.prototype.isPrototypeOf(z)?(this._bodyArrayBuffer=J(b.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):O.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(b)||$(b))?this._bodyArrayBuffer=J(b):this._bodyText=b=Object.prototype.toString.call(b)}else this._noBody=!0,this._bodyText="";!this.headers.get("content-type")&&(typeof b=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):O.searchParams&&URLSearchParams.prototype.isPrototypeOf(b)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},O.blob&&(this.blob=function(){var b=_(this);if(b)return b;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var b=_(this);return b||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(O.blob)return this.blob().then(q);throw Error("could not read as ArrayBuffer")},this.text=function(){var b,z,F,Q,G,X=_(this);if(X)return X;if(this._bodyBlob)return b=this._bodyBlob,F=m(z=new FileReader),G=(Q=/charset=([A-Za-z0-9_-]+)/.exec(b.type))?Q[1]:"utf-8",z.readAsText(b,G),F;if(this._bodyArrayBuffer)return Promise.resolve(function(oe){for(var ne=new Uint8Array(oe),we=Array(ne.length),Ee=0;Ee<ne.length;Ee++)we[Ee]=String.fromCharCode(ne[Ee]);return we.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},O.formData&&(this.formData=function(){return this.text().then(L)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(b,z){b=W(b),z=K(z);var F=this.map[b];this.map[b]=F?F+", "+z:z},p.prototype.delete=function(b){delete this.map[W(b)]},p.prototype.get=function(b){return b=W(b),this.has(b)?this.map[b]:null},p.prototype.has=function(b){return this.map.hasOwnProperty(W(b))},p.prototype.set=function(b,z){this.map[W(b)]=K(z)},p.prototype.forEach=function(b,z){for(var F in this.map)this.map.hasOwnProperty(F)&&b.call(z,this.map[F],F,this)},p.prototype.keys=function(){var b=[];return this.forEach(function(z,F){b.push(F)}),I(b)},p.prototype.values=function(){var b=[];return this.forEach(function(z){b.push(z)}),I(b)},p.prototype.entries=function(){var b=[];return this.forEach(function(z,F){b.push([F,z])}),I(b)},O.iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);var V=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function C(b,z){if(!(this instanceof C))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var F,Q,G=(z=z||{}).body;if(b instanceof C){if(b.bodyUsed)throw TypeError("Already read");this.url=b.url,this.credentials=b.credentials,z.headers||(this.headers=new p(b.headers)),this.method=b.method,this.mode=b.mode,this.signal=b.signal,G||b._bodyInit==null||(G=b._bodyInit,b.bodyUsed=!0)}else this.url=String(b);if(this.credentials=z.credentials||this.credentials||"same-origin",(z.headers||!this.headers)&&(this.headers=new p(z.headers)),this.method=(Q=(F=z.method||this.method||"GET").toUpperCase(),V.indexOf(Q)>-1?Q:F),this.mode=z.mode||this.mode||null,this.signal=z.signal||this.signal||function(){if("AbortController"in c)return new AbortController().signal}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&G)throw TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(G),(this.method==="GET"||this.method==="HEAD")&&(z.cache==="no-store"||z.cache==="no-cache")){var X=/([?&])_=[^&]*/;X.test(this.url)?this.url=this.url.replace(X,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function L(b){var z=new FormData;return b.trim().split("&").forEach(function(F){if(F){var Q=F.split("="),G=Q.shift().replace(/\+/g," "),X=Q.join("=").replace(/\+/g," ");z.append(decodeURIComponent(G),decodeURIComponent(X))}}),z}function k(b,z){if(!(this instanceof k))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(z||(z={}),this.type="default",this.status=z.status===void 0?200:z.status,this.status<200||this.status>599)throw RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=z.statusText===void 0?"":""+z.statusText,this.headers=new p(z.headers),this.url=z.url||"",this._initBody(b)}C.prototype.clone=function(){return new C(this,{body:this._bodyInit})},a.call(C.prototype),a.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},k.error=function(){var b=new k(null,{status:200,statusText:""});return b.ok=!1,b.status=0,b.type="error",b};var N=[301,302,303,307,308];k.redirect=function(b,z){if(N.indexOf(z)===-1)throw RangeError("Invalid status code");return new k(null,{status:z,headers:{location:b}})},s.DOMException=c.DOMException;try{new s.DOMException}catch{s.DOMException=function(z,F){this.message=z,this.name=F;var Q=Error(z);this.stack=Q.stack},s.DOMException.prototype=Object.create(Error.prototype),s.DOMException.prototype.constructor=s.DOMException}function P(b,z){return new Promise(function(F,Q){var G=new C(b,z);if(G.signal&&G.signal.aborted)return Q(new s.DOMException("Aborted","AbortError"));var X=new XMLHttpRequest;function oe(){X.abort()}if(X.onload=function(){var we,Ee,$e={statusText:X.statusText,headers:(we=X.getAllResponseHeaders()||"",Ee=new p,we.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(Z){return Z.indexOf(`
`)===0?Z.substr(1,Z.length):Z}).forEach(function(Z){var R=Z.split(":"),S=R.shift().trim();if(S){var E=R.join(":").trim();try{Ee.append(S,E)}catch(A){console.warn("Response "+A.message)}}}),Ee)};G.url.indexOf("file://")===0&&(X.status<200||X.status>599)?$e.status=200:$e.status=X.status,$e.url="responseURL"in X?X.responseURL:$e.headers.get("X-Request-URL");var v="response"in X?X.response:X.responseText;setTimeout(function(){F(new k(v,$e))},0)},X.onerror=function(){setTimeout(function(){Q(TypeError("Network request failed"))},0)},X.ontimeout=function(){setTimeout(function(){Q(TypeError("Network request timed out"))},0)},X.onabort=function(){setTimeout(function(){Q(new s.DOMException("Aborted","AbortError"))},0)},X.open(G.method,function(we){try{return we===""&&c.location.href?c.location.href:we}catch{return we}}(G.url),!0),G.credentials==="include"?X.withCredentials=!0:G.credentials==="omit"&&(X.withCredentials=!1),"responseType"in X&&(O.blob?X.responseType="blob":O.arrayBuffer&&(X.responseType="arraybuffer")),z&&typeof z.headers=="object"&&!(z.headers instanceof p||c.Headers&&z.headers instanceof c.Headers)){var ne=[];Object.getOwnPropertyNames(z.headers).forEach(function(we){ne.push(W(we)),X.setRequestHeader(we,K(z.headers[we]))}),G.headers.forEach(function(we,Ee){ne.indexOf(Ee)===-1&&X.setRequestHeader(Ee,we)})}else G.headers.forEach(function(we,Ee){X.setRequestHeader(Ee,we)});G.signal&&(G.signal.addEventListener("abort",oe),X.onreadystatechange=function(){X.readyState===4&&G.signal.removeEventListener("abort",oe)}),X.send(G._bodyInit===void 0?null:G._bodyInit)})}P.polyfill=!0,c.fetch||(c.fetch=P,c.Headers=p,c.Request=C,c.Response=k),s.Headers=p,s.Request=C,s.Response=k,s.fetch=P})({})})(y),y.fetch.ponyfill=!0,delete y.fetch.polyfill;var h=d.fetch?d:y;(ie=h.fetch).default=h.fetch,ie.fetch=h.fetch,ie.Headers=h.Headers,ie.Request=h.Request,ie.Response=h.Response,Ue.exports=ie},Le.__chunk_7286=(Ue,ie,o)=>{"use strict";o.d(ie,{JB:()=>O,M$:()=>W,Xm:()=>$,uJ:()=>j});var d=o(26772),y=o(93692),h=o(59204),i=o(80282),s=o(9789),c=o(75454);function O(I){return(0,d.MH)(I)?I.map(p=>j(p)):[j(I)]}function j(I){return(0,d.Kg)(I)?$(I):(0,c.uc)(I)?I.toOperationNode():(0,i.v0)(I)}function $(I){let p=" as ";if(!I.includes(p))return W(I);{let[_,m]=I.split(p).map(K);return y.N.create(W(_),s.O.create(m))}}function W(I){if(!I.includes("."))return h.H.create(I);{let[p,_]=I.split(".").map(K);return h.H.createWithSchema(p,_)}}function K(I){return I.trim()}},Le.__chunk_6525=(Ue,ie,o)=>{"use strict";o.d(ie,{iv:()=>m,pD:()=>_,DZ:()=>C,_k:()=>a,mm:()=>q,rl:()=>J,I$:()=>function L(k,N,P,b,z=F=>F){let F={};for(let[Q,G]of b.entries())if(G.isJson){let X=N.relations[G.tsKey],oe=P[Q],ne=typeof oe=="string"?JSON.parse(oe):oe;F[G.tsKey]=(0,h.is)(X,_)?ne&&L(k,k[G.relationTableTsKey],ne,G.selection,z):ne.map(we=>L(k,k[G.relationTableTsKey],we,G.selection,z))}else{let X,oe=z(P[Q]),ne=G.field;X=(0,h.is)(ne,y.V)?ne:(0,h.is)(ne,K.Xs)?ne.decoder:ne.sql.decoder,F[G.tsKey]=oe===null?null:X.mapFromDriverValue(oe)}return F},W0:()=>V});var d=o(95769),y=o(21979),h=o(77438);let i=Symbol.for("drizzle:PgInlineForeignKeys"),s=Symbol.for("drizzle:EnableRLS");class c extends d.XI{static[h.i]="PgTable";static Symbol=Object.assign({},d.XI.Symbol,{InlineForeignKeys:i,EnableRLS:s});[i]=[];[s]=!1;[d.XI.Symbol.ExtraConfigBuilder]=void 0;[d.XI.Symbol.ExtraConfigColumns]={}}class O{static[h.i]="PgPrimaryKeyBuilder";columns;name;constructor(k,N){this.columns=k,this.name=N}build(k){return new j(k,this.columns,this.name)}}class j{constructor(k,N,P){this.table=k,this.columns=N,this.name=P}static[h.i]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[c.Symbol.Name]}_${this.columns.map(k=>k.name).join("_")}_pk`}}var $=o(15294),W=o(69252),K=o(38560);class I{constructor(k,N,P){this.sourceTable=k,this.referencedTable=N,this.relationName=P,this.referencedTableName=N[d.XI.Symbol.Name]}static[h.i]="Relation";referencedTableName;fieldName}class p{constructor(k,N){this.table=k,this.config=N}static[h.i]="Relations"}class _ extends I{constructor(k,N,P,b){super(k,N,P?.relationName),this.config=P,this.isNullable=b}static[h.i]="One";withFieldName(k){let N=new _(this.sourceTable,this.referencedTable,this.config,this.isNullable);return N.fieldName=k,N}}class m extends I{constructor(k,N,P){super(k,N,P?.relationName),this.config=P}static[h.i]="Many";withFieldName(k){let N=new m(this.sourceTable,this.referencedTable,this.config);return N.fieldName=k,N}}function q(){return{and:$.Uo,between:$.Tq,eq:$.eq,exists:$.t2,gt:$.gt,gte:$.RO,ilike:$.B3,inArray:$.RV,isNull:$.kZ,isNotNull:$.Pe,like:$.mj,lt:$.lt,lte:$.wJ,ne:$.ne,not:$.AU,notBetween:$.o8,notExists:$.KJ,notLike:$.RK,notIlike:$.q1,notInArray:$.KL,or:$.or,sql:K.ll}}function J(){return{sql:K.ll,asc:W.Y,desc:W.i}}function a(L,k){Object.keys(L).length===1&&"default"in L&&!(0,h.is)(L.default,d.XI)&&(L=L.default);let N={},P={},b={};for(let[z,F]of Object.entries(L))if((0,h.is)(F,d.XI)){let Q=(0,d.Lf)(F),G=P[Q];for(let oe of(N[Q]=z,b[z]={tsName:z,dbName:F[d.XI.Symbol.Name],schema:F[d.XI.Symbol.Schema],columns:F[d.XI.Symbol.Columns],relations:G?.relations??{},primaryKey:G?.primaryKey??[]},Object.values(F[d.XI.Symbol.Columns])))oe.primary&&b[z].primaryKey.push(oe);let X=F[d.XI.Symbol.ExtraConfigBuilder]?.(F[d.XI.Symbol.ExtraConfigColumns]);if(X)for(let oe of Object.values(X))(0,h.is)(oe,O)&&b[z].primaryKey.push(...oe.columns)}else if((0,h.is)(F,p)){let Q,G=(0,d.Lf)(F.table),X=N[G];for(let[oe,ne]of Object.entries(F.config(k(F.table))))if(X){let we=b[X];we.relations[oe]=ne,Q&&we.primaryKey.push(...Q)}else G in P||(P[G]={relations:{},primaryKey:Q}),P[G].relations[oe]=ne}return{tables:b,tableNamesMap:N}}function V(L,k,N){if((0,h.is)(N,_)&&N.config)return{fields:N.config.fields,references:N.config.references};let P=k[(0,d.Lf)(N.referencedTable)];if(!P)throw Error(`Table "${N.referencedTable[d.XI.Symbol.Name]}" not found in schema`);let b=L[P];if(!b)throw Error(`Table "${P}" not found in schema`);let z=N.sourceTable,F=k[(0,d.Lf)(z)];if(!F)throw Error(`Table "${z[d.XI.Symbol.Name]}" not found in schema`);let Q=[];for(let G of Object.values(b.relations))(N.relationName&&N!==G&&G.relationName===N.relationName||!N.relationName&&G.referencedTable===N.sourceTable)&&Q.push(G);if(Q.length>1)throw N.relationName?Error(`There are multiple relations with name "${N.relationName}" in table "${P}"`):Error(`There are multiple relations between "${P}" and "${N.sourceTable[d.XI.Symbol.Name]}". Please specify relation name`);if(Q[0]&&(0,h.is)(Q[0],_)&&Q[0].config)return{fields:Q[0].config.references,references:Q[0].config.fields};throw Error(`There is not enough information to infer relation "${F}.${N.fieldName}"`)}function C(L){return{one:function(k,N){return new _(L,k,N,N?.fields.reduce((P,b)=>P&&b.notNull,!0)??!1)},many:function(k,N){return new m(L,k,N)}}}},Le.__chunk_5702=(Ue,ie,o)=>{"use strict";o.d(ie,{Q:()=>y});var d=o(26772);let y=(0,d.CN)({is:h=>h.kind==="JSONReferenceNode",create:(h,i)=>(0,d.CN)({kind:"JSONReferenceNode",reference:h,traversal:i}),cloneWithTraversal:(h,i)=>(0,d.CN)({...h,traversal:i})})},Le.__chunk_5401=(Ue,ie,o)=>{"use strict";function d(i,s,...c){if((c=c.filter(Boolean)).length>2){let O=c.pop();i+=`one of type ${c.join(", ")}, or ${O}.`}else c.length===2?i+=`one of type ${c[0]} or ${c[1]}.`:i+=`of type ${c[0]}.`;return s==null?i+=` Received ${s}`:typeof s=="function"&&s.name?i+=` Received function ${s.name}`:typeof s=="object"&&s!=null&&s.constructor?.name&&(i+=` Received an instance of ${s.constructor.name}`),i}o.d(ie,{X:()=>y,t:()=>h});let y=(i,...s)=>d("Key must be ",i,...s),h=(i,s,...c)=>d(`Key for the ${i} algorithm must be `,s,...c)},Le.__chunk_5307=(Ue,ie,o)=>{"use strict";o.d(ie,{PB:()=>s,em:()=>i});var d=o(76984);o(31878);var y=o(31448),h=o(79895);function i({code:c,codeVerifier:O,redirectURI:j,options:$,authentication:W,deviceId:K,headers:I,additionalParams:p={},resource:_}){let m=new URLSearchParams,q={"content-type":"application/x-www-form-urlencoded",accept:"application/json",...I};if(m.set("grant_type","authorization_code"),m.set("code",c),O&&m.set("code_verifier",O),$.clientKey&&m.set("client_key",$.clientKey),K&&m.set("device_id",K),m.set("redirect_uri",$.redirectURI||j),_)if(typeof _=="string")m.append("resource",_);else for(let J of _)m.append("resource",J);if(W==="basic"){let J=Array.isArray($.clientId)?$.clientId[0]:$.clientId;q.authorization=`Basic ${y.K.encode(`${J}:${$.clientSecret??""}`)}`}else{let J=Array.isArray($.clientId)?$.clientId[0]:$.clientId;m.set("client_id",J),$.clientSecret&&m.set("client_secret",$.clientSecret)}for(let[J,a]of Object.entries(p))m.has(J)||m.append(J,a);return{body:m,headers:q}}async function s({code:c,codeVerifier:O,redirectURI:j,options:$,tokenEndpoint:W,authentication:K,deviceId:I,headers:p,additionalParams:_={},resource:m}){let{body:q,headers:J}=i({code:c,codeVerifier:O,redirectURI:j,options:$,authentication:K,deviceId:I,headers:p,additionalParams:_,resource:m}),{data:a,error:V}=await(0,h.zZ)(W,{method:"POST",body:q,headers:J});if(V)throw V;return(0,d.C)(a)}},Le.__chunk_4816=(Ue,ie,o)=>{"use strict";o.d(ie,{N:()=>y});var d=o(26772);let y=(0,d.CN)({is:h=>h.kind==="FromNode",create:h=>(0,d.CN)({kind:"FromNode",froms:(0,d.CN)(h)}),cloneWithFroms:(h,i)=>(0,d.CN)({...h,froms:(0,d.CN)([...h.froms,...i])})})},Le.__chunk_3580=(Ue,ie,o)=>{"use strict";o.d(ie,{y:()=>h});var d=o(26772),y=o(9789);let h=(0,d.CN)({is:i=>i.kind==="SchemableIdentifierNode",create:i=>(0,d.CN)({kind:"SchemableIdentifierNode",identifier:y.O.create(i)}),createWithSchema:(i,s)=>(0,d.CN)({kind:"SchemableIdentifierNode",schema:y.O.create(i),identifier:y.O.create(s)})})},Le.__chunk_3122=(Ue,ie,o)=>{"use strict";o.d(ie,{c:()=>y});var d=o(26772);let y=(0,d.CN)({is:h=>h.kind==="JSONPathNode",create:h=>(0,d.CN)({kind:"JSONPathNode",inOperator:h,pathLegs:(0,d.CN)([])}),cloneWithLeg:(h,i)=>(0,d.CN)({...h,pathLegs:(0,d.CN)([...h.pathLegs,i])})})},Le.__chunk_3013=(Ue,ie,o)=>{"use strict";o.d(ie,{n:()=>h});var d=o(31448),y=o(14627);function h(i,s){return{digest:async c=>{let O=new TextEncoder,j=typeof c=="string"?O.encode(c):c,$=await(0,y.N)().digest(i,j);return s==="hex"?Array.from(new Uint8Array($)).map(W=>W.toString(16).padStart(2,"0")).join(""):s==="base64"||s==="base64url"||s==="base64urlnopad"?s.includes("url")?d.z.encode($,{padding:s!=="base64urlnopad"}):d.K.encode($):$}}}},Le.__chunk_2795=(Ue,ie,o)=>{"use strict";o.d(ie,{Q:()=>h});var d=o(30592),y=o(46227);let h=(i,s,c)=>{if(i.startsWith("/"))return!!c?.allowRelativePaths&&i.startsWith("/")&&/^\/(?!\/|\\|%2f|%5c)[\w\-.\+/@]*(?:\?[\w\-.\+/=&%@]*)?$/.test(i);if(s.includes("*")||s.includes("?")){if(s.includes("://"))return(0,y.U)(s)((0,d.$z)(i)||i);let j=(0,d.Ln)(i);return!!j&&(0,y.U)(s)(j)}let O=(0,d.Jr)(i);return O!=="http:"&&O!=="https:"&&O?i.startsWith(s):s===(0,d.$z)(i)}},Le.__chunk_2543=(Ue,ie,o)=>{"use strict";o.d(ie,{$F:()=>$,KV:()=>s,Km:()=>W,Nu:()=>O,_K:()=>h,lh:()=>j,yz:()=>c});let d=Object.create(null),y=K=>Sr.process?.env||Sr.Deno?.env.toObject()||Sr.__env__||(K?d:Sr),h=new Proxy(d,{get:(K,I)=>y()[I]??d[I],has:(K,I)=>I in y()||I in d,set:(K,I,p)=>(y(!0)[I]=p,!0),deleteProperty(K,I){if(!I)return!1;let p=y(!0);return delete p[I],!0},ownKeys:()=>Object.keys(y(!0))}),i=typeof process<"u"&&process.env&&"production"||"",s=i==="production",c=()=>i==="dev"||i==="development",O=()=>i==="test"||function(K){return!!K&&K!=="false"}(h.TEST);function j(K,I){return typeof process<"u"&&process.env?process.env[K]??I:typeof Deno<"u"?Deno.env.get(K)??I:typeof Bun<"u"?Bun.env[K]??I:I}function $(K,I=!0){let p=j(K);return p?p!=="0"&&p.toLowerCase()!=="false"&&p!=="":I}let W=Object.freeze({get BETTER_AUTH_SECRET(){return j("BETTER_AUTH_SECRET")},get AUTH_SECRET(){return j("AUTH_SECRET")},get BETTER_AUTH_TELEMETRY(){return j("BETTER_AUTH_TELEMETRY")},get BETTER_AUTH_TELEMETRY_ID(){return j("BETTER_AUTH_TELEMETRY_ID")},get NODE_ENV(){return j("NODE_ENV","development")},get PACKAGE_VERSION(){return j("PACKAGE_VERSION","0.0.0")},get BETTER_AUTH_TELEMETRY_ENDPOINT(){return j("BETTER_AUTH_TELEMETRY_ENDPOINT","")}})},Le.__chunk_2170=(Ue,ie,o)=>{"use strict";o.d(ie,{z:()=>y});var d=o(26772);let y=(0,d.CN)({is:h=>h.kind==="RawNode",create:(h,i)=>(0,d.CN)({kind:"RawNode",sqlFragments:(0,d.CN)(h),parameters:(0,d.CN)(i)}),createWithSql:h=>y.create([h],[]),createWithChild:h=>y.create(["",""],[h]),createWithChildren:h=>y.create(Array(h.length+1).fill(""),h)})},Le.__chunk_1571=(Ue,ie,o)=>{"use strict";o.d(ie,{jo:()=>G,D:()=>X});var d=o(77438),y=o(95769),h=o(70356),i=o(67365),s=o(25356).Buffer;class c extends i.o{static[d.i]="SQLiteBigIntBuilder";constructor(ne){super(ne,"bigint","SQLiteBigInt")}build(ne){return new O(ne,this.config)}}class O extends i.v{static[d.i]="SQLiteBigInt";getSQLType(){return"blob"}mapFromDriverValue(ne){return s!==void 0&&s.from?BigInt((s.isBuffer(ne)?ne:ne instanceof ArrayBuffer?s.from(ne):ne.buffer?s.from(ne.buffer,ne.byteOffset,ne.byteLength):s.from(ne)).toString("utf8")):BigInt(h.su.decode(ne))}mapToDriverValue(ne){return s.from(ne.toString())}}class j extends i.o{static[d.i]="SQLiteBlobJsonBuilder";constructor(ne){super(ne,"json","SQLiteBlobJson")}build(ne){return new $(ne,this.config)}}class $ extends i.v{static[d.i]="SQLiteBlobJson";getSQLType(){return"blob"}mapFromDriverValue(ne){return s!==void 0&&s.from?JSON.parse((s.isBuffer(ne)?ne:ne instanceof ArrayBuffer?s.from(ne):ne.buffer?s.from(ne.buffer,ne.byteOffset,ne.byteLength):s.from(ne)).toString("utf8")):JSON.parse(h.su.decode(ne))}mapToDriverValue(ne){return s.from(JSON.stringify(ne))}}class W extends i.o{static[d.i]="SQLiteBlobBufferBuilder";constructor(ne){super(ne,"buffer","SQLiteBlobBuffer")}build(ne){return new K(ne,this.config)}}class K extends i.v{static[d.i]="SQLiteBlobBuffer";mapFromDriverValue(ne){return s.isBuffer(ne)?ne:s.from(ne)}getSQLType(){return"blob"}}function I(oe,ne){let{name:we,config:Ee}=(0,h.Ll)(oe,ne);return Ee?.mode==="json"?new j(we):Ee?.mode==="bigint"?new c(we):new W(we)}class p extends i.o{static[d.i]="SQLiteCustomColumnBuilder";constructor(ne,we,Ee){super(ne,"custom","SQLiteCustomColumn"),this.config.fieldConfig=we,this.config.customTypeParams=Ee}build(ne){return new _(ne,this.config)}}class _ extends i.v{static[d.i]="SQLiteCustomColumn";sqlName;mapTo;mapFrom;constructor(ne,we){super(ne,we),this.sqlName=we.customTypeParams.dataType(we.fieldConfig),this.mapTo=we.customTypeParams.toDriver,this.mapFrom=we.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(ne){return typeof this.mapFrom=="function"?this.mapFrom(ne):ne}mapToDriverValue(ne){return typeof this.mapTo=="function"?this.mapTo(ne):ne}}function m(oe){return(ne,we)=>{let{name:Ee,config:$e}=(0,h.Ll)(ne,we);return new p(Ee,$e,oe)}}var q=o(28104);class J extends i.o{static[d.i]="SQLiteNumericBuilder";constructor(ne){super(ne,"string","SQLiteNumeric")}build(ne){return new a(ne,this.config)}}class a extends i.v{static[d.i]="SQLiteNumeric";mapFromDriverValue(ne){return typeof ne=="string"?ne:String(ne)}getSQLType(){return"numeric"}}class V extends i.o{static[d.i]="SQLiteNumericNumberBuilder";constructor(ne){super(ne,"number","SQLiteNumericNumber")}build(ne){return new C(ne,this.config)}}class C extends i.v{static[d.i]="SQLiteNumericNumber";mapFromDriverValue(ne){return typeof ne=="number"?ne:Number(ne)}mapToDriverValue=String;getSQLType(){return"numeric"}}class L extends i.o{static[d.i]="SQLiteNumericBigIntBuilder";constructor(ne){super(ne,"bigint","SQLiteNumericBigInt")}build(ne){return new k(ne,this.config)}}class k extends i.v{static[d.i]="SQLiteNumericBigInt";mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){return"numeric"}}function N(oe,ne){let{name:we,config:Ee}=(0,h.Ll)(oe,ne),$e=Ee?.mode;return $e==="number"?new V(we):$e==="bigint"?new L(we):new J(we)}class P extends i.o{static[d.i]="SQLiteRealBuilder";constructor(ne){super(ne,"number","SQLiteReal")}build(ne){return new b(ne,this.config)}}class b extends i.v{static[d.i]="SQLiteReal";getSQLType(){return"real"}}function z(oe){return new P(oe??"")}var F=o(38447);let Q=Symbol.for("drizzle:SQLiteInlineForeignKeys");class G extends y.XI{static[d.i]="SQLiteTable";static Symbol=Object.assign({},y.XI.Symbol,{InlineForeignKeys:Q});[y.XI.Symbol.Columns];[Q]=[];[y.XI.Symbol.ExtraConfigBuilder]=void 0}let X=(oe,ne,we)=>function(Ee,$e,v,Z,R=Ee){let S=new G(Ee,void 0,R),E=Object.fromEntries(Object.entries(typeof $e=="function"?$e({blob:I,customType:m,integer:q.nd,numeric:N,real:z,text:F.Qq}):$e).map(([U,te])=>{te.setName(U);let Y=te.build(S);return S[Q].push(...te.buildForeignKeys(Y,S)),[U,Y]})),A=Object.assign(S,E);return A[y.XI.Symbol.Columns]=E,A[y.XI.Symbol.ExtraConfigColumns]=E,v&&(A[G.Symbol.ExtraConfigBuilder]=v),A}(oe,ne,we)},Le.__chunk_1261=(Ue,ie,o)=>{"use strict";o.d(ie,{II:()=>q,yk:()=>j,jt:()=>$});var d=o(30543);let y=({usePlural:L,schema:k})=>N=>{if(L&&N.charAt(N.length-1)==="s"){let b=N.slice(0,-1),z=k[b]?b:void 0;if(z||(z=Object.entries(k).find(([F,Q])=>Q.modelName===b)?.[0]),z)return z}let P=k[N]?N:void 0;if(P||(P=Object.entries(k).find(([b,z])=>z.modelName===N)?.[0]),!P)throw new d.$(`Model "${N}" not found in schema`);return P},h=({schema:L,usePlural:k})=>{let N=y({schema:L,usePlural:k});return({field:P,model:b})=>{if(P==="id"||P==="_id")return"id";let z=N(b),F=L[z]?.fields[P];if(!F){let Q=Object.entries(L[z].fields).find(([G,X])=>X.fieldName===P);Q&&(F=Q[1],P=Q[0])}if(!F)throw new d.$(`Field ${P} not found in model ${z}`);return P}};var i=o(39311);o(68113);var s=o(32634);o(99597);let c=({usePlural:L,schema:k,disableIdGeneration:N,options:P,customIdGenerator:b,supportsUUIDs:z})=>{let F=y({usePlural:L,schema:k});return({customModelName:Q,forceAllowId:G})=>{let X=P.advanced?.database?.useNumberId||P.advanced?.database?.generateId==="serial",oe=P.advanced?.database?.generateId==="uuid",ne=!N&&(!X||!!G)&&(!oe||!z),we=F(Q??"id");return{type:X?"number":"string",required:!!ne,...ne?{defaultValue(){if(N)return;let Ee=P.advanced?.database?.generateId;if(Ee!==!1&&!X)return typeof Ee=="function"?Ee({model:we}):b?b({model:we}):Ee==="uuid"?crypto.randomUUID():(0,s.$)()}}:{},transform:{input:Ee=>{if(Ee){if(X){let $e=Number(Ee);return isNaN($e)?void 0:$e}if(oe){if(ne&&!G)return Ee;if(N||z)return;if(G&&typeof Ee=="string"){if(/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(Ee))return Ee;{let $e=Error().stack?.split(`
`).filter((v,Z)=>Z!==1).join(`
`).replace("Error:","");i.vF.warn("[Adapter Factory] - Invalid UUID value for field `id` provided when `forceAllowId` is true. Generating a new UUID.",$e)}}return typeof Ee=="string"||z?void 0:crypto.randomUUID()}return Ee}},output:Ee=>{if(Ee)return String(Ee)}}}}},O=({usePlural:L,schema:k,options:N,customIdGenerator:P,disableIdGeneration:b})=>{let z=y({usePlural:L,schema:k}),F=h({usePlural:L,schema:k}),Q=c({usePlural:L,schema:k,options:N,customIdGenerator:P,disableIdGeneration:b});return({model:G,field:X})=>{let oe=z(G),ne=F({field:X,model:oe}),we=k[oe].fields;we.id=Q({customModelName:oe});let Ee=we[ne];if(!Ee)throw new d.$(`Field ${X} not found in model ${G}`);return Ee}},j=({schema:L,usePlural:k})=>{let N=y({schema:L,usePlural:k}),P=h({schema:L,usePlural:k});return function({model:b,field:z}){let F=N(b),Q=P({model:F,field:z});return L[F]?.fields[Q]?.fieldName||Q}},$=({usePlural:L,schema:k})=>{let N=y({schema:k,usePlural:L});return P=>{let b=N(P);return k&&k[b]&&k[b].modelName!==P?L?`${k[b].modelName}s`:k[b].modelName:L?`${P}s`:P}};var W=o(88138),K=o(54260),I=o(96283);let p=[],_=-1,m=L=>k=>k(L),q=({adapter:L,config:k})=>N=>{let P=Math.random().toString(36).substring(2,15),b={...k,supportsBooleans:k.supportsBooleans??!0,supportsDates:k.supportsDates??!0,supportsJSON:k.supportsJSON??!1,adapterName:k.adapterName??k.adapterId,supportsNumericIds:k.supportsNumericIds??!0,supportsUUIDs:k.supportsUUIDs??!1,supportsArrays:k.supportsArrays??!1,transaction:k.transaction??!1,disableTransformInput:k.disableTransformInput??!1,disableTransformOutput:k.disableTransformOutput??!1,disableTransformJoin:k.disableTransformJoin??!1};if((N.advanced?.database?.useNumberId===!0||N.advanced?.database?.generateId==="serial")&&b.supportsNumericIds===!1)throw new d.$(`[${b.adapterName}] Your database or database adapter does not support numeric ids. Please disable "useNumberId" in your config.`);let z=(0,W.y)(N),F=(...te)=>{if(b.debugLogs===!0||typeof b.debugLogs=="object"){let Y=(0,i.h)({level:"info"});if(typeof b.debugLogs=="object"&&"isRunningAdapterTests"in b.debugLogs){b.debugLogs.isRunningAdapterTests&&(te.shift(),p.push({instance:P,args:te}));return}if(typeof b.debugLogs!="object"||!b.debugLogs.logCondition||b.debugLogs.logCondition?.())if(typeof te[0]=="object"&&"method"in te[0]){let D=te.shift().method;if(typeof b.debugLogs=="object"){if(D==="create"&&!b.debugLogs.create||D==="update"&&!b.debugLogs.update||D==="updateMany"&&!b.debugLogs.updateMany)return;if(D==="findOne"&&!b.debugLogs.findOne)return;if(D==="findMany"&&!b.debugLogs.findMany)return;if(D==="delete"&&!b.debugLogs.delete)return;if(D==="deleteMany"&&!b.debugLogs.deleteMany)return;if(D==="count"&&!b.debugLogs.count)return}Y.info(`[${b.adapterName}]`,...te)}else Y.info(`[${b.adapterName}]`,...te)}},Q=(0,i.h)(N.logger),G=y({usePlural:b.usePlural,schema:z}),X=h({usePlural:b.usePlural,schema:z}),oe=$({usePlural:b.usePlural,schema:z}),ne=j({schema:z,usePlural:b.usePlural}),we=c({schema:z,options:N,usePlural:b.usePlural,disableIdGeneration:b.disableIdGeneration,customIdGenerator:b.customIdGenerator,supportsUUIDs:b.supportsUUIDs}),Ee=O({schema:z,options:N,usePlural:b.usePlural,disableIdGeneration:b.disableIdGeneration,customIdGenerator:b.customIdGenerator}),$e=async(te,Y,D,ee)=>{let le={},se=z[Y].fields,ce=b.mapKeysTransformInput??{},me=N.advanced?.database?.useNumberId||N.advanced?.database?.generateId==="serial";for(let H in se.id=we({customModelName:Y,forceAllowId:ee&&"id"in te}),se){let ue=te[H],x=se[H],fe=ce[H]||se[H].fieldName||H;if(ue===void 0&&(x.defaultValue===void 0&&!x.transform?.input&&!(D==="update"&&x.onUpdate)||D==="update"&&!x.onUpdate))continue;if(x&&x.type==="date"&&!(ue instanceof Date)&&typeof ue=="string")try{ue=new Date(ue)}catch{Q.error("[Adapter Factory] Failed to convert string to date",{value:ue,field:H})}let ge=function(Se,Re,ae){return ae==="update"?Se===void 0&&Re.onUpdate!==void 0?typeof Re.onUpdate=="function"?Re.onUpdate():Re.onUpdate:Se:ae==="create"&&(Se===void 0||Re.required===!0&&Se===null)&&Re.defaultValue!==void 0?typeof Re.defaultValue=="function"?Re.defaultValue():Re.defaultValue:Se}(ue,x,D);x.transform?.input&&(ge=await x.transform.input(ge)),x.references?.field==="id"&&me?ge=Array.isArray(ge)?ge.map(Se=>Se!==null?Number(Se):null):ge!==null?Number(ge):null:b.supportsJSON===!1&&typeof ge=="object"&&x.type==="json"||b.supportsArrays===!1&&Array.isArray(ge)&&(x.type==="string[]"||x.type==="number[]")?ge=JSON.stringify(ge):b.supportsDates===!1&&ge instanceof Date&&x.type==="date"?ge=ge.toISOString():b.supportsBooleans===!1&&typeof ge=="boolean"&&(ge=+!!ge),b.customTransformInput&&(ge=b.customTransformInput({data:ge,action:D,field:fe,fieldAttributes:x,model:oe(Y),schema:z,options:N})),ge!==void 0&&(le[fe]=ge)}return le},v=async(te,Y,D=[],ee)=>{let le=async(me,H,ue=[])=>{if(!me)return null;let x=b.mapKeysTransformOutput??{},fe={},ge=z[G(H)].fields;for(let Se in ge[Object.entries(x).find(([Re,ae])=>ae==="id")?.[0]??"id"]={type:N.advanced?.database?.useNumberId||N.advanced?.database?.generateId==="serial"?"number":"string"},ge){if(ue.length&&!ue.includes(Se))continue;let Re=ge[Se];if(Re){let ae=Re.fieldName||Se,Ae=me[Object.entries(x).find(([Je,rt])=>rt===ae)?.[0]||ae];Re.transform?.output&&(Ae=await Re.transform.output(Ae));let lt=x[Se]||Se;ae==="id"||Re.references?.field==="id"?Ae!=null&&(Ae=String(Ae)):b.supportsJSON===!1&&typeof Ae=="string"&&Re.type==="json"||b.supportsArrays===!1&&typeof Ae=="string"&&(Re.type==="string[]"||Re.type==="number[]")?Ae=(0,I.$)(Ae):b.supportsDates===!1&&typeof Ae=="string"&&Re.type==="date"?Ae=new Date(Ae):b.supportsBooleans===!1&&typeof Ae=="number"&&Re.type==="boolean"&&(Ae=Ae===1),b.customTransformOutput&&(Ae=b.customTransformOutput({data:Ae,field:lt,fieldAttributes:Re,select:ue,model:oe(H),schema:z,options:N})),fe[lt]=Ae}}return fe};if(!ee||Object.keys(ee).length===0)return await le(te,Y,D);Y=G(Y);let se=await le(te,Y,D),ce=Object.entries(ee).map(([me,H])=>({modelName:oe(me),defaultModelName:G(me),joinConfig:H}));if(!te)return null;for(let{modelName:me,defaultModelName:H,joinConfig:ue}of ce){let x=await(async()=>N.experimental?.joins?te[me]:await S({baseModel:Y,baseData:se,joinModel:me,specificJoinConfig:ue}))();x==null&&(x=ue.relation==="one-to-one"?null:[]),ue.relation!=="one-to-many"||Array.isArray(x)||(x=[x]);let fe=[];if(Array.isArray(x))for(let ge of x){let Se=await le(ge,me,[]);fe.push(Se)}else{let ge=await le(x,me,[]);fe.push(ge)}se[H]=(ue.relation==="one-to-one"?fe[0]:fe)??null}return se},Z=({model:te,where:Y,action:D})=>{if(!Y)return;let ee=b.mapKeysTransformInput??{};return Y.map(le=>{let{field:se,value:ce,operator:me="eq",connector:H="AND"}=le;if(me==="in"&&!Array.isArray(ce))throw new d.$("Value must be an array");let ue=ce,x=G(te),fe=X({field:se,model:te}),ge=ee[fe]||ne({field:fe,model:x}),Se=Ee({field:fe,model:x}),Re=N.advanced?.database?.useNumberId||N.advanced?.database?.generateId==="serial";if((fe==="id"||Se.references?.field==="id")&&Re&&(ue=Array.isArray(ce)?ce.map(Number):Number(ce)),Se.type==="date"&&ce instanceof Date&&!b.supportsDates&&(ue=ce.toISOString()),Se.type!=="boolean"||typeof ce!="boolean"||b.supportsBooleans||(ue=+!!ce),Se.type==="json"&&typeof ce=="object"&&!b.supportsJSON)try{ue=JSON.stringify(ce)}catch(ae){throw Error(`Failed to stringify JSON value for field ${ge}`,{cause:ae})}return b.customTransformInput&&(ue=b.customTransformInput({data:ue,fieldAttributes:Se,field:ge,model:oe(te),schema:z,options:N,action:D})),{operator:me,connector:H,field:ge,value:ue}})},R=(te,Y,D)=>{if(!Y||Object.keys(Y).length===0)return;let ee={};for(let[le,se]of Object.entries(Y)){let ce,me,H;if(!se)continue;let ue=G(le),x=G(te),fe=Object.entries(z[ue].fields).filter(([lt,Je])=>Je.references&&G(Je.references.model)===x),ge=!0;if(fe.length||(fe=Object.entries(z[x].fields).filter(([lt,Je])=>Je.references&&G(Je.references.model)===ue),ge=!1),fe.length){if(fe.length>1)throw new d.$(`Multiple foreign keys found for model ${le} and base model ${te} while performing join operation. Only one foreign key is supported.`)}else throw new d.$(`No foreign key found for model ${le} and base model ${te} while performing join operation.`);let[Se,Re]=fe[0];if(!Re.references)throw new d.$(`No references found for foreign key ${Se} on model ${le} while performing join operation.`);ge?(ce=ne({model:te,field:H=Re.references.field}),me=ne({model:le,field:Se})):(ce=ne({model:te,field:H=Se}),me=ne({model:le,field:Re.references.field})),D&&!D.includes(H)&&D.push(H);let ae=me==="id"||(Re.unique??!1),Ae=N.advanced?.database?.defaultFindManyLimit??100;ae?Ae=1:typeof se=="object"&&typeof se.limit=="number"&&(Ae=se.limit),ee[oe(le)]={on:{from:ce,to:me},limit:Ae,relation:ae?"one-to-one":"one-to-many"}}return{join:ee,select:D}},S=async({baseModel:te,baseData:Y,joinModel:D,specificJoinConfig:ee})=>{let le;if(!Y)return Y;let se=oe(D),ce=ee.on.to,me=Y[X({field:ee.on.from,model:te})];if(me==null)return ee.relation==="one-to-one"?null:[];let H=Z({model:se,where:[{field:ce,value:me,operator:"eq",connector:"AND"}],action:"findOne"});try{if(ee.relation==="one-to-one")le=await E.findOne({model:se,where:H});else{let ue=ee.limit??N.advanced?.database?.defaultFindManyLimit??100;le=await E.findMany({model:se,where:H,limit:ue})}}catch(ue){throw Q.error(`Failed to query fallback join for model ${se}:`,{where:H,limit:ee.limit}),console.error(ue),ue}return le},E=L({options:N,schema:z,debugLog:F,getFieldName:ne,getModelName:oe,getDefaultModelName:G,getDefaultFieldName:X,getFieldAttributes:Ee,transformInput:$e,transformOutput:v,transformWhereClause:Z}),A=null,U={transaction:async te=>(A||(b.transaction?(Q.debug(`[${b.adapterName}] - Using provided transaction implementation.`),A=b.transaction):A=m(U)),A(te)),create:async({data:te,model:Y,select:D,forceAllowId:ee=!1})=>{let le=++_,se=oe(Y);Y=G(Y),"id"in te&&te.id!==void 0&&!ee&&(Q.warn(`[${b.adapterName}] - You are trying to create a record with an id. This is not allowed as we handle id generation for you, unless you pass in the \`forceAllowId\` parameter. The id will be ignored.`),console.log(Error().stack?.split(`
`).filter((ue,x)=>x!==1).join(`
`).replace("Error:","Create method with `id` being called at:")),te.id=void 0),F({method:"create"},`${J(le)} ${a(1,4)}`,`${V("create")} ${C("Unsafe Input")}:`,{model:se,data:te});let ce=te;b.disableTransformInput||(ce=await $e(te,Y,"create",ee)),F({method:"create"},`${J(le)} ${a(2,4)}`,`${V("create")} ${C("Parsed Input")}:`,{model:se,data:ce});let me=await E.create({data:ce,model:se});F({method:"create"},`${J(le)} ${a(3,4)}`,`${V("create")} ${C("DB Result")}:`,{model:se,res:me});let H=me;return b.disableTransformOutput||(H=await v(me,Y,D,void 0)),F({method:"create"},`${J(le)} ${a(4,4)}`,`${V("create")} ${C("Parsed Result")}:`,{model:se,data:H}),H},update:async({model:te,where:Y,update:D})=>{let ee=++_,le=oe(te=G(te)),se=Z({model:te,where:Y,action:"update"});F({method:"update"},`${J(ee)} ${a(1,4)}`,`${V("update")} ${C("Unsafe Input")}:`,{model:le,data:D});let ce=D;b.disableTransformInput||(ce=await $e(D,te,"update")),F({method:"update"},`${J(ee)} ${a(2,4)}`,`${V("update")} ${C("Parsed Input")}:`,{model:le,data:ce});let me=await E.update({model:le,where:se,update:ce});F({method:"update"},`${J(ee)} ${a(3,4)}`,`${V("update")} ${C("DB Result")}:`,{model:le,data:me});let H=me;return b.disableTransformOutput||(H=await v(me,te,void 0,void 0)),F({method:"update"},`${J(ee)} ${a(4,4)}`,`${V("update")} ${C("Parsed Result")}:`,{model:le,data:H}),H},updateMany:async({model:te,where:Y,update:D})=>{let ee=++_,le=oe(te),se=Z({model:te,where:Y,action:"updateMany"});te=G(te),F({method:"updateMany"},`${J(ee)} ${a(1,4)}`,`${V("updateMany")} ${C("Unsafe Input")}:`,{model:le,data:D});let ce=D;b.disableTransformInput||(ce=await $e(D,te,"update")),F({method:"updateMany"},`${J(ee)} ${a(2,4)}`,`${V("updateMany")} ${C("Parsed Input")}:`,{model:le,data:ce});let me=await E.updateMany({model:le,where:se,update:ce});return F({method:"updateMany"},`${J(ee)} ${a(3,4)}`,`${V("updateMany")} ${C("DB Result")}:`,{model:le,data:me}),F({method:"updateMany"},`${J(ee)} ${a(4,4)}`,`${V("updateMany")} ${C("Parsed Result")}:`,{model:le,data:me}),me},findOne:async({model:te,where:Y,select:D,join:ee})=>{let le,se=++_,ce=oe(te),me=Z({model:te,where:Y,action:"findOne"});te=G(te);let H=!0;if(b.disableTransformJoin)le=ee;else{let fe=R(te,ee,D);fe&&(le=fe.join,D=fe.select),!N.experimental?.joins&&le&&Object.keys(le).length>0&&(H=!1)}F({method:"findOne"},`${J(se)} ${a(1,3)}`,`${V("findOne")}:`,{model:ce,where:me,select:D,join:le});let ue=await E.findOne({model:ce,where:me,select:D,join:H?le:void 0});F({method:"findOne"},`${J(se)} ${a(2,3)}`,`${V("findOne")} ${C("DB Result")}:`,{model:ce,data:ue});let x=ue;return b.disableTransformOutput||(x=await v(ue,te,D,le)),F({method:"findOne"},`${J(se)} ${a(3,3)}`,`${V("findOne")} ${C("Parsed Result")}:`,{model:ce,data:x}),x},findMany:async({model:te,where:Y,limit:D,sortBy:ee,offset:le,join:se})=>{let ce,me=++_,H=D??N.advanced?.database?.defaultFindManyLimit??100,ue=oe(te),x=Z({model:te,where:Y,action:"findMany"});te=G(te);let fe=!0;if(b.disableTransformJoin)ce=se;else{let Re=R(te,se,void 0);Re&&(ce=Re.join),!N.experimental?.joins&&ce&&Object.keys(ce).length>0&&(fe=!1)}F({method:"findMany"},`${J(me)} ${a(1,3)}`,`${V("findMany")}:`,{model:ue,where:x,limit:H,sortBy:ee,offset:le,join:ce});let ge=await E.findMany({model:ue,where:x,limit:H,sortBy:ee,offset:le,join:fe?ce:void 0});F({method:"findMany"},`${J(me)} ${a(2,3)}`,`${V("findMany")} ${C("DB Result")}:`,{model:ue,data:ge});let Se=ge;return b.disableTransformOutput||(Se=await Promise.all(ge.map(async Re=>await v(Re,te,void 0,ce)))),F({method:"findMany"},`${J(me)} ${a(3,3)}`,`${V("findMany")} ${C("Parsed Result")}:`,{model:ue,data:Se}),Se},delete:async({model:te,where:Y})=>{let D=++_,ee=oe(te),le=Z({model:te,where:Y,action:"delete"});te=G(te),F({method:"delete"},`${J(D)} ${a(1,2)}`,`${V("delete")}:`,{model:ee,where:le}),await E.delete({model:ee,where:le}),F({method:"delete"},`${J(D)} ${a(2,2)}`,`${V("delete")} ${C("DB Result")}:`,{model:ee})},deleteMany:async({model:te,where:Y})=>{let D=++_,ee=oe(te),le=Z({model:te,where:Y,action:"deleteMany"});te=G(te),F({method:"deleteMany"},`${J(D)} ${a(1,2)}`,`${V("deleteMany")} ${C("DeleteMany")}:`,{model:ee,where:le});let se=await E.deleteMany({model:ee,where:le});return F({method:"deleteMany"},`${J(D)} ${a(2,2)}`,`${V("deleteMany")} ${C("DB Result")}:`,{model:ee,data:se}),se},count:async({model:te,where:Y})=>{let D=++_,ee=oe(te),le=Z({model:te,where:Y,action:"count"});te=G(te),F({method:"count"},`${J(D)} ${a(1,2)}`,`${V("count")}:`,{model:ee,where:le});let se=await E.count({model:ee,where:le});return F({method:"count"},`${J(D)} ${a(2,2)}`,`${V("count")}:`,{model:ee,data:se}),se},createSchema:E.createSchema?async(te,Y)=>{let D=(0,W.y)(N);return N.secondaryStorage&&!N.session?.storeSessionInDatabase&&delete D.session,E.createSchema({file:Y,tables:D})}:void 0,options:{adapterConfig:b,...E.options??{}},id:b.adapterId,...b.debugLogs?.isRunningAdapterTests?{adapterTestDebugLogs:{resetDebugLogs(){p=p.filter(te=>te.instance!==P)},printDebugLogs(){let te="\u2500".repeat(80),Y=p.filter(D=>D.instance===P);Y.length!==0&&console.log(...Y.reverse().map(D=>(D.args[0]=`
${D.args[0]}`,[...D.args,`
`])).reduce((D,ee)=>[...ee,...D],[`
${te}`]))}}}:{}};return U};function J(L){return 8>(0,K.t)()?`#${L}`:`${i.p4.fg.magenta}#${L}${i.p4.reset}`}function a(L,k){return`${i.p4.bg.black}${i.p4.fg.yellow}[${L}/${k}]${i.p4.reset}`}function V(L){return`${i.p4.bright}${L}${i.p4.reset}`}function C(L){return`${i.p4.dim}(${L})${i.p4.reset}`}},Le.__chunk_584=(Ue,ie,o)=>{"use strict";let d,y;o.d(ie,{Bx:()=>tn});class h extends Error{code;extendedCode;rawCode;constructor(u,B,de,je,Xe){B!==void 0&&(u=`${B}: ${u}`),super(u,{cause:Xe}),this.code=B,this.extendedCode=de,this.rawCode=je,this.name="LibsqlError"}}class i extends h{statementIndex;constructor(u,B,de,je,Xe,pt){super(u,de,je,Xe,pt),this.statementIndex=B,this.name="LibsqlBatchError"}}let s=RegExp("^(?<scheme>[A-Za-z][A-Za-z.+-]*):(//(?<authority>[^/?#]*))?(?<path>[^?#]*)(\\?(?<query>[^#]*))?(#(?<fragment>.*))?$","su"),c=RegExp("^((?<username>[^:]*)(:(?<password>.*))?@)?((?<host>[^:\\[\\]]*)|(\\[(?<host_br>[^\\[\\]]*)\\]))(:(?<port>[0-9]*))?$","su");function O(T){try{return decodeURIComponent(T)}catch(u){throw u instanceof URIError?new h(`URL component has invalid percent encoding: ${u}`,"URL_INVALID",void 0,void 0,u):u}}function j(T,u,B){var de,je;if(u===void 0)throw new h(`URL with scheme ${JSON.stringify(T+":")} requires authority (the "//" part)`,"URL_INVALID");let Xe=`${T}:`,pt=(de=u.host).includes(":")?`[${encodeURI(de)}]`:encodeURI(de),Qe=(je=u.port)!==void 0?`:${je}`:"",mt=function(kr){if(kr===void 0)return"";let Pr=encodeURIComponent(kr.username),$r=kr.password!==void 0?`:${encodeURIComponent(kr.password)}`:"";return`${Pr}${$r}@`}(u.userinfo),rr=`//${mt}${pt}${Qe}`,Ir=B.split("/").map(encodeURIComponent).join("/");return Ir===""||Ir.startsWith("/")||(Ir="/"+Ir),new URL(`${Xe}${rr}${Ir}`)}var $=o(25356).Buffer;let W=typeof $=="function",K=typeof TextDecoder=="function"?new TextDecoder:void 0,I=typeof TextEncoder=="function"?new TextEncoder:void 0,p=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),_=(T=>{let u={};return T.forEach((B,de)=>u[B]=de),u})(p),m=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,q=String.fromCharCode.bind(String),J=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):T=>new Uint8Array(Array.prototype.slice.call(T,0)),a=T=>T.replace(/=/g,"").replace(/[+\/]/g,u=>u=="+"?"-":"_"),V=T=>T.replace(/[^A-Za-z0-9\+\/]/g,""),C=typeof btoa=="function"?T=>btoa(T):W?T=>$.from(T,"binary").toString("base64"):T=>{let u,B,de,je,Xe="",pt=T.length%3;for(let Qe=0;Qe<T.length;){if((B=T.charCodeAt(Qe++))>255||(de=T.charCodeAt(Qe++))>255||(je=T.charCodeAt(Qe++))>255)throw TypeError("invalid character found");Xe+=p[(u=B<<16|de<<8|je)>>18&63]+p[u>>12&63]+p[u>>6&63]+p[63&u]}return pt?Xe.slice(0,pt-3)+"===".substring(pt):Xe},L=W?T=>$.from(T).toString("base64"):T=>{let u=[];for(let B=0,de=T.length;B<de;B+=4096)u.push(q.apply(null,T.subarray(B,B+4096)));return C(u.join(""))},k=(T,u=!1)=>u?a(L(T)):L(T),N=T=>{if(T.length<2){var u=T.charCodeAt(0);return u<128?T:u<2048?q(192|u>>>6)+q(128|63&u):q(224|u>>>12&15)+q(128|u>>>6&63)+q(128|63&u)}var u=65536+(T.charCodeAt(0)-55296)*1024+(T.charCodeAt(1)-56320);return q(240|u>>>18&7)+q(128|u>>>12&63)+q(128|u>>>6&63)+q(128|63&u)},P=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,b=T=>T.replace(P,N),z=W?T=>$.from(T,"utf8").toString("base64"):I?T=>L(I.encode(T)):T=>C(b(T)),F=(T,u=!1)=>u?a(z(T)):z(T),Q=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,G=T=>{switch(T.length){case 4:var u=((7&T.charCodeAt(0))<<18|(63&T.charCodeAt(1))<<12|(63&T.charCodeAt(2))<<6|63&T.charCodeAt(3))-65536;return q((u>>>10)+55296)+q((1023&u)+56320);case 3:return q((15&T.charCodeAt(0))<<12|(63&T.charCodeAt(1))<<6|63&T.charCodeAt(2));default:return q((31&T.charCodeAt(0))<<6|63&T.charCodeAt(1))}},X=T=>T.replace(Q,G),oe=typeof atob=="function"?T=>atob(V(T)):W?T=>$.from(T,"base64").toString("binary"):T=>{let u,B,de;if(T=T.replace(/\s+/g,""),!m.test(T))throw TypeError("malformed base64.");T+="==".slice(2-(3&T.length));let je=[];for(let Xe=0;Xe<T.length;)u=_[T.charAt(Xe++)]<<18|_[T.charAt(Xe++)]<<12|(B=_[T.charAt(Xe++)])<<6|(de=_[T.charAt(Xe++)]),B===64?je.push(q(u>>16&255)):de===64?je.push(q(u>>16&255,u>>8&255)):je.push(q(u>>16&255,u>>8&255,255&u));return je.join("")},ne=W?T=>J($.from(T,"base64")):T=>J(oe(T).split("").map(u=>u.charCodeAt(0))),we=T=>ne($e(T)),Ee=W?T=>$.from(T,"base64").toString("utf8"):K?T=>K.decode(ne(T)):T=>X(oe(T)),$e=T=>V(T.replace(/[-_]/g,u=>u=="-"?"+":"/")),v=T=>Ee($e(T)),Z=T=>({value:T,enumerable:!1,writable:!0,configurable:!0}),R={fromUint8Array:k,toUint8Array:we},S="https://github.com/libsql/libsql-client-ts#supported-urls";function E(T){if(T==="write")return"BEGIN IMMEDIATE";if(T==="read")return"BEGIN TRANSACTION READONLY";if(T==="deferred")return"BEGIN DEFERRED";throw RangeError('Unknown transaction mode, supported values are "write", "read" and "deferred"')}class A{columns;columnTypes;rows;rowsAffected;lastInsertRowid;constructor(u,B,de,je,Xe){this.columns=u,this.columnTypes=B,this.rows=de,this.rowsAffected=je,this.lastInsertRowid=Xe}toJSON(){return{columns:this.columns,columnTypes:this.columnTypes,rows:this.rows.map(U),rowsAffected:this.rowsAffected,lastInsertRowid:this.lastInsertRowid!==void 0?""+this.lastInsertRowid:null}}}function U(T){return Array.prototype.map.call(T,te)}function te(T){return typeof T=="bigint"?""+T:T instanceof ArrayBuffer?R.fromUint8Array(new Uint8Array(T)):T}let Y=":memory:";typeof WebSocket<"u"?d=WebSocket:typeof Wu<"u"?d=Wu.WebSocket:typeof window<"u"?d=window.WebSocket:typeof is<"u"&&(d=is.WebSocket);class D{constructor(){this.intMode="number"}intMode}class ee extends Error{constructor(u){super(u),this.name="ClientError"}}class le extends ee{constructor(u){super(u),this.name="ProtoError"}}class se extends ee{code;proto;constructor(u,B){super(u),this.name="ResponseError",this.code=B.code,this.proto=B,this.stack=void 0}}class ce extends ee{constructor(u,B){B!==void 0?(super(`${u}: ${B}`),this.cause=B):super(u),this.name="ClosedError"}}class me extends ee{constructor(u){super(u),this.name="WebSocketUnsupportedError"}}class H extends ee{constructor(u){super(u),this.name="WebSocketError"}}class ue extends ee{status;constructor(u,B){super(u),this.status=B,this.name="HttpServerError"}}class x extends ee{constructor(u){super(u),this.name="ProtocolVersionError"}}class fe extends ee{constructor(u){super(u),this.name="InternalError"}}class ge extends ee{constructor(u){super(u),this.name="MisuseError"}}function Se(T){if(typeof T=="string")return T;throw Ye(T,"string")}function Re(T){if(T!=null){if(typeof T=="string")return T;throw Ye(T,"string or null")}}function ae(T){if(typeof T=="number")return T;throw Ye(T,"number")}function Ae(T){if(typeof T=="boolean")return T;throw Ye(T,"boolean")}function lt(T){if(Array.isArray(T))return T;throw Ye(T,"array")}function Je(T){if(T!==null&&typeof T=="object"&&!Array.isArray(T))return T;throw Ye(T,"object")}function rt(T,u){return lt(T).map(B=>u(Je(B)))}function Ye(T,u){if(T===void 0)return new le(`Expected ${u}, but the property was missing`);let B=typeof T;return T===null?B="null":Array.isArray(T)&&(B="array"),new le(`Expected ${u}, received ${B}`)}class St{#e;#t;constructor(u){this.#e=u,this.#t=!1}begin(){this.#e.push("{"),this.#t=!0}end(){this.#e.push("}"),this.#t=!1}#r(u){this.#t?(this.#e.push('"'),this.#t=!1):this.#e.push(',"'),this.#e.push(u),this.#e.push('":')}string(u,B){this.#r(u),this.#e.push(JSON.stringify(B))}stringRaw(u,B){this.#r(u),this.#e.push('"'),this.#e.push(B),this.#e.push('"')}number(u,B){this.#r(u),this.#e.push(""+B)}boolean(u,B){this.#r(u),this.#e.push(B?"true":"false")}object(u,B,de){this.#r(u),this.begin(),de(this,B),this.end()}arrayObjects(u,B,de){this.#r(u),this.#e.push("[");for(let je=0;je<B.length;++je)je!==0&&this.#e.push(","),this.begin(),de(this,B[je]),this.end();this.#e.push("]")}}function bt(T,u){let B=[],de=new St(B);return de.begin(),u(de,T),de.end(),B.join("")}class qe{#e;#t;#r;constructor(u){this.#e=u,this.#t=new DataView(u.buffer,u.byteOffset,u.byteLength),this.#r=0}varint(){let u=0;for(let B=0;;B+=7){let de=this.#e[this.#r++];if(u|=(127&de)<<B,!(128&de))break}return u}varintBig(){let u=0n;for(let B=0n;;B+=7n){let de=this.#e[this.#r++];if(u|=BigInt(127&de)<<B,!(128&de))break}return u}bytes(u){let B=new Uint8Array(this.#e.buffer,this.#e.byteOffset+this.#r,u);return this.#r+=u,B}double(){let u=this.#t.getFloat64(this.#r,!0);return this.#r+=8,u}skipVarint(){for(;128&this.#e[this.#r++];);}skip(u){this.#r+=u}eof(){return this.#r>=this.#e.byteLength}}class re{#e;#t;constructor(u){this.#e=u,this.#t=-1}setup(u){this.#t=u}#r(u){if(this.#t!==u)throw new le(`Expected wire type ${u}, got ${this.#t}`);this.#t=-1}bytes(){this.#r(2);let u=this.#e.varint();return this.#e.bytes(u)}string(){return new TextDecoder().decode(this.bytes())}message(u){return We(this.bytes(),u)}int32(){return this.#r(0),this.#e.varint()}uint32(){return this.int32()}bool(){return this.int32()!==0}uint64(){return this.#r(0),this.#e.varintBig()}sint64(){let u=this.uint64();return u>>1n^-(1n&u)}double(){return this.#r(1),this.#e.double()}maybeSkip(){if(!(this.#t<0)){if(this.#t===0)this.#e.skipVarint();else if(this.#t===1)this.#e.skip(8);else if(this.#t===2){let u=this.#e.varint();this.#e.skip(u)}else if(this.#t===5)this.#e.skip(4);else throw new le(`Unexpected wire type ${this.#t}`);this.#t=-1}}}function We(T,u){let B=new qe(T),de=new re(B),je=u.default();for(;!B.eof();){let Xe=B.varint(),pt=Xe>>3,Qe=7&Xe;de.setup(Qe);let mt=u[pt];if(mt!==void 0){let rr=mt(de,je);rr!==void 0&&(je=rr)}de.maybeSkip()}return je}class ut{#e;#t;#r;#i;constructor(){this.#e=new ArrayBuffer(256),this.#t=new Uint8Array(this.#e),this.#r=new DataView(this.#e),this.#i=0}#n(u){if(this.#i+u<=this.#e.byteLength)return;let B=this.#e.byteLength;for(;B<this.#i+u;)B*=2;let de=new ArrayBuffer(B),je=new Uint8Array(de),Xe=new DataView(de);je.set(new Uint8Array(this.#e,0,this.#i)),this.#e=de,this.#t=je,this.#r=Xe}#s(u){this.#n(5),u|=0;do{let B=127&u;u>>>=7,B|=128*!!u,this.#t[this.#i++]=B}while(u)}#a(u){this.#n(10),u&=0xffffffffffffffffn;do{let B=Number(127n&u);u>>=7n,B|=128*!!u,this.#t[this.#i++]=B}while(u)}#o(u,B){this.#s(u<<3|B)}bytes(u,B){this.#o(u,2),this.#s(B.byteLength),this.#n(B.byteLength),this.#t.set(B,this.#i),this.#i+=B.byteLength}string(u,B){this.bytes(u,new TextEncoder().encode(B))}message(u,B,de){let je=new ut;de(je,B),this.bytes(u,je.data())}int32(u,B){this.#o(u,0),this.#s(B)}uint32(u,B){this.int32(u,B)}bool(u,B){this.int32(u,+!!B)}sint64(u,B){this.#o(u,0),this.#a(B<<1n^B>>63n)}double(u,B){this.#o(u,1),this.#n(8),this.#r.setFloat64(this.#i,B,!0),this.#i+=8}data(){return new Uint8Array(this.#e,0,this.#i)}}function kt(T,u){let B=new ut;return u(B,T),B.data()}class Ct{#e;#t;constructor(){this.#e=new Set,this.#t=new Set}alloc(){for(let B of this.#t)return this.#t.delete(B),this.#e.add(B),this.#e.has(this.#e.size-1)||this.#t.add(this.#e.size-1),B;let u=this.#e.size;return this.#e.add(u),u}free(u){if(!this.#e.delete(u))throw new fe("Freeing an id that is not allocated");this.#t.delete(this.#e.size),u<this.#e.size&&this.#t.add(u)}}function tt(T,u){throw new fe(u)}function Ot(T){if(T===null)return null;if(typeof T=="string")return T;if(typeof T=="number"){if(!Number.isFinite(T))throw RangeError("Only finite numbers (not Infinity or NaN) can be passed as arguments");return T}if(typeof T=="bigint"){if(T<Wt||T>yt)throw RangeError("This bigint value is too large to be represented as a 64-bit integer and passed as argument");return T}if(typeof T=="boolean")return T?1n:0n;if(T instanceof ArrayBuffer)return new Uint8Array(T);if(T instanceof Uint8Array)return T;if(T instanceof Date)return+T.valueOf();if(typeof T=="object")return""+T.toString();throw TypeError("Unsupported type of value")}let Wt=-0x8000000000000000n,yt=0x7fffffffffffffffn;function ct(T,u){if(T===null)return null;if(typeof T=="number"||typeof T=="string")return T;if(typeof T=="bigint"){if(u==="number"){let B=Number(T);if(!Number.isSafeInteger(B))throw RangeError("Received integer which is too large to be safely represented as a JavaScript number");return B}if(u==="bigint")return T;if(u==="string")return""+T;throw new ge("Invalid value for IntMode")}if(T instanceof Uint8Array)return T.slice().buffer;throw T===void 0?new le("Received unrecognized type of Value"):tt(T,"Impossible type of Value")}function vt(T){return{affectedRowCount:T.affectedRowCount,lastInsertRowid:T.lastInsertRowid,columnNames:T.cols.map(u=>u.name),columnDecltypes:T.cols.map(u=>u.decltype)}}function Ut(T,u){let B=vt(T),de=T.rows.map(je=>ke(B.columnNames,je,u));return{...B,rows:de}}function nr(T,u){let B,de=vt(T);return T.rows.length>0&&(B=ke(de.columnNames,T.rows[0],u)),{...de,row:B}}function br(T,u){let B,de=vt(T);return T.rows.length>0&&de.columnNames.length>0&&(B=ct(T.rows[0][0],u)),{...de,value:B}}function ke(T,u,B){let de={};Object.defineProperty(de,"length",{value:u.length});for(let je=0;je<u.length;++je){let Xe=ct(u[je],B);Object.defineProperty(de,je,{value:Xe});let pt=T[je];pt===void 0||Object.hasOwn(de,pt)||Object.defineProperty(de,pt,{value:Xe,enumerable:!0,configurable:!0,writable:!0})}return de}function xe(T){return new se(T.message,T)}class Fe{#e;#t;#r;constructor(u,B){this.#e=u,this.#t=B,this.#r=void 0}_getSqlId(u){if(this.#e!==u)throw new ge("Attempted to use SQL text opened with other object");if(this.#r!==void 0)throw new ce("SQL text is closed",this.#r);return this.#t}close(){this._setClosed(new ee("SQL text was manually closed"))}_setClosed(u){this.#r===void 0&&(this.#r=u,this.#e._closeSql(this.#t))}get closed(){return this.#r!==void 0}}function Ze(T,u){return u instanceof Fe?{sqlId:u._getSqlId(T)}:{sql:""+u}}class ht{#e;#t;constructor(){this.#e=[],this.#t=[]}get length(){return this.#e.length+this.#t.length}push(u){this.#e.push(u)}shift(){return this.#t.length===0&&this.#e.length>0&&(this.#t=this.#e.reverse(),this.#e=[]),this.#t.pop()}first(){return this.#t.length!==0?this.#t[this.#t.length-1]:this.#e[0]}}class dt{sql;_args;_namedArgs;constructor(u){this.sql=u,this._args=[],this._namedArgs=new Map}bindIndexes(u){for(let B of(this._args.length=0,u))this._args.push(Ot(B));return this}bindIndex(u,B){if(u!==(0|u)||u<=0)throw RangeError("Index of a positional argument must be positive integer");for(;this._args.length<u;)this._args.push(null);return this._args[u-1]=Ot(B),this}bindName(u,B){return this._namedArgs.set(u,Ot(B)),this}unbindAll(){return this._args.length=0,this._namedArgs.clear(),this}}function Et(T,u,B){let de,je=[],Xe=[];if(u instanceof dt)for(let[mt,rr]of(de=u.sql,je=u._args,u._namedArgs.entries()))Xe.push({name:mt,value:rr});else Array.isArray(u)?(de=u[0],Array.isArray(u[1])?je=u[1].map(mt=>Ot(mt)):Xe=Object.entries(u[1]).map(([mt,rr])=>({name:mt,value:Ot(rr)}))):de=u;let{sql:pt,sqlId:Qe}=Ze(T,de);return{sql:pt,sqlId:Qe,args:je,namedArgs:Xe,wantRows:B}}class It{_stream;#e;_steps;#t;constructor(u,B){this._stream=u,this.#e=B,this._steps=[],this.#t=!1}step(){return new Ft(this)}execute(){var u,B,de;if(this.#t)throw new ge("This batch has already been executed");this.#t=!0;let je={steps:this._steps.map(Xe=>Xe.proto)};return this.#e?jt(this._stream,this._steps,je):(u=this._stream,B=this._steps,de=je,u._batch(de).then(Xe=>{for(let pt=0;pt<B.length;++pt){let Qe=Xe.stepResults.get(pt),mt=Xe.stepErrors.get(pt);B[pt].callback(Qe,mt)}}))}}async function jt(T,u,B){let de=await T._openCursor(B);try{let je,Xe=0,pt=[];for(;;){let Qe=await de.next();if(Qe===void 0)break;if(Qe.type==="step_begin"){if(Qe.step<Xe||Qe.step>=u.length)throw new le("Server produced StepBeginEntry for unexpected step");if(je!==void 0)throw new le("Server produced StepBeginEntry before terminating previous step");for(let mt=Xe;mt<Qe.step;++mt)u[mt].callback(void 0,void 0);Xe=Qe.step+1,je=Qe,pt=[]}else if(Qe.type==="step_end"){if(je===void 0)throw new le("Server produced StepEndEntry but no step is active");let mt={cols:je.cols,rows:pt,affectedRowCount:Qe.affectedRowCount,lastInsertRowid:Qe.lastInsertRowid};u[je.step].callback(mt,void 0),je=void 0,pt=[]}else if(Qe.type==="step_error"){if(je===void 0){if(Qe.step>=u.length)throw new le("Server produced StepErrorEntry for unexpected step");for(let mt=Xe;mt<Qe.step;++mt)u[mt].callback(void 0,void 0)}else{if(Qe.step!==je.step)throw new le("Server produced StepErrorEntry for unexpected step");je=void 0,pt=[]}u[Qe.step].callback(void 0,Qe.error),Xe=Qe.step+1}else if(Qe.type==="row"){if(je===void 0)throw new le("Server produced RowEntry but no step is active");pt.push(Qe.row)}else throw Qe.type==="error"?xe(Qe.error):Qe.type==="none"?new le("Server produced unrecognized CursorEntry"):tt(Qe,"Impossible CursorEntry")}if(je!==void 0)throw new le("Server closed Cursor before terminating active step");for(let Qe=Xe;Qe<u.length;++Qe)u[Qe].callback(void 0,void 0)}finally{de.close()}}class Ft{_batch;#e;_index;constructor(u){this._batch=u,this.#e=[],this._index=void 0}condition(u){return this.#e.push(u._proto),this}query(u){return this.#t(u,!0,Ut)}queryRow(u){return this.#t(u,!0,nr)}queryValue(u){return this.#t(u,!0,br)}run(u){return this.#t(u,!1,vt)}#t(u,B,de){let je;if(this._index!==void 0)throw new ge("This BatchStep has already been added to the batch");let Xe={stmt:Et(this._batch._stream._sqlOwner(),u,B),condition:this.#e.length===0?void 0:this.#e.length===1?this.#e[0]:{type:"and",conds:this.#e.slice()}};return new Promise((pt,Qe)=>{this._index=this._batch._steps.length,this._batch._steps.push({proto:Xe,callback:(mt,rr)=>{mt!==void 0&&rr!==void 0?Qe(new le("Server returned both result and error")):rr!==void 0?Qe(xe(rr)):pt(mt!==void 0?de(mt,this._batch._stream.intMode):void 0)}})})}}class f{_batch;_proto;constructor(u,B){this._batch=u,this._proto=B}static ok(u){return new f(u._batch,{type:"ok",step:ye(u)})}static error(u){return new f(u._batch,{type:"error",step:ye(u)})}static not(u){return new f(u._batch,{type:"not",cond:u._proto})}static and(u,B){for(let de of B)Ie(u,de);return new f(u,{type:"and",conds:B.map(de=>de._proto)})}static or(u,B){for(let de of B)Ie(u,de);return new f(u,{type:"or",conds:B.map(de=>de._proto)})}static isAutocommit(u){return u._stream.client()._ensureVersion(3,"BatchCond.isAutocommit()"),new f(u,{type:"is_autocommit"})}}function ye(T){if(T._index===void 0)throw new ge("Cannot add a condition referencing a step that has not been added to the batch");return T._index}function Ie(T,u){if(u._batch!==T)throw new ge("Cannot mix BatchCond objects for different Batch objects")}function Te(T){return{paramNames:T.params.map(u=>u.name),columns:T.cols,isExplain:T.isExplain,isReadonly:T.isReadonly}}class ze{constructor(u){this.intMode=u}query(u){return this.#e(u,!0,Ut)}queryRow(u){return this.#e(u,!0,nr)}queryValue(u){return this.#e(u,!0,br)}run(u){return this.#e(u,!1,vt)}#e(u,B,de){let je=Et(this._sqlOwner(),u,B);return this._execute(je).then(Xe=>de(Xe,this.intMode))}batch(u=!1){return new It(this,u)}describe(u){let B=Ze(this._sqlOwner(),u);return this._describe(B).then(Te)}sequence(u){let B=Ze(this._sqlOwner(),u);return this._sequence(B)}intMode}class Ce{}class He extends Ce{#e;#t;#r;#i;#n;#s;#a;constructor(u,B,de){super(),this.#e=u,this.#t=B,this.#r=de,this.#i=new ht,this.#n=new ht,this.#s=void 0,this.#a=!1}async next(){for(;;){if(this.#s!==void 0)throw new ce("Cursor is closed",this.#s);for(;!this.#a&&this.#n.length<10;)this.#n.push(this.#o());let u=this.#i.shift();if(this.#a||u!==void 0)return u;await this.#n.shift().then(B=>{if(B!==void 0){for(let de of B.entries)this.#i.push(de);this.#a||=B.done}})}}#o(){return this.#t._sendCursorRequest(this,{type:"fetch_cursor",cursorId:this.#r,maxCount:1e3}).then(u=>u,u=>{this._setClosed(u)})}_setClosed(u){this.#s===void 0&&(this.#s=u,this.#t._sendCursorRequest(this,{type:"close_cursor",cursorId:this.#r}).catch(()=>{}),this.#t._cursorClosed(this))}close(){this._setClosed(new ee("Cursor was manually closed"))}get closed(){return this.#s!==void 0}}class Ge extends ze{#e;#t;#r;#i;#n;#s;static open(u){let B=u._streamIdAlloc.alloc(),de=new Ge(u,B);return u._sendRequest({type:"open_stream",streamId:B},{responseCallback:()=>{},errorCallback:je=>de.#u(je)}),de}constructor(u,B){super(u.intMode),this.#e=u,this.#t=B,this.#r=new ht,this.#i=void 0,this.#n=!1,this.#s=void 0}client(){return this.#e}_sqlOwner(){return this.#e}_execute(u){return this.#a({type:"execute",streamId:this.#t,stmt:u}).then(B=>B.result)}_batch(u){return this.#a({type:"batch",streamId:this.#t,batch:u}).then(B=>B.result)}_describe(u){return this.#e._ensureVersion(2,"describe()"),this.#a({type:"describe",streamId:this.#t,sql:u.sql,sqlId:u.sqlId}).then(B=>B.result)}_sequence(u){return this.#e._ensureVersion(2,"sequence()"),this.#a({type:"sequence",streamId:this.#t,sql:u.sql,sqlId:u.sqlId}).then(B=>{})}getAutocommit(){return this.#e._ensureVersion(3,"getAutocommit()"),this.#a({type:"get_autocommit",streamId:this.#t}).then(u=>u.isAutocommit)}#a(u){return new Promise((B,de)=>{this.#o({type:"request",request:u,responseCallback:B,errorCallback:de})})}_openCursor(u){return this.#e._ensureVersion(3,"cursor"),new Promise((B,de)=>{this.#o({type:"cursor",batch:u,cursorCallback:B,errorCallback:de})})}_sendCursorRequest(u,B){if(u!==this.#i)throw new fe("Cursor not associated with the stream attempted to execute a request");return new Promise((de,je)=>{this.#s!==void 0?je(new ce("Stream is closed",this.#s)):this.#e._sendRequest(B,{responseCallback:de,errorCallback:je})})}_cursorClosed(u){if(u!==this.#i)throw new fe("Cursor was closed, but it was not associated with the stream");this.#i=void 0,this.#l()}#o(u){this.#s!==void 0?u.errorCallback(new ce("Stream is closed",this.#s)):this.#n?u.errorCallback(new ce("Stream is closing",void 0)):(this.#r.push(u),this.#l())}#l(){for(;;){let u=this.#r.first();if(u===void 0&&this.#i===void 0&&this.#n){this.#u(new ee("Stream was gracefully closed"));break}if(u?.type==="request"&&this.#i===void 0){let{request:B,responseCallback:de,errorCallback:je}=u;this.#r.shift(),this.#e._sendRequest(B,{responseCallback:de,errorCallback:je})}else if(u?.type==="cursor"&&this.#i===void 0){let{batch:B,cursorCallback:de}=u;this.#r.shift();let je=this.#e._cursorIdAlloc.alloc(),Xe=new He(this.#e,this,je),pt={type:"open_cursor",streamId:this.#t,cursorId:je,batch:B},Qe=()=>{},mt=rr=>Xe._setClosed(rr);this.#e._sendRequest(pt,{responseCallback:Qe,errorCallback:mt}),this.#i=Xe,de(Xe)}else break}}#u(u){if(this.#s!==void 0)return;for(this.#s=u,this.#i!==void 0&&this.#i._setClosed(u);;){let de=this.#r.shift();if(de!==void 0)de.errorCallback(u);else break}let B={type:"close_stream",streamId:this.#t};this.#e._sendRequest(B,{responseCallback:()=>this.#e._streamIdAlloc.free(this.#t),errorCallback:()=>{}})}close(){this.#u(new ee("Stream was manually closed"))}closeGracefully(){this.#n=!0,this.#l()}get closed(){return this.#s!==void 0||this.#n}}function it(T,u){u.sql!==void 0&&T.string("sql",u.sql),u.sqlId!==void 0&&T.number("sql_id",u.sqlId),T.arrayObjects("args",u.args,Qt),T.arrayObjects("named_args",u.namedArgs,gt),T.boolean("want_rows",u.wantRows)}function gt(T,u){T.string("name",u.name),T.object("value",u.value,Qt)}function at(T,u){T.arrayObjects("steps",u.steps,wt)}function wt(T,u){u.condition!==void 0&&T.object("condition",u.condition,Tt),T.object("stmt",u.stmt,it)}function Tt(T,u){if(T.stringRaw("type",u.type),u.type==="ok"||u.type==="error")T.number("step",u.step);else if(u.type==="not")T.object("cond",u.cond,Tt);else if(u.type==="and"||u.type==="or")T.arrayObjects("conds",u.conds,Tt);else if(u.type!=="is_autocommit")throw tt(u,"Impossible type of BatchCond")}function Qt(T,u){if(u===null)T.stringRaw("type","null");else if(typeof u=="bigint")T.stringRaw("type","integer"),T.stringRaw("value",""+u);else if(typeof u=="number")T.stringRaw("type","float"),T.number("value",u);else if(typeof u=="string")T.stringRaw("type","text"),T.string("value",u);else if(u instanceof Uint8Array)T.stringRaw("type","blob"),T.stringRaw("base64",R.fromUint8Array(u));else if(u!==void 0)throw tt(u,"Impossible type of Value")}function Jt(T,u){if(T.stringRaw("type",u.type),u.type==="hello")u.jwt!==void 0&&T.string("jwt",u.jwt);else if(u.type==="request")T.number("request_id",u.requestId),T.object("request",u.request,er);else throw tt(u,"Impossible type of ClientMsg")}function er(T,u){if(T.stringRaw("type",u.type),u.type==="open_stream")T.number("stream_id",u.streamId);else if(u.type==="close_stream")T.number("stream_id",u.streamId);else if(u.type==="execute")T.number("stream_id",u.streamId),T.object("stmt",u.stmt,it);else if(u.type==="batch")T.number("stream_id",u.streamId),T.object("batch",u.batch,at);else if(u.type==="open_cursor")T.number("stream_id",u.streamId),T.number("cursor_id",u.cursorId),T.object("batch",u.batch,at);else if(u.type==="close_cursor")T.number("cursor_id",u.cursorId);else if(u.type==="fetch_cursor")T.number("cursor_id",u.cursorId),T.number("max_count",u.maxCount);else if(u.type==="sequence")T.number("stream_id",u.streamId),u.sql!==void 0&&T.string("sql",u.sql),u.sqlId!==void 0&&T.number("sql_id",u.sqlId);else if(u.type==="describe")T.number("stream_id",u.streamId),u.sql!==void 0&&T.string("sql",u.sql),u.sqlId!==void 0&&T.number("sql_id",u.sqlId);else if(u.type==="store_sql")T.number("sql_id",u.sqlId),T.string("sql",u.sql);else if(u.type==="close_sql")T.number("sql_id",u.sqlId);else if(u.type==="get_autocommit")T.number("stream_id",u.streamId);else throw tt(u,"Impossible type of Request")}function $t(T,u){for(let B of(u.sql!==void 0&&T.string(1,u.sql),u.sqlId!==void 0&&T.int32(2,u.sqlId),u.args))T.message(3,B,ur);for(let B of u.namedArgs)T.message(4,B,Pt);T.bool(5,u.wantRows)}function Pt(T,u){T.string(1,u.name),T.message(2,u.value,ur)}function qt(T,u){for(let B of u.steps)T.message(1,B,or)}function or(T,u){u.condition!==void 0&&T.message(1,u.condition,Vt),T.message(2,u.stmt,$t)}function Vt(T,u){if(u.type==="ok")T.uint32(1,u.step);else if(u.type==="error")T.uint32(2,u.step);else if(u.type==="not")T.message(3,u.cond,Vt);else if(u.type==="and")T.message(4,u.conds,lr);else if(u.type==="or")T.message(5,u.conds,lr);else if(u.type==="is_autocommit")T.message(6,void 0,gr);else throw tt(u,"Impossible type of BatchCond")}function lr(T,u){for(let B of u)T.message(1,B,Vt)}function ur(T,u){if(u===null)T.message(1,void 0,gr);else if(typeof u=="bigint")T.sint64(2,u);else if(typeof u=="number")T.double(3,u);else if(typeof u=="string")T.string(4,u);else if(u instanceof Uint8Array)T.bytes(5,u);else if(u!==void 0)throw tt(u,"Impossible type of Value")}function gr(T,u){}function Or(T,u){if(u.type==="hello")T.message(1,u,ir);else if(u.type==="request")T.message(2,u,vr);else throw tt(u,"Impossible type of ClientMsg")}function ir(T,u){u.jwt!==void 0&&T.string(1,u.jwt)}function vr(T,u){T.int32(1,u.requestId);let B=u.request;if(B.type==="open_stream")T.message(2,B,Cr);else if(B.type==="close_stream")T.message(3,B,Mr);else if(B.type==="execute")T.message(4,B,Wr);else if(B.type==="batch")T.message(5,B,Ti);else if(B.type==="open_cursor")T.message(6,B,Kr);else if(B.type==="close_cursor")T.message(7,B,yi);else if(B.type==="fetch_cursor")T.message(8,B,ii);else if(B.type==="sequence")T.message(9,B,Ii);else if(B.type==="describe")T.message(10,B,Ei);else if(B.type==="store_sql")T.message(11,B,un);else if(B.type==="close_sql")T.message(12,B,Cn);else if(B.type==="get_autocommit")T.message(13,B,Pn);else throw tt(B,"Impossible type of Request")}function Cr(T,u){T.int32(1,u.streamId)}function Mr(T,u){T.int32(1,u.streamId)}function Wr(T,u){T.int32(1,u.streamId),T.message(2,u.stmt,$t)}function Ti(T,u){T.int32(1,u.streamId),T.message(2,u.batch,qt)}function Kr(T,u){T.int32(1,u.streamId),T.int32(2,u.cursorId),T.message(3,u.batch,qt)}function yi(T,u){T.int32(1,u.cursorId)}function ii(T,u){T.int32(1,u.cursorId),T.uint32(2,u.maxCount)}function Ii(T,u){T.int32(1,u.streamId),u.sql!==void 0&&T.string(2,u.sql),u.sqlId!==void 0&&T.int32(3,u.sqlId)}function Ei(T,u){T.int32(1,u.streamId),u.sql!==void 0&&T.string(2,u.sql),u.sqlId!==void 0&&T.int32(3,u.sqlId)}function un(T,u){T.int32(1,u.sqlId),T.string(2,u.sql)}function Cn(T,u){T.int32(1,u.sqlId)}function Pn(T,u){T.int32(1,u.streamId)}function ui(T){return{message:Se(T.message),code:Re(T.code)}}function Zi(T){let u=rt(T.cols,cn),B=lt(T.rows).map(Xe=>rt(Xe,Hr)),de=ae(T.affected_row_count),je=Re(T.last_insert_rowid);return{cols:u,rows:B,affectedRowCount:de,lastInsertRowid:je!==void 0?BigInt(je):void 0}}function cn(T){return{name:Re(T.name),decltype:Re(T.decltype)}}function Jr(T){let u=new Map;lt(T.step_results).forEach((de,je)=>{de!==null&&u.set(je,Zi(Je(de)))});let B=new Map;return lt(T.step_errors).forEach((de,je)=>{de!==null&&B.set(je,ui(Je(de)))}),{stepResults:u,stepErrors:B}}function Ai(T){let u=Se(T.type);if(u==="step_begin")return{type:"step_begin",step:ae(T.step),cols:rt(T.cols,cn)};if(u==="step_end"){let B=ae(T.affected_row_count),de=Re(T.last_insert_rowid);return{type:"step_end",affectedRowCount:B,lastInsertRowid:de!==void 0?BigInt(de):void 0}}if(u==="step_error")return{type:"step_error",step:ae(T.step),error:ui(Je(T.error))};if(u==="row")return{type:"row",row:rt(T.row,Hr)};if(u==="error")return{type:"error",error:ui(Je(T.error))};throw new le("Unexpected type of CursorEntry")}function Vi(T){let u=rt(T.params,dn),B=rt(T.cols,zi);return{params:u,cols:B,isExplain:Ae(T.is_explain),isReadonly:Ae(T.is_readonly)}}function dn(T){return{name:Re(T.name)}}function zi(T){return{name:Se(T.name),decltype:Re(T.decltype)}}function Hr(T){let u=Se(T.type);if(u==="null")return null;if(u==="integer")return BigInt(Se(T.value));if(u==="float")return ae(T.value);if(u==="text")return Se(T.value);if(u==="blob")return R.toUint8Array(Se(T.base64));throw new le("Unexpected type of Value")}let Fr={default:()=>({message:"",code:void 0}),1(T,u){u.message=T.string()},2(T,u){u.code=T.string()}},Qr={default:()=>({cols:[],rows:[],affectedRowCount:0,lastInsertRowid:void 0}),1(T,u){u.cols.push(T.message(Gi))},2(T,u){u.rows.push(T.message(ci))},3(T,u){u.affectedRowCount=Number(T.uint64())},4(T,u){u.lastInsertRowid=T.sint64()}},Gi={default:()=>({name:void 0,decltype:void 0}),1(T,u){u.name=T.string()},2(T,u){u.decltype=T.string()}},ci={default:()=>[],1(T,u){u.push(T.message(Vr))}},$i={default:()=>({stepResults:new Map,stepErrors:new Map}),1(T,u){let[B,de]=T.message(Oi);u.stepResults.set(B,de)},2(T,u){let[B,de]=T.message(hn);u.stepErrors.set(B,de)}},Oi={default:()=>[0,Qr.default()],1(T,u){u[0]=T.uint32()},2(T,u){u[1]=T.message(Qr)}},hn={default:()=>[0,Fr.default()],1(T,u){u[0]=T.uint32()},2(T,u){u[1]=T.message(Fr)}},gi={default:()=>({type:"none"}),1:T=>T.message(pn),2:T=>T.message(zr),3:T=>T.message(ni),4:T=>({type:"row",row:T.message(ci)}),5:T=>({type:"error",error:T.message(Fr)})},pn={default:()=>({type:"step_begin",step:0,cols:[]}),1(T,u){u.step=T.uint32()},2(T,u){u.cols.push(T.message(Gi))}},zr={default:()=>({type:"step_end",affectedRowCount:0,lastInsertRowid:void 0}),1(T,u){u.affectedRowCount=T.uint32()},2(T,u){u.lastInsertRowid=T.uint64()}},ni={default:()=>({type:"step_error",step:0,error:Fr.default()}),1(T,u){u.step=T.uint32()},2(T,u){u.error=T.message(Fr)}},si={default:()=>({params:[],cols:[],isExplain:!1,isReadonly:!1}),1(T,u){u.params.push(T.message(Ci))},2(T,u){u.cols.push(T.message(vi))},3(T,u){u.isExplain=T.bool()},4(T,u){u.isReadonly=T.bool()}},Ci={default:()=>({name:void 0}),1(T,u){u.name=T.string()}},vi={default:()=>({name:"",decltype:void 0}),1(T,u){u.name=T.string()},2(T,u){u.decltype=T.string()}},Vr={default(){},1:T=>null,2:T=>T.sint64(),3:T=>T.double(),4:T=>T.string(),5:T=>T.bytes()},Xr={default:()=>({type:"none"}),1:T=>({type:"hello_ok"}),2:T=>T.message(oi),3:T=>T.message(Bi),4:T=>T.message(Br)},oi={default:()=>({type:"hello_error",error:Fr.default()}),1(T,u){u.error=T.message(Fr)}},Br={default:()=>({type:"response_error",requestId:0,error:Fr.default()}),1(T,u){u.requestId=T.int32()},2(T,u){u.error=T.message(Fr)}},Bi={default:()=>({type:"response_ok",requestId:0,response:{type:"none"}}),1(T,u){u.requestId=T.int32()},2(T,u){u.response={type:"open_stream"}},3(T,u){u.response={type:"close_stream"}},4(T,u){u.response=T.message(Ki)},5(T,u){u.response=T.message(ve)},6(T,u){u.response={type:"open_cursor"}},7(T,u){u.response={type:"close_cursor"}},8(T,u){u.response=T.message(w)},9(T,u){u.response={type:"sequence"}},10(T,u){u.response=T.message(pe)},11(T,u){u.response={type:"store_sql"}},12(T,u){u.response={type:"close_sql"}},13(T,u){u.response=T.message(Oe)}},Ki={default:()=>({type:"execute",result:Qr.default()}),1(T,u){u.result=T.message(Qr)}},ve={default:()=>({type:"batch",result:$i.default()}),1(T,u){u.result=T.message($i)}},w={default:()=>({type:"fetch_cursor",entries:[],done:!1}),1(T,u){u.entries.push(T.message(gi))},2(T,u){u.done=T.bool()}},pe={default:()=>({type:"describe",result:si.default()}),1(T,u){u.result=T.message(si)}},Oe={default:()=>({type:"get_autocommit",isAutocommit:!1}),1(T,u){u.isAutocommit=T.bool()}},Ve=new Map([["hrana2",{version:2,encoding:"json"}],["hrana1",{version:1,encoding:"json"}]]),_t=new Map([["hrana3-protobuf",{version:3,encoding:"protobuf"}],["hrana3",{version:3,encoding:"json"}],["hrana2",{version:2,encoding:"json"}],["hrana1",{version:1,encoding:"json"}]]);class Yt extends D{#e;#t;#r;#i;#n;#s;#a;#o;#l;_streamIdAlloc;_cursorIdAlloc;#u;constructor(u,B){super(),this.#e=u,this.#t=[],this.#r=!1,this.#i=void 0,this.#n=!1,this.#s=void 0,this.#a=!1,this.#o=new Map,this.#l=new Ct,this._streamIdAlloc=new Ct,this._cursorIdAlloc=new Ct,this.#u=new Ct,this.#e.binaryType="arraybuffer",this.#e.addEventListener("open",()=>this.#h()),this.#e.addEventListener("close",de=>this.#m(de)),this.#e.addEventListener("error",de=>this.#p(de)),this.#e.addEventListener("message",de=>this.#y(de)),this.#d({type:"hello",jwt:B})}#d(u){if(this.#i!==void 0)throw new fe("Trying to send a message on a closed client");this.#r?this.#f(u):this.#t.push({openCallback:()=>this.#f(u),errorCallback:()=>{}})}#h(){let u=this.#e.protocol;if(u===void 0){this.#c(new ee("The `WebSocket.protocol` property is undefined. This most likely means that the WebSocket implementation provided by the environment is broken. If you are using Miniflare 2, please update to Miniflare 3, which fixes this problem."));return}if(u==="")this.#s={version:1,encoding:"json"};else if(this.#s=_t.get(u),this.#s===void 0){this.#c(new le(`Unrecognized WebSocket subprotocol: ${JSON.stringify(u)}`));return}for(let B of this.#t)B.openCallback();this.#t.length=0,this.#r=!0}#f(u){let B=this.#s.encoding;if(B==="json"){let de=bt(u,Jt);this.#e.send(de)}else if(B==="protobuf"){let de=kt(u,Or);this.#e.send(de)}else throw tt(B,"Impossible encoding")}getVersion(){return new Promise((u,B)=>{this.#a=!0,this.#i!==void 0?B(this.#i):this.#r?u(this.#s.version):this.#t.push({openCallback:()=>u(this.#s.version),errorCallback:B})})}_ensureVersion(u,B){if(this.#s!==void 0&&this.#a){if(this.#s.version<u)throw new x(`${B} is supported on protocol version ${u} and higher, but the WebSocket server only supports version ${this.#s.version}`)}else throw new x(`${B} is supported only on protocol version ${u} and higher, but the version supported by the WebSocket server is not yet known. Use Client.getVersion() to wait until the version is available.`)}_sendRequest(u,B){if(this.#i!==void 0){B.errorCallback(new ce("Client is closed",this.#i));return}let de=this.#l.alloc();this.#o.set(de,{...B,type:u.type}),this.#d({type:"request",requestId:de,request:u})}#p(u){let B=u.message;this.#c(new H(B??"WebSocket was closed due to an error"))}#m(u){let B=`WebSocket was closed with code ${u.code}`;u.reason&&(B+=`: ${u.reason}`),this.#c(new H(B))}#c(u){if(this.#i===void 0){for(let B of(this.#i=u,this.#t))B.errorCallback(u);for(let[B,de]of(this.#t.length=0,this.#o.entries()))de.errorCallback(u),this.#l.free(B);this.#o.clear(),this.#e.close()}}#y(u){if(this.#i===void 0)try{let de,je=this.#s.encoding;if(je==="json"){var B;if(typeof u.data!="string"){this.#e.close(3003,"Only text messages are accepted with JSON encoding"),this.#c(new le("Received non-text message from server with JSON encoding"));return}B=JSON.parse(u.data),de=function(Xe){let pt=Se(Xe.type);if(pt==="hello_ok")return{type:"hello_ok"};if(pt==="hello_error")return{type:"hello_error",error:ui(Je(Xe.error))};if(pt==="response_ok")return{type:"response_ok",requestId:ae(Xe.request_id),response:function(Qe){let mt=Se(Qe.type);if(mt==="open_stream")return{type:"open_stream"};if(mt==="close_stream")return{type:"close_stream"};if(mt==="execute")return{type:"execute",result:Zi(Je(Qe.result))};if(mt==="batch")return{type:"batch",result:Jr(Je(Qe.result))};if(mt==="open_cursor")return{type:"open_cursor"};if(mt==="close_cursor")return{type:"close_cursor"};if(mt==="fetch_cursor")return{type:"fetch_cursor",entries:rt(Qe.entries,Ai),done:Ae(Qe.done)};if(mt==="sequence")return{type:"sequence"};if(mt==="describe")return{type:"describe",result:Vi(Je(Qe.result))};if(mt==="store_sql")return{type:"store_sql"};if(mt==="close_sql")return{type:"close_sql"};if(mt==="get_autocommit")return{type:"get_autocommit",isAutocommit:Ae(Qe.is_autocommit)};throw new le("Unexpected type of Response")}(Je(Xe.response))};if(pt==="response_error")return{type:"response_error",requestId:ae(Xe.request_id),error:ui(Je(Xe.error))};throw new le("Unexpected type of ServerMsg")}(Je(B))}else if(je==="protobuf"){if(!(u.data instanceof ArrayBuffer)){this.#e.close(3003,"Only binary messages are accepted with Protobuf encoding"),this.#c(new le("Received non-binary message from server with Protobuf encoding"));return}de=We(new Uint8Array(u.data),Xr)}else throw tt(je,"Impossible encoding");this.#g(de)}catch(de){this.#e.close(3007,"Could not handle message"),this.#c(de)}}#g(u){if(u.type==="none")throw new le("Received an unrecognized ServerMsg");if(u.type==="hello_ok"||u.type==="hello_error"){if(this.#n)throw new le("Received a duplicated hello response");if(this.#n=!0,u.type==="hello_error")throw xe(u.error);return}if(!this.#n)throw new le("Received a non-hello message before a hello response");if(u.type==="response_ok"){let B=u.requestId,de=this.#o.get(B);if(this.#o.delete(B),de===void 0)throw new le("Received unexpected OK response");this.#l.free(B);try{if(de.type!==u.response.type)throw console.dir({responseState:de,msg:u}),new le("Received unexpected type of response");de.responseCallback(u.response)}catch(je){throw de.errorCallback(je),je}}else if(u.type==="response_error"){let B=u.requestId,de=this.#o.get(B);if(this.#o.delete(B),de===void 0)throw new le("Received unexpected error response");this.#l.free(B),de.errorCallback(xe(u.error))}else throw tt(u,"Impossible ServerMsg type")}openStream(){return Ge.open(this)}storeSql(u){this._ensureVersion(2,"storeSql()");let B=this.#u.alloc(),de=new Fe(this,B);return this._sendRequest({type:"store_sql",sqlId:B,sql:u},{responseCallback:()=>{},errorCallback:je=>de._setClosed(je)}),de}_closeSql(u){this.#i===void 0&&this._sendRequest({type:"close_sql",sqlId:u},{responseCallback:()=>this.#u.free(u),errorCallback:B=>this.#c(B)})}close(){this.#c(new ee("Client was manually closed"))}get closed(){return this.#i!==void 0}}var ar=o(7442);if(typeof queueMicrotask<"u")y=queueMicrotask;else{let T=Promise.resolve();y=u=>{T.then(u)}}class Tr{#e;#t;#r;constructor(u){this.#e=new Uint8Array(new ArrayBuffer(u)),this.#t=0,this.#r=0}get length(){return this.#r-this.#t}data(){return this.#e.slice(this.#t,this.#r)}push(u){this.#i(u.byteLength),this.#e.set(u,this.#r),this.#r+=u.byteLength}#i(u){if(this.#r+u<=this.#e.byteLength)return;let B=this.#r-this.#t;if(B+u<=this.#e.byteLength&&2*this.#r>=this.#e.byteLength)this.#e.copyWithin(0,this.#t,this.#r);else{let de=this.#e.byteLength;do de*=2;while(B+u>de);let je=new Uint8Array(new ArrayBuffer(de));je.set(this.#e.slice(this.#t,this.#r),0),this.#e=je}this.#r=B,this.#t=0}shift(u){this.#t+=u}}function Lr(T){let u=Se(T.type);if(u==="ok")return{type:"ok",response:function(B){let de=Se(B.type);if(de==="close")return{type:"close"};if(de==="execute")return{type:"execute",result:Zi(Je(B.result))};if(de==="batch")return{type:"batch",result:Jr(Je(B.result))};if(de==="sequence")return{type:"sequence"};if(de==="describe")return{type:"describe",result:Vi(Je(B.result))};if(de==="store_sql")return{type:"store_sql"};if(de==="close_sql")return{type:"close_sql"};if(de==="get_autocommit")return{type:"get_autocommit",isAutocommit:Ae(B.is_autocommit)};throw new le("Unexpected type of StreamResponse")}(Je(T.response))};if(u==="error")return{type:"error",error:ui(Je(T.error))};throw new le("Unexpected type of StreamResult")}function qr(T){return{baton:Re(T.baton),baseUrl:Re(T.base_url)}}let Pi={default:()=>({baton:void 0,baseUrl:void 0,results:[]}),1(T,u){u.baton=T.string()},2(T,u){u.baseUrl=T.string()},3(T,u){u.results.push(T.message(Ps))}},Ps={default:()=>({type:"none"}),1:T=>({type:"ok",response:T.message(ns)}),2:T=>({type:"error",error:T.message(Fr)})},ns={default:()=>({type:"none"}),1:T=>({type:"close"}),2:T=>T.message(Rs),3:T=>T.message(Us),4:T=>({type:"sequence"}),5:T=>T.message(Ds),6:T=>({type:"store_sql"}),7:T=>({type:"close_sql"}),8:T=>T.message(hr)},Rs={default:()=>({type:"execute",result:Qr.default()}),1(T,u){u.result=T.message(Qr)}},Us={default:()=>({type:"batch",result:$i.default()}),1(T,u){u.result=T.message($i)}},Ds={default:()=>({type:"describe",result:si.default()}),1(T,u){u.result=T.message(si)}},hr={default:()=>({type:"get_autocommit",isAutocommit:!1}),1(T,u){u.isAutocommit=T.bool()}},ss={default:()=>({baton:void 0,baseUrl:void 0}),1(T,u){u.baton=T.string()},2(T,u){u.baseUrl=T.string()}};class Ji extends Ce{#e;#t;#r;#i;#n;#s;constructor(u,B){super(),this.#e=u,this.#t=B,this.#r=void 0,this.#i=new Tr(16384),this.#n=void 0,this.#s=!1}async open(u){if(u.body===null)throw new le("No response body for cursor request");this.#r=u.body[Symbol.asyncIterator]();let B=await this.#a(qr,ss);if(B===void 0)throw new le("Empty response to cursor request");return B}next(){return this.#a(Ai,gi)}close(){this._setClosed(new ee("Cursor was manually closed"))}_setClosed(u){this.#n===void 0&&(this.#n=u,this.#e._cursorClosed(this),this.#r!==void 0&&this.#r.return())}get closed(){return this.#n!==void 0}async#a(u,B){for(;;){if(this.#s)return;if(this.#n!==void 0)throw new ce("Cursor is closed",this.#n);if(this.#t==="json"){let Xe=this.#o();if(Xe!==void 0)return u(Je(JSON.parse(new TextDecoder().decode(Xe))))}else if(this.#t==="protobuf"){let Xe=this.#l();if(Xe!==void 0)return We(Xe,B)}else throw tt(this.#t,"Impossible encoding");if(this.#r===void 0)throw new fe("Attempted to read from HTTP cursor before it was opened");let{value:de,done:je}=await this.#r.next();if(je&&this.#i.length===0)this.#s=!0;else{if(je)throw new le("Unexpected end of cursor stream");this.#i.push(de)}}}#o(){let u=this.#i.data(),B=u.indexOf(10);if(B<0)return;let de=u.slice(0,B);return this.#i.shift(B+1),de}#l(){let u=this.#i.data(),B=0,de=0;for(;;){if(de>=u.byteLength)return;let Xe=u[de];if(B|=(127&Xe)<<7*de,de+=1,!(128&Xe))break}if(u.byteLength<de+B)return;let je=u.slice(de,de+B);return this.#i.shift(de+B),je}}function Rn(T,u){u.baton!==void 0&&T.string("baton",u.baton),T.arrayObjects("requests",u.requests,Un)}function Un(T,u){if(T.stringRaw("type",u.type),u.type!=="close"){if(u.type==="execute")T.object("stmt",u.stmt,it);else if(u.type==="batch")T.object("batch",u.batch,at);else if(u.type==="sequence")u.sql!==void 0&&T.string("sql",u.sql),u.sqlId!==void 0&&T.number("sql_id",u.sqlId);else if(u.type==="describe")u.sql!==void 0&&T.string("sql",u.sql),u.sqlId!==void 0&&T.number("sql_id",u.sqlId);else if(u.type==="store_sql")T.number("sql_id",u.sqlId),T.string("sql",u.sql);else if(u.type==="close_sql")T.number("sql_id",u.sqlId);else if(u.type!=="get_autocommit")throw tt(u,"Impossible type of StreamRequest")}}function os(T,u){u.baton!==void 0&&T.string("baton",u.baton),T.object("batch",u.batch,at)}function fn(T,u){for(let B of(u.baton!==void 0&&T.string(1,u.baton),u.requests))T.message(2,B,as)}function as(T,u){if(u.type==="close")T.message(1,u,Dn);else if(u.type==="execute")T.message(2,u,ls);else if(u.type==="batch")T.message(3,u,Hi);else if(u.type==="sequence")T.message(4,u,us);else if(u.type==="describe")T.message(5,u,cs);else if(u.type==="store_sql")T.message(6,u,Qi);else if(u.type==="close_sql")T.message(7,u,Ri);else if(u.type==="get_autocommit")T.message(8,u,ds);else throw tt(u,"Impossible type of StreamRequest")}function Dn(T,u){}function ls(T,u){T.message(1,u.stmt,$t)}function Hi(T,u){T.message(1,u.batch,qt)}function us(T,u){u.sql!==void 0&&T.string(1,u.sql),u.sqlId!==void 0&&T.int32(2,u.sqlId)}function cs(T,u){u.sql!==void 0&&T.string(1,u.sql),u.sqlId!==void 0&&T.int32(2,u.sqlId)}function Qi(T,u){T.int32(1,u.sqlId),T.string(2,u.sql)}function Ri(T,u){T.int32(1,u.sqlId)}function ds(T,u){}function Ln(T,u){u.baton!==void 0&&T.string(1,u.baton),T.message(2,u.batch,qt)}class hs extends ze{#e;#t;#r;#i;#n;#s;#a;#o;#l;#u;#d;#h;#f;constructor(u,B,de,je,Xe){super(u.intMode),this.#e=u,this.#t=B.toString(),this.#r=de,this.#i=je,this.#n=Xe,this.#s=void 0,this.#a=new ht,this.#o=!1,this.#u=!1,this.#d=!1,this.#h=void 0,this.#f=new Ct}client(){return this.#e}_sqlOwner(){return this}storeSql(u){let B=this.#f.alloc();return this.#p({type:"store_sql",sqlId:B,sql:u}).then(()=>{},de=>this._setClosed(de)),new Fe(this,B)}_closeSql(u){this.#h===void 0&&this.#p({type:"close_sql",sqlId:u}).then(()=>this.#f.free(u),B=>this._setClosed(B))}_execute(u){return this.#p({type:"execute",stmt:u}).then(B=>B.result)}_batch(u){return this.#p({type:"batch",batch:u}).then(B=>B.result)}_describe(u){return this.#p({type:"describe",sql:u.sql,sqlId:u.sqlId}).then(B=>B.result)}_sequence(u){return this.#p({type:"sequence",sql:u.sql,sqlId:u.sqlId}).then(B=>{})}getAutocommit(){return this.#e._ensureVersion(3,"getAutocommit()"),this.#p({type:"get_autocommit"}).then(u=>u.isAutocommit)}#p(u){return new Promise((B,de)=>{this.#m({type:"pipeline",request:u,responseCallback:B,errorCallback:de})})}_openCursor(u){return new Promise((B,de)=>{this.#m({type:"cursor",batch:u,cursorCallback:B,errorCallback:de})})}_cursorClosed(u){if(u!==this.#l)throw new fe("Cursor was closed, but it was not associated with the stream");this.#l=void 0,y(()=>this.#c())}close(){this._setClosed(new ee("Stream was manually closed"))}closeGracefully(){this.#u=!0,y(()=>this.#c())}get closed(){return this.#h!==void 0||this.#u}_setClosed(u){if(this.#h===void 0){for(this.#h=u,this.#l!==void 0&&this.#l._setClosed(u),this.#e._streamClosed(this);;){let B=this.#a.shift();if(B!==void 0)B.errorCallback(u);else break}(this.#s!==void 0||this.#o)&&!this.#d&&(this.#a.push({type:"pipeline",request:{type:"close"},responseCallback:()=>{},errorCallback:()=>{}}),this.#d=!0,y(()=>this.#c()))}}#m(u){if(this.#h!==void 0)throw new ce("Stream is closed",this.#h);if(this.#u)throw new ce("Stream is closing",void 0);this.#a.push(u),y(()=>this.#c())}#c(){if(this.#o||this.#l!==void 0)return;if(this.#u&&this.#a.length===0){this._setClosed(new ee("Stream was gracefully closed"));return}let u=this.#e._endpoint;if(u===void 0){this.#e._endpointPromise.then(()=>this.#c(),de=>this._setClosed(de));return}let B=this.#a.shift();if(B!==void 0)if(B.type==="pipeline"){let de=[B];for(;;){let je=this.#a.first();if(je!==void 0&&je.type==="pipeline")de.push(je),this.#a.shift();else if(je===void 0&&this.#u&&!this.#d){de.push({type:"pipeline",request:{type:"close"},responseCallback:()=>{},errorCallback:()=>{}}),this.#d=!0;break}else break}this.#y(u,de)}else if(B.type==="cursor")this.#g(u,B);else throw tt(B,"Impossible type of QueueEntry")}#y(u,B){this.#v(()=>this.#b(B,u),de=>qn(de,u.encoding),de=>de.baton,de=>de.baseUrl,de=>function(je,Xe){if(Xe.results.length!==je.length)throw new le("Server returned unexpected number of pipeline results");for(let pt=0;pt<je.length;++pt){let Qe=Xe.results[pt],mt=je[pt];if(Qe.type==="ok"){if(Qe.response.type!==mt.request.type)throw new le("Received unexpected type of response");mt.responseCallback(Qe.response)}else if(Qe.type==="error")mt.errorCallback(xe(Qe.error));else throw Qe.type==="none"?new le("Received unrecognized type of StreamResult"):tt(Qe,"Received impossible type of StreamResult")}}(B,de),de=>B.forEach(je=>je.errorCallback(de)))}#g(u,B){let de=new Ji(this,u.encoding);this.#l=de,this.#v(()=>this.#_(B,u),je=>de.open(je),je=>je.baton,je=>je.baseUrl,je=>B.cursorCallback(de),je=>B.errorCallback(je))}#v(u,B,de,je,Xe,pt){let Qe;try{let mt=u();Qe=(0,this.#i)(mt)}catch(mt){Qe=Promise.reject(mt)}this.#o=!0,Qe.then(mt=>mt.ok?B(mt):ps(mt).then(rr=>{throw rr})).then(mt=>{this.#s=de(mt),this.#t=je(mt)??this.#t,Xe(mt)}).catch(mt=>{this._setClosed(mt),pt(mt)}).finally(()=>{this.#o=!1,this.#c()})}#b(u,B){return this.#w(new URL(B.pipelinePath,this.#t),{baton:this.#s,requests:u.map(de=>de.request)},B.encoding,Rn,fn)}#_(u,B){if(B.cursorPath===void 0)throw new x(`Cursors are supported only on protocol version 3 and higher, but the HTTP server only supports version ${B.version}.`);return this.#w(new URL(B.cursorPath,this.#t),{baton:this.#s,batch:u.batch},B.encoding,os,Ln)}#w(u,B,de,je,Xe){let pt,Qe;if(de==="json")pt=bt(B,je),Qe="application/json";else if(de==="protobuf")pt=kt(B,Xe),Qe="application/x-protobuf";else throw tt(de,"Impossible encoding");let mt=new ar.Headers;return mt.set("content-type",Qe),this.#r!==void 0&&mt.set("authorization",`Bearer ${this.#r}`),this.#n!==void 0&&mt.set("x-turso-encryption-key",this.#n),new ar.Request(u.toString(),{method:"POST",headers:mt,body:pt})}}async function qn(T,u){if(u==="json")return function(B){return{baton:Re(B.baton),baseUrl:Re(B.base_url),results:rt(B.results,Lr)}}(Je(await T.json()));if(u==="protobuf")return We(new Uint8Array(await T.arrayBuffer()),Pi);throw await T.body?.cancel(),tt(u,"Impossible encoding")}async function ps(T){let u=T.headers.get("content-type")??"text/plain",B=`Server returned HTTP status ${T.status}`;if(u==="application/json"){let de=await T.json();return"message"in de?xe(de):new ue(B,T.status)}if(u==="text/plain"){let de=(await T.text()).trim();return de!==""&&(B+=`: ${de}`),new ue(B,T.status)}return await T.body?.cancel(),new ue(B,T.status)}let jn=[{versionPath:"v3-protobuf",pipelinePath:"v3-protobuf/pipeline",cursorPath:"v3-protobuf/cursor",version:3,encoding:"protobuf"}],mn={versionPath:"v2",pipelinePath:"v2/pipeline",cursorPath:void 0,version:2,encoding:"json"};class Mi extends D{#e;#t;#r;#i;#n;#s;_endpointPromise;_endpoint;constructor(u,B,de,je,Xe=2){super(),this.#e=u,this.#t=B,this.#r=de??ar.fetch,this.#i=je,this.#n=void 0,this.#s=new Set,Xe==3?(this._endpointPromise=fs(this.#r,this.#e),this._endpointPromise.then(pt=>this._endpoint=pt,pt=>this.#a(pt))):(this._endpointPromise=Promise.resolve(mn),this._endpointPromise.then(pt=>this._endpoint=pt,pt=>this.#a(pt)))}async getVersion(){return this._endpoint!==void 0?this._endpoint.version:(await this._endpointPromise).version}_ensureVersion(u,B){if(!(u<=mn.version)){if(this._endpoint===void 0)throw new x(`${B} is supported only on protocol version ${u} and higher, but the version supported by the HTTP server is not yet known. Use Client.getVersion() to wait until the version is available.`);if(this._endpoint.version<u)throw new x(`${B} is supported only on protocol version ${u} and higher, but the HTTP server only supports version ${this._endpoint.version}.`)}}openStream(){if(this.#n!==void 0)throw new ce("Client is closed",this.#n);let u=new hs(this,this.#e,this.#t,this.#r,this.#i);return this.#s.add(u),u}_streamClosed(u){this.#s.delete(u)}close(){this.#a(new ee("Client was manually closed"))}get closed(){return this.#n!==void 0}#a(u){if(this.#n===void 0)for(let B of(this.#n=u,Array.from(this.#s)))B._setClosed(new ce("Client was closed",u))}}async function fs(T,u){for(let B of jn){let de=new URL(B.versionPath,u),je=new ar.Request(de.toString(),{method:"GET"}),Xe=await T(je);if(await Xe.arrayBuffer(),Xe.ok)return B}return mn}function Xi(T,u,B=2){if(d===void 0)throw new me("WebSockets are not supported in this environment");var de=void 0;return de=B==3?Array.from(_t.keys()):Array.from(Ve.keys()),new Yt(new d(T,de),u)}function zn(T,u,B,de,je=2){return new Mi(T instanceof URL?T:new URL(T),u,B,de,je)}class Zt{#e;#t;#r;constructor(u,B){this.#e=u,this.#t=B,this.#r=void 0}execute(u){return this.batch([u]).then(B=>B[0])}async batch(u){let B=this._getStream();if(B.closed)throw new h("Cannot execute statements because the transaction is closed","TRANSACTION_CLOSED");try{let de,je=u.map(tr);if(this.#r===void 0){this._getSqlCache().apply(je);let pt=B.batch(this.#t>=3),Qe=pt.step(),mt=Qe.run(E(this.#e)),rr=Qe;de=je.map(Ir=>{let kr=pt.step().condition(f.ok(rr));this.#t>=3&&kr.condition(f.not(f.isAutocommit(pt)));let Pr=kr.query(Ir);return Pr.catch(()=>{}),rr=kr,Pr}),this.#r=pt.execute().then(()=>mt).then(()=>{});try{await this.#r}catch(Ir){throw this.close(),Ir}}else{let pt;this.#t<3&&await this.#r,this._getSqlCache().apply(je);let Qe=B.batch(this.#t>=3);de=je.map(mt=>{let rr=Qe.step();pt!==void 0&&rr.condition(f.ok(pt)),this.#t>=3&&rr.condition(f.not(f.isAutocommit(Qe)));let Ir=rr.query(mt);return Ir.catch(()=>{}),pt=rr,Ir}),await Qe.execute()}let Xe=[];for(let pt=0;pt<de.length;pt++)try{let Qe=await de[pt];if(Qe===void 0)throw new i("Statement in a transaction was not executed, probably because the transaction has been rolled back",pt,"TRANSACTION_CLOSED");Xe.push(Yi(Qe))}catch(Qe){if(Qe instanceof i)throw Qe;let mt=wr(Qe);throw mt instanceof h?new i(mt.message,pt,mt.code,mt.extendedCode,mt.rawCode,mt.cause instanceof Error?mt.cause:void 0):mt}return Xe}catch(de){throw wr(de)}}async executeMultiple(u){let B=this._getStream();if(B.closed)throw new h("Cannot execute statements because the transaction is closed","TRANSACTION_CLOSED");try{if(this.#r===void 0){this.#r=B.run(E(this.#e)).then(()=>{});try{await this.#r}catch(de){throw this.close(),de}}else await this.#r;await B.sequence(u)}catch(de){throw wr(de)}}async rollback(){try{let u=this._getStream();if(u.closed||this.#r===void 0)return;let B=u.run("ROLLBACK").catch(de=>{throw wr(de)});u.closeGracefully(),await B}catch(u){throw wr(u)}finally{this.close()}}async commit(){try{let u=this._getStream();if(u.closed)throw new h("Cannot commit the transaction because it is already closed","TRANSACTION_CLOSED");if(this.#r===void 0)return;await this.#r;let B=u.run("COMMIT").catch(de=>{throw wr(de)});u.closeGracefully(),await B}catch(u){throw wr(u)}finally{this.close()}}}async function wi(T,u,B,de,je=!1){je&&B.step().run("PRAGMA foreign_keys=off");let Xe=B.step(),pt=Xe.run(E(T)),Qe=Xe,mt=de.map(Pr=>{let $r=B.step().condition(f.ok(Qe));u>=3&&$r.condition(f.not(f.isAutocommit(B)));let Zr=$r.query(Pr);return Qe=$r,Zr}),rr=B.step().condition(f.ok(Qe));u>=3&&rr.condition(f.not(f.isAutocommit(B)));let Ir=rr.run("COMMIT");B.step().condition(f.not(f.ok(rr))).run("ROLLBACK").catch(Pr=>{}),je&&B.step().run("PRAGMA foreign_keys=on"),await B.execute();let kr=[];await pt;for(let Pr=0;Pr<mt.length;Pr++)try{let $r=await mt[Pr];if($r===void 0)throw new i("Statement in a batch was not executed, probably because the transaction has been rolled back",Pr,"TRANSACTION_CLOSED");kr.push(Yi($r))}catch($r){if($r instanceof i)throw $r;let Zr=wr($r);throw Zr instanceof h?new i(Zr.message,Pr,Zr.code,Zr.extendedCode,Zr.rawCode,Zr.cause instanceof Error?Zr.cause:void 0):Zr}return await Ir,kr}function tr(T){let u,B;Array.isArray(T)?[u,B]=T:typeof T=="string"?u=T:(u=T.sql,B=T.args);let de=new dt(u);if(B)if(Array.isArray(B))de.bindIndexes(B);else for(let[je,Xe]of Object.entries(B))de.bindName(je,Xe);return de}function Yi(T){let u=T.columnNames.map(je=>je??""),B=T.columnDecltypes.map(je=>je??""),de=T.rows;return new A(u,B,de,T.affectedRowCount,T.lastInsertRowid!==void 0?T.lastInsertRowid:void 0)}function wr(T){if(T instanceof ee){let u=function B(de){return de instanceof se&&de.code!==void 0?de.code:de instanceof le?"HRANA_PROTO_ERROR":de instanceof ce?de.cause instanceof ee?B(de.cause):"HRANA_CLOSED_ERROR":de instanceof H?"HRANA_WEBSOCKET_ERROR":de instanceof ue?"SERVER_ERROR":de instanceof x?"PROTOCOL_VERSION_ERROR":de instanceof fe?"INTERNAL_ERROR":"UNKNOWN"}(T);return new h(T.message,u,void 0,void 0,T)}return T}class yn{#e;#t;capacity;constructor(u,B){this.#e=u,this.#t=new en,this.capacity=B}apply(u){if(this.capacity<=0)return;let B=new Set;for(let de of u){if(typeof de.sql!="string")continue;let je=de.sql;if(je.length>=5e3)continue;let Xe=this.#t.get(je);if(Xe===void 0){for(;this.#t.size+1>this.capacity;){let[pt,Qe]=this.#t.peekLru();if(B.has(Qe))break;Qe.close(),this.#t.delete(pt)}this.#t.size+1<=this.capacity&&(Xe=this.#e.storeSql(je),this.#t.set(je,Xe))}Xe!==void 0&&(de.sql=Xe,B.add(Xe))}}}class en{#e;constructor(){this.#e=new Map}get(u){let B=this.#e.get(u);return B!==void 0&&(this.#e.delete(u),this.#e.set(u,B)),B}set(u,B){this.#e.set(u,B)}peekLru(){for(let u of this.#e.entries())return u}delete(u){this.#e.delete(u)}get size(){return this.#e.size}}var Bn=o(76351);class gn{#e;#t;#r;#i;#n;closed;protocol;#s;#a;constructor(u,B,de,je,Xe){this.#e=B,this.#t=de,this.#r=je,this.#i=this.#l(u),this.#n=void 0,this.closed=!1,this.protocol="ws",this.#a=Bn(Xe)}async limit(u){return this.#a(u)}async execute(u,B){let de;return de=typeof u=="string"?{sql:u,args:B||[]}:u,this.limit(async()=>{let je=await this.#o();try{let Xe=tr(de);je.conn.sqlCache.apply([Xe]);let pt=je.stream.query(Xe);je.stream.closeGracefully();let Qe=await pt;return Yi(Qe)}catch(Xe){throw wr(Xe)}finally{this._closeStream(je)}})}async batch(u,B="deferred"){return this.limit(async()=>{let de=await this.#o();try{let je=u.map(mt=>Array.isArray(mt)?{sql:mt[0],args:mt[1]||[]}:mt).map(tr),Xe=await de.conn.client.getVersion();de.conn.sqlCache.apply(je);let pt=de.stream.batch(Xe>=3);return await wi(B,Xe,pt,je)}catch(je){throw wr(je)}finally{this._closeStream(de)}})}async migrate(u){return this.limit(async()=>{let B=await this.#o();try{let de=u.map(tr),je=await B.conn.client.getVersion(),Xe=B.stream.batch(je>=3);return await wi("deferred",je,Xe,de,!0)}catch(de){throw wr(de)}finally{this._closeStream(B)}})}async transaction(u="write"){return this.limit(async()=>{let B=await this.#o();try{let de=await B.conn.client.getVersion();return new ms(this,B,u,de)}catch(de){throw this._closeStream(B),wr(de)}})}async executeMultiple(u){return this.limit(async()=>{let B=await this.#o();try{let de=B.stream.sequence(u);B.stream.closeGracefully(),await de}catch(de){throw wr(de)}finally{this._closeStream(B)}})}sync(){throw new h("sync not supported in ws mode","SYNC_NOT_SUPPORTED")}async#o(){if(this.closed)throw new h("The client is closed","CLIENT_CLOSED");if(new Date().valueOf()-this.#i.openTime.valueOf()>6e4&&this.#n===void 0){let B=this.#l();this.#n=B,B.client.getVersion().then(de=>{this.#i!==B&&this.#i.streamStates.size===0&&this.#i.client.close(),this.#i=B,this.#n=void 0},de=>{this.#n=void 0})}if(this.#i.client.closed)try{this.#n!==void 0?this.#i=this.#n:this.#i=this.#l()}catch(B){throw wr(B)}let u=this.#i;try{u.useSqlCache===void 0&&(u.useSqlCache=await u.client.getVersion()>=2,u.useSqlCache&&(u.sqlCache.capacity=100));let B=u.client.openStream();B.intMode=this.#r;let de={conn:u,stream:B};return u.streamStates.add(de),de}catch(B){throw wr(B)}}#l(u){try{return{client:u??=Xi(this.#e,this.#t),useSqlCache:void 0,sqlCache:new yn(u,0),openTime:new Date,streamStates:new Set}}catch(B){throw wr(B)}}async reconnect(){try{for(let de of Array.from(this.#i.streamStates))try{de.stream.close()}catch{}this.#i.client.close()}catch{}if(this.#n){try{this.#n.client.close()}catch{}this.#n=void 0}let u=this.#l(),B=await u.client.getVersion();u.useSqlCache=B>=2,u.useSqlCache&&(u.sqlCache.capacity=100),this.#i=u,this.closed=!1}_closeStream(u){u.stream.close();let B=u.conn;B.streamStates.delete(u),B.streamStates.size===0&&B!==this.#i&&B.client.close()}close(){if(this.#i.client.close(),this.closed=!0,this.#n){try{this.#n.client.close()}catch{}this.#n=void 0}this.closed=!0}}class ms extends Zt{#e;#t;constructor(u,B,de,je){super(de,je),this.#e=u,this.#t=B}_getStream(){return this.#t.stream}_getSqlCache(){return this.#t.conn.sqlCache}close(){this.#e._closeStream(this.#t)}get closed(){return this.#t.stream.closed}}class Mn{#e;protocol;#t;#r;#i;#n;#s;#a;#o;constructor(u,B,de,je,Xe,pt){this.#t=u,this.#s=B,this.#r=de,this.#i=je,this.#n=Xe,this.#a=pt,this.#e=zn(this.#t,this.#s,this.#i,pt),this.#e.intMode=this.#r,this.protocol="http",this.#o=Bn(this.#n)}async limit(u){return this.#o(u)}async execute(u,B){let de;return de=typeof u=="string"?{sql:u,args:B||[]}:u,this.limit(async()=>{try{let je,Xe=tr(de),pt=this.#e.openStream();try{je=pt.query(Xe)}finally{pt.closeGracefully()}let Qe=await je;return Yi(Qe)}catch(je){throw wr(je)}})}async batch(u,B="deferred"){return this.limit(async()=>{try{let de,je=u.map(Qe=>Array.isArray(Qe)?{sql:Qe[0],args:Qe[1]||[]}:Qe).map(tr),Xe=await this.#e.getVersion(),pt=this.#e.openStream();try{new yn(pt,30).apply(je);let Qe=pt.batch(!1);de=wi(B,Xe,Qe,je)}finally{pt.closeGracefully()}return await de}catch(de){throw wr(de)}})}async migrate(u){return this.limit(async()=>{try{let B,de=u.map(tr),je=await this.#e.getVersion(),Xe=this.#e.openStream();try{let pt=Xe.batch(!1);B=wi("deferred",je,pt,de,!0)}finally{Xe.closeGracefully()}return await B}catch(B){throw wr(B)}})}async transaction(u="write"){return this.limit(async()=>{try{let B=await this.#e.getVersion();return new ys(this.#e.openStream(),u,B)}catch(B){throw wr(B)}})}async executeMultiple(u){return this.limit(async()=>{try{let B,de=this.#e.openStream();try{B=de.sequence(u)}finally{de.closeGracefully()}await B}catch(B){throw wr(B)}})}sync(){throw new h("sync not supported in http mode","SYNC_NOT_SUPPORTED")}close(){this.#e.close()}async reconnect(){try{this.closed||this.#e.close()}finally{this.#e=zn(this.#t,this.#s,this.#i,this.#a),this.#e.intMode=this.#r}}get closed(){return this.#e.closed}}class ys extends Zt{#e;#t;constructor(u,B,de){super(B,de),this.#e=u,this.#t=new yn(u,30)}_getStream(){return this.#e}_getSqlCache(){return this.#t}close(){this.#e.close()}get closed(){return this.#e.closed}}function tn(T){return function(u){if(u.scheme==="ws"||u.scheme==="wss")return function(B){let de;if(B.scheme!=="wss"&&B.scheme!=="ws")throw new h(`The WebSocket client supports only "libsql:", "wss:" and "ws:" URLs, got ${JSON.stringify(B.scheme+":")}. For more information, please read ${S}`,"URL_SCHEME_NOT_SUPPORTED");if(B.encryptionKey!==void 0)throw new h("Encryption key is not supported by the remote client.","ENCRYPTION_KEY_NOT_SUPPORTED");if(B.scheme==="ws"&&B.tls)throw new h('A "ws:" URL cannot opt into TLS by using ?tls=1',"URL_INVALID");if(B.scheme==="wss"&&!B.tls)throw new h('A "wss:" URL cannot opt out of TLS by using ?tls=0',"URL_INVALID");let je=j(B.scheme,B.authority,B.path);try{de=Xi(je,B.authToken)}catch(Xe){if(Xe instanceof me){let pt=B.scheme==="wss"?"https":"http",Qe=j(pt,B.authority,B.path);throw new h(`This environment does not support WebSockets, please switch to the HTTP client by using a "${pt}:" URL (${JSON.stringify(Qe)}). For more information, please read ${S}`,"WEBSOCKETS_NOT_SUPPORTED")}throw wr(Xe)}return new gn(de,je,B.authToken,B.intMode,B.concurrency)}(u);if(u.scheme==="http"||u.scheme==="https")return function(B){if(B.scheme!=="https"&&B.scheme!=="http")throw new h(`The HTTP client supports only "libsql:", "https:" and "http:" URLs, got ${JSON.stringify(B.scheme+":")}. For more information, please read ${S}`,"URL_SCHEME_NOT_SUPPORTED");if(B.encryptionKey!==void 0)throw new h("Encryption key is not supported by the remote client.","ENCRYPTION_KEY_NOT_SUPPORTED");if(B.scheme==="http"&&B.tls)throw new h('A "http:" URL cannot opt into TLS by using ?tls=1',"URL_INVALID");if(B.scheme==="https"&&!B.tls)throw new h('A "https:" URL cannot opt out of TLS by using ?tls=0',"URL_INVALID");return new Mn(j(B.scheme,B.authority,B.path),B.authToken,B.intMode,B.fetch,B.concurrency,B.remoteEncryptionKey)}(u);throw new h(`The client that uses Web standard APIs supports only "libsql:", "wss:", "ws:", "https:" and "http:" URLs, got ${JSON.stringify(u.scheme+":")}. For more information, please read ${S}`,"URL_SCHEME_NOT_SUPPORTED")}(function(u,B){let de,je;if(typeof u!="object")throw TypeError(`Expected client configuration as object, got ${typeof u}`);let{url:Xe,authToken:pt,tls:Qe,intMode:mt,concurrency:rr}=u;rr=Math.max(0,rr||20),mt??="number";let Ir=[];Xe===Y&&(Xe="file::memory:");let kr=function(di){let Ui=s.exec(di);if(Ui===null)throw new h(`The URL '${di}' is not in a valid format`,"URL_INVALID");let Er=Ui.groups,Yr=Er.scheme,Wn=Er.authority!==void 0?function(wn){let ai=c.exec(wn);if(ai===null)throw new h("The authority part of the URL is not in a valid format","URL_INVALID");let Gr=ai.groups;return{host:O(Gr.host_br??Gr.host),port:Gr.port?parseInt(Gr.port,10):void 0,userinfo:Gr.username!==void 0?{username:O(Gr.username),password:Gr.password!==void 0?O(Gr.password):void 0}:void 0}}(Er.authority):void 0,vn=O(Er.path);return{scheme:Yr,authority:Wn,path:vn,query:Er.query!==void 0?function(wn){let ai=wn.split("&"),Gr=[];for(let Di of ai){let bn,rn;if(Di==="")continue;let _n=Di.indexOf("=");_n<0?(bn=Di,rn=""):(bn=Di.substring(0,_n),rn=Di.substring(_n+1)),Gr.push({key:O(bn.replaceAll("+"," ")),value:O(rn.replaceAll("+"," "))})}return{pairs:Gr}}(Er.query):void 0,fragment:Er.fragment!==void 0?O(Er.fragment):void 0}}(Xe),Pr=kr.scheme.toLowerCase(),$r=Pr==="file"&&kr.path===Y&&kr.authority===void 0;for(let{key:di,value:Ui}of(de=$r?{cache:{values:["shared","private"],update:(Er,Yr)=>Ir.push(`${Er}=${Yr}`)}}:{tls:{values:["0","1"],update:(Er,Yr)=>Qe=Yr==="1"},authToken:{update:(Er,Yr)=>pt=Yr}},kr.query?.pairs??[])){if(!Object.hasOwn(de,di))throw new h(`Unsupported URL query parameter ${JSON.stringify(di)}`,"URL_PARAM_NOT_SUPPORTED");let Er=de[di];if(Er.values!==void 0&&!Er.values.includes(Ui))throw new h(`Unknown value for the "${di}" query argument: ${JSON.stringify(Ui)}. Supported values are: [${Er.values.map(Yr=>'"'+Yr+'"').join(", ")}]`,"URL_INVALID");Er.update!==void 0&&Er?.update(di,Ui)}let Zr=Ir.length===0?"":`?${Ir.join("&")}`,bi=kr.path+Zr;if(Pr==="libsql")if(Qe===!1){if(kr.authority?.port===void 0)throw new h('A "libsql:" URL with ?tls=0 must specify an explicit port',"URL_INVALID");je=B?"http":"ws"}else je=B?"https":"wss";else je=Pr;if(je==="http"||je==="ws"?Qe??=!1:Qe??=!0,je!=="http"&&je!=="ws"&&je!=="https"&&je!=="wss"&&je!=="file")throw new h(`The client supports only "libsql:", "wss:", "ws:", "https:", "http:" and "file:" URLs, got ${JSON.stringify(kr.scheme+":")}. For more information, please read ${S}`,"URL_SCHEME_NOT_SUPPORTED");if(mt!=="number"&&mt!=="bigint"&&mt!=="string")throw TypeError(`Invalid value for intMode, expected "number", "bigint" or "string", got ${JSON.stringify(mt)}`);if(kr.fragment!==void 0)throw new h(`URL fragments are not supported: ${JSON.stringify("#"+kr.fragment)}`,"URL_INVALID");return $r?{scheme:"file",tls:!1,path:bi,intMode:mt,concurrency:rr,syncUrl:u.syncUrl,syncInterval:u.syncInterval,readYourWrites:u.readYourWrites,offline:u.offline,fetch:u.fetch,authToken:void 0,encryptionKey:void 0,remoteEncryptionKey:void 0,authority:void 0}:{scheme:je,tls:Qe,authority:kr.authority,path:bi,authToken:pt,intMode:mt,concurrency:rr,encryptionKey:u.encryptionKey,remoteEncryptionKey:u.remoteEncryptionKey,syncUrl:u.syncUrl,syncInterval:u.syncInterval,readYourWrites:u.readYourWrites,offline:u.offline,fetch:u.fetch}}(T,!0))}},Le.__chunk_540=(Ue,ie,o)=>{"use strict";o.d(ie,{_:()=>y});var d=o(93219);function y(h){let i=(0,d.tH.getAuthTables)(h),s={};for(let c in i){let O=i[c],j=O.fields,$={};if(Object.entries(j).forEach(([W,K])=>{if($[K.fieldName||W]=K,K.references){let I=i[K.references.model];I&&($[K.fieldName||W].references={...K.references,model:I.modelName,field:K.references.field})}}),s[O.modelName]){s[O.modelName].fields={...s[O.modelName].fields,...$};continue}s[O.modelName]={fields:$,order:O.order||1/0}}return s}},Le);export{Mp as __getNamedExports};
